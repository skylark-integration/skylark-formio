/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,r="function"==typeof n&&n.amd,s=!r&&"undefined"!=typeof exports;if(!r&&!n){var o={};n=t.define=function(e,t,n){"function"==typeof n?(o[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var s=0;s<r.length;s++)"."!=r[s]&&(".."==r[s]?n.pop():n.push(r[s]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):o[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!o.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=o[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-formio/vendors/getify/npo",[],function(){return Promise}),e("skylark-formio/vendors/fetch-ponyfill/fetch",[],function(){var e=window;return function(t){var n=t&&t.Promise||e.Promise,r=t&&t.XMLHttpRequest||e.XMLHttpRequest,s=e;return function(){var e=Object.create(s,{fetch:{value:void 0,writable:!0}});return function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};p.prototype.append=function(e,t){e=c(e),t=u(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=u(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),d(e)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},p.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),d(e)},t.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];k.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=b,e.Response=k,e.fetch=function(e,s){return new n(function(n,o){var i=new b(e,s),a=new r;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var s=n.join(":").trim();t.append(r,s)}}),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var s="response"in a?a.response:a.responseText;n(new k(s,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&t.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function p(e){this.map={},e instanceof p?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return n.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new n(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&o(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return n.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return n.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return n.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||n.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e,t,r,s=h(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=m(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return n.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return n.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(e,t){var n,r,s=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),a.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(s))}}),t}function k(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}(void 0!==e?e:this),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response}}()}}),e("skylark-formio/vendors/eventemitter2/EventEmitter2",[],function(){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n="object"==typeof process&&"function"==typeof process.nextTick,r="function"==typeof Symbol,s="object"==typeof Reflect,o="function"==typeof setImmediate,i=o?setImmediate:setTimeout,a=r?s&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function l(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),void 0!==e.maxListeners&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function u(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var d=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var s=new Array(r);r--;)s[r]=arguments[r];return s}};function p(e,t){for(var n,r={},s=e.length,o=t?value.length:0,i=0;i<s;i++)n=e[i],r[n]=i<o?t[i]:void 0;return r}function h(e,t,n){var r,s;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,s=n.off),t.addEventListener?(r=t.addEventListener,s=t.removeEventListener):t.addListener?(r=t.addListener,s=t.removeListener):t.on&&(r=t.on,s=t.off),!r&&!s)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof s)throw TypeError("off method must be a function");this._on=r,this._off=s;var o=e._observers;o?o.push(this):e._observers=[this]}function m(t,n,r,s){var o=Object.assign({},n);if(!t)return o;if("object"!=typeof t)throw TypeError("options must be an object");var i,a,l,c=Object.keys(t),u=c.length;function d(e){throw Error('Invalid "'+i+'" option value'+(e?". Reason: "+e:""))}for(var p=0;p<u;p++){if(i=c[p],!s&&!e.call(n,i))throw Error('Unknown "'+i+'" option');void 0!==(a=t[i])&&(l=r[i],o[i]=l?l(a,d):a)}return o}function f(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function g(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],s=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===r||o===s)return e;n(t)}:function(r,s){for(var o=typeof r,i=n;i-- >0;)if(o===e[i])return r;s(t)}}Object.assign(h.prototype,{subscribe:function(e,t,n){var r=this,s=this._target,o=this._emitter,i=this._listeners,a=function(){var r=d.apply(null,arguments),i={data:r,name:t,original:e};if(n){var a=n.call(s,i);!1!==a&&o.emit.apply(o,[i.name].concat(r))}else o.emit.apply(o,[t].concat(r))};if(i[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===i[e]&&(i[e]=a,r._on.call(s,e,a))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&i[e]&&(i[e]=null,r._off.call(s,e,a))},i[e]=null,o.on("removeListener",this._onRemoveListener)):(i[e]=a,r._on.call(s,e,a))},unsubscribe:function(e){var t,n,r,s=this,o=this._listeners,i=this._emitter,l=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function u(){s._onNewListener&&(i.off("newListener",s._onNewListener),i.off("removeListener",s._onRemoveListener),s._onNewListener=null,s._onRemoveListener=null);var e=k.call(i,s);i._observers.splice(e,1)}if(e){if(!(t=o[e]))return;l.call(c,e,t),delete o[e],--this._listenersCount||u()}else{for(n=a(o),r=n.length;r-- >0;)e=n[r],l.call(c,e,o[e]);this._listeners={},this._listenersCount=0,u()}}});var y=g(["function"]),b=g(["object","function"]);function v(e,t,n){var r,s,o,i=0,a=new e(function(l,c,u){function d(){s&&(s=null),i&&(clearTimeout(i),i=0)}n=m(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}});var p=function(e){d(),l(e)},h=function(e){d(),c(e)};(r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u)?t(p,h,u):(s=[function(e){h(e||Error("canceled"))}],t(p,h,function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");s.push(e)}),o=!0),n.timeout>0&&(i=setTimeout(function(){var e=Error("timeout");i=0,a.cancel(e),c(e)},n.timeout))});return r||(a.cancel=function(e){if(s){for(var t=s.length,n=1;n<t;n++)s[n](e);s[0](e),s=null}}),a}function k(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function x(e,t,n,r,s){if(!n)return null;if(0===r){var o=typeof t;if("string"===o){var i,l,c=0,u=0,d=this.delimiter,p=d.length;if(-1!==(l=t.indexOf(d))){i=new Array(5);do{i[c++]=t.slice(u,l),u=l+p}while(-1!==(l=t.indexOf(d,u)));i[c++]=t.slice(u),t=i,s=c}else t=[t],s=1}else"object"===o?s=t.length:(t=[t],s=1)}var h,m,f,g,y,b,v,k=null,w=t[r],C=t[r+1];if(r===s&&n._listeners)return"function"==typeof n._listeners?(e&&e.push(n._listeners),[n]):(e&&e.push.apply(e,n._listeners),[n]);if("*"===w){for(b=a(n),l=b.length;l-- >0;)"_listeners"!==(h=b[l])&&(v=x(e,t,n[h],r+1,s))&&(k?k.push.apply(k,v):k=v);return k}if("**"===w){for((y=r+1===s||r+2===s&&"*"===C)&&n._listeners&&(k=x(e,t,n,s,s)),b=a(n),l=b.length;l-- >0;)"_listeners"!==(h=b[l])&&("*"===h||"**"===h?(n[h]._listeners&&!y&&(v=x(e,t,n[h],s,s))&&(k?k.push.apply(k,v):k=v),v=x(e,t,n[h],r,s)):v=x(e,t,n[h],h===C?r+2:r,s),v&&(k?k.push.apply(k,v):k=v));return k}if(n[w]&&(k=x(e,t,n[w],r+1,s)),(m=n["*"])&&x(e,t,m,r+1,s),f=n["**"])if(r<s)for(f._listeners&&x(e,t,f,s,s),b=a(f),l=b.length;l-- >0;)"_listeners"!==(h=b[l])&&(h===C?x(e,t,f[h],r+2,s):h===w?x(e,t,f[h],r+1,s):((g={})[h]=f[h],x(e,t,{"**":g},r+1,s)));else f._listeners?x(e,t,f,s,s):f["*"]&&f["*"]._listeners&&x(e,t,f["*"],s,s);return k}function w(e){for(var t,n,r,s=a(e),o=s.length;o-- >0;)n=s[o],(t=e[n])&&(r=!0,"_listeners"===n||w(t)||delete e[n]);return r}function C(e,t,n){this.emitter=e,this.event=t,this.listener=n}function A(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}C.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},A.EventEmitter2=A,A.prototype.listenTo=function(e,n,r){if("object"!=typeof e)throw TypeError("target musts be an object");var s=this;function o(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,o=r.reducers,i=k.call(s,e);n=-1===i?new h(s,e,r):s._observers[i];for(var l,c=a(t),u=c.length,d="function"==typeof o,p=0;p<u;p++)l=c[p],n.subscribe(l,t[l]||l,d?o:o&&o[l])}return r=m(r,{on:void 0,off:void 0,reducers:void 0},{on:y,off:y,reducers:b}),t(n)?o(p(n)):o("string"==typeof n?p(n.split(/\s+/)):n),this},A.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,s=n.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;s-- >0;)r=n[s],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},A.prototype.delimiter=".",A.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},A.prototype.getMaxListeners=function(){return this._maxListeners},A.prototype.event="",A.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},A.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},A.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},A.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},A.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},A.prototype._many=function(e,t,n,r,s){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,r,s)},A.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,n,s,o,i,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,r)for(s=0;s<n;s++)if("symbol"==typeof a[s]){i=!0;break}i||(a=a.join(this.delimiter))}var u,d=arguments.length;if(this._all&&this._all.length)for(u=this._all.slice(),s=0,n=u.length;s<n;s++)switch(this.event=a,d){case 1:u[s].call(this,a);break;case 2:u[s].call(this,a,arguments[1]);break;case 3:u[s].call(this,a,arguments[1],arguments[2]);break;default:u[s].apply(this,arguments)}if(c)u=[],x.call(this,u,e,this.listenerTree,0,n);else{if("function"==typeof(u=this._events[a])){switch(this.event=a,d){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(d-1),o=1;o<d;o++)t[o-1]=arguments[o];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(d>3)for(t=new Array(d-1),o=1;o<d;o++)t[o-1]=arguments[o];for(s=0,n=u.length;s<n;s++)switch(this.event=a,d){case 1:u[s].call(this);break;case 2:u[s].call(this,arguments[1]);break;case 3:u[s].call(this,arguments[1],arguments[2]);break;default:u[s].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},A.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,n,s,o,i,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(s=a.length,r)for(o=0;o<s;o++)if("symbol"==typeof a[o]){t=!0;break}t||(a=a.join(this.delimiter))}var u,d=[],p=arguments.length;if(this._all)for(o=0,s=this._all.length;o<s;o++)switch(this.event=a,p){case 1:d.push(this._all[o].call(this,a));break;case 2:d.push(this._all[o].call(this,a,arguments[1]));break;case 3:d.push(this._all[o].call(this,a,arguments[1],arguments[2]));break;default:d.push(this._all[o].apply(this,arguments))}if(c?(u=[],x.call(this,u,e,this.listenerTree,0)):u=this._events[a],"function"==typeof u)switch(this.event=a,p){case 1:d.push(u.call(this));break;case 2:d.push(u.call(this,arguments[1]));break;case 3:d.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(p-1),i=1;i<p;i++)n[i-1]=arguments[i];d.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),p>3)for(n=new Array(p-1),i=1;i<p;i++)n[i-1]=arguments[i];for(o=0,s=u.length;o<s;o++)switch(this.event=a,p){case 1:d.push(u[o].call(this));break;case 2:d.push(u[o].call(this,arguments[1]));break;case 3:d.push(u[o].call(this,arguments[1],arguments[2]));break;default:d.push(u[o].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},A.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},A.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},A.prototype.onAny=function(e){return this._onAny(e,!1)},A.prototype.prependAny=function(e){return this._onAny(e,!0)},A.prototype.addListener=A.prototype.on,A.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},A.prototype._on=function(e,t,r,s){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||l.call(this);var o,a=this;return void 0!==s&&(o=function(e,t,r){if(!0===r)o=!0;else if(!1===r)s=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var s=r.async,o=r.promisify,a=r.nextTick,l=r.objectify}if(s||a||o){var c=t,u=t._origin||t;if(a&&!n)throw Error("process.nextTick is not supported");void 0===o&&(o="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,n=this.event;return o?a?Promise.resolve():new Promise(function(e){i(e)}).then(function(){return t.event=n,c.apply(t,e)}):(a?process.nextTick:i)(function(){t.event=n,c.apply(t,e)})})._async=!0,t._origin=u}return[t,l?new C(this,e,t):this]}.call(this,e,t,s),t=o[0],a=o[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(function(e,t){var n,r,s=0,o=0,i=this.delimiter,a=i.length;if("string"==typeof e)if(-1!==(n=e.indexOf(i))){r=new Array(5);do{r[s++]=e.slice(o,n),o=n+a}while(-1!==(n=e.indexOf(i,o)));r[s++]=e.slice(o)}else r=[e],s=1;else r=e,s=e.length;if(s>1)for(n=0;n+1<s;n++)if("**"===r[n]&&"**"===r[n+1])return;var l,c=this.listenerTree;for(n=0;n<s;n++)if(l=r[n],c=c[l]||(c[l]={}),n===s-1)return c._listeners?("function"==typeof c._listeners&&(c._listeners=[c._listeners]),c._listeners.push(t),!c._listeners.warned&&this._maxListeners>0&&c._listeners.length>this._maxListeners&&(c._listeners.warned=!0,u.call(this,c._listeners.length,l))):c._listeners=t,!0;return!0}.call(this,e,t),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,u.call(this,this._events[e].length,e))):this._events[e]=t,a)},A.prototype.off=function(e,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");var r,s=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(s=x.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;r=this._events[e],s.push({_listeners:r})}for(var i=0;i<s.length;i++){var a=s[i];if(r=a._listeners,t(r)){for(var l=-1,c=0,u=r.length;c<u;c++)if(r[c]===n||r[c].listener&&r[c].listener===n||r[c]._origin&&r[c]._origin===n){l=c;break}if(l<0)continue;return this.wildcard?a._listeners.splice(l,1):this._events[e].splice(l,1),0===r.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,n),this}(r===n||r.listener&&r.listener===n||r._origin&&r._origin===n)&&(this.wildcard?delete a._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,n))}return this.listenerTree&&w(this.listenerTree),this},A.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},A.prototype.removeListener=A.prototype.off,A.prototype.removeAllListeners=function(e){if(void 0===e)return!this._events||l.call(this),this;if(this.wildcard){var t,n=x.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&w(this.listenerTree)}else this._events&&(this._events[e]=null);return this},A.prototype.listeners=function(e){var t,n,r,s,o,i=this._events;if(void 0===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!i)return[];for(t=a(i),s=t.length,r=[];s-- >0;)"function"==typeof(n=i[t[s]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(o=this.listenerTree))return[];var l=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,l,c,o,0),l}return i&&(n=i[e])?"function"==typeof n?[n]:n:[]},A.prototype.eventNames=function(e){var t=this._events;return this.wildcard?function e(t,n,r,s){var o=a(t);var i=o.length;var l,c,u;var d=t._listeners;var p;for(;i-- >0;)c=o[i],l=t[c],u="_listeners"===c?r:r?r.concat(c):[c],p=s||"symbol"==typeof c,d&&n.push(p?u:u.join(this.delimiter)),"object"==typeof l&&e.call(this,l,n,u,p);return n}.call(this,this.listenerTree,[],null,e):t?a(t):[]},A.prototype.listenerCount=function(e){return this.listeners(e).length},A.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,t,n,this.listenerTree,0),t.length>0}var r=this._events,s=this._all;return!!(s&&s.length||r&&(void 0===e?a(r).length:r[e]))},A.prototype.listenersAny=function(){return this._all?this._all:[]},A.prototype.waitFor=function(e,t){var n=this,r=typeof t;return"number"===r?t={timeout:t}:"function"===r&&(t={filter:t}),v((t=m(t,{timeout:0,filter:void 0,handleError:!1,Promise:Promise,overload:!1},{filter:y,Promise:f})).Promise,function(r,s,o){function i(){var o=t.filter;if(!o||o.apply(n,arguments))if(n.off(e,i),t.handleError){var a=arguments[0];a?s(a):r(d.apply(null,arguments).slice(1))}else r(d.apply(null,arguments))}o(function(){n.off(e,i)}),n._on(e,i,!1)},{timeout:t.timeout,overload:t.overload})};var E=A.prototype;return Object.defineProperties(A,{defaultMaxListeners:{get:function(){return E._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");E._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return v((n=m(n,{Promise:Promise,timeout:0,overload:!1},{Promise:f})).Promise,function(n,r,s){var o;if("function"==typeof e.addEventListener)return o=function(){n(d.apply(null,arguments))},s(function(){e.removeEventListener(t,o)}),void e.addEventListener(t,o,{once:!0});var i,a=function(){i&&e.removeListener("error",i),n(d.apply(null,arguments))};"error"!==t&&(i=function(n){e.removeListener(t,a),r(n)},e.once("error",i)),s(function(){i&&e.removeListener("error",i),e.removeListener(t,a)}),e.once(t,a)},{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(E,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),A}),e("skylark-formio/vendors/json-logic-js/logic",[],function(){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e={},t={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t,n){return void 0===n?e<t:e<t&&t<n},"<=":function(e,t,n){return void 0===n?e<=t:e<=t&&t<=n},"!!":function(t){return e.truthy(t)},"!":function(t){return!e.truthy(t)},"%":function(e,t){return e%t},log:function(e){return console.log(e),e},in:function(e,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(e)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(e,t,n){if(n<0){var r=String(e).substr(t);return r.substr(0,r.length+n)}return String(e).substr(t,n)},"+":function(){return Array.prototype.reduce.call(arguments,function(e,t){return parseFloat(e,10)+parseFloat(t,10)},0)},"*":function(){return Array.prototype.reduce.call(arguments,function(e,t){return parseFloat(e,10)*parseFloat(t,10)})},"-":function(e,t){return void 0===t?-e:e-t},"/":function(e,t){return e/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,function(e,t){return e.concat(t)},[])},var:function(e,t){var n=void 0===t?null:t,r=this;if(void 0===e||""===e||null===e)return r;for(var s=String(e).split("."),o=0;o<s.length;o++){if(null===r)return n;if(void 0===(r=r[s[o]]))return n}return r},missing:function(){for(var t=[],n=Array.isArray(arguments[0])?arguments[0]:arguments,r=0;r<n.length;r++){var s=n[r],o=e.apply({var:s},this);null!==o&&""!==o||t.push(s)}return t},missing_some:function(t,n){var r=e.apply({missing:n},this);return n.length-r.length>=t?[]:r},method:function(e,t,n){return e[t].apply(e,n)}};return e.is_logic=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length},e.truthy=function(e){return(!Array.isArray(e)||0!==e.length)&&!!e},e.get_operator=function(e){return Object.keys(e)[0]},e.get_values=function(t){return t[e.get_operator(t)]},e.apply=function(n,r){if(Array.isArray(n))return n.map(function(t){return e.apply(t,r)});if(!e.is_logic(n))return n;r=r||{};var s,o,i,a,l,c=e.get_operator(n),u=n[c];if(Array.isArray(u)||(u=[u]),"if"===c||"?:"==c){for(s=0;s<u.length-1;s+=2)if(e.truthy(e.apply(u[s],r)))return e.apply(u[s+1],r);return u.length===s+1?e.apply(u[s],r):null}if("and"===c){for(s=0;s<u.length;s+=1)if(o=e.apply(u[s],r),!e.truthy(o))return o;return o}if("or"===c){for(s=0;s<u.length;s+=1)if(o=e.apply(u[s],r),e.truthy(o))return o;return o}if("filter"===c)return a=e.apply(u[0],r),i=u[1],Array.isArray(a)?a.filter(function(t){return e.truthy(e.apply(i,t))}):[];if("map"===c)return a=e.apply(u[0],r),i=u[1],Array.isArray(a)?a.map(function(t){return e.apply(i,t)}):[];if("reduce"===c)return a=e.apply(u[0],r),i=u[1],l=void 0!==u[2]?u[2]:null,Array.isArray(a)?a.reduce(function(t,n){return e.apply(i,{current:n,accumulator:t})},l):l;if("all"===c){if(a=e.apply(u[0],r),i=u[1],!a.length)return!1;for(s=0;s<a.length;s+=1)if(!e.truthy(e.apply(i,a[s])))return!1;return!0}if("none"===c)return 0===e.apply({filter:u},r).length;if("some"===c)return e.apply({filter:u},r).length>0;if(u=u.map(function(t){return e.apply(t,r)}),"function"==typeof t[c])return t[c].apply(r,u);if(c.indexOf(".")>0){var d=String(c).split("."),p=t;for(s=0;s<d.length;s++)if(void 0===(p=p[d[s]]))throw new Error("Unrecognized operation "+c+" (failed at "+d.slice(0,s+1).join(".")+")");return p.apply(r,u)}throw new Error("Unrecognized operation "+c)},e.uses_data=function(t){var n=[];if(e.is_logic(t)){var r=e.get_operator(t),s=t[r];Array.isArray(s)||(s=[s]),"var"===r?n.push(s[0]):s.map(function(t){n.push.apply(n,e.uses_data(t))})}return function(e){for(var t=[],n=0,r=e.length;n<r;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n)},e.add_operation=function(e,n){t[e]=n},e.rm_operation=function(e){delete t[e]},e.rule_like=function(t,n){if(n===t)return!0;if("@"===n)return!0;if("number"===n)return"number"==typeof t;if("string"===n)return"string"==typeof t;if("array"===n)return Array.isArray(t)&&!e.is_logic(t);if(e.is_logic(n)){if(e.is_logic(t)){var r=e.get_operator(n),s=e.get_operator(t);if("@"===r||r===s)return e.rule_like(e.get_values(t,!1),e.get_values(n,!1))}return!1}if(Array.isArray(n)){if(Array.isArray(t)){if(n.length!==t.length)return!1;for(var o=0;o<n.length;o+=1)if(!e.rule_like(t[o],n[o]))return!1;return!0}return!1}return!1},e}),e("skylark-formio/vendors/moment/timezone",["skylark-moment"],function(e){"use strict";void 0===e.version&&e.default&&(e=e.default);var t,n={},r={},s={},o={},i={};e&&"string"==typeof e.version||S("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var a=e.version.split("."),l=+a[0],c=+a[1];function u(e){return e>96?e-87:e>64?e-29:e-48}function d(e){var t,n=0,r=e.split("."),s=r[0],o=r[1]||"",i=1,a=0,l=1;for(45===e.charCodeAt(0)&&(n=1,l=-1);n<s.length;n++)t=u(s.charCodeAt(n)),a=60*a+t;for(n=0;n<o.length;n++)i/=60,t=u(o.charCodeAt(n)),a+=t*i;return a*l}function p(e){for(var t=0;t<e.length;t++)e[t]=d(e[t])}function h(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function m(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),s=t[4].split(" ");return p(n),p(r),p(s),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(s,r.length),{name:t[0],abbrs:h(t[1].split(" "),r),offsets:h(n,r),untils:s,population:0|t[5]}}function f(e){e&&this._set(m(e))}function g(e,t){this.name=e,this.zones=t}function y(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function b(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function v(e,t){for(var n,r;r=6e4*((t.at-e.at)/12e4|0);)(n=new y(new Date(e.at+r))).offset===e.offset?e=n:t=n;return e}function k(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function x(e,t){var n,r;for(p(t),n=0;n<t.length;n++)r=t[n],i[r]=i[r]||{},i[r][e]=!0}function w(e){var t,n,r,s=e.length,a={},l=[];for(t=0;t<s;t++)for(n in r=i[e[t].offset]||{})r.hasOwnProperty(n)&&(a[n]=!0);for(t in a)a.hasOwnProperty(t)&&l.push(o[t]);return l}function C(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=o[A(e)];if(t)return t;S("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,r,s,i=function(){var e,t,n,r=(new Date).getFullYear()-2,s=new y(new Date(r,0,1)),o=[s];for(n=1;n<48;n++)(t=new y(new Date(r,n,1))).offset!==s.offset&&(e=v(s,t),o.push(e),o.push(new y(new Date(e.at+6e4)))),s=t;for(n=0;n<4;n++)o.push(new y(new Date(r+n,0,1))),o.push(new y(new Date(r+n,6,1)));return o}(),a=i.length,l=w(i),c=[];for(r=0;r<l.length;r++){for(n=new b(_(l[r]),a),s=0;s<a;s++)n.scoreOffsetAt(i[s]);c.push(n)}return c.sort(k),c.length>0?c[0].zone.name:void 0}function A(e){return(e||"").toLowerCase().replace(/\//g,"_")}function E(e){var t,r,s,i;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)s=e[t].split("|"),r=s[0],i=A(r),n[i]=e[t],o[i]=r,x(i,s[2].split(" "))}function _(e,t){e=A(e);var s,i=n[e];return i instanceof f?i:"string"==typeof i?(i=new f(i),n[e]=i,i):r[e]&&t!==_&&(s=_(r[e],_))?((i=n[e]=new f)._set(s),i.name=o[e],i):null}function T(e){var t,n,s,i;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=e[t].split("|"),s=A(n[0]),i=A(n[1]),r[s]=i,o[s]=n[0],r[i]=s,o[i]=n[1]}function O(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function S(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function P(t){var n=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],s=_(r),o=e.utc.apply(null,n);return s&&!e.isMoment(t)&&O(o)&&o.add(s.parse(o),"minutes"),o.tz(r),o}(l<2||2===l&&c<6)&&S("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),f.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,r=this.untils;for(t=0;t<r.length;t++)if(n<r[t])return t},countries:function(){var e=this.name;return Object.keys(s).filter(function(t){return-1!==s[t].zones.indexOf(e)})},parse:function(e){var t,n,r,s,o=+e,i=this.offsets,a=this.untils,l=a.length-1;for(s=0;s<l;s++)if(t=i[s],n=i[s+1],r=i[s?s-1:s],t<n&&P.moveAmbiguousForward?t=n:t>r&&P.moveInvalidForward&&(t=r),o<a[s]-6e4*t)return i[s];return i[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return S("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},b.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},P.version="0.5.31",P.dataVersion="",P._zones=n,P._links=r,P._names=o,P._countries=s,P.add=E,P.link=T,P.load=function(e){E(e.zones),T(e.links),function(e){var t,n,r,o;if(!e||!e.length)return;for(t=0;t<e.length;t++)o=e[t].split("|"),n=o[0].toUpperCase(),r=o[1].split(" "),s[n]=new g(n,r)}(e.countries),P.dataVersion=e.version},P.zone=_,P.zoneExists=function e(t){e.didShowError||(e.didShowError=!0,S("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')"));return!!_(t)},P.guess=function(e){t&&!e||(t=C());return t},P.names=function(){var e,t=[];for(e in o)o.hasOwnProperty(e)&&(n[e]||n[r[e]])&&o[e]&&t.push(o[e]);return t.sort()},P.Zone=f,P.unpack=m,P.unpackBase60=d,P.needsOffset=O,P.moveInvalidForward=!0,P.moveAmbiguousForward=!1,P.countries=function(){return Object.keys(s)},P.zonesForCountry=function(e,t){if(n=e,n=n.toUpperCase(),!(e=s[n]||null))return null;var n;var r=e.zones.sort();if(t)return r.map(function(e){var t=_(e);return{name:e,offset:t.utcOffset(new Date)}});return r};var j,L=e.fn;function D(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function R(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=P,e.defaultZone=null,e.updateOffset=function(t,n){var r,s=e.defaultZone;if(void 0===t._z&&(s&&O(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(s.parse(t),"minutes")),t._z=s),t._z)if(r=t._z.utcOffset(t),Math.abs(r)<16&&(r/=60),void 0!==t.utcOffset){var o=t._z;t.utcOffset(-r,n),t._z=o}else t.zone(r,n)},L.tz=function(t,n){if(t){if("string"!=typeof t)throw new Error("Time zone name must be a string, got "+t+" ["+typeof t+"]");return this._z=_(t),this._z?e.updateOffset(this,n):S("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},L.zoneName=D(L.zoneName),L.zoneAbbr=D(L.zoneAbbr),L.utc=R(L.utc),L.local=R(L.local),L.utcOffset=(j=L.utcOffset,function(){return arguments.length>0&&(this._z=null),j.apply(this,arguments)}),e.tz.setDefault=function(t){return(l<2||2===l&&c<9)&&S("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?_(t):null,e};var I=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(I)?(I.push("_z"),I.push("_a")):I&&(I._z=null),e}),e("skylark-formio/vendors/jstimezonedetect/jstz",[],function(){var e=function(){"use strict";var t={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk","Africa/Windhoek"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},n=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},r=function(){for(var e=[],r=0;r<=11;r++)for(var s=1;s<=28;s++){var o=n(new Date(t.BASELINE_YEAR,r,s));e?e&&e[e.length-1]!==o&&e.push(o):e.push()}return e},s=function(e){for(var t=new Date(e,0,1,0,0,1,0).getTime(),n=new Date(e,12,31,23,59,59).getTime(),r=t,s=new Date(r).getTimezoneOffset(),i=null,a=null;r<n-864e5;){var l=new Date(r),c=l.getTimezoneOffset();c!==s&&(c<s&&(i=l),c>s&&(a=l),s=c),r+=864e5}return!(!i||!a)&&{s:o(i).getTime(),e:o(a).getTime()}},o=function e(n,r,s){void 0===r&&(r=t.DAY,s=t.HOUR);for(var o=new Date(n.getTime()-r).getTime(),i=n.getTime()+r,a=new Date(o).getTimezoneOffset(),l=o,c=null;l<i-s;){var u=new Date(l),d=u.getTimezoneOffset();if(d!==a){c=u;break}l+=s}return r===t.DAY?e(c,t.HOUR,t.MINUTE):r===t.HOUR?e(c,t.MINUTE,t.SECOND):c},i=function(n){var r=function(){for(var t=[],n=0;n<e.olson.dst_rules.years.length;n++){var r=s(e.olson.dst_rules.years[n]);t.push(r)}return t}(),o=function(e){for(var t=0;t<e.length;t++)if(!1!==e[t])return!0;return!1}(r);return o?function(n,r){for(var s=function(e){for(var s=0,o=0;o<n.length;o++)if(e.rules[o]&&n[o]){if(!(n[o].s>=e.rules[o].s&&n[o].e<=e.rules[o].e)){s="N/A";break}if(s=0,s+=Math.abs(n[o].s-e.rules[o].s),(s+=Math.abs(e.rules[o].e-n[o].e))>t.MAX_SCORE){s="N/A";break}}return s=function(e,t,n,r){if("N/A"!==n)return n;if("Asia/Beirut"===t){if("Africa/Cairo"===r.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===r.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===r.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===r.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===r.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===r.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return n}(n,r,s,e)},o={},i=e.olson.dst_rules.zones,a=i.length,l=t.AMBIGUITIES[r],c=0;c<a;c++){var u=i[c],d=s(i[c]);"N/A"!==d&&(o[u.name]=d)}for(var p in o)if(o.hasOwnProperty(p))for(var h=0;h<l.length;h++)if(l[h]===p)return p;return r}(r,n):n};return{determine:function(n){var s=!1,o=function(){var e=0,t=r();t.length>1&&(e=t[0]-t[1]);if(t.length>3)return t[0]+",1,weird";if(e<0)return t[0]+",1";if(e>0)return t[1]+",1,s";return t[0]+",0"}();(n||void 0===n)&&(s=function(){var e,t;if(!Intl||"undefined"==typeof Intl||void 0===Intl.DateTimeFormat)return;if(void 0===(e=Intl.DateTimeFormat())||void 0===e.resolvedOptions)return;if((t=e.resolvedOptions().timeZone)&&(t.indexOf("/")>-1||"UTC"===t))return t}());s||(s=e.olson.timezones[o],void 0!==t.AMBIGUITIES[s]&&(s=i(s)));return{name:function(){return s},using_intl:n||void 0===n,needle:o,offsets:r()}}}}();return e.olson=e.olson||{},e.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","0,1,weird":"Africa/Casablanca","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,weird":"Africa/Casablanca","120,1":"Asia/Beirut","120,1,weird":"Africa/Cairo","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Calcutta","345,0":"Asia/Katmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},e.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12891204e5,s:12685608e5},{e:132057e7,s:13000104e5},{e:13520196e5,s:133146e7},{e:13834692e5,s:13629096e5},{e:14149188e5,s:13943592e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Africa/Windhoek",rules:[{e:12207492e5,s:120744e7},{e:12521988e5,s:12388896e5},{e:12836484e5,s:12703392e5},{e:1315098e6,s:13017888e5},{e:13465476e5,s:13332384e5},{e:13779972e5,s:13652928e5},{e:14100516e5,s:13967424e5}]}]},e}),e("skylark-formio/utils/jsonlogic/operators",[],function(){"use strict";return{lodashOperators:["chunk","compact","concat","difference","differenceBy","differenceWith","drop","dropRight","dropRightWhile","dropWhile","findIndex","findLastIndex","first","flatten","flattenDeep","flattenDepth","fromPairs","head","indexOf","initial","intersection","intersectionBy","intersectionWith","join","last","lastIndexOf","nth","slice","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sortedUniq","sortedUniqBy","tail","take","takeRight","takeRightWhile","takeWhile","union","unionBy","unionWith","uniq","uniqBy","uniqWith","unzip","unzipWith","without","xor","xorBy","xorWith","zip","zipObject","zipObjectDeep","zipWith","countBy","every","filter","find","findLast","flatMap","flatMapDeep","flatMapDepth","groupBy","includes","invokeMap","keyBy","map","orderBy","partition","reduce","reduceRight","reject","sample","sampleSize","shuffle","size","some","sortBy","now","flip","negate","overArgs","partial","partialRight","rearg","rest","spread","castArray","clone","cloneDeep","cloneDeepWith","cloneDeep","conformsTo","eq","gt","gte","isArguments","isArray","isArrayBuffer","isArrayLike","isArrayLikeObject","isBoolean","isBuffer","isDate","isElement","isEmpty","isEqual","isEqualWith","isError","isFinite","isFunction","isInteger","isLength","isMap","isMatch","isMatchWith","isNaN","isNative","isNil","isNull","isNumber","isObject","isObjectLike","isPlainObject","isRegExp","isSafeInteger","isSet","isString","isSymbol","isTypedArray","isUndefined","isWeakMap","isWeakSet","lt","lte","toArray","toFinite","toInteger","toLength","toNumber","toPlainObject","toSafeInteger","toString","add","ceil","divide","floor","max","maxBy","mean","meanBy","min","minBy","multiply","round","subtract","sum","sumBy","clamp","inRange","random","at","entries","entriesIn","findKey","findLastKey","functions","functionsIn","get","has","hasIn","invert","invertBy","invoke","keys","keysIn","mapKeys","mapValues","omit","omitBy","pick","pickBy","result","toPairs","toPairsIn","transform","values","valuesIn","camelCase","capitalize","deburr","endsWith","escape","escapeRegExp","kebabCase","lowerCase","lowerFirst","pad","padEnd","padStart","parseInt","repeat","replace","snakeCase","split","startCase","startsWith","toLower","toUpper","trim","trimEnd","trimStart","truncate","unescape","upperCase","upperFirst","words","cond","conforms","constant","defaultTo","flow","flowRight","identity","iteratee","matches","matchesProperty","method","methodOf","nthArg","over","overEvery","overSome","property","propertyOf","range","rangeRight","stubArray","stubFalse","stubObject","stubString","stubTrue","times","toPath","uniqueId"]}}),e("skylark-formio/vendors/dompurify/purify",[],function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.keys,s=Object.freeze,o=Object.seal,i=Object.create,a="undefined"!=typeof Reflect&&Reflect,l=a.apply,c=a.construct;l||(l=function(e,t,n){return e.apply(t,n)}),s||(s=function(e){return e}),o||(o=function(e){return e}),c||(c=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var u=A(Array.prototype.forEach),d=A(Array.prototype.indexOf),p=A(Array.prototype.join),h=A(Array.prototype.pop),m=A(Array.prototype.push),f=A(Array.prototype.slice),g=A(String.prototype.toLowerCase),y=A(String.prototype.match),b=A(String.prototype.replace),v=A(String.prototype.indexOf),k=A(String.prototype.trim),x=A(RegExp.prototype.test),w=E(RegExp),C=E(TypeError);function A(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return l(e,t,r)}}function E(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(e,n)}}function _(e,r){t&&t(e,null);for(var s=r.length;s--;){var o=r[s];if("string"==typeof o){var i=g(o);i!==o&&(n(r)||(r[s]=i),o=i)}e[o]=!0}return e}function T(t){var n=i(null),r=void 0;for(r in t)l(e,t,[r])&&(n[r]=t[r]);return n}var O=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),P=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),L=s(["#text"]),D=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),R=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),I=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),N=o(/\{\{[\s\S]*|[\s\S]*\}\}/gm),V=o(/<%[\s\S]*|[\s\S]*%>/gm),z=o(/^data-[\-\w.\u00B7-\uFFFF]/),U=o(/^aria-[\-\w]+$/),F=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=o(/^(?:\w+script|data):/i),q=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var K=function(){return"undefined"==typeof window?null:window},W=function(e,t){if("object"!==(void 0===e?"undefined":B(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var G=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();var n=function(t){return e(t)};n.version="2.0.16";n.removed=[];if(!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var o=t.document;var i=!1;var a=t.document;var l=t.DocumentFragment,c=t.HTMLTemplateElement,A=t.Node,E=t.NodeFilter,G=t.NamedNodeMap,J=void 0===G?t.NamedNodeMap||t.MozNamedAttrMap:G,Y=t.Text,Z=t.Comment,X=t.DOMParser,Q=t.trustedTypes;if("function"==typeof c){var ee=a.createElement("template");ee.content&&ee.content.ownerDocument&&(a=ee.content.ownerDocument)}var te=W(Q,o);var ne=te&&Ie?te.createHTML(""):"";var re=a,se=re.implementation,oe=re.createNodeIterator,ie=re.getElementsByTagName,ae=re.createDocumentFragment;var le=o.importNode;var ce={};try{ce=T(a).documentMode?a.documentMode:{}}catch(e){}var ue={};n.isSupported=se&&void 0!==se.createHTMLDocument&&9!==ce;var de=N,pe=V,he=z,me=U,fe=$,ge=q;var ye=F;var be=null;var ve=_({},[].concat(H(O),H(S),H(P),H(j),H(L)));var ke=null;var xe=_({},[].concat(H(D),H(R),H(I),H(M)));var we=null;var Ce=null;var Ae=!0;var Ee=!0;var _e=!1;var Te=!1;var Oe=!1;var Se=!1;var Pe=!1;var je=!1;var Le=!1;var De=!1;var Re=!1;var Ie=!1;var Me=!0;var Ne=!0;var Ve=!1;var ze={};var Ue=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]);var Fe=null;var $e=_({},["audio","video","img","source","image","track"]);var qe=null;var Be=_({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]);var He=null;var Ke=a.createElement("form");var We=function(e){He&&He===e||(e&&"object"===(void 0===e?"undefined":B(e))||(e={}),e=T(e),be="ALLOWED_TAGS"in e?_({},e.ALLOWED_TAGS):ve,ke="ALLOWED_ATTR"in e?_({},e.ALLOWED_ATTR):xe,qe="ADD_URI_SAFE_ATTR"in e?_(T(Be),e.ADD_URI_SAFE_ATTR):Be,Fe="ADD_DATA_URI_TAGS"in e?_(T($e),e.ADD_DATA_URI_TAGS):$e,we="FORBID_TAGS"in e?_({},e.FORBID_TAGS):{},Ce="FORBID_ATTR"in e?_({},e.FORBID_ATTR):{},ze="USE_PROFILES"in e&&e.USE_PROFILES,Ae=!1!==e.ALLOW_ARIA_ATTR,Ee=!1!==e.ALLOW_DATA_ATTR,_e=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=e.SAFE_FOR_JQUERY||!1,Oe=e.SAFE_FOR_TEMPLATES||!1,Se=e.WHOLE_DOCUMENT||!1,Le=e.RETURN_DOM||!1,De=e.RETURN_DOM_FRAGMENT||!1,Re=e.RETURN_DOM_IMPORT||!1,Ie=e.RETURN_TRUSTED_TYPE||!1,je=e.FORCE_BODY||!1,Me=!1!==e.SANITIZE_DOM,Ne=!1!==e.KEEP_CONTENT,Ve=e.IN_PLACE||!1,ye=e.ALLOWED_URI_REGEXP||ye,Oe&&(Ee=!1),De&&(Le=!0),ze&&(be=_({},[].concat(H(L))),ke=[],!0===ze.html&&(_(be,O),_(ke,D)),!0===ze.svg&&(_(be,S),_(ke,R),_(ke,M)),!0===ze.svgFilters&&(_(be,P),_(ke,R),_(ke,M)),!0===ze.mathMl&&(_(be,j),_(ke,I),_(ke,M))),e.ADD_TAGS&&(be===ve&&(be=T(be)),_(be,e.ADD_TAGS)),e.ADD_ATTR&&(ke===xe&&(ke=T(ke)),_(ke,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&_(qe,e.ADD_URI_SAFE_ATTR),Ne&&(be["#text"]=!0),Se&&_(be,["html","head","body"]),be.table&&(_(be,["tbody"]),delete we.tbody),s&&s(e),He=e)};var Ge=function(e){m(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=ne}};var Je=function(e,t){try{m(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(n.removed,{attribute:null,from:t})}t.removeAttribute(e)};var Ye=function(e){var t=void 0,n=void 0;if(je)e="<remove></remove>"+e;else{var r=y(e,/^[\r\n\t ]+/);n=r&&r[0]}var s=te?te.createHTML(e):e;try{t=(new X).parseFromString(s,"text/html")}catch(e){}if(i&&_(we,["title"]),!t||!t.documentElement){var o=t=se.createHTMLDocument(""),l=o.body;l.parentNode.removeChild(l.parentNode.firstElementChild),l.outerHTML=s}return e&&n&&t.body.insertBefore(a.createTextNode(n),t.body.childNodes[0]||null),ie.call(t,Se?"html":"body")[0]};n.isSupported&&function(){try{var e=Ye("<x/><title>&lt;/title&gt;&lt;img&gt;");x(/<\/title/,e.querySelector("title").innerHTML)&&(i=!0)}catch(e){}}();var Ze=function(e){return oe.call(e.ownerDocument||e,e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,function(){return E.FILTER_ACCEPT},!1)};var Xe=function(e){return"object"===(void 0===A?"undefined":B(A))?e instanceof A:e&&"object"===(void 0===e?"undefined":B(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName};var Qe=function(e,t,r){ue[e]&&u(ue[e],function(e){e.call(n,t,r,He)})};var et=function(e){var t=void 0;if(Qe("beforeSanitizeElements",e,null),function(e){if(e instanceof Y||e instanceof Z)return!1;if("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof J)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI)return!0;return!1}(e))return Ge(e),!0;if(y(e.nodeName,/[\u0080-\uFFFF]/))return Ge(e),!0;var r=g(e.nodeName);if(Qe("uponSanitizeElement",e,{tagName:r,allowedTags:be}),("svg"===r||"math"===r)&&0!==e.querySelectorAll("p, br, form").length)return Ge(e),!0;if(!be[r]||we[r]){if(Ne&&!Ue[r]&&"function"==typeof e.insertAdjacentHTML)try{var s=e.innerHTML;e.insertAdjacentHTML("AfterEnd",te?te.createHTML(s):s)}catch(e){}return Ge(e),!0}return"noscript"===r&&x(/<\/noscript/i,e.innerHTML)?(Ge(e),!0):"noembed"===r&&x(/<\/noembed/i,e.innerHTML)?(Ge(e),!0):(!Te||Xe(e.firstElementChild)||Xe(e.content)&&Xe(e.content.firstElementChild)||!x(/</g,e.textContent)||(m(n.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=b(e.innerHTML,/</g,"&lt;"):e.innerHTML=b(e.textContent,/</g,"&lt;")),Oe&&3===e.nodeType&&(t=e.textContent,t=b(t,de," "),t=b(t,pe," "),e.textContent!==t&&(m(n.removed,{element:e.cloneNode()}),e.textContent=t)),Qe("afterSanitizeElements",e,null),!1)};var tt=function(e,t,n){if(Me&&("id"===t||"name"===t)&&(n in a||n in Ke))return!1;if(Ee&&x(he,t));else if(Ae&&x(me,t));else{if(!ke[t]||Ce[t])return!1;if(qe[t]);else if(x(ye,b(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(n,"data:")||!Fe[e]){if(_e&&!x(fe,b(n,ge,"")));else if(n)return!1}else;}return!0};var nt=function(e){var t=void 0,s=void 0,o=void 0,i=void 0,a=void 0;Qe("beforeSanitizeAttributes",e,null);var l=e.attributes;if(l){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(a=l.length;a--;){var u=t=l[a],m=u.name,y=u.namespaceURI;if(s=k(t.value),o=g(m),c.attrName=o,c.attrValue=s,c.keepAttr=!0,c.forceKeepAttr=void 0,Qe("uponSanitizeAttribute",e,c),s=c.attrValue,!c.forceKeepAttr){if("name"===o&&"IMG"===e.nodeName&&l.id)i=l.id,l=f(l,[]),Je("id",e),Je(m,e),d(l,i)>a&&e.setAttribute("id",i.value);else{if("INPUT"===e.nodeName&&"type"===o&&"file"===s&&c.keepAttr&&(ke[o]||!Ce[o]))continue;"id"===m&&e.setAttribute(m,""),Je(m,e)}if(c.keepAttr)if(Te&&x(/\/>/i,s))Je(m,e);else if(x(/svg|math/i,e.namespaceURI)&&x(w("</("+p(r(Ue),"|")+")","i"),s))Je(m,e);else{Oe&&(s=b(s,de," "),s=b(s,pe," "));var v=e.nodeName.toLowerCase();if(tt(v,o,s))try{y?e.setAttributeNS(y,m,s):e.setAttribute(m,s),h(n.removed)}catch(e){}}}}Qe("afterSanitizeAttributes",e,null)}};var rt=function e(t){var n=void 0,r=Ze(t);for(Qe("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Qe("uponSanitizeShadowNode",n,null),et(n)||(n.content instanceof l&&e(n.content),nt(n));Qe("afterSanitizeShadowDOM",t,null)};n.sanitize=function(e,r){var s=void 0,i=void 0,a=void 0,c=void 0,u=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Xe(e)){if("function"!=typeof e.toString)throw C("toString is not a function");if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}if(!n.isSupported){if("object"===B(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Xe(e))return t.toStaticHTML(e.outerHTML)}return e}if(Pe||We(r),n.removed=[],"string"==typeof e&&(Ve=!1),Ve);else if(e instanceof A)s=Ye("\x3c!--\x3e"),1===(i=s.ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName?s=i:"HTML"===i.nodeName?s=i:s.appendChild(i);else{if(!Le&&!Oe&&!Se&&-1===e.indexOf("<"))return te&&Ie?te.createHTML(e):e;if(!(s=Ye(e)))return Le?null:ne}s&&je&&Ge(s.firstChild);for(var d=Ze(Ve?e:s);a=d.nextNode();)3===a.nodeType&&a===c||et(a)||(a.content instanceof l&&rt(a.content),nt(a),c=a);if(c=null,Ve)return e;if(Le){if(De)for(u=ae.call(s.ownerDocument);s.firstChild;)u.appendChild(s.firstChild);else u=s;return Re&&(u=le.call(o,u,!0)),u}var p=Se?s.outerHTML:s.innerHTML;return Oe&&(p=b(p,de," "),p=b(p,pe," ")),te&&Ie?te.createHTML(p):p};n.setConfig=function(e){We(e),Pe=!0};n.clearConfig=function(){He=null,Pe=!1};n.isValidAttribute=function(e,t,n){He||We({});var r=g(e),s=g(t);return tt(r,s,n)};n.addHook=function(e,t){"function"==typeof t&&(ue[e]=ue[e]||[],m(ue[e],t))};n.removeHook=function(e){ue[e]&&h(ue[e])};n.removeHooks=function(e){ue[e]&&(ue[e]=[])};n.removeAllHooks=function(){ue={}};return n}();return G}),e("skylark-formio/vendors/fast-json-patch/helpers",[],function(){var e=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.prototype.hasOwnProperty;function n(e,n){return t.call(e,n)}function r(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);var t=[];for(var s in e)n(e,s)&&t.push(s);return t}function s(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function o(e,t){var r;for(var i in e)if(n(e,i)){if(e[i]===t)return s(i)+"/";if("object"==typeof e[i]&&""!=(r=o(e[i],t)))return s(i)+"/"+r}return""}exports.hasOwnProperty=n;var i=function(t){function n(e,n,r,s,o){t.call(this,e),this.message=e,this.name=n,this.index=r,this.operation=s,this.tree=o}return e(n,t),n}(Error);return{PatchError:i,hasUndefined:function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,s=t.length;n<s;n++)if(e(t[n]))return!0}else if("object"==typeof t)for(var o=r(t),i=o.length,n=0;n<i;n++)if(e(t[o[n]]))return!0;return!1},getPath:function(e,t){if(e===t)return"/";var n=o(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n},unescapePathComponent:function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},escapePathComponent:s,isInteger:function(e){var t,n=0,r=e.length;for(;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0},_objectKeys:r,_deepClone:function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},_getPathRecursive:o}}),e("skylark-formio/vendors/fast-json-patch/core",["skylark-lodash","./helpers"],function(e,t){var n=function(t,n){return e.isEqual(t,n)},r={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,n,r){var s=o(r,this.path);s&&(s=t._deepClone(s));var a=i(r,{op:"remove",path:this.from}).removed;return i(r,{op:"add",path:this.path,value:a}),{newDocument:r,removed:s}},copy:function(e,n,r){var s=o(r,this.from);return i(r,{op:"add",path:this.path,value:t._deepClone(s)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:n(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},s={add:function(e,n,r){return t.isInteger(n)?e.splice(n,0,this.value):e[n]=this.value,{newDocument:r,index:n}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:r.move,copy:r.copy,test:r.test,_get:r._get};function o(e,t){if(""==t)return e;var n={op:"_get",path:t};return i(e,n),n.value}function i(e,i,a,c){if(void 0===a&&(a=!1),void 0===c&&(c=!0),a&&("function"==typeof a?a(i,0,e,i.path):l(i,0)),""===i.path){var u={newDocument:e};if("add"===i.op)return u.newDocument=i.value,u;if("replace"===i.op)return u.newDocument=i.value,u.removed=e,u;if("move"===i.op||"copy"===i.op)return u.newDocument=o(e,i.from),"move"===i.op&&(u.removed=e),u;if("test"===i.op){if(u.test=n(e,i.value),!1===u.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,i,e);return u.newDocument=e,u}if("remove"===i.op)return u.removed=e,u.newDocument=null,u;if("_get"===i.op)return i.value=e,u;if(a)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,i,e);return u}c||(e=t._deepClone(e));var d=i.path||"",p=d.split("/"),h=e,m=1,f=p.length,g=void 0,y=void 0,b=void 0;for(b="function"==typeof a?a:l;;){if(y=p[m],a&&void 0===g&&(void 0===h[y]?g=p.slice(0,m).join("/"):m==f-1&&(g=i.path),void 0!==g&&b(i,0,e,g)),m++,Array.isArray(h)){if("-"===y)y=h.length;else{if(a&&!t.isInteger(y))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,i.path,i);t.isInteger(y)&&(y=~~y)}if(m>=f){if(a&&"add"===i.op&&y>h.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,i.path,i);var u=s[i.op].call(i,h,y,e);if(!1===u.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,i,e);return u}}else if(y&&-1!=y.indexOf("~")&&(y=t.unescapePathComponent(y)),m>=f){var u=r[i.op].call(i,h,y,e);if(!1===u.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,i,e);return u}h=h[y]}}function a(e,n,r,s){if(void 0===s&&(s=!0),r&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");s||(e=t._deepClone(e));for(var o=new Array(n.length),a=0,l=n.length;a<l;a++)o[a]=i(e,n[a],r),e=o[a].newDocument;return o.newDocument=e,o}function l(e,n,s,o){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,s);if(!r[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,s);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,s);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,s);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,s);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,s);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&t.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,s);if(s)if("add"==e.op){var i=e.path.split("/").length,a=o.split("/").length;if(i!==a+1&&i!==a)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,s)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,s)}else if("move"===e.op||"copy"===e.op){var l={op:"_get",path:e.from,value:void 0},u=c([l],s);if(u&&"OPERATION_PATH_UNRESOLVABLE"===u.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,s)}}function c(e,n,r){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)a(t._deepClone(n),t._deepClone(e),r||!0);else{r=r||l;for(var s=0;s<e.length;s++)r(e[s],s,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}return{JsonPatchError:t.PatchError,deepClone:t._deepClone,getValueByPointer:o,applyOperation:i,applyPatch:a,applyReducer:function(e,n){var r=i(e,n);if(!1===r.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return r.newDocument},validator:l,validate:c}}),e("skylark-formio/vendors/fast-json-patch/duplex",["./helpers","./core"],function(e,t){var n=new WeakMap,r=function(){return function(e){this.observers=new Map,this.obj=e}}(),s=function(){return function(e,t){this.callback=e,this.observer=t}}();function o(e){var r=n.get(e.object);i(r.value,e.object,e.patches,""),e.patches.length&&t.applyPatch(r.value,e.patches);var s=e.patches;return s.length>0&&(e.patches=[],e.callback&&e.callback(s)),s}function i(t,n,r,s){if(n!==t){"function"==typeof n.toJSON&&(n=n.toJSON());for(var o=e._objectKeys(n),a=e._objectKeys(t),l=!1,c=a.length-1;c>=0;c--){var u=a[c],d=t[u];if(!e.hasOwnProperty(n,u)||void 0===n[u]&&void 0!==d&&!1===Array.isArray(n))r.push({op:"remove",path:s+"/"+e.escapePathComponent(u)}),l=!0;else{var p=n[u];"object"==typeof d&&null!=d&&"object"==typeof p&&null!=p?i(d,p,r,s+"/"+e.escapePathComponent(u)):d!==p&&(!0,r.push({op:"replace",path:s+"/"+e.escapePathComponent(u),value:e._deepClone(p)}))}}if(l||o.length!=a.length)for(var c=0;c<o.length;c++){var u=o[c];e.hasOwnProperty(t,u)||void 0===n[u]||r.push({op:"add",path:s+"/"+e.escapePathComponent(u),value:e._deepClone(n[u])})}}}return{applyPatch:t.applyPatch,unobserve:function(e,t){t.unobserve()},observe:function(t,i){var a,l=function(e){return n.get(e)}(t);if(l){var c=function(e,t){return e.observers.get(t)}(l,i);a=c&&c.observer}else l=new r(t),n.set(t,l);if(a)return a;if(a={},l.value=e._deepClone(t),i){a.callback=i,a.next=null;var u=function(){o(a)},d=function(){clearTimeout(a.next),a.next=setTimeout(u)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d)):(document.documentElement.attachEvent("onmouseup",d),document.documentElement.attachEvent("onkeyup",d),document.documentElement.attachEvent("onmousedown",d),document.documentElement.attachEvent("onkeydown",d),document.documentElement.attachEvent("onchange",d)))}return a.patches=[],a.object=t,a.unobserve=function(){o(a),clearTimeout(a.next),function(e,t){e.observers.delete(t.callback)}(l,a),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d)):(document.documentElement.detachEvent("onmouseup",d),document.documentElement.detachEvent("onkeyup",d),document.documentElement.detachEvent("onmousedown",d),document.documentElement.detachEvent("onkeydown",d)))},l.observers.set(i,new s(i,a)),a},generate:o,compare:function(e,t){var n=[];return i(e,t,n,""),n}}}),e("skylark-formio/utils/formUtils",["skylark-lodash","../vendors/fast-json-patch/duplex"],function(e,t){"use strict";const{get:n,set:r,has:s,clone:o,forOwn:i,isString:a,isNaN:l,isNil:c,isPlainObject:u,round:d,chunk:p,pad:h}=e;function m(e,t,n,r,s){e&&(r=r||"",e.forEach(e=>{if(!e)return;const i=e.columns&&Array.isArray(e.columns),a=e.rows&&Array.isArray(e.rows),l=e.components&&Array.isArray(e.components);let c=!1;const u=e.key?r?`${r}.${e.key}`:e.key:"";s&&(e.parent=o(s),delete e.parent.components,delete e.parent.componentMap,delete e.parent.columns,delete e.parent.rows),(n||e.tree||!i&&!a&&!l)&&(c=t(e,u));const d=()=>e.key&&!["panel","table","well","columns","fieldset","tabs","form"].includes(e.type)&&(["datagrid","container","editgrid"].includes(e.type)||e.tree)?u:e.key&&"form"===e.type?`${u}.data`:r;c||(i?e.columns.forEach(r=>m(r.components,t,n,d(),s?e:null)):a?e.rows.forEach(r=>{Array.isArray(r)&&r.forEach(r=>m(r.components,t,n,d(),s?e:null))}):l&&m(e.components,t,n,d(),s?e:null))}))}function f(e,t){if(a(t))return e.key===t||e.path===t;{let r=!1;return i(t,(t,s)=>{if(!(r=n(e,s)===t))return!1}),r}}function g(e,t){const n=[];return m(e,e=>{f(e,t)&&n.push(e)},!0),n}function y(e,t,n,r){if(e){if(n=n||[],!t)return r(e);e.forEach(function(e,s){var o=n.slice();o.push(s),e&&(e.hasOwnProperty("columns")&&Array.isArray(e.columns)&&(o.push("columns"),e.columns.forEach(function(e,n){var s=o.slice();s.push(n),s.push("components"),y(e.components,t,s,r)})),e.hasOwnProperty("rows")&&Array.isArray(e.rows)&&(o.push("rows"),e.rows.forEach(function(e,n){var s=o.slice();s.push(n),e.forEach(function(e,n){var o=s.slice();o.push(n),o.push("components"),y(e.components,t,o,r)})})),e.hasOwnProperty("components")&&Array.isArray(e.components)&&(o.push("components"),y(e.components,t,o,r)),e.key===t&&r(e,o))})}}function b(e,t){var r=t.pop();0!==t.length&&(e=n(e,t)),e.splice(r,1)}function v(e){return parseFloat(a(e)?e.replace(/[^\de.+-]/gi,""):e)}return{isLayoutComponent:function(e){return Boolean(e.columns&&Array.isArray(e.columns)||e.rows&&Array.isArray(e.rows)||e.components&&Array.isArray(e.components))},eachComponent:m,matchComponent:f,getComponent:function(e,t,n){let r;return m(e,(e,n)=>{if(n===t||e.path===t)return r=e,!0},n),r},searchComponents:g,findComponents:function(e,t){return console.warn("formio.js/utils findComponents is deprecated. Use searchComponents instead."),g(e,t)},findComponent:y,removeComponent:b,generateFormChange:function(e,t){let n;switch(e){case"add":n={op:"add",key:t.component.key,container:t.parent.key,path:t.path,index:t.index,component:t.component};break;case"edit":(n={op:"edit",key:t.originalComponent.key,patches:duplex.compare(t.originalComponent,t.component)}).patches.length||(n=null);break;case"remove":n={op:"remove",key:t.component.key}}return n},applyFormChanges:function(e,t){const s=[];return t.forEach(function(t){var o=!1;switch(t.op){case"add":var i=t.component;y(e.components,t.container,null,function(r){t.container||(r=e),y(e.components,t.key,null,function(t,n){i=t,b(e.components,n)}),o=!0,n(r,t.path).splice(t.index,0,i)});break;case"remove":y(e.components,t.key,null,function(t,r){o=!0,n(e.components,r).key!==t.key&&r.pop(),b(e.components,r)});break;case"edit":y(e.components,t.key,null,function(i,a){o=!0;try{const o=n(e.components,a),l=duplex.applyPatch(i,t.patches).newDocument;o.key!==l.key&&a.pop(),r(e.components,a,l)}catch(e){s.push(t)}})}o||s.push(t)}),{form:e,failed:s}},flattenComponents:function(e,t){const n={};return m(e,(e,t)=>{n[t]=e},t),n},hasCondition:function(e){return Boolean(e.customConditional||e.conditional&&e.conditional.when||e.conditional&&e.conditional.json)},parseFloatExt:v,formatAsCurrency:function(e){const t=v(e);if(l(t))return"";const n=d(t,2).toString().split(".");return n[0]=p(Array.from(n[0]).reverse(),3).reverse().map(e=>e.reverse().join("")).join(","),n[1]=h(n[1],2,"0"),n.join(".")},escapeRegExCharacters:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")},getValue:function(e,t){const n=e=>{if(u(e)){if(s(e,t))return e[t];let r=null;return i(e,e=>{const t=n(e);if(!c(t))return r=t,!1}),r}return null};return n(e.data)},getStrings:function(e){const t=["label","title","legend","tooltip","description","placeholder","prefix","suffix","errorLabel","content","html"],n=[];return m(e.components,e=>{if(t.forEach(t=>{e.hasOwnProperty(t)&&e[t]&&n.push({key:e.key,type:e.type,property:t,string:e[t]})}),(!e.dataSrc||"values"===e.dataSrc)&&e.hasOwnProperty("values")&&Array.isArray(e.values)&&e.values.length&&e.values.forEach((t,r)=>{n.push({key:e.key,property:`value[${r}].label`,string:e.values[r].label})}),"day"===e.type&&(["day","month","year","Day","Month","Year","january","february","march","april","may","june","july","august","september","october","november","december"].forEach(t=>{n.push({key:e.key,property:"day",string:t})}),e.fields.day.placeholder&&n.push({key:e.key,property:"fields.day.placeholder",string:e.fields.day.placeholder}),e.fields.month.placeholder&&n.push({key:e.key,property:"fields.month.placeholder",string:e.fields.month.placeholder}),e.fields.year.placeholder&&n.push({key:e.key,property:"fields.year.placeholder",string:e.fields.year.placeholder})),"editgrid"===e.type){const t=e.addAnother||"Add Another";e.addAnother&&n.push({key:e.key,property:"addAnother",string:t})}"select"===e.type&&["loading...","Type to search"].forEach(t=>{n.push({key:e.key,property:"select",string:t})})},!0),n}}}),e("skylark-formio/utils/Evaluator",["skylark-lodash"],function(e){"use strict";function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}const n={noeval:!1,cache:{},templateSettings:{evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{\{\{([\s\S]+?)\}\}\}/g},evaluator:(t,...r)=>n.noeval?(console.warn("No evaluations allowed for this renderer."),e.noop):("object"==typeof r[0]&&(r=e.keys(r[0])),new Function(...r,t)),template(r,s){s=s||t(r);try{return r=r.replace(/ctx\./g,""),n.cache[s]=e.template(r,n.templateSettings)}catch(e){console.warn("Error while processing template",e,r)}},interpolate(r,s){if("function"==typeof r)try{return r(s)}catch(e){return console.warn("Error interpolating template",e,s),e.message}const o=t(r=String(r));let i;if(n.cache[o])i=n.cache[o];else{if(n.noeval)return r.replace(/({{\s*(.*?)\s*}})/g,(t,n,r)=>e.get(s,r));i=n.template(r,o)}if("function"==typeof i)try{return i(s)}catch(e){return console.warn("Error interpolating template",e,r,s),e.message}return i},evaluate:(e,t)=>Array.isArray(t)?e(...t):e(t)};return n}),e("skylark-formio/utils/utils",["skylark-lodash","../vendors/fetch-ponyfill/fetch","../vendors/json-logic-js/logic","../vendors/moment/timezone","../vendors/jstimezonedetect/jstz","./jsonlogic/operators","../vendors/getify/npo","../vendors/dompurify/purify","./formUtils","./Evaluator"],function(e,t,n,r,s,o,i,a,l,c){"use strict";const u=c.interpolate,{fetch:d}=t({Promise:i});function p(t,r,s,o){let i=null;const a=r.component?r.component:{key:"unknown"};!r.form&&r.instance&&(r.form=e.get(r.instance,"root._form",{}));const l=a.key;if("string"==typeof t){s&&(t+=`;return ${s}`),o&&(t=t.replace(/({{\s+(.*)\s+}})/,(t,n,s)=>0===s.indexOf("data.")?e.get(r.data,s.replace("data.","")):0===s.indexOf("row.")?e.get(r.row,s.replace("row.","")):e.get(r.data,s)));try{t=c.evaluator(t,r),r=e.values(r)}catch(e){console.warn(`An error occured within the custom function for ${l}`,e),i=null,t=!1}}if("function"==typeof t)try{i=c.evaluate(t,r)}catch(e){i=null,console.warn(`An error occured within custom function for ${l}`,e)}else if("object"==typeof t)try{i=n.apply(t,r)}catch(e){i=null,console.warn(`An error occured within custom function for ${l}`,e)}else t&&console.warn(`Unknown function type for ${l}`);return i}function h(e,t){let n=e.getPropertyValue(t);return n=n?n.replace(/[^0-9.]/g,""):"0",parseFloat(n)}function m(t,n,r,s){let o=null;r&&(o=l.getValue({data:r},n.when)),s&&e.isNil(o)&&(o=l.getValue({data:s},n.when)),e.isNil(o)&&(o="");const i=String(n.eq),a=String(n.show);return e.isObject(o)&&e.has(o,n.eq)?String(o[n.eq])===a:Array.isArray(o)&&o.map(String).includes(i)?"true"===a:String(o)===i==("true"===a)}function f(e,t,n,r,s,o,i,a){"string"==typeof t&&(t=`var ${o} = true; ${t}; return ${o};`);const l=a&&a.evaluate?a.evaluate(t):p(t,{row:n,data:r,form:s});return null===l?i:l}function g(t,r,s,o,i,a){try{return n.apply(r,{data:o,row:s,form:i,_:e})}catch(e){return console.warn(`An error occurred in jsonLogic advanced condition for ${t.key}`,e),a}}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function b(){return r.currentTimezone?r.currentTimezone:(r.currentTimezone=s.determine().name(),r.currentTimezone)}function v(e,t){if("UTC"===t)return{date:new Date(e.getTime()+6e4*e.getTimezoneOffset()),abbr:"UTC"};const n=r(e).tz(t);return{date:new Date(e.getTime()+6e4*(n.utcOffset()+e.getTimezoneOffset())),abbr:n.format("z")}}function k(e){return e!==b()&&"UTC"!==e}function x(t){return t&&!k(t)?new i(e.noop):r.zonesPromise?r.zonesPromise:r.zonesPromise=d("https://cdn.form.io/moment-timezone/data/packed/latest.json").then(e=>e.json().then(e=>{if(r.tz.load(e),r.zonesLoaded=!0,document&&document.createEvent&&document.body&&document.body.dispatchEvent){var t=document.createEvent("Event");t.initEvent("zonesLoaded",!0,!0),document.body.dispatchEvent(t)}}))}function w(e){return e.replace(/y/g,"Y").replace(/d/g,"D").replace(/E/g,"d").replace(/a/g,"A").replace(/U/g,"X")}function C(e){return e.match(/(\d+)$/)?e.replace(/(\d+)$/,function(e){return Number(e)+1}):`${e}1`}function A(e){return"function"==typeof e?e():e}o.lodashOperators.forEach(t=>n.add_operation(`_${t}`,e[t])),n.add_operation("getDate",e=>r(e).toISOString()),n.add_operation("relativeMinDate",e=>r().subtract(e,"days").toISOString()),n.add_operation("relativeMaxDate",e=>r().add(e,"days").toISOString());const E=e.flow([e.partialRight(e.map,A),e.partialRight(e.find,t=>!e.isUndefined(t))]);return{jsonLogic:n,moment:r,evaluate:p,getRandomComponentId:function(){return`e${Math.random().toString(36).substring(7)}`},getPropertyValue:h,getElementRect:function(e){const t=window.getComputedStyle(e,null);return{x:h(t,"left"),y:h(t,"top"),width:h(t,"width"),height:h(t,"height")}},boolValue:function(t){return e.isBoolean(t)?t:e.isString(t)?"true"===t.toLowerCase():!!t},isMongoId:function(e){return e.toString().match(/^[0-9a-fA-F]{24}$/)},checkCalculated:function(t,n,r){t.calculateValue&&e.set(r,t.key,p(t.calculateValue,{value:void 0,data:n?n.data:r,row:r,util:this,component:t},"value"))},checkSimpleConditional:m,checkCustomConditional:f,checkJsonConditional:g,checkCondition:function(e,t,n,r,s){if(e.customConditional)return f(e,e.customConditional,t,n,r,"show",!0,s);if(e.conditional&&e.conditional.when)return m(e,e.conditional,t,n);if(e.conditional&&e.conditional.json)return g(e,e.conditional.json,t,n,r,!0);return!0},checkTrigger:function(e,t,n,r,s,o){if(!t[t.type])return!1;switch(t.type){case"simple":return m(e,t.simple,n,r);case"javascript":return f(e,t.javascript,n,r,s,"result",!1,o);case"json":return g(e,t.json,n,r,s,!1)}return!1},setActionProperty:function(t,n,r,s,o,i){const a=n.property.value;switch(n.property.type){case"boolean":{const r=e.get(t,a,!1).toString(),s=n.state.toString();r!==s&&e.set(t,a,"true"===s);break}case"string":{const l={data:o,row:s,component:t,result:r},u=n.property.component?n[n.property.component]:n.text,d=e.get(t,a,""),p=i&&i.interpolate?i.interpolate(u,l):c.interpolate(u,l);p!==d&&e.set(t,a,p);break}}return t},uniqueName:function(t,n,r){(n=n||"{{fileName}}-{{guid}}").includes("{{guid}}")||(n=`${n}-{{guid}}`);const s=t.split(".");let o=s.slice(0,s.length-1).join(".");const i=s.length>1?`.${e.last(s)}`:"";return o=o.substr(0,100),r=Object.assign(r||{},{fileName:o,guid:y()}),`${c.interpolate(n,r)}${i}`.replace(/[^0-9a-zA-Z.\-_ ]/g,"-")},guid:y,getDateSetting:function(t){if(e.isNil(t)||e.isNaN(t)||""===t)return null;if(t instanceof Date)return t;if("function"==typeof t.toDate)return t.isValid()?t.toDate():null;let n="string"!=typeof t||-1===t.indexOf("moment(")?r(t):null;if(n&&n.isValid())return n.toDate();n=null;try{const e=c.evaluator(`return ${t};`,"moment")(r);"string"==typeof e?n=r(e):"function"==typeof e.toDate?n=r(e.toDate().toUTCString()):e instanceof Date&&(n=r(e))}catch(e){return null}if(!n)return null;if(!n.isValid())return null;return n.toDate()},isValidDate:function(t){return e.isDate(t)&&!e.isNaN(t.getDate())},currentTimezone:b,offsetDate:v,zonesLoaded:function(){return r.zonesLoaded},shouldLoadZones:k,loadZones:x,momentDate:function(e,t,n){const s=r(e);"UTC"===n&&(n="Etc/UTC");if((n!==b()||t&&t.match(/\s(z$|z\s)/))&&r.zonesLoaded)return s.tz(n);return s},formatDate:function(e,t,n){const s=r(e);if(n===b())return t.match(/\s(z$|z\s)/)?(x(),r.zonesLoaded?s.tz(n).format(w(t)):s.format(w(t.replace(/\s(z$|z\s)/,"")))):s.format(w(t));if("UTC"===n){const e=v(s.toDate(),"UTC");return`${r(e.date).format(w(t))} UTC`}return x(),r.zonesLoaded?s.tz(n).format(`${w(t)} z`):s.format(w(t))},formatOffset:function(e,t,n,s){if(s===b())return e(t,n);if("UTC"===s)return`${e(v(t,"UTC").date,n)} UTC`;if(x(),r.zonesLoaded){const r=v(t,s);return`${e(r.date,n)} ${r.abbr}`}return e(t,n)},getLocaleDateFormatInfo:function(e){const t={},n=new Date(2017,11,21).toLocaleDateString(e);return t.dayFirst=n.slice(0,2)===21..toString(),t},convertFormatToFlatpickr:function(e){return e.replace(/Z/g,"").replace(/y/g,"Y").replace("YYYY","Y").replace("YY","y").replace("MMMM","F").replace(/M/g,"n").replace("nnn","M").replace("nn","m").replace(/d/g,"j").replace(/jj/g,"d").replace("EEEE","l").replace("EEE","D").replace("HH","H").replace("hh","G").replace("mm","i").replace("ss","S").replace(/a/g,"K")},convertFormatToMoment:w,convertFormatToMask:function(e){return e.replace(/M{4}/g,"MM").replace(/M{3}/g,"***").replace(/e/g,"Q").replace(/[ydhmsHMG]/g,"9").replace(/a/g,"AA")},getInputMask:function(e){if(e instanceof Array)return e;const t=[];t.numeric=!0;for(let n=0;n<e.length;n++)switch(e[n]){case"9":t.push(/\d/);break;case"A":t.numeric=!1,t.push(/[a-zA-Z]/);break;case"a":t.numeric=!1,t.push(/[a-z]/);break;case"*":t.numeric=!1,t.push(/[a-zA-Z0-9]/);break;default:t.numeric=!1,t.push(e[n])}return t},matchInputMask:function(t,n){if(!n)return!0;if(t.length>n.length)return!1;for(let r=0;r<n.length;r++){const s=t[r],o=n[r];if(!(e.isRegExp(o)&&o.test(s)||o===s))return!1}return!0},getNumberSeparators:function(e="en"){const t=12345.6789.toLocaleString(e).match(/..(.)...(.)../);if(!t)return{delimiter:",",decimalSeparator:"."};return{delimiter:t.length>1?t[1]:",",decimalSeparator:t.length>2?t[2]:"."}},getNumberDecimalLimit:function(t,n){if(e.has(t,"decimalLimit"))return e.get(t,"decimalLimit");let r=n||20;const s=e.get(t,"validate.step","any");if("any"!==s){const e=s.toString().split(".");e.length>1&&(r=e[1].length)}return r},getCurrencyAffixes:function({currency:e="USD",decimalLimit:t,decimalSeparator:n,lang:r}){let s="(.*)?100";t&&(s+=`${"."===n?"\\.":n}0{${t}}`);s+="(.*)?";const o=100..toLocaleString(r,{style:"currency",currency:e,useGrouping:!0,maximumFractionDigits:t,minimumFractionDigits:t}).replace(".",n).match(new RegExp(s));return{prefix:o[1]||"",suffix:o[2]||""}},fieldData:function(e,t){if(!e)return"";if(!t||!t.key)return e;if(t.key.includes(".")){let n=e;const r=t.key.split(".");let s="";for(let e=0;e<r.length;e++){if(s=r[e],n.hasOwnProperty("_id")&&(n=n.data),!n.hasOwnProperty(s))return;s===r[r.length-1]&&t.multiple&&!Array.isArray(n[s])&&(n[s]=[n[s]]),n=n[s]}return n}return t.multiple&&!Array.isArray(e[t.key])&&(e[t.key]=[e[t.key]]),e[t.key]},delay:function(e,t=0,...n){const r=setTimeout(e,t,...n);function s(){clearTimeout(r)}function o(){return s(),e(...n)}return o.timer=r,o.cancel=s,o},iterateKey:C,uniqueKey:function(e,t){let n=t;for(;e.hasOwnProperty(n);)n=C(n);return n},bootstrapVersion:function(e){if(e.bootstrap)return e.bootstrap;if("function"==typeof $&&"function"==typeof $().collapse)return parseInt($.fn.collapse.Constructor.VERSION.split(".")[0],10);return 0},unfold:A,firstNonNil:E,withSwitch:function(e,t){let n=e,r=t;return[function(){return n},function(){const e=n;n=r,r=e}]},observeOverload:function(e,t={}){const{limit:n=50,delay:r=500}=t;let s=0,o=0;const i=()=>s=0;return()=>{if(0!==o&&(clearTimeout(o),o=0),o=setTimeout(i,r),(s+=1)>=n)return clearTimeout(o),i(),e()}},getContextComponents:function(e){const t=[];return e.utils.eachComponent(e.instance.options.editForm.components,(n,r)=>{n.key!==e.data.key&&t.push({label:`${n.label||n.key} (${r})`,value:n.key})}),t},sanitize:function(e,t){const n={ADD_ATTR:["ref","target"],USE_PROFILES:{html:!0}};t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.addAttr)&&t.sanitizeConfig.addAttr.length>0&&t.sanitizeConfig.addAttr.forEach(e=>{n.ADD_ATTR.push(e)});t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.addTags)&&t.sanitizeConfig.addTags.length>0&&(n.ADD_TAGS=t.sanitizeConfig.addTags);t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.allowedTags)&&t.sanitizeConfig.allowedTags.length>0&&(n.ALLOWED_TAGS=t.sanitizeConfig.allowedTags);t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.allowedAttrs)&&t.sanitizeConfig.allowedAttrs.length>0&&(n.ALLOWED_ATTR=t.sanitizeConfig.allowedAttrs);t.sanitizeConfig&&t.sanitizeConfig.allowedUriRegex&&(n.ALLOWED_URI_REGEXP=t.sanitizeConfig.allowedUriRegex);return a.sanitize(e,n)},fastCloneDeep:function(e){return e?JSON.parse(JSON.stringify(e)):e},Evaluator:c,interpolate:u,isInputComponent:function(e){if(!1===e.input||!0===e.input)return e.input;switch(e.type){case"htmlelement":case"content":case"columns":case"fieldset":case"panel":case"table":case"tabs":case"well":case"button":return!1;default:return!0}}}}),e("skylark-formio/EventEmitter",["./vendors/eventemitter2/EventEmitter2","./utils/utils"],function(e,t){"use strict";return class extends e{constructor(e={}){const{loadLimit:n=50,eventsSafeInterval:r=300,pause:s=500,...o}=e;super(o);const[i,a]=t.withSwitch(!1,!0),l=t.observeOverload(()=>{console.warn("Infinite loop detected",this.id,s),a(),setTimeout(a,s)},{limit:n,delay:r});this.emit=((...e)=>{i()||(super.emit(...e),l())})}}}),e("skylark-formio/vendors/browser-cookies/cookies",[],function(){var exports={set:function(e,t,n){var r=n||{},s=exports.defaults,o=r.expires||s.expires,i=r.domain||s.domain,a=void 0!==r.path?r.path:void 0!==s.path?s.path:"/",l=void 0!==r.secure?r.secure:s.secure,c=void 0!==r.httponly?r.httponly:s.httponly,u=void 0!==r.samesite?r.samesite:s.samesite,d=o?new Date("number"==typeof o?(new Date).getTime()+864e5*o:o):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(d&&d.getTime()>=0?";expires="+d.toUTCString():"")+(i?";domain="+i:"")+(a?";path="+a:"")+(l?";secure":"")+(c?";httponly":"")+(u?";samesite="+u:"")},get:function(e){for(var t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");r=r<0?n.length:r;var s=decodeURIComponent(n.slice(0,r).replace(/^\s+/,""));if(s===e)return decodeURIComponent(n.slice(r+1))}return null},erase:function(e,t){exports.set(e,"",{expires:-1,domain:t&&t.domain,path:t&&t.path,secure:0,httponly:0})},all:function(){for(var e={},t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");r=r<0?n.length:r;var s=decodeURIComponent(n.slice(0,r).replace(/^\s+/,""));e[s]=decodeURIComponent(n.slice(r+1))}return e}};return exports}),e("skylark-formio/providers/address/AddressProvider",["skylark-lodash","../../Formio"],function(e,t){"use strict";return{AddressProvider:class{static get name(){return"address"}static get displayName(){return"Address"}constructor(t={}){this.options=e.merge({},this.defaultOptions,t)}get defaultOptions(){return{}}get queryProperty(){return"query"}get responseProperty(){return null}get displayValueProperty(){return null}serialize(t){return e.toPairs(t).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")}getRequestOptions(t={}){return e.merge({},this.options,t)}getRequestUrl(e={}){throw new Error("Method AddressProvider#getRequestUrl(options) is abstract.")}makeRequest(e={}){return t.makeStaticRequest(this.getRequestUrl(e),"GET",null,{noToken:!0})}search(t,n={}){const r=this.getRequestOptions(n),s=r.params=r.params||{};return s[this.queryProperty]=t,this.makeRequest(r).then(t=>this.responseProperty?e.get(t,this.responseProperty,[]):t)}getDisplayValue(t){return this.displayValueProperty?e.get(t,this.displayValueProperty,""):String(t)}}}}),e("skylark-formio/providers/address/AzureAddressProvider",["./AddressProvider"],function(e){"use strict";return{AzureAddressProvider:class extends e.AddressProvider{static get name(){return"azure"}static get displayName(){return"Azure Maps"}get defaultOptions(){return{params:{"api-version":"1.0",typeahead:"true"}}}get responseProperty(){return"results"}get displayValueProperty(){return"address.freeformAddress"}getRequestUrl(e={}){const{params:t}=e;return`https://atlas.microsoft.com/search/address/json?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/CustomAddressProvider",["./AddressProvider"],function(e){"use strict";return{CustomAddressProvider:class extends e.AddressProvider{static get name(){return"custom"}static get displayName(){return"Custom"}get queryProperty(){return this.options.queryProperty||super.queryProperty}get responseProperty(){return this.options.responseProperty||super.responseProperty}get displayValueProperty(){return this.options.displayValueProperty||super.displayValueProperty}getRequestUrl(e={}){const{params:t,url:n}=e;return`${n}?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/GoogleAddressProvider",["./AddressProvider"],function(e){"use strict";return{GoogleAddressProvider:class extends e.AddressProvider{static get name(){return"google"}static get displayName(){return"Google Maps"}get defaultOptions(){return{params:{sensor:"false"}}}get queryProperty(){return"address"}get responseProperty(){return"results"}get displayValueProperty(){return"formatted_address"}makeRequest(e={}){return new Promise((t,n)=>{var r=new XMLHttpRequest;r.responseType="json",r.open("GET",this.getRequestUrl(e),!0),r.onload=(()=>t(r.response)),r.onerror=n,r.send()})}getRequestUrl(e={}){const{params:t}=e;return`https://maps.googleapis.com/maps/api/geocode/json?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/NominatimAddressProvider",["./AddressProvider"],function(e){"use strict";return{NominatimAddressProvider:class extends e.AddressProvider{static get name(){return"nominatim"}static get displayName(){return"OpenStreetMap Nominatim"}get defaultOptions(){return{params:{addressdetails:"1",format:"json"}}}get queryProperty(){return"q"}get displayValueProperty(){return"display_name"}getRequestUrl(e={}){const{params:t}=e;return`https://nominatim.openstreetmap.org/search?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/index",["./AzureAddressProvider","./CustomAddressProvider","./GoogleAddressProvider","./NominatimAddressProvider"],function(e,t,n,r){"use strict";return{[e.AzureAddressProvider.name]:e.AzureAddressProvider,[t.CustomAddressProvider.name]:t.CustomAddressProvider,[n.GoogleAddressProvider.name]:n.GoogleAddressProvider,[r.NominatimAddressProvider.name]:r.NominatimAddressProvider}}),e("skylark-formio/providers/auth/index",[],function(){"use strict";return{}}),e("skylark-formio/providers/storage/base64",["../../vendors/getify/npo"],function(e){"use strict";const t=()=>({title:"Base64",name:"base64",uploadFile(t,n){const r=new FileReader;return new e((e,s)=>{r.onload=(r=>{const s=r.target.result;e({storage:"base64",name:n,url:s,size:t.size,type:t.type})}),r.onerror=(()=>s(this)),r.readAsDataURL(t)})},downloadFile:t=>e.resolve(t)});return t.title="Base64",t}),e("skylark-formio/providers/storage/dropbox",["../../vendors/getify/npo"],function(e){"use strict";const t=t=>({uploadFile:(n,r,s,o)=>new e((e,i)=>{const a=new XMLHttpRequest;"function"==typeof o&&(a.upload.onprogress=o);const l=new FormData;l.append("name",r),l.append("dir",s),l.append("file",n),a.onerror=(e=>{e.networkError=!0,i(e)}),a.onload=(()=>{if(a.status>=200&&a.status<300){const t=JSON.parse(a.response);t.storage="dropbox",t.size=n.size,t.type=n.type,t.url=t.path_lower,e(t)}else i(a.response||"Unable to upload file")}),a.onabort=i,a.open("POST",`${t.formUrl}/storage/dropbox`);const c=t.getToken();c&&a.setRequestHeader("x-jwt-token",c),a.send(l)}),downloadFile(n){const r=t.getToken();return n.url=`${t.formUrl}/storage/dropbox?path_lower=${n.path_lower}${r?`&x-jwt-token=${r}`:""}`,e.resolve(n)}});return t.title="Dropbox",t}),e("skylark-formio/providers/storage/xhr",["../../vendors/getify/npo","skylark-lodash"],function(e,t){"use strict";t.trim;const n={trim:e=>_trim(e,"/"),path:e=>e.filter(e=>!!e).map(n.trim).join("/"),upload:(t,r,s,o,i,a,l)=>new e((e,c)=>{const u=new XMLHttpRequest;u.onerror=(e=>{e.networkError=!0,c(e)}),u.onabort=c,u.onload=(()=>{if(u.status>=200&&u.status<300){const t=JSON.parse(u.response),n=new XMLHttpRequest;"function"==typeof l&&(n.upload.onprogress=l),n.onerror=(e=>{e.networkError=!0,c(e)}),n.onabort=(e=>{e.networkError=!0,c(e)}),n.onload=(()=>{n.status>=200&&n.status<300?e(t):c(n.response||"Unable to upload file")}),n.onabort=c,n.send(s(n,t))}else c(u.response||"Unable to sign file")}),u.open("POST",`${t.formUrl}/storage/${r}`),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/json; charset=UTF-8");const d=t.getToken();d&&u.setRequestHeader("x-jwt-token",d),u.send(JSON.stringify({name:n.path([a,i]),size:o.size,type:o.type}))})};return n}),e("skylark-formio/providers/storage/s3",["../../vendors/getify/npo","./xhr"],function(e,t){"use strict";const n=n=>({uploadFile:(e,r,s,o)=>t.upload(n,"s3",(n,o)=>{if(o.data.fileName=r,o.data.key=t.path([o.data.key,s,r]),o.signed)return n.open("PUT",o.signed),n.setRequestHeader("Content-Type",e.type),e;{const t=new FormData;for(const e in o.data)t.append(e,o.data[e]);return t.append("file",e),n.open("POST",o.url),t}},e,r,s,o).then(n=>({storage:"s3",name:r,bucket:n.bucket,key:n.data.key,url:t.path([n.url,n.data.key]),acl:n.data.acl,size:e.size,type:e.type})),downloadFile:r=>"public-read"!==r.acl?n.makeRequest("file",`${n.formUrl}/storage/s3?bucket=${t.trim(r.bucket)}&key=${t.trim(r.key)}`,"GET"):e.resolve(r)});return n.title="S3",n}),e("skylark-formio/providers/storage/azure",["./xhr"],function(e){"use strict";const t=t=>({uploadFile:(n,r,s,o)=>e.upload(t,"azure",(e,t)=>(e.open("PUT",t.url),e.setRequestHeader("Content-Type",n.type),e.setRequestHeader("x-ms-blob-type","BlockBlob"),n),n,r,s,o).then(()=>({storage:"azure",name:e.path([s,r]),size:n.size,type:n.type})),downloadFile:n=>t.makeRequest("file",`${t.formUrl}/storage/azure?name=${e.trim(n.name)}`,"GET")});return t.title="Azure File Services",t}),e("skylark-formio/providers/storage/url",["../../vendors/getify/npo"],function(e){"use strict";const t=t=>{const n=(n,r,s,o,i,a)=>new e((e,l)=>{const c=new XMLHttpRequest,u="string"==typeof o,d=new FormData;if("function"==typeof a&&(c.upload.onprogress=a),!u)for(const e in o)d.append(e,o[e]);c.onload=(()=>{if(c.status>=200&&c.status<300){let t={};try{t=(t="string"==typeof c.response?JSON.parse(c.response):{})&&t.data?t.data:t}catch(e){t={}}let s=t.hasOwnProperty("url")?t.url:`${c.responseURL}/${r}`;s&&"/"===s[0]&&(s=`${n}${s}`),e({url:s,data:t})}else l(c.response||"Unable to upload file")}),c.onerror=(()=>l(c)),c.onabort=(()=>l(c));let p=n+(n.indexOf("?")>-1?"&":"?");for(const e in s)p+=`${e}=${s[e]}&`;"&"===p[p.length-1]&&(p=p.substr(0,p.length-1)),c.open("POST",p),u&&c.setRequestHeader("Content-Type","application/json");const h=t.getToken();if(h&&c.setRequestHeader("x-jwt-token",h),i){const e="string"==typeof i?JSON.parse(i):i;for(const t in e)c[t]=e[t]}c.send(u?o:d)});return{title:"Url",name:"url",uploadFile(e,r,s,o,i,a,l){const c=function(c){return n(i,r,{baseUrl:encodeURIComponent(t.projectUrl),project:c?c.project:"",form:c?c._id:""},{[l]:e,name:r,dir:s},a,o).then(n=>(n.data=n.data||{},n.data.baseUrl=t.projectUrl,n.data.project=c?c.project:"",n.data.form=c?c._id:"",{storage:"url",name:r,url:n.url,size:e.size,type:e.type,data:n.data}))};return e.private&&t.formId?t.loadForm().then(e=>c(e)):c()},deleteFile:t=>new e((e,n)=>{const r=new XMLHttpRequest;r.open("DELETE",t.url,!0),r.onload=(()=>{r.status>=200&&r.status<300?e("File deleted"):n(r.response||"Unable to delete file")}),r.send(null)}),downloadFile:r=>r.private?(t.submissionId&&r.data&&(r.data.submission=t.submissionId),n(r.url,r.name,{},JSON.stringify(r)).then(e=>e.data)):e.resolve(r)}};return t.title="Url",t}),e("skylark-formio/vendors/uuid/rng",[],function(){var e,t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e=function(){return t(n),n}}else{var r=new Array(16);e=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}return e}),e("skylark-formio/vendors/uuid/bytesToUuid",[],function(){for(var e=[],t=0;t<256;++t)e[t]=(t+256).toString(16).substr(1);return function(t,n){var r=n||0,s=e;return[s[t[r++]],s[t[r++]],s[t[r++]],s[t[r++]],"-",s[t[r++]],s[t[r++]],"-",s[t[r++]],s[t[r++]],"-",s[t[r++]],s[t[r++]],"-",s[t[r++]],s[t[r++]],s[t[r++]],s[t[r++]],s[t[r++]],s[t[r++]]].join("")}}),e("skylark-formio/vendors/uuid/v4",["./rng","./bytesToUuid"],function(e,t){return function(n,r,s){var o=r&&s||0;"string"==typeof n&&(r="binary"===n?new Array(16):null,n=null);var i=(n=n||{}).random||(n.rng||e)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r)for(var a=0;a<16;++a)r[o+a]=i[a];return r||t(i)}}),e("skylark-formio/providers/storage/indexeddb",["../../vendors/uuid/v4","../../vendors/getify/npo"],function(e,t){"use strict";const n=()=>({title:"indexedDB",name:"indexeddb",uploadFile(n,r,s,o,i,a){if("indexedDB"in window)return new t(e=>{const t=indexedDB.open(a.indexeddb,3);t.onsuccess=function(t){const n=t.target.result;e(n)},t.onupgradeneeded=function(e){const t=e.target.result;t.createObjectStore(a.indexeddbTable)}}).then(r=>{const s=new FileReader;return new t((t,o)=>{s.onload=(()=>{const s=new Blob([n],{type:n.type}),o=e(s),l={id:o,data:s,name:n.name,size:n.size,type:n.type,url:i},c=r.transaction([a.indexeddbTable],"readwrite"),u=c.objectStore(a.indexeddbTable).put(l,o);u.onerror=function(e){console.log("error storing data"),console.error(e)},c.oncomplete=function(){t({storage:"indexeddb",name:n.name,size:n.size,type:n.type,url:i,id:o})}}),s.onerror=(()=>o(this)),s.readAsDataURL(n)})});console.log("This browser doesn't support IndexedDB")},downloadFile(e,n){return new t(e=>{const t=indexedDB.open(n.indexeddb,3);t.onsuccess=function(t){const n=t.target.result;e(n)}}).then(r=>new t((t,s)=>{const o=r.transaction([n.indexeddbTable],"readonly"),i=o.objectStore(n.indexeddbTable).get(e.id);i.onsuccess=(()=>{o.oncomplete=(()=>{const n=i.result,r=new File([i.result.data],e.name,{type:i.result.type}),o=new FileReader;o.onload=(e=>{n.url=e.target.result,t(n)}),o.onerror=(()=>s(this)),o.readAsDataURL(r)})}),i.onerror=(()=>s(this))}))}});return n.title="IndexedDB",n}),e("skylark-formio/providers/storage/index",["./base64","./dropbox","./s3","./azure","./url","./indexeddb"],function(e,t,n,r,s,o){"use strict";return{base64:e,dropbox:t,s3:n,url:s,azure:r,indexeddb:o}}),e("skylark-formio/providers/Providers",["skylark-lodash","./address/index","./auth/index","./storage/index"],function(e,t,n,r){"use strict";return class{static addProvider(e,t,n){Providers.providers[e]=Providers.providers[e]||{},Providers.providers[e][t]=n}static addProviders(t,n){Providers.providers[t]=e.merge(Providers.providers[t],n)}static getProvider(e,t){if(Providers.providers[e]&&Providers.providers[e][t])return Providers.providers[e][t]}static getProviders(e){if(Providers.providers[e])return Providers.providers[e]}}}),e("skylark-formio/providers/index",["./Providers"],function(e){"use strict";return e}),e("vendors/jwt-decode/atob",[],function(){return window.atob}),e("vendors/jwt-decode/base64_url_decode",["./atob"],function(e){return function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(e(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(n)}catch(t){return e(n)}}}),e("vendors/jwt-decode/decode",["./base64_url_decode"],function(e){"use strict";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidTokenError",function(n,r){if("string"!=typeof n)throw new t("Invalid token specified");var s=!0===(r=r||{}).header?0:1;try{return JSON.parse(e(n.split(".")[s]))}catch(e){throw new t("Invalid token specified: "+e.message)}}}),e("skylark-formio/polyfills/custom-event-polyfill",[],function(){try{var e=new window.CustomEvent("test");if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,r;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}),e("skylark-formio/polyfills/ElementPolyfill",[],function(){"undefined"!=typeof window&&void 0!==window.document&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})),function(e,t){var n,r,s;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(e){return!1}}()||(n=Object.defineProperty,r=Object.prototype.hasOwnProperty.call(Object.prototype,"__defineGetter__"),s="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(e,t,o){if(n&&(e===window||e===document||e===Element.prototype||e instanceof Element))return n(e,t,o);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object.defineProperty called on non-object");if(!(o instanceof Object))throw new TypeError("Property description must be an object");var i=String(t),a="value"in o||"writable"in o,l="get"in o&&typeof o.get,c="set"in o&&typeof o.set;if(l){if("function"!==l)throw new TypeError("Getter must be a function");if(!r)throw new TypeError("Getters & setters cannot be defined on this javascript engine");if(a)throw new TypeError(s);Object.__defineGetter__.call(e,i,o.get)}else e[i]=o.value;if(c){if("function"!==c)throw new TypeError("Setter must be a function");if(!r)throw new TypeError("Getters & setters cannot be defined on this javascript engine");if(a)throw new TypeError(s);Object.__defineSetter__.call(e,i,o.set)}return"value"in o&&(e[i]=o.value),e});var o,i=function(){var e=!0,t=function(t,n,r,s){Object.defineProperty?Object.defineProperty(t,n,{configurable:!1===e||!!s,get:r}):t.__defineGetter__(n,r)};try{t({},"support")}catch(t){e=!1}return function(e,n){var r=this,s=[],o={},i=0,a=0,l=function(e){t(r,e,function(){return u(),s[e]},!1)},c=function(){if(i>=a)for(;a<i;++a)l(a)},u=function(){var t,r,a=arguments,l=/\s+/;if(a.length)for(r=0;r<a.length;++r)if(l.test(a[r]))throw(t=new SyntaxError('String "'+a[r]+'" contains an invalid character')).code=5,t.name="InvalidCharacterError",t;for(""===(s="object"==typeof e[n]?(""+e[n].baseVal).replace(/^\s+|\s+$/g,"").split(l):(""+e[n]).replace(/^\s+|\s+$/g,"").split(l))[0]&&(s=[]),o={},r=0;r<s.length;++r)o[s[r]]=!0;i=s.length,c()};return u(),t(r,"length",function(){return u(),i}),r.toLocaleString=r.toString=function(){return u(),s.join(" ")},r.item=function(e){return u(),s[e]},r.contains=function(e){return u(),!!o[e]},r.add=function(){u.apply(r,t=arguments);for(var t,a,l=0,d=t.length;l<d;++l)a=t[l],o[a]||(s.push(a),o[a]=!0);i!==s.length&&(i=s.length>>>0,"object"==typeof e[n]?e[n].baseVal=s.join(" "):e[n]=s.join(" "),c())},r.remove=function(){u.apply(r,t=arguments);for(var t,a={},l=0,d=[];l<t.length;++l)a[t[l]]=!0,delete o[t[l]];for(l=0;l<s.length;++l)a[s[l]]||d.push(s[l]);s=d,i=d.length>>>0,"object"==typeof e[n]?e[n].baseVal=s.join(" "):e[n]=s.join(" "),c()},r.toggle=function(e,t){return u.apply(r,[e]),void 0!==t?t?(r.add(e),!0):(r.remove(e),!1):o[e]?(r.remove(e),!1):(r.add(e),!0)},r}}();"DOMTokenList"in e&&!("classList"in(o=document.createElement("x"))&&(o.classList.toggle("x",!1)||o.className))||function(e){var t,n="DOMTokenList"in e&&e.DOMTokenList;n&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(e.DOMTokenList=i),"classList"in(t=document.createElement("span"))&&(t.classList.toggle("x",!1),t.classList.contains("x")&&(t.classList.constructor.prototype.toggle=function(e){var t=arguments[1];if(void 0===t){var n=!this.contains(e);return this[n?"add":"remove"](e),n}return this[(t=!!t)?"add":"remove"](e),t})),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a","b"),!e.classList.contains("b"))){var t=e.classList.constructor.prototype.add;e.classList.constructor.prototype.add=function(){for(var e=arguments,n=arguments.length,r=0;r<n;r++)t.call(this,e[r])}}}(),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a"),e.classList.add("b"),e.classList.remove("a","b"),e.classList.contains("b"))){var t=e.classList.constructor.prototype.remove;e.classList.constructor.prototype.remove=function(){for(var e=arguments,n=arguments.length,r=0;r<n;r++)t.call(this,e[r])}}}()}(e)}("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{})}),e("skylark-formio/polyfills/index",["./custom-event-polyfill","./ElementPolyfill"],function(){"use strict"}),e("skylark-formio/Formio",["./vendors/getify/npo","./vendors/fetch-ponyfill/fetch","./EventEmitter","./vendors/browser-cookies/cookies","./providers/index","skylark-lodash","./utils/utils","../vendors/jwt-decode/decode","./polyfills/index"],function(e,t,n,r,s,o,i,a){"use strict";const l=o.intersection,c=o.get,u=o.cloneDeep,d=o.defaults,{fetch:p,Headers:h}=t({Promise:e}),m=e=>typeof e==typeof!0,f=e=>null===e||void 0===e,g=e=>e&&"object"==typeof e;function y(e){const t=u(e);return Array.isArray(e)&&(t.skip=e.skip,t.limit=e.limit,t.serverCount=e.serverCount),t}class b{constructor(e,t={}){if(!(this instanceof b))return new b(e);if(this.base="",this.projectsUrl="",this.projectUrl="",this.projectId="",this.roleUrl="",this.rolesUrl="",this.roleId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.vsUrl="",this.vId="",this.vUrl="",this.query="",this.path=e,this.options=t,t.hasOwnProperty("base")?this.base=t.base:b.baseUrl?this.base=b.baseUrl:this.base=window.location.href.match(/http[s]?:\/\/api./)[0],!e)return this.projectUrl=b.projectUrl||`${this.base}/project`,this.projectsUrl=`${this.base}/project`,this.projectId=!1,void(this.query="");t.hasOwnProperty("project")&&(this.projectUrl=t.project);const n=this.projectUrl||b.projectUrl,r=/(^|\/)(project)($|\/[^/]+)/,s=-1!==e.search(r);n&&this.base===n&&!s&&(this.noProject=!0,this.projectUrl=this.base),0!==e.indexOf("http")&&0!==e.indexOf("//")&&(e=this.base+e);const o=this.getUrlParts(e);let i=[];const a=o[1]+o[2],l=(e=o.length>3?o[3]:"").split("?");l.length>1&&(e=l[0],this.query=`?${l[1]}`);const c=(t,n)=>{this[`${t}sUrl`]=`${n}/${t}`;const r=new RegExp(`/${t}/([^/]+)`);return-1!==e.search(r)&&(i=e.match(r),this[`${t}Url`]=i?n+i[0]:"",this[`${t}Id`]=i.length>1?i[1]:"",n+=i[0]),n},u=(e,t,n)=>{for(const r in e)if(e.hasOwnProperty(r)){const s=e[r];if(Array.isArray(s))u(s,t,!0);else{const e=c(s,t);t=n?t:e}}};if(this.projectUrl&&this.projectUrl!==this.base||(this.projectUrl=a),!this.noProject){if(s)u(["project"],a),e=e.replace(r,"");else if(a===this.base){if(o.length>3&&e.split("/").length>1){const t=e.split("/");t.shift(),this.projectId=t.shift(),e=`/${t.join("/")}`,this.projectUrl=`${a}/${this.projectId}`}}else o.length>2&&(o[2].split(".").length>2||a.includes("localhost"))&&(this.projectUrl=a,this.projectId=o[2].split(".")[0]);this.projectsUrl=this.projectsUrl||`${this.base}/project`}if(u(["role"],this.projectUrl),/(^|\/)(form)($|\/)/.test(e))u(["form",["submission","action","v"]],this.projectUrl);else{const t=new RegExp("/(submission|action|v)($|/.*)"),n=e.match(t);this.pathType=n&&n.length>1?n[1]:"",e=(e=e.replace(t,"")).replace(/\/$/,""),this.formsUrl=`${this.projectUrl}/form`,this.formUrl=e?this.projectUrl+e:"",this.formId=e.replace(/^\/+|\/+$/g,"");const r=["submission","action","v"];for(const t in r)if(r.hasOwnProperty(t)){const s=r[t];this[`${s}sUrl`]=`${this.projectUrl+e}/${s}`,this.pathType===s&&n.length>2&&n[2]&&(this[`${s}Id`]=n[2].replace(/^\/+|\/+$/g,""),this[`${s}Url`]=this.projectUrl+e+n[0])}}b.projectUrlSet||(b.projectUrl=this.projectUrl)}delete(t,n){const r=`${t}Id`,s=`${t}Url`;return this[r]||e.reject("Nothing to delete"),b.cache={},this.makeRequest(t,this[s],"delete",null,n)}index(e,t,n){const r=`${e}Url`;return(t=t||"")&&g(t)&&(t=`?${b.serialize(t.params)}`),this.makeRequest(e,this[r]+t,"get",null,n)}save(e,t,n){const r=`${e}Id`,s=`${e}Url`,o=this[r]||t._id?"put":"post";let i=this[r]?this[s]:this[`${e}sUrl`];return this[r]||!t._id||"put"!==o||i.includes(t._id)||(i+=`/${t._id}`),b.cache={},this.makeRequest(e,i+this.query,o,t,n)}load(t,n,r){const s=`${t}Id`,o=`${t}Url`;return n&&g(n)&&(n=b.serialize(n.params)),n=n?this.query?`${this.query}&${n}`:`?${n}`:this.query,this[s]?this.makeRequest(t,this[o]+n,"get",null,r):e.reject(`Missing ${s}`)}makeRequest(...e){return b.makeRequest(this,...e)}loadProject(e,t){return this.load("project",e,t)}saveProject(e,t){return this.save("project",e,t)}deleteProject(e){return this.delete("project",e)}static loadProjects(e,t){return g(e=e||"")&&(e=`?${b.serialize(e.params)}`),b.makeStaticRequest(`${b.baseUrl}/project${e}`,"GET",null,t)}loadRole(e){return this.load("role",null,e)}saveRole(e,t){return this.save("role",e,t)}deleteRole(e){return this.delete("role",e)}loadRoles(e){return this.index("roles",null,e)}loadForm(e,t){return this.load("form",e,t).then(n=>!n.revisions||isNaN(parseInt(this.vId))?n:"current"===n.revisions&&this.submissionId?n:(e&&g(e)&&(e=b.serialize(e.params)),e=e?this.query?`${this.query}&${e}`:`?${e}`:this.query,this.makeRequest("form",this.vUrl+e,"get",null,t).then(e=>(n.components=e.components,n.settings=e.settings,Object.assign({},n))).catch(()=>Object.assign({},n))))}saveForm(e,t){return this.save("form",e,t)}deleteForm(e){return this.delete("form",e)}loadForms(e,t){return this.index("forms",e,t)}loadSubmission(e,t){return this.load("submission",e,t).then(e=>(this.vId=e._fvid,this.vUrl=`${this.formUrl}/v/${this.vId}`,e))}saveSubmission(e,t){return isNaN(parseInt(this.vId))||(e._fvid=this.vId),this.save("submission",e,t)}deleteSubmission(e){return this.delete("submission",e)}loadSubmissions(e,t){return this.index("submissions",e,t)}loadAction(e,t){return this.load("action",e,t)}saveAction(e,t){return this.save("action",e,t)}deleteAction(e){return this.delete("action",e)}loadActions(e,t){return this.index("actions",e,t)}availableActions(){return this.makeRequest("availableActions",`${this.formUrl}/actions`)}actionInfo(e){return this.makeRequest("actionInfo",`${this.formUrl}/actions/${e}`)}isObjectId(e){const t=new RegExp("^[0-9a-fA-F]{24}$");return t.test(e)}getProjectId(){return this.projectId?this.isObjectId(this.projectId)?e.resolve(this.projectId):this.loadProject().then(e=>e._id):e.resolve("")}getFormId(){return this.formId?this.isObjectId(this.formId)?e.resolve(this.formId):this.loadForm().then(e=>e._id):e.resolve("")}currentUser(e){return b.currentUser(this,e)}accessInfo(){return b.accessInfo(this)}getToken(e){return b.getToken(Object.assign({formio:this},this.options,e))}setToken(e,t){return b.setToken(e,Object.assign({formio:this},this.options,t))}getTempToken(t,n,r){const s=b.getToken(r);if(!s)return e.reject("You must be authenticated to generate a temporary auth token.");const o=b.authUrl||this.projectUrl;return this.makeRequest("tempToken",`${o}/token`,"GET",null,{ignoreCache:!0,header:new h({"x-expire":t,"x-allow":n})})}getDownloadUrl(t){if(!this.submissionId)return e.resolve("");if(!t)return this.loadForm().then(e=>e?this.getDownloadUrl(e):"");let n=`/project/${t.project}`;n+=`/form/${t._id}`,n+=`/submission/${this.submissionId}`,n+="/download";let r=this.base+n;return new e((e,t)=>{this.getTempToken(3600,`GET:${n}`).then(t=>{r+=`?token=${t.key}`,e(r)},()=>{e(r)}).catch(t)})}uploadFile(e,t,n,r,o,i,a,l){const c={provider:e,method:"upload",file:t,fileName:n,dir:r};l=l||"file";const u=b.pluginWait("preRequest",c).then(()=>b.pluginGet("fileRequest",c).then(c=>{if(e&&f(c)){const c=s.getProvider("storage",e);if(c){const e=new c(this);return e.uploadFile(t,n,r,o,i,a,l)}throw"Storage provider not found"}return c||{url:""}}));return b.pluginAlter("wrapFileRequestPromise",u,c)}downloadFile(e,t){const n={method:"download",file:e},r=b.pluginWait("preRequest",n).then(()=>b.pluginGet("fileRequest",n).then(n=>{if(e.storage&&f(n)){const n=s.getProvider("storage",e.storage);if(n){const r=new n(this);return r.downloadFile(e,t)}throw"Storage provider not found"}return n||{url:""}}));return b.pluginAlter("wrapFileRequestPromise",r,n)}userPermissions(t,n,r){return e.all([void 0!==n?e.resolve(n):this.loadForm(),void 0!==t?e.resolve(t):this.currentUser(),void 0===r&&this.submissionId?this.loadSubmission():e.resolve(r),this.accessInfo()]).then(e=>{const t=e.shift(),n=e.shift()||{_id:!1,roles:[]},r=e.shift(),s=e.shift(),o={create:"create",read:"read",update:"edit",delete:"delete"},a={user:n,form:t,access:s,create:!1,read:!1,edit:!1,delete:!1};for(const e in s.roles)if(s.roles.hasOwnProperty(e)){const t=s.roles[e];if(t.default&&!1===n._id)n.roles.push(t._id);else if(t.admin&&-1!==n.roles.indexOf(t._id))return a.create=!0,a.read=!0,a.delete=!0,a.edit=!0,a}if(t&&t.submissionAccess)for(let e=0;e<t.submissionAccess.length;e++){const s=t.submissionAccess[e],[i,c]=s.type.split("_");["create","read","update","delete"].includes(i)&&l(s.roles,n.roles).length&&(a[o[i]]="all"===c||!r||n._id===r.owner)}return r&&i.eachComponent(t.components,(e,t)=>{if(e&&e.defaultPermission){const s=c(r.data,t),i=Array.isArray(s)?s:[s];i.forEach(t=>{t&&t._id&&n.roles.indexOf(t._id)>-1&&("read"===e.defaultPermission&&(a[o.read]=!0),"create"===e.defaultPermission&&(a[o.create]=!0,a[o.read]=!0),"write"===e.defaultPermission&&(a[o.create]=!0,a[o.read]=!0,a[o.update]=!0),"admin"===e.defaultPermission&&(a[o.create]=!0,a[o.read]=!0,a[o.update]=!0,a[o.delete]=!0))})}}),a})}canSubmit(){return this.userPermissions().then(e=>!e.create&&b.getUser()?this.userPermissions(null).then(e=>!!e.create&&(b.setUser(null),!0)):e.create)}getUrlParts(e){return b.getUrlParts(e,this)}static getUrlParts(e,t){const n=t&&t.base?t.base:b.baseUrl;let r="^(http[s]?:\\/\\/)";return n&&0===e.indexOf(n)?r+=`(${n.replace(/^http[s]?:\/\//,"")})`:r+="([^/]+)",r+="($|\\/.*)",e.match(new RegExp(r))}static serialize(e,t){const n=[];for(const s in e)e.hasOwnProperty(s)&&n.push(`${encodeURIComponent(s)}=${encodeURIComponent((r=e[s],t?t(r):r))}`);var r;return n.join("&")}static getRequestArgs(e,t,n,r,s,o){r=(r||"GET").toUpperCase(),o&&g(o)||(o={});const i={url:n,method:r,data:s||null,opts:o};return t&&(i.type=t),e&&(i.formio=e),i}static makeStaticRequest(e,t,n,r){const s=b.getRequestArgs(null,"",e,t,n,r),o=b.pluginWait("preRequest",s).then(()=>b.pluginGet("staticRequest",s).then(n=>f(n)?b.request(e,t,s.data,s.opts.header,s.opts):n));return b.pluginAlter("wrapStaticRequestPromise",o,s)}static makeRequest(e,t,n,r,s,o){if(!e)return b.makeStaticRequest(n,r,s,o);const i=b.getRequestArgs(e,t,n,r,s,o);i.opts=i.opts||{},i.opts.formio=e,i.opts.headers||(i.opts.headers={}),i.opts.headers=d(i.opts.headers,{Accept:"application/json","Content-type":"application/json"});const a=b.pluginWait("preRequest",i).then(()=>b.pluginGet("request",i).then(e=>f(e)?b.request(n,r,i.data,i.opts.header,i.opts):e));return b.pluginAlter("wrapRequestPromise",a,i)}static request(t,n,r,s,o){if(!t)return e.reject("No url provided");n=(n||"GET").toUpperCase(),m(o)&&(o={ignoreCache:o}),o&&g(o)||(o={});const i=btoa(t);if(!o.ignoreCache&&"GET"===n&&b.cache.hasOwnProperty(i))return e.resolve(y(b.cache[i]));const a=s||new h(o.headers||{Accept:"application/json","Content-type":"application/json"}),l=b.getToken(o);l&&!o.noToken&&a.append("x-jwt-token",l);const c={};a.forEach(function(e,t){c[t]=e});let u={method:n,headers:c,mode:"cors"};r&&(u.body=JSON.stringify(r)),((u=b.pluginAlter("requestOptions",u,t)).namespace||b.namespace)&&(o.namespace=u.namespace||b.namespace);const d=u.headers["x-jwt-token"],p=b.pluginAlter("wrapFetchRequestPromise",b.fetch(t,u),{url:t,method:n,data:r,opts:o}).then(s=>{if(!(s=b.pluginAlter("requestResponse",s,b,r)).ok)return 440===s.status?(b.setToken(null,o),b.events.emit("formio.sessionExpired",s.body)):401===s.status&&b.events.emit("formio.unauthorized",s.body),(s.headers.get("content-type").includes("application/json")?s.json():s.text()).then(t=>e.reject(t));const i=s.headers.get("x-jwt-token");let a=!1;if("GET"!==n||d||!i||o.external||t.includes("token=")||t.includes("x-jwt-token=")||(console.warn("Token was introduced in request."),a=!0),s.status>=200&&s.status<300&&i&&""!==i&&!a&&b.setToken(i,o),204===s.status)return{};const l=s.headers.get("content-type").includes("application/json")?s.json():s.text();return l.then(e=>{let t=s.headers.get("content-range");if(t&&g(e)){if("*"!==(t=t.split("/"))[0]){const n=t[0].split("-");e.skip=Number(n[0]),e.limit=n[1]-n[0]+1}e.serverCount="*"===t[1]?t[1]:Number(t[1])}if(!o.getHeaders)return e;const n={};return s.headers.forEach((e,t)=>{n[t]=e}),{result:e,headers:n}})}).then(e=>o.getHeaders?e:("GET"===n&&(b.cache[i]=e),y(e))).catch(t=>("Bad Token"===t&&(b.setToken(null,o),b.events.emit("formio.badToken",t)),t.message&&(t.message=`Could not connect to API server (${t.message})`,t.networkError=!0),"GET"===n&&delete b.cache[i],e.reject(t)));return p}static get token(){return b.tokens||(b.tokens={}),b.tokens.formioToken?b.tokens.formioToken:""}static set token(e){return b.tokens||(b.tokens={}),b.tokens.formioToken=e||""}static setToken(e="",t){e=e||"";var n=`${(t="string"==typeof t?{namespace:t}:t||{}).namespace||b.namespace||"formio"}Token`;if(b.tokens||(b.tokens={}),!b.tokens[n]||b.tokens[n]!==e){if(b.tokens[n]=e,!e){t.fromUser||(t.fromToken=!0,b.setUser(null,t));try{return localStorage.removeItem(n)}catch(e){return r.erase(n,{path:"/"})}}try{localStorage.setItem(n,e)}catch(t){r.set(n,e,{path:"/"})}return b.currentUser(t.formio,t)}}static getToken(e){const t=`${(e="string"==typeof e?{namespace:e}:e||{}).namespace||b.namespace||"formio"}Token`,n=e.decode?`${t}Decoded`:t;if(b.tokens||(b.tokens={}),b.tokens[n])return b.tokens[n];try{return b.tokens[t]=localStorage.getItem(t)||"",e.decode?(b.tokens[n]=b.tokens[t]?a(b.tokens[t]):{},b.tokens[n]):b.tokens[t]}catch(e){return b.tokens[t]=r.get(t),b.tokens[t]}}static setUser(e,t={}){var n=`${t.namespace||b.namespace||"formio"}User`;if(!e){t.fromToken||(t.fromUser=!0,b.setToken(null,t)),b.events.emit("formio.user",null);try{return localStorage.removeItem(n)}catch(e){return r.erase(n,{path:"/"})}}try{localStorage.setItem(n,JSON.stringify(e))}catch(t){r.set(n,JSON.stringify(e),{path:"/"})}b.events.emit("formio.user",e)}static getUser(e){var t=`${(e=e||{}).namespace||b.namespace||"formio"}User`;try{return JSON.parse(localStorage.getItem(t)||null)}catch(e){return JSON.parse(r.get(t))}}static setBaseUrl(e){b.baseUrl=e,b.projectUrlSet||(b.projectUrl=e)}static getBaseUrl(){return b.baseUrl}static setApiUrl(e){return b.setBaseUrl(e)}static getApiUrl(){return b.getBaseUrl()}static setAppUrl(e){console.warn("Formio.setAppUrl() is deprecated. Use Formio.setProjectUrl instead."),b.projectUrl=e,b.projectUrlSet=!0}static setProjectUrl(e){b.projectUrl=e,b.projectUrlSet=!0}static setAuthUrl(e){b.authUrl=e}static getAppUrl(){return console.warn("Formio.getAppUrl() is deprecated. Use Formio.getProjectUrl instead."),b.projectUrl}static getProjectUrl(){return b.projectUrl}static clearCache(){b.cache={}}static noop(){}static identity(e){return e}static deregisterPlugin(e){const t=b.plugins.length;return b.plugins=b.plugins.filter(t=>t!==e&&t.__name!==e||((t.deregister||b.noop).call(e,b),!1)),t!==b.plugins.length}static registerPlugin(e,t){b.plugins.push(e),b.plugins.sort((e,t)=>(t.priority||0)-(e.priority||0)),e.__name=t,(e.init||b.noop).call(e,b)}static getPlugin(e){for(const t of b.plugins)if(t.__name===e)return t;return null}static pluginWait(t,...n){return e.all(b.plugins.map(e=>(e[t]||b.noop).call(e,...n)))}static pluginGet(t,...n){const r=s=>{const o=b.plugins[s];return o?e.resolve((o[t]||b.noop).call(o,...n)).then(e=>f(e)?r(s+1):e):e.resolve(null)};return r(0)}static pluginAlter(e,t,...n){return b.plugins.reduce((t,r)=>(r[e]||b.identity)(t,...n),t)}static accessInfo(e){const t=e?e.projectUrl:b.projectUrl;return b.makeRequest(e,"accessInfo",`${t}/access`)}static projectRoles(e){const t=e?e.projectUrl:b.projectUrl;return b.makeRequest(e,"projectRoles",`${t}/role`)}static currentUser(t,n){let r=b.authUrl;r||(r=t?t.projectUrl:b.projectUrl||b.baseUrl),r+="/current";const s=b.getUser(n);if(s)return b.pluginAlter("wrapStaticRequestPromise",e.resolve(s),{url:r,method:"GET",options:n});const o=b.getToken(n);return n&&n.external||o?b.makeRequest(t,"currentUser",r,"GET",null,n).then(e=>(b.setUser(e,n),e)):b.pluginAlter("wrapStaticRequestPromise",e.resolve(null),{url:r,method:"GET",options:n})}static logout(e,t){(t=t||{}).formio=e,b.setToken(null,t),b.setUser(null,t),b.clearCache();const n=b.authUrl?b.authUrl:e?e.projectUrl:b.baseUrl;return b.makeRequest(e,"logout",`${n}/logout`)}static pageQuery(){if(b._pageQuery)return b._pageQuery;b._pageQuery={},b._pageQuery.paths=[];const e=location.hash.substr(1).replace(/\?/g,"&").split("&");let t=[];return location.search.substr(1).split("&").forEach(function(e){(t=e.split("=")).length>1&&(b._pageQuery[t[0]]=t[1]&&decodeURIComponent(t[1]))}),e.forEach(function(e){(t=e.split("=")).length>1?b._pageQuery[t[0]]=t[1]&&decodeURIComponent(t[1]):0===e.indexOf("/")&&(b._pageQuery.paths=e.substr(1).split("/"))}),b._pageQuery}static oAuthCurrentUser(e,t){return b.currentUser(e,{external:!0,headers:{Authorization:`Bearer ${t}`}})}static samlInit(e){e=e||{};const t=b.pageQuery();if(t.saml){b.setUser(null);const e=b.setToken(t.saml);let n=window.location.toString();return n=n.substring(0,n.indexOf("?")),window.location.hash&&(n+=window.location.hash),window.history.replaceState({},document.title,n),e}e.relay||(e.relay=window.location.href);const n=b.authUrl||b.projectUrl;return window.location.href=`${n}/saml/sso?relay=${encodeURI(e.relay)}`,!1}static oktaInit(t){if(t=t||{},void 0!==typeof OktaAuth&&(t.OktaAuth=OktaAuth),void 0===typeof t.OktaAuth){const t="Cannot find OktaAuth. Please include the Okta JavaScript SDK within your application. See https://developer.okta.com/code/javascript/okta_auth_sdk for an example.";return console.warn(t),e.reject(t)}return new e((e,n)=>{const r=t.OktaAuth;delete t.OktaAuth;var s=new r(t);s.tokenManager.get("accessToken").then(r=>{r?e(b.oAuthCurrentUser(t.formio,r.accessToken)):location.hash?s.token.parseFromUrl().then(n=>{s.tokenManager.add("accessToken",n),e(b.oAuthCurrentUser(t.formio,n.accessToken))}).catch(e=>{console.warn(e),n(e)}):(s.token.getWithRedirect({responseType:"token",scopes:t.scopes}),e(!1))}).catch(e=>{n(e)})})}static ssoInit(t,n){switch(t){case"saml":return b.samlInit(n);case"okta":return b.oktaInit(n);default:return console.warn("Unknown SSO type"),e.reject("Unknown SSO type")}}static requireLibrary(t,n,r,s){if(!b.libraries.hasOwnProperty(t)){b.libraries[t]={},b.libraries[t].ready=new e((e,n)=>{b.libraries[t].resolve=e,b.libraries[t].reject=n});const o=`${t}Callback`;s||window[o]||(window[o]=(()=>b.libraries[t].resolve()));const i=c(window,n);if(i)b.libraries[t].resolve(i);else if((r=Array.isArray(r)?r:[r]).forEach(e=>{let t={},n="";switch("string"==typeof e&&(e={type:"script",src:e}),e.type){case"script":n="script",t={src:e.src,type:"text/javascript",defer:!0,async:!0,referrerpolicy:"origin"};break;case"styles":n="link",t={href:e.src,rel:"stylesheet"}}const r=document.createElement(n);if(r.setAttribute)for(const e in t)r.setAttribute(e,t[e]);const{head:s}=document;s&&s.appendChild(r)}),s){const e=setInterval(()=>{const r=c(window,n);r&&(clearInterval(e),b.libraries[t].resolve(r))},200)}}return b.libraries[t].ready}static libraryReady(t){return b.libraries.hasOwnProperty(t)&&b.libraries[t].ready?b.libraries[t].ready:e.reject(`${t} library was not required.`)}}return b.libraries={},b.Promise=e,b.fetch=p,b.Headers=h,b.baseUrl="https://api.form.io",b.projectUrl=b.baseUrl,b.authUrl="",b.projectUrlSet=!1,b.plugins=[],b.cache={},b.Providers=s,b.version="---VERSION---",b.events=new n({wildcard:!1,maxListeners:0}),"object"!=typeof global||global.Formio||(global.Formio=b),"object"!=typeof window||window.Formio||(window.Formio=b),b}),e("skylark-formio/vendors/vanilla-text-mask/constants",[],function(){return{placeholderChar:"_",strFunction:"function"}}),e("skylark-formio/vendors/vanilla-text-mask/utilities",["./constants"],function(e){const t=e.placeholderChar,n=[];function r(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}const s="[]";return{convertMaskToPlaceholder:function(e=n,s=t){if(!r(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(s))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+`The placeholder character that was received is: ${JSON.stringify(s)}\n\n`+`The mask that was received is: ${JSON.stringify(e)}`);return e.map(e=>e instanceof RegExp?s:e).join("")},isArray:r,isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},isNil:function(e){return void 0===e||null===e},processCaretTraps:function(e){const t=[];let n;for(;-1!==(n=e.indexOf(s));)t.push(n),e.splice(n,1);return{maskWithoutCaretTraps:e,indexes:t}}}}),e("skylark-formio/vendors/vanilla-text-mask/adjustCaretPosition",[],function(){const e=[],t="";return function({previousConformedValue:n=t,previousPlaceholder:r=t,currentCaretPosition:s=0,conformedValue:o,rawValue:i,placeholderChar:a,placeholder:l,indexesOfPipedChars:c=e,caretTrapIndexes:u=e}){if(0===s||!i.length)return 0;const d=i.length,p=n.length,h=l.length,m=o.length,f=d-p,g=f>0;if(f>1&&!g&&0!==p)return s;let y,b,v=0;if(!g||n!==o&&o!==l){const e=o.toLowerCase(),n=i.toLowerCase(),u=n.substr(0,s).split(t),d=u.filter(t=>-1!==e.indexOf(t));b=d[d.length-1];const p=r.substr(0,d.length).split(t).filter(e=>e!==a).length,h=l.substr(0,d.length).split(t).filter(e=>e!==a).length,f=h!==p,k=void 0!==r[d.length-1]&&void 0!==l[d.length-2]&&r[d.length-1]!==a&&r[d.length-1]!==l[d.length-1]&&r[d.length-1]===l[d.length-2];!g&&(f||k)&&p>0&&l.indexOf(b)>-1&&void 0!==i[s]&&(y=!0,b=i[s]);const x=c.map(t=>e[t]),w=x.filter(e=>e===b).length,C=d.filter(e=>e===b).length,A=l.substr(0,l.indexOf(a)).split(t).filter((e,t)=>e===b&&i[t]!==e).length,E=A+C+w+(y?1:0);let _=0;for(let t=0;t<m;t++){const n=e[t];if(v=t+1,n===b&&_++,_>=E)break}}else v=s-f;if(g){let e=v;for(let t=v;t<=h;t++)if(l[t]===a&&(e=t),l[t]===a||-1!==u.indexOf(t)||t===h)return e}else if(y){for(let e=v-1;e>=0;e--)if(o[e]===b||-1!==u.indexOf(e)||0===e)return e}else for(let e=v;e>=0;e--)if(l[e-1]===a||-1!==u.indexOf(e)||0===e)return e}}),e("skylark-formio/vendors/vanilla-text-mask/conformToMask",["./utilities","./constants"],function(e,t){const{convertMaskToPlaceholder:n,isArray:r,processCaretTraps:s}=e,{strFunction:o}=t,i=t.placeholderChar,a=[],l="";return function(e=l,t=a,c={}){if(!r(t)){if(typeof t!==o)throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=t(e,c),t=s(t).maskWithoutCaretTraps}const{guide:u=!0,previousConformedValue:d=l,placeholderChar:p=i,placeholder:h=n(t,p),currentCaretPosition:m,keepCharPositions:f}=c,g=!1===u&&void 0!==d,y=e.length,b=d.length,v=h.length,k=t.length,x=y-b,w=x>0,C=m+(w?-x:0),A=C+Math.abs(x);if(!0===f&&!w){let t=l;for(let e=C;e<A;e++)h[e]===p&&(t+=p);e=e.slice(0,C)+t+e.slice(C,y)}const E=e.split(l).map((e,t)=>({char:e,isNew:t>=C&&t<A}));for(let e=y-1;e>=0;e--){const{char:t}=E[e];if(t!==p){const n=e>=C&&b===k;t===h[n?e-x:e]&&E.splice(e,1)}}let _=l,T=!1;e:for(let e=0;e<v;e++){const n=h[e];if(n===p){if(E.length>0)for(;E.length>0;){const{char:n,isNew:r}=E.shift();if(n===p&&!0!==g){_+=p;continue e}if(t[e].test(n)){if(!0===f&&!1!==r&&d!==l&&!1!==u&&w){const t=E.length;let r=null;for(let e=0;e<t;e++){const t=E[e];if(t.char!==p&&!1===t.isNew)break;if(t.char===p){r=e;break}}null!==r?(_+=n,E.splice(r,1)):e--}else _+=n;continue e}T=!0}!1===g&&(_+=h.substr(e,v));break}_+=n}if(g&&!1===w){let e=null;for(let t=0;t<_.length;t++)h[t]===p&&(e=t);_=null!==e?_.substr(0,e+1):l}return{conformedValue:_,meta:{someCharsRejected:T}}}}),e("skylark-formio/vendors/vanilla-text-mask/createTextMaskInputElement",["./utilities","./constants","./adjustCaretPosition","./conformToMask"],function(e,t,n,r){const{convertMaskToPlaceholder:s,isArray:o,processCaretTraps:i}=e,{strFunction:a}=t,l=t.placeholderChar,c="",u="none",d="object",p="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(e){const t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update(o,{inputElement:m,mask:f,guide:g,pipe:y,placeholderChar:b=l,keepCharPositions:v=!1,showMask:k=!1}=e){if(void 0===o&&(o=m.value),o===t.previousConformedValue)return;let x,w;if(typeof f===d&&void 0!==f.pipe&&void 0!==f.mask&&(y=f.pipe,f=f.mask),f instanceof Array&&(x=s(f,b)),!1===f)return;const C=function(e){if(isString(e))return e;if(isNumber(e))return String(e);if(void 0===e||null===e)return c;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+`received was:\n\n ${JSON.stringify(e)}`)}(o),{selectionEnd:A}=m,{previousConformedValue:E,previousPlaceholder:_}=t;let T;if(typeof f===a){if(!1===(w=f(C,{currentCaretPosition:A,previousConformedValue:E,placeholderChar:b})))return;const{maskWithoutCaretTraps:e,indexes:t}=i(w);T=t,x=s(w=e,b)}else w=f;const O={previousConformedValue:E,guide:g,placeholderChar:b,pipe:y,placeholder:x,currentCaretPosition:A,keepCharPositions:v},{conformedValue:S}=r(C,w,O),P=typeof y===a;let j={};P&&(!1===(j=y(S,{rawValue:C,...O}))?j={value:E,rejected:!0}:isString(j)&&(j={value:j}));const L=P?j.value:S,D=n({previousConformedValue:E,previousPlaceholder:_,conformedValue:L,placeholder:x,rawValue:C,currentCaretPosition:A,placeholderChar:b,indexesOfPipedChars:j.indexesOfPipedChars,caretTrapIndexes:T}),R=L===x&&0===D,I=k?x:c,M=R?I:L;var N,V;(t.previousConformedValue=M,t.previousPlaceholder=x,m.value!==M)&&(m.value=M,N=m,V=D,document.activeElement===N&&(p?h(()=>N.setSelectionRange(V,V,u),0):N.setSelectionRange(V,V,u)))}}}}),e("skylark-formio/vendors/vanilla-text-mask/maskInput",["./createTextMaskInputElement"],function(e){return function(t){const{inputElement:n}=t,r=e(t),s=({target:{value:e}})=>r.update(e);return n.addEventListener("input",s),r.update(n.value),{textMaskInputElement:r,destroy(){n.removeEventListener("input",s)}}}}),e("skylark-formio/Element",["./EventEmitter","./Formio","./utils/utils","skylark-i18next","skylark-lodash","skylark-moment","./vendors/vanilla-text-mask/maskInput"],function(e,t,n,r,s,o,i){"use strict";return class{constructor(t){this.options=Object.assign({language:"en",highlightErrors:!0,componentErrorClass:"formio-error-wrapper",componentWarningClass:"formio-warning-wrapper",row:"",namespace:"formio"},t||{}),this.id=n.getRandomComponentId(),this.eventHandlers=[],this.i18next=this.options.i18next||r,this.events=t&&t.events?t.events:new e({wildcard:!1,maxListeners:0}),this.defaultMask=null}on(e,t,n,r=!1){if(!this.events)return;const s=`${this.options.namespace}.${e}`;return t.id=this.id,t.internal=n,this.events[r?"once":"on"](s,t)}once(e,t,n){return this.on(e,t,n,!0)}onAny(e){if(this.events)return this.events.onAny(e)}off(e){if(!this.events)return;const t=`${this.options.namespace}.${e}`;s.each(this.events.listeners(t),e=>{e&&e.id===this.id&&this.events.off(t,e)})}emit(e,...t){this.events&&this.events.emit(`${this.options.namespace}.${e}`,...t)}addEventListener(e,t,n,r){if(e)return r||this.eventHandlers.push({id:this.id,obj:e,type:t,func:n}),"addEventListener"in e?e.addEventListener(t,n,!1):"attachEvent"in e&&e.attachEvent(`on${t}`,n),this}removeEventListener(e,t,n=null){const r=[];return this.eventHandlers.forEach((s,o)=>{s.id!==this.id||!e.removeEventListener||s.type!==t||n&&s.func!==n||(e.removeEventListener(t,s.func),r.push(o))}),r.length&&s.pullAt(this.eventHandlers,r),this}removeEventListeners(){this.eventHandlers.forEach(e=>{this.id===e.id&&e.type&&e.obj&&e.obj.removeEventListener&&e.obj.removeEventListener(e.type,e.func)}),this.eventHandlers=[]}removeAllEvents(e){s.each(this.events._events,(t,n)=>{s.each(t,t=>{t&&this.id===t.id&&(e||t.internal)&&this.events.off(n,t)})})}destroy(){this.removeEventListeners(),this.removeAllEvents()}appendTo(e,t){return t.appendChild(e),this}prependTo(e,t){if(t)if(t.firstChild)try{t.insertBefore(e,t.firstChild)}catch(n){console.warn(n),t.appendChild(e)}else t.appendChild(e);return this}removeChildFrom(e,t){if(t&&t.contains(e))try{t.removeChild(e)}catch(e){console.warn(e)}return this}ce(e,t,n=null){const r=document.createElement(e);return t&&this.attr(r,t),this.appendChild(r,n),r}appendChild(e,t){return Array.isArray(t)?t.forEach(t=>this.appendChild(e,t)):t instanceof HTMLElement||t instanceof Text?e.appendChild(t):t&&e.appendChild(this.text(t.toString())),this}maskPlaceholder(e){return e.map(e=>e instanceof RegExp?"_":e).join("")}setInputMask(e,t,r){if(e&&t){const s=n.getInputMask(t);this.defaultMask=s;try{e.mask&&e.mask.destroy(),e.mask=i({inputElement:e,mask:s})}catch(e){console.warn(e)}s.numeric&&e.setAttribute("pattern","\\d*"),r&&e.setAttribute("placeholder",this.maskPlaceholder(s))}}t(e,t){(t=t||{}).nsSeparator="::",t.keySeparator=".|.",t.pluralSeparator="._.",t.contextSeparator="._.";const n=this.i18next.t(e,t);return n||e}text(e){return document.createTextNode(this.t(e))}attr(e,t){e&&s.each(t,(t,n)=>{void 0!==t&&(0===n.indexOf("on")?this.addEventListener(e,n.substr(2).toLowerCase(),t):e.setAttribute(n,t))})}hasClass(e,t){return!!e&&(t=` ${t} `,` ${e.className} `.replace(/[\n\t\r]/g," ").indexOf(t)>-1)}addClass(e,t){if(!e)return this;const n=e.getAttribute("class");return n.includes(t)||e.setAttribute("class",`${n} ${t}`),this}removeClass(e,t){if(!e||!t)return this;let n=e.getAttribute("class");return n&&(n=n.replace(new RegExp(` ${t}`,"g"),""),e.setAttribute("class",n)),this}empty(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}evalContext(e){return Object.assign({_:s,utils:n,util:n,user:t.getUser(),moment:o,instance:this,self:this,token:t.getToken({decode:!0}),config:this.root&&this.root.form&&this.root.form.config?this.root.form.config:{}},e,s.get(this.root,"options.evalContext",{}))}interpolate(e,t){return n.interpolate(e,this.evalContext(t))}evaluate(e,t,r,s){return n.evaluate(e,this.evalContext(t),r,s)}hook(){const e=arguments[0];if(this.options&&this.options.hooks&&this.options.hooks[e])return this.options.hooks[e].apply(this,Array.prototype.slice.call(arguments,1));{const e="function"==typeof arguments[arguments.length-1]?arguments[arguments.length-1]:null;return e?e(null,arguments[1]):arguments[1]}}}}),e("skylark-formio/vendors/tooltip-js/Tooltip",["skylark-popper"],function(e){var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const n={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"};var r=function(){this.show=(()=>this._show(this.reference,this.options)),this.hide=(()=>this._hide()),this.dispose=(()=>this._dispose()),this.toggle=(()=>this._isOpen?this.hide():this.show()),this.updateTitleContent=(e=>this._updateTitleContent(e)),this._events=[],this._setTooltipNodeEvent=((e,t,n,r)=>{const s=e.relatedreference||e.toElement||e.relatedTarget,o=n=>{const s=n.relatedreference||n.toElement||n.relatedTarget;this._tooltipNode.removeEventListener(e.type,o),t.contains(s)||this._scheduleHide(t,r.delay,r,n)};return!!this._tooltipNode.contains(s)&&(this._tooltipNode.addEventListener(e.type,o),!0)})};return class{constructor(e,s){r.call(this),s=t({},n,s),e.jquery&&(e=e[0]),this.reference=e,this.options=s;const o="string"==typeof s.trigger?s.trigger.split(" ").filter(e=>-1!==["click","hover","focus"].indexOf(e)):[];this._isOpen=!1,this._popperOptions={},this._setEventListeners(e,o,s)}_create(e,t,n,r){const s=window.document.createElement("div");s.innerHTML=t.trim();const o=s.childNodes[0];o.id=`tooltip_${Math.random().toString(36).substr(2,10)}`,o.setAttribute("aria-hidden","false");const i=s.querySelector(this.options.innerSelector);return this._addTitleContent(e,n,r,i),o}_addTitleContent(e,t,n,r){if(1===t.nodeType||11===t.nodeType)n&&r.appendChild(t);else if((s=t)&&"[object Function]"==={}.toString.call(s)){const s=t.call(e);n?r.innerHTML=s:r.textContent=s}else n?r.innerHTML=t:r.textContent=t;var s}_show(n,r){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this;const s=n.getAttribute("title")||r.title;if(!s)return this;const o=this._create(n,r.template,s,r.html);n.setAttribute("aria-describedby",o.id);const i=this._findContainer(r.container,n);return this._append(o,i),this._popperOptions=t({},r.popperOptions,{placement:r.placement}),this._popperOptions.modifiers=t({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:r.offset}}),r.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={boundariesElement:r.boundariesElement}),this.popperInstance=new e(n,o,this._popperOptions),this._tooltipNode=o,this}_hide(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true"),this):this}_dispose(){return this._events.forEach(({func:e,event:t})=>{this.reference.removeEventListener(t,e)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}_findContainer(e,t){return"string"==typeof e?e=window.document.querySelector(e):!1===e&&(e=t.parentNode),e}_append(e,t){t.appendChild(e)}_setEventListeners(e,t,n){const r=[],s=[];t.forEach(e=>{switch(e){case"hover":r.push("mouseenter"),s.push("mouseleave");break;case"focus":r.push("focus"),s.push("blur");break;case"click":r.push("click"),s.push("click")}}),r.forEach(t=>{const r=t=>{!0!==this._isOpening&&(t.usedByTooltip=!0,this._scheduleShow(e,n.delay,n,t))};this._events.push({event:t,func:r}),e.addEventListener(t,r)}),s.forEach(t=>{const r=t=>{!0!==t.usedByTooltip&&this._scheduleHide(e,n.delay,n,t)};this._events.push({event:t,func:r}),e.addEventListener(t,r),"click"===t&&n.closeOnClickOutside&&document.addEventListener("mousedown",t=>{if(!this._isOpening)return;const n=this.popperInstance.popper;e.contains(t.target)||n.contains(t.target)||r(t)},!0)})}_scheduleShow(e,t,n){this._isOpening=!0;const r=t&&t.show||t||0;this._showTimeout=window.setTimeout(()=>this._show(e,n),r)}_scheduleHide(e,t,n,r){this._isOpening=!1;const s=t&&t.hide||t||0;window.setTimeout(()=>{if(window.clearTimeout(this._showTimeout),!1!==this._isOpen&&document.body.contains(this._tooltipNode)){if("mouseleave"===r.type){const s=this._setTooltipNodeEvent(r,e,t,n);if(s)return}this._hide(e,n)}},s)}_updateTitleContent(e){if(void 0===this._tooltipNode)return void(void 0!==this.options.title&&(this.options.title=e));const t=this._tooltipNode.parentNode.querySelector(this.options.innerSelector);this._clearTitleContent(t,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,e,this.options.html,t),this.options.title=e,this.popperInstance.update()}_clearTitleContent(e,t,n){1===n.nodeType||11===n.nodeType?t&&e.removeChild(n):t?e.innerHTML="":e.textContent=""}}}),e("skylark-formio/vendors/ismobilejs/isMobile",[],function(){var e=/iPhone/i,t=/iPod/i,n=/iPad/i,r=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,i=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,a=/Silk/i,l=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,u=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,h=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,f=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};return function(g){var y={userAgent:"",platform:"",maxTouchPoints:0};g||"undefined"==typeof navigator?"string"==typeof g?y.userAgent=g:g.userAgent&&(y={userAgent:g.userAgent,platform:g.platform,maxTouchPoints:g.maxTouchPoints||0}):y={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var b=y.userAgent,v=b.split("[FBAN");void 0!==v[1]&&(b=v[0]);void 0!==(v=b.split("Twitter"))[1]&&(b=v[0]);var k=function(e){return function(t){return t.test(e)}}(b),x={apple:{phone:k(e)&&!k(l),ipod:k(t),tablet:!k(e)&&(k(n)||f(y))&&!k(l),universal:k(r),device:(k(e)||k(t)||k(n)||k(r)||f(y))&&!k(l)},amazon:{phone:k(i),tablet:!k(i)&&k(a),device:k(i)||k(a)},android:{phone:!k(l)&&k(i)||!k(l)&&k(s),tablet:!k(l)&&!k(i)&&!k(s)&&(k(a)||k(o)),device:!k(l)&&(k(i)||k(a)||k(s)||k(o))||k(/\bokhttp\b/i)},windows:{phone:k(l),tablet:k(c),device:k(l)||k(c)},other:{blackberry:k(u),blackberry10:k(d),opera:k(p),firefox:k(m),chrome:k(h),device:k(u)||k(d)||k(p)||k(m)||k(h)},any:!1,phone:!1,tablet:!1};return x.any=x.apple.device||x.android.device||x.windows.device||x.other.device,x.phone=x.apple.phone||x.android.phone||x.windows.phone,x.tablet=x.apple.tablet||x.android.tablet||x.windows.tablet,x}}),e("skylark-formio/utils/calendarUtils",["skylark-moment","skylark-lodash"],function(e,t){"use strict";const n={INVALID:"You entered the Invalid Date",INCOMPLETE:"You entered an incomplete date.",greater:(e,t)=>`The entered date is greater than ${e.format(t)}`,less:(e,t)=>`The entered date is less than ${e.format(t)}`};function r(e,t){return{message:e,result:t}}function s(t,r,s,o){let i="",a=!0;if(s&&t.isValid()){const o=e(s,r);t>o&&(i=n.greater(o,r),a=!1)}if(o&&t.isValid()){const s=e(o,r);t<s&&(i=n.less(s,r),a=!1)}return{message:i,result:a}}return{CALENDAR_ERROR_MESSAGES:n,lessOrGreater:s,checkInvalidDate:function(o,i,a,l){const c=e(o,i,!0),u=c.isValid();if(!u){const c=o.match(/[^a-z0-9_]/gi),u=new RegExp(c.join("|"),"gi"),d=o.replace(/_*/gi,"").split(u),p=i[1]?i[1].split(u):i[0].split(u),h=t.findIndex(p,(e,t)=>1===e.length&&t===p.length-1),m=t.findIndex(p,e=>e.match(/yyyy/gi));if(d[m]/1e3<1)return r(n.INVALID,!1);if(d[0].length===p[0].length){const t=d.map((e,t)=>{let n=e;return e||t!==h?e||(n="01"):n="AM",c[t]&&(n=`${n}${c[t]}`),n}),o=e(t.join(""),i,!0);if(o.isValid()){const e=s(o,i[0],l,a);if(!e.result){const{message:t,result:n}=e;return r(t,n)}return r(n.INCOMPLETE,!1)}return r(n.INVALID,!1)}return r(n.INVALID,!1)}if(u&&-1===o.indexOf("_")){const e=s(c,i[0],l,a);if(!e.result){const{message:t,result:n}=e;return r(t,n)}}return r("",!0)}}});const t=require("./Custom"),n=require("./Date"),r=require("./Day"),s=require("./Email"),o=require("./JSON"),i=require("./Mask"),a=require("./Max"),l=require("./MaxDate"),c=require("./MaxLength"),u=require("./MaxWords"),d=require("./Min"),p=require("./MinDate"),h=require("./MinLength"),m=require("./MinWords"),f=require("./Pattern"),g=require("./Required"),y=require("./Select"),b=require("./Unique"),v=require("./Url"),k=require("./MinYear"),x=require("./MaxYear");module.exports={custom:t,date:n,day:r,email:s,json:o,mask:i,max:a,maxDate:l,maxLength:c,maxWords:u,min:d,minDate:p,minLength:h,minWords:m,pattern:f,required:g,select:y,unique:b,url:v,minYear:k,maxYear:x},e("skylark-formio/validator/rules/index",function(){}),e("skylark-formio/validator/Rules",["./rules/index"],function(e){"use strict";return class e{static addRule(t,n){e.rules[t]=n}static addRules(t){e.rules={...e.rules,...t}}static getRule(t){return e.rules[t]}static getRules(){return e.rules}}}),e("skylark-formio/validator/Validator",["skylark-lodash","../utils/utils","skylark-moment","../vendors/getify/npo","../vendors/fetch-ponyfill/fetch","../utils/calendarUtils","./Rules"],function(e,t,n,r,s,o,i){"use strict";const{fetch:a,Headers:l,Request:c}=s({Promise:r});class u{constructor(s={}){this.config=e.defaults(s,u.config),this.validators={required:{key:"validate.required",method:"validateRequired",message:e=>e.t(e.errorMessage("required"),{field:e.errorLabel,data:e.data}),check(e,n,r){if(!t.boolValue(n)||e.isValueHidden())return!0;const s=e.validators.some(e=>"calendar"===e);return!r&&s&&e.widget.enteredDate?!this.validators.calendar.check.call(this,e,n,r):!e.isEmpty(r)}},unique:{key:"validate.unique",message:e=>e.t(e.errorMessage("unique"),{field:e.errorLabel,data:e.data}),check(n,s,o){return!t.boolValue(s)||(!(o&&!e.isEmpty(o))||(!this.config.db||new r(r=>{const s=this.config.form,i=this.config.submission,a=`data.${n.path}`,l={form:s._id};e.isString(o)?l[a]={$regex:new RegExp(`^${t.escapeRegExCharacters(o)}$`),$options:"i"}:e.isPlainObject(o)&&o.address&&o.address.address_components&&o.address.place_id?l[`${a}.address.place_id`]={$regex:new RegExp(`^${t.escapeRegExCharacters(o.address.place_id)}$`),$options:"i"}:e.isArray(o)?l[a]={$all:o}:e.isObject(o)&&(l[a]={$eq:o}),l.deleted={$eq:null},this.config.db.findOne(l,(e,t)=>r(!e&&(!t||i._id&&t._id.toString()===i._id)))}).catch(()=>!1)))}},multiple:{key:"validate.multiple",message(e){const n=t.boolValue(e.component.multiple)||Array.isArray(e.emptyValue),r=e.component.validate.required,s=n?r?"array_nonempty":"array":"nonarray";return e.t(e.errorMessage(s),{field:e.errorLabel,data:e.data})},check(n,r,s){if(!n.validateMultiple())return!0;const o=t.boolValue(r),i=Array.isArray(n.emptyValue),a=Array.isArray(s),l=n.component.validate.required;return o?a?!l||!!s.length:!!e.isNil(s)&&!l:i||!a}},select:{key:"validate.select",message:e=>e.t(e.errorMessage("select"),{field:e.errorLabel,data:e.data}),check(n,r,s,o,i,u,d){if(!t.boolValue(r))return!0;if(!s||e.isEmpty(s))return!0;if(!d)return!0;const p=n.component,h={url:r,method:"GET",qs:{},json:!0,headers:{}};if(e.isBoolean(h.url)){if(h.url=!!h.url,!h.url||"url"!==p.dataSrc||!p.data.url||!p.searchField)return!0;h.url=p.data.url,h.qs[p.searchField]=s,p.filter&&(h.url+=(h.url.includes("?")?"&":"?")+p.filter),p.selectFields&&(h.qs.select=p.selectFields)}return!h.url||(h.url=t.interpolate(h.url,{data:n.data}),h.url+=(h.url.includes("?")?"&":"?")+e.chain(h.qs).map((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&").value(),p.data&&p.data.headers&&e.each(p.data.headers,e=>{e.key&&(h.headers[e.key]=e.value)}),p.authenticate&&this.config.token&&(h.headers["x-jwt-token"]=this.config.token),a(new c(h.url,{headers:new l(h.headers)})).then(e=>!!e.ok&&e.json()).then(e=>e&&e.length).catch(()=>!1))}},min:{key:"validate.min",message:(e,t)=>e.t(e.errorMessage("min"),{field:e.errorLabel,min:parseFloat(t),data:e.data}),check(t,n,r){const s=parseFloat(n);return!(!Number.isNaN(s)&&e.isNumber(r))||parseFloat(r)>=s}},max:{key:"validate.max",message:(e,t)=>e.t(e.errorMessage("max"),{field:e.errorLabel,max:parseFloat(t),data:e.data}),check(t,n,r){const s=parseFloat(n);return!(!Number.isNaN(s)&&e.isNumber(r))||parseFloat(r)<=s}},minSelectedCount:{key:"validate.minSelectedCount",message:(e,t)=>e.component.minSelectedCountMessage?e.component.minSelectedCountMessage:e.t(e.errorMessage("minSelectedCount"),{minCount:parseFloat(t),data:e.data}),check(e,t,n){const r=parseFloat(t);if(!r)return!0;const s=Object.keys(n).reduce((e,t)=>(n[t]&&e++,e),0);return s>=r}},maxSelectedCount:{key:"validate.maxSelectedCount",message:(e,t)=>e.component.maxSelectedCountMessage?e.component.maxSelectedCountMessage:e.t(e.errorMessage("maxSelectedCount"),{minCount:parseFloat(t),data:e.data}),check(e,t,n){const r=parseFloat(t);if(!r)return!0;const s=Object.keys(n).reduce((e,t)=>(n[t]&&e++,e),0);return s<=r}},minLength:{key:"validate.minLength",message:(e,t)=>e.t(e.errorMessage("minLength"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const r=parseInt(t,10);return!(r&&"string"==typeof n&&!e.isEmpty(n))||n.length>=r}},maxLength:{key:"validate.maxLength",message:(e,t)=>e.t(e.errorMessage("maxLength"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const r=parseInt(t,10);return!r||"string"!=typeof n||n.length<=r}},maxWords:{key:"validate.maxWords",message:(e,t)=>e.t(e.errorMessage("maxWords"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const r=parseInt(t,10);return!r||"string"!=typeof n||n.trim().split(/\s+/).length<=r}},minWords:{key:"validate.minWords",message:(e,t)=>e.t(e.errorMessage("minWords"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const r=parseInt(t,10);return!r||"string"!=typeof n||n.trim().split(/\s+/).length>=r}},email:{message:e=>e.t(e.errorMessage("invalid_email"),{field:e.errorLabel,data:e.data}),check:(e,t,n)=>!n||/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},url:{message:e=>e.t(e.errorMessage("invalid_url"),{field:e.errorLabel,data:e.data}),check:(e,t,n)=>!n||/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(n)},date:{message:e=>e.t(e.errorMessage("invalid_date"),{field:e.errorLabel,data:e.data}),check:(e,t,n)=>"Invalid date"!==n},day:{message:e=>e.t(e.errorMessage("invalid_day"),{field:e.errorLabel,data:e.data}),check(e,t,n){if(!n)return!0;const[r,s,o]=e.dayFirst?[0,1,2]:[1,0,2],i=n.split("/").map(e=>parseInt(e,10)),a=i[r],l=i[s],c=i[o],u=function(e,t){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return function(e){return!(e%400&&(!(e%100)||e%4))}(t)?29:28;default:return 31}}(l,c);return!(a<0||a>u)&&(!(l<0||l>12)&&!(c<0||c>9999))}},pattern:{key:"validate.pattern",message:(t,n)=>t.t(e.get(t,"component.validate.patternMessage",t.errorMessage("pattern"),{field:t.errorLabel,pattern:n,data:t.data})),check(e,t,n){const r=t;if(!r)return!0;const s=new RegExp(`^${r}$`);return s.test(n)}},json:{key:"validate.json",check(e,t,n,r,s,o){if(!t)return!0;const i=e.evaluate(t,{data:r,row:o,rowIndex:s,input:n});return null===i||i}},mask:{key:"inputMask",message:e=>e.t(e.errorMessage("mask"),{field:e.errorLabel,data:e.data}),check(e,n,r){let s;if(e.isMultipleMasksField){const t=r?r.maskName:void 0,n=e.getMaskByName(t);n&&(s=n),r=r?r.value:r}else s=n;return s=s?t.getInputMask(s):null,!r||!s||t.matchInputMask(r,s)}},custom:{key:"validate.custom",message:e=>e.t(e.errorMessage("custom"),{field:e.errorLabel,data:e.data}),check(e,t,n,r,s,o){if(!t)return!0;const i=e.evaluate(t,{valid:!0,data:r,rowIndex:s,row:o,input:n},"valid",!0);return null===i||i}},maxDate:{key:"maxDate",message(e,r){const s=t.getDateSetting(r);return e.t(e.errorMessage("maxDate"),{field:e.errorLabel,maxDate:n(s).format(e.format)})},check(r,s,o){if(r.isPartialDay&&r.isPartialDay(o))return!0;const i=n(o),a=t.getDateSetting(s);return!!e.isNull(a)||(a.setHours(0,0,0,0),i.isBefore(a)||i.isSame(a))}},minDate:{key:"minDate",message(e,r){const s=t.getDateSetting(r);return e.t(e.errorMessage("minDate"),{field:e.errorLabel,minDate:n(s).format(e.format)})},check(r,s,o){if(r.isPartialDay&&r.isPartialDay(o))return!0;const i=n(o),a=t.getDateSetting(s);return!!e.isNull(a)||(a.setHours(0,0,0,0),i.isAfter(a)||i.isSame(a))}},minYear:{key:"minYear",message:(e,t)=>e.t(e.errorMessage("minYear"),{field:e.errorLabel,minYear:t}),check(e,t,n){const r=t;let s=/\d{4}$/.exec(n);return s=s?s[0]:null,!+r||!+s||+s>=+r}},maxYear:{key:"maxYear",message:(e,t)=>e.t(e.errorMessage("maxYear"),{field:e.errorLabel,maxYear:t}),check(e,t,n){const r=t;let s=/\d{4}$/.exec(n);return s=s?s[0]:null,!+r||!+s||+s<=+r}},calendar:{key:"validate.calendar",messageText:"",message(e){return e.t(e.errorMessage(this.validators.calendar.messageText),{field:e.errorLabel,maxDate:n(e.dataValue).format(e.format)})},check(e,r,s,i,a){this.validators.calendar.messageText="";const l=e.getWidget(a);if(!l)return!0;const{settings:c,enteredDate:u}=l,{minDate:d,maxDate:p,format:h}=c,m=[t.convertFormatToMoment(h)];if(m[0].match(/M{3,}/g)&&m.push(m[0].replace(/M{3,}/g,"MM")),!s&&u){const{message:e,result:t}=o.checkInvalidDate(u,m,d,p);if(!t)return this.validators.calendar.messageText=e,t}return s&&u?n(s).format()!==n(u,m,!0).format()&&u.match(/_/gi)?(this.validators.calendar.messageText=o.CALENDAR_ERROR_MESSAGES.INCOMPLETE,!1):(l.enteredDate="",!0):void 0}}}}checkValidator(e,t,n,s,o,i,a,l){let c=null;c=t.method&&"function"==typeof e[t.method]?e[t.method](n,s,o,i,a,l):t.check.call(this,e,n,s,o,i,a,l);const u=r=>"string"==typeof r?r:!r&&t.message?t.message.call(this,e,n,i,a):"";return l?r.resolve(c).then(u):u(c)}validate(t,n,s,o,i,a,l){if(!t.conditionallyVisible())return!1;const c=this.validators[n],u=e.get(t.component,c.key,null),d=this.checkValidator(t,c,u,s,o,i,a,l),p=r=>!!r&&{message:e.get(r,"message",r),level:"warning"===e.get(r,"level")?"warning":"error",path:(t.path||"").replace(/[[\]]/g,".").replace(/\.\./g,".").split(".").map(t=>e.defaultTo(e.toNumber(t),t)),context:{validator:n,setting:u,key:t.key,label:t.label,value:s}};return l?r.resolve(d).then(p):p(d)}checkComponent(t,n,s,o=!1,i=!1){const a="undefined"!=typeof process&&"node"===e.get(process,"release.name")&&!e.defaultTo(t.component.persistent,!0);if(a||!1===t.component.validate)return i?r.resolve([]):[];n=n||t.rootValue,s=s||t.data;const l=t.component.multiple&&Array.isArray(t.validationValue)?t.validationValue:[t.validationValue],c=e.get(t,"component.validations");if(c&&Array.isArray(c)){const e=this.checkValidations(t,c,n,s,l,i),a=e=>o?e:e.filter(e=>"error"===e.level);return i?r.all(e).then(a):a(e)}const u=e.get(t,"component.validate.custom"),d=e.get(t,"component.validate.customMessage"),p=e(t.validators).chain().map(r=>this.validators.hasOwnProperty(r)?"required"!==r||l.length?e.map(l,(e,o)=>this.validate(t,r,e,n,o,s,i)):[this.validate(t,r,null,n,0,s,i)]:{message:`Validator for "${r}" is not defined`,level:"warning",context:{validator:r,key:t.key,label:t.label}}).flatten().value();t.component.validate=t.component.validate||{},t.component.validate.unique=t.component.unique,p.push(this.validate(t,"unique",t.validationValue,n,0,n,i)),t.component.validate.multiple=t.component.multiple,p.push(this.validate(t,"multiple",t.validationValue,n,0,n,i));const h=r=>(r=e(r).chain().flatten().compact().value(),(d||u)&&e.each(r,e=>{e.message=t.t(d||e.message,{field:t.errorLabel,data:n,row:s,error:e})}),o?r:e.reject(r,e=>"warning"===e.level));return i?r.all(p).then(h):h(p)}checkValidations(e,t,n,r,s,o){const i=t.map(t=>this.checkRule(e,t,n,r,s,o)),a=i.reduce((e,t)=>t?[...e,...t]:e,[]).filter(e=>e),l=a.reduce((e,t)=>(e[t.context.validator]=t,e),{});return Object.values(l)}checkRule(e,t,n,r,s,o){const a=i.getRule(t.rule),l=[];if(a){const i=new a(e,t.settings,this.config);s.map((s,a)=>{const c=i.check(s,n,r,o);!0!==c&&l.push({level:t.level||"error",message:e.t(t.message||i.defaultMessage,{settings:t.settings,field:e.errorLabel,data:n,row:r,error:c}),context:{key:e.key,index:a,label:e.label,validator:t.rule}})})}return 0!==l.length&&l}get check(){return this.checkComponent}get(){e.get.call(this,arguments)}each(){e.each.call(this,arguments)}has(){e.has.call(this,arguments)}}u.config={db:null,token:null,form:null,submission:null};const d=new u;return{instance:d,ValidationChecker:u}}),e("skylark-formio/templates/bootstrap/address/form.ejs",[],function(){return'{% if (ctx.mode.autocomplete) { %}\n  <div class="address-autocomplete-container">\n    <input\n      ref="{{ ctx.ref.searchInput }}"\n      {% for (var attr in ctx.inputAttributes) { %}\n        {{attr}}="{{ctx.inputAttributes[attr]}}"\n      {% } %}\n      value="{{ ctx.displayValue }}"\n      autocomplete="off"\n    >\n    {% if (!ctx.component.disableClearIcon) { %}\n      <i\n        class="address-autocomplete-remove-value-icon fa fa-times"\n        tabindex="{{ ctx.inputAttributes.tabindex }}"\n        ref="{{ ctx.ref.removeValueIcon }}"\n      ></i>\n    {% } %}\n  </div>\n{% } %}\n{% if (ctx.self.manualModeEnabled) { %}\n  <div class="form-check checkbox">\n    <label class="form-check-label">\n      <input\n        ref="{{ ctx.ref.modeSwitcher }}"\n        type="checkbox"\n        class="form-check-input"\n        tabindex="{{ ctx.inputAttributes.tabindex }}"\n        {% if (ctx.mode.manual) { %}checked=true{% } %}\n        {% if (ctx.disabled) { %}disabled=true{% } %}\n      >\n      <span>{{ ctx.component.switchToManualModeLabel }}</span>\n    </label>\n  </div>\n{% } %}\n{% if (ctx.self.manualMode) { %}\n  <div ref="{{ ctx.nestedKey }}">\n    {{ ctx.children }}\n  </div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/address/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builder/form.ejs",[],function(){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    {{ctx.sidebar}}\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">\n    {{ctx.form}}\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/builder/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderComponent/form.ejs",[],function(){return'<div class="builder-component" ref="dragComponent">\n  <div class="component-btn-group" data-noattach="true">\n    <div class="btn btn-xxs btn-danger component-settings-button component-settings-button-remove" ref="removeComponent">\n      <i class="{{ctx.iconClass(\'remove\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-copy" ref="copyComponent">\n      <i class="{{ctx.iconClass(\'copy\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-paste" ref="pasteComponent">\n      <i class="{{ctx.iconClass(\'save\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-edit-json" ref="editJson">\n      <i class="{{ctx.iconClass(\'wrench\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-move" ref="moveComponent">\n      <i class="{{ctx.iconClass(\'move\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-secondary component-settings-button component-settings-button-edit", ref="editComponent">\n      <i class="{{ctx.iconClass(\'cog\')}}"></i>\n    </div>\n  </div>\n  {{ctx.html}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderComponent/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderComponents/form.ejs",[],function(){return'<div class="builder-components drag-container formio-builder-{{ctx.type}}" ref="{{ctx.key}}-container">\n  {{ctx.html}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderComponents/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderEditForm/form.ejs",[],function(){return'<div class="row">\n  <div class="col col-sm-6">\n    <p class="lead">{{ctx.t(ctx.componentInfo.title)}} {{ctx.t(\'Component\')}}</p>\n  </div>\n  <div class="col col-sm-6">\n    <div class="float-right" style="margin-right: 20px; margin-top: 10px">\n      <a href="{{ctx.t(ctx.componentInfo.documentation)}}" target="_blank">\n        <i class="{{ctx.iconClass(\'new-window\')}}"></i> {{ctx.t(\'Help\')}}\n      </a>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col {% if (ctx.preview) { %}col-sm-6{% } else { %}col-sm-12{% } %}">\n    <div ref="editForm">\n        {{ctx.editForm}}\n    </div>\n    {% if (!ctx.preview) { %}\n    <div style="margin-top: 10px;">\n      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">{{ctx.t(\'Save\')}}</button>\n      <button class="btn btn-secondary" style="margin-right: 10px;" ref="cancelButton">{{ctx.t(\'Cancel\')}}</button>\n      <button class="btn btn-danger" ref="removeButton">{{ctx.t(\'Remove\')}}</button>\n    </div>\n    {% } %}\n  </div>\n  {% if (ctx.preview) { %}\n  <div class="col col-sm-6">\n    <div class="card panel preview-panel">\n      <div class="card-header">\n        <h4 class="card-title mb-0">{{ctx.t(\'Preview\')}}</h4>\n      </div>\n      <div class="card-body">\n        <div class="component-preview" ref="preview">\n          {{ctx.preview}}\n        </div>\n      </div>\n    </div>\n    {% if (ctx.componentInfo.help) { %}\n    <div class="card card-body bg-light formio-settings-help">\n      {{ ctx.t(ctx.componentInfo.help) }}\n    </div>\n    {% } %}\n    <div style="margin-top: 10px;">\n      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">{{ctx.t(\'Save\')}}</button>\n      <button class="btn btn-secondary" style="margin-right: 10px;" ref="cancelButton">{{ctx.t(\'Cancel\')}}</button>\n      <button class="btn btn-danger" ref="removeButton">{{ctx.t(\'Remove\')}}</button>\n    </div>\n  </div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderEditForm/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderPlaceholder/form.ejs",[],function(){return'<div\n  class="drag-and-drop-alert alert alert-info no-drag"\n  style="text-align:center;"\n  role="alert"\n  data-noattach="true"\n  data-position="{{ctx.position}}"\n>\n  {{ctx.t(\'Drag and Drop a form component\')}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderPlaceholder/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderSidebar/form.ejs",[],function(){return'<div id="{{ctx.groupId}}" class="accordion builder-sidebar{{ctx.scrollEnabled ? \' builder-sidebar_scroll\' : \'\'}}" ref="sidebar">\n  {% ctx.groups.forEach(function(group) { %}\n    {{ group }}\n  {% }) %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderSidebar/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderSidebarGroup/form.ejs",[],function(){return'<div class="card form-builder-panel" ref="group-panel-{{ctx.groupKey}}">\n  <div class="card-header form-builder-group-header" id="heading-{{ctx.groupKey}}">\n    <h5 class="mb-0 mt-0">\n      <button\n        class="btn btn-block builder-group-button"\n        type="button"\n        data-toggle="collapse"\n        data-target="#group-{{ctx.groupKey}}"\n        data-parent="#{{ctx.groupId}}"\n        aria-expanded="{{ctx.group.default}}"\n        aria-controls="group-{{ctx.groupKey}}"\n        ref="sidebar-anchor"\n      >\n        {{ctx.t(ctx.group.title)}}\n      </button>\n    </h5>\n  </div>\n  <div\n    id="group-{{ctx.groupKey}}"\n    class="collapse {{ctx.group.default ? \' show\' : \'\'}}"\n    data-parent="#{{ctx.groupId}}"\n    data-default="{{ctx.group.default}}"\n    aria-labelledby="heading-{{ctx.groupKey}}"\n    ref="sidebar-group"\n  >\n    <div id="group-container-{{ctx.groupKey}}" class="card-body no-drop p-2" ref="sidebar-container">\n      {% !ctx.group.componentOrder || ctx.group.componentOrder.forEach(function(componentKey) { %}\n      <span\n        data-group="{{ctx.groupKey}}"\n        data-key="{{ctx.group.components[componentKey].key}}"\n        data-type="{{ctx.group.components[componentKey].schema.type}}"\n        class="btn btn-primary btn-sm btn-block formcomponent drag-copy"\n      >\n        {% if (ctx.group.components[componentKey].icon) { %}\n          <i class="{{ctx.iconClass(ctx.group.components[componentKey].icon)}}" style="margin-right: 5px;"></i>\n        {% } %}\n        {{ctx.t(ctx.group.components[componentKey].title)}}\n        </span>\n      {% }) %}\n      {{ctx.subgroups.join(\'\')}}\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderSidebarGroup/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderWizard/form.ejs",[],function(){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    {{ctx.sidebar}}\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea">\n    <ol class="breadcrumb">\n      {% ctx.pages.forEach(function(page, pageIndex) { %}\n      <li>\n        <span title="{{page.title}}" class="mr-2 badge {% if (pageIndex === ctx.self.page) { %}badge-primary{% } else { %}badge-info{% } %} wizard-page-label" ref="gotoPage">{{page.title}}</span>\n      </li>\n      {% }) %}\n      <li>\n        <span title="{{ctx.t(\'Create Page\')}}" class="mr-2 badge badge-success wizard-page-label" ref="addPage">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(\'Page\')}}\n        </span>\n      </li>\n    </ol>\n    <div ref="form">\n      {{ctx.form}}\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderWizard/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/button/form.ejs",[],function(){return'<{{ctx.input.type}}\n  ref="button"\n  {% for (var attr in ctx.input.attr) { %}\n  {{attr}}="{{ctx.input.attr[attr]}}"\n  {% } %}\n>\n{% if (ctx.component.leftIcon) { %}<span class="{{ctx.component.leftIcon}}"></span>&nbsp;{% } %}\n{{ctx.input.content}}\n{% if (ctx.component.tooltip) { %}\n  <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n{% } %}\n{% if (ctx.component.rightIcon) { %}&nbsp;<span class="{{ctx.component.rightIcon}}"></span>{% } %}\n</{{ctx.input.type}}>\n<div ref="buttonMessageContainer">\n  <span class="help-block" ref="buttonMessage"></span>\n</div>\n'}),e("skylark-formio/templates/bootstrap/button/html.ejs",[],function(){return"\n"}),e("skylark-formio/templates/bootstrap/button/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/checkbox/form.ejs",[],function(){return'<div class="form-check checkbox">\n  <label class="{{ctx.input.labelClass}} form-check-label">\n    <{{ctx.input.type}}\n      ref="input"\n      {% for (var attr in ctx.input.attr) { %}\n      {{attr}}="{{ctx.input.attr[attr]}}"\n      {% } %}\n      {% if (ctx.checked) { %}checked=true{% } %}\n      >\n    {% if (!ctx.self.labelIsHidden()) { %}<span>{{ctx.input.label}}</span>{% } %}\n    {% if (ctx.component.tooltip) { %}\n      <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n    {% } %}\n    {{ctx.input.content}}\n    </{{ctx.input.type}}>\n  </label>\n</div>\n'}),e("skylark-formio/templates/bootstrap/checkbox/html.ejs",[],function(){return'<label class="{{ctx.input.labelClass}}">\n    {{ctx.input.content}}\n    {% if (!ctx.self.labelIsHidden()) { %}<span>{{ctx.input.label}}</span>{% } %}\n</label>\n<div ref="value">{% if (ctx.checked) { %}True{% } else { %}False{% } %}</div>\n'}),e("skylark-formio/templates/bootstrap/checkbox/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/columns/form.ejs",[],function(){return'{% ctx.component.columns.forEach(function(column, index) { %}\n<div class="\n    col-{{column.size}}-{{column.width}}\n    col-{{column.size}}-offset-{{column.offset}}\n    col-{{column.size}}-push-{{column.push}}\n    col-{{column.size}}-pull-{{column.pull}}\n  " ref="{{ctx.columnKey}}">\n  {{ctx.columnComponents[index]}}\n</div>\n{% }) %}\n'}),e("skylark-formio/templates/bootstrap/columns/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/component/form.ejs",[],function(){return'<div id="{{ctx.id}}" class="{{ctx.classes}}"{% if (ctx.styles) { %} styles="{{ctx.styles}}"{% } %} ref="component">\n  {% if (ctx.visible) { %}\n  {{ctx.children}}\n  <div ref="messageContainer" class="formio-errors invalid-feedback"></div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/component/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/componentModal/form.ejs",[],function(){return'<div class="formio-component-modal-wrapper" ref="componentModalWrapper">\n  <div ref="openModalWrapper"></div>\n\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="modalWrapper">\n    <div class="formio-dialog-overlay" ref="modalOverlay"></div>\n    <div class="formio-dialog-content" ref="modalContents">\n      <div ref="modalContents">\n        {% if (ctx.visible) { %}\n        {{ctx.children}}\n        {% } %}\n        <div class="formio-dialog-buttons">\n          <button class="btn btn-success formio-dialog-button" ref="modalSave">Save</button>\n        </div>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="modalClose"></button>\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/componentModal/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/components/form.ejs",[],function(){return"{{ ctx.children.join('') }}\n"}),e("skylark-formio/templates/bootstrap/components/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/container/form.ejs",[],function(){return'<div ref="{{ctx.nestedKey}}">\n  {{ctx.children}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/container/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/datagrid/form.ejs",[],function(){return'<table class="table datagrid-table table-bordered\n    {{ ctx.component.striped ? \'table-striped\' : \'\'}}\n    {{ ctx.component.hover ? \'table-hover\' : \'\'}}\n    {{ ctx.component.condensed ? \'table-sm\' : \'\'}}\n    " {% if (ctx.component.layoutFixed) { %}style="table-layout: fixed;"{% } %}>\n  {% if (ctx.hasHeader) { %}\n  <thead>\n    <tr>\n      {% if (ctx.component.reorder) { %}<th></th>{% } %}\n      {% ctx.columns.forEach(function(col) { %}\n        <th class="{{col.validate && col.validate.required ? \'field-required\' : \'\'}}">\n          {{ col.hideLabel ? \'\' : ctx.t(col.label || col.title) }}\n          {% if (col.tooltip) { %} <i ref="tooltip" data-title="{{col.tooltip}}" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>{% } %}\n        </th>\n      {% }) %}\n      {% if (ctx.hasExtraColumn) { %}\n      <th>\n        {% if (!ctx.builder && ctx.hasAddButton && ctx.hasTopSubmit) { %}\n        <button class="btn btn-primary formio-button-add-row" ref="{{ctx.datagridKey}}-addRow">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i>{{ctx.t(ctx.component.addAnother || \'Add Another\')}}\n        </button>\n        {% } %}\n      </th>\n      {% } %}\n    </tr>\n  </thead>\n  {% } %}\n  <tbody ref="{{ctx.datagridKey}}-tbody">\n    {% ctx.rows.forEach(function(row, index) { %}\n    {% if (ctx.hasGroups && ctx.groups[index]) { %}\n    <tr ref="{{ctx.datagridKey}}-group-header" class="datagrid-group-header{{ctx.hasToggle ? \' clickable\' : \'\'}}">\n      <td\n        ref="{{ctx.datagridKey}}-group-label"\n        colspan="{{ctx.numColumns}}"\n        class="datagrid-group-label">{{ctx.groups[index].label}}</td>\n    </tr>\n    {% } %}\n    <tr ref="{{ctx.datagridKey}}-row">\n      {% if (ctx.component.reorder) { %}\n        <td>\n          <button type="button" class="formio-drag-button btn btn-default fa fa-bars"></button>\n        </td>\n      {% } %}\n      {% ctx.columns.forEach(function(col) { %}\n        <td ref="{{ctx.datagridKey}}">\n          {{row[col.key]}}\n        </td>\n      {% }) %}\n      {% if (ctx.hasExtraColumn) { %}\n        {% if (!ctx.builder && ctx.hasRemoveButtons) { %}\n        <td>\n          <button type="button" class="btn btn-secondary formio-button-remove-row" ref="{{ctx.datagridKey}}-removeRow">\n            <i class="{{ctx.iconClass(\'remove-circle\')}}"></i>\n          </button>\n        </td>\n        {% } %}\n        {% if (ctx.canAddColumn) { %}\n        <td ref="{{ctx.key}}-container">\n          {{ctx.placeholder}}\n        </td>\n        {% } %}\n      {% } %}\n    </tr>\n    {% }) %}\n  </tbody>\n  {% if (!ctx.builder && ctx.hasAddButton && ctx.hasBottomSubmit) { %}\n  <tfoot>\n    <tr>\n      <td colspan="{{ctx.numColumns + 1}}">\n        <button class="btn btn-primary formio-button-add-row" ref="{{ctx.datagridKey}}-addRow">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(ctx.component.addAnother || \'Add Another\')}}\n        </button>\n      </td>\n    </tr>\n  </tfoot>\n  {% } %}\n</table>\n'}),e("skylark-formio/templates/bootstrap/datagrid/html.ejs",[],function(){return"<table class=\"table datagrid-table table-bordered\n    {{ ctx.component.striped ? 'table-striped' : ''}}\n    {{ ctx.component.hover ? 'table-hover' : ''}}\n    {{ ctx.component.condensed ? 'table-sm' : ''}}\n    \">\n  {% if (ctx.hasHeader) { %}\n  <thead>\n    <tr>\n      {% ctx.columns.forEach(function(col) { %}\n        <th class=\"{{col.validate && col.validate.required ? 'field-required' : ''}}\">\n          {{ col.hideLabel ? '' : ctx.t(col.label || col.title) }}\n          {% if (col.tooltip) { %} <i ref=\"tooltip\" data-title=\"{{col.tooltip}}\" class=\"{{ctx.iconClass('question-sign')}} text-muted\"></i>{% } %}\n        </th>\n      {% }) %}\n    </tr>\n  </thead>\n  {% } %}\n  <tbody>\n    {% ctx.rows.forEach(function(row) { %}\n    <tr>\n      {% ctx.columns.forEach(function(col) { %}\n        <td ref=\"{{ctx.datagridKey}}\">\n          {{row[col.key]}}\n        </td>\n      {% }) %}\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n"}),e("skylark-formio/templates/bootstrap/datagrid/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/day/form.ejs",[],function(){return'<div class="row">\n  {% if (ctx.dayFirst && ctx.showDay) { %}\n  <div class="col col-xs-3">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-day" class="{% if(ctx.component.fields.day.required) { %}field-required{% } %}">{{ctx.t(\'Day\')}}</label>\n    {% } %}\n    <div>{{ctx.day}}</div>\n  </div>\n  {% } %}\n  {% if (ctx.showMonth) { %}\n  <div class="col col-xs-4">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-month" class="{% if(ctx.component.fields.month.required) { %}field-required{% } %}">{{ctx.t(\'Month\')}}</label>\n    {% } %}\n    <div>{{ctx.month}}</div>\n  </div>\n  {% } %}\n  {% if (!ctx.dayFirst && ctx.showDay) { %}\n  <div class="col col-xs-3">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-day" class="{% if(ctx.component.fields.day.required) { %}field-required{% } %}">{{ctx.t(\'Day\')}}</label>\n    {% } %}\n    <div>{{ctx.day}}</div>\n  </div>\n  {% } %}\n  {% if (ctx.showYear) { %}\n  <div class="col col-xs-5">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-year" class="{% if(ctx.component.fields.year.required) { %}field-required{% } %}">{{ctx.t(\'Year\')}}</label>\n    {% } %}\n    <div>{{ctx.year}}</div>\n  </div>\n  {% } %}\n</div>\n<input name="ctx.data[day]" type="hidden" class="form-control" lang="en" value="" ref="input">\n'}),e("skylark-formio/templates/bootstrap/day/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/dialog/form.ejs",[],function(){return'<div class="formio-dialog formio-dialog-theme-default component-settings">\n  <div class="formio-dialog-overlay" ref="dialogOverlay"></div>\n  <div class="formio-dialog-content" ref="dialogContents">\n    <div ref="dialogContents"></div>\n    <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="dialogClose"></button>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/dialog/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/editgrid/form.ejs",[],function(){return'<ul class="editgrid-listgroup list-group\n    {{ ctx.component.striped ? \'table-striped\' : \'\'}}\n    {{ ctx.component.bordered ? \'table-bordered\' : \'\'}}\n    {{ ctx.component.hover ? \'table-hover\' : \'\'}}\n    {{ ctx.component.condensed ? \'table-sm\' : \'\'}}\n    ">\n  {% if (ctx.header) { %}\n  <li class="list-group-item list-group-header">\n    {{ctx.header}}\n  </li>\n  {% } %}\n  {% ctx.rows.forEach(function(row, rowIndex) { %}\n  <li class="list-group-item" ref="{{ctx.ref.row}}">\n    {{row}}\n    {% if (ctx.openRows[rowIndex] && !ctx.readOnly) { %}\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="{{ctx.ref.saveRow}}">{{ctx.t(ctx.component.saveRow || \'Save\')}}</button>\n      {% if (ctx.component.removeRow) { %}\n      <button class="btn btn-danger" ref="{{ctx.ref.cancelRow}}">{{ctx.t(ctx.component.removeRow || \'Cancel\')}}</button>\n      {% } %}\n    </div>\n    {% } %}\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        {{ctx.errors[rowIndex]}}\n      </div>\n    </div>\n  </li>\n  {% }) %}\n  {% if (ctx.footer) { %}\n  <li class="list-group-item list-group-footer">\n    {{ctx.footer}}\n  </li>\n  {% } %}\n</ul>\n{% if (!ctx.readOnly && ctx.hasAddButton) { %}\n<button class="btn btn-primary" ref="{{ctx.ref.addRow}}">\n  <i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(ctx.component.addAnother || \'Add Another\')}}\n</button>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/editgrid/html.ejs",[],function(){return'<ul class="editgrid-listgroup list-group\n    {{ ctx.component.striped ? \'table-striped\' : \'\'}}\n    {{ ctx.component.bordered ? \'table-bordered\' : \'\'}}\n    {{ ctx.component.hover ? \'table-hover\' : \'\'}}\n    {{ ctx.component.condensed ? \'table-sm\' : \'\'}}\n    ">\n  {% if (ctx.header) { %}\n  <li class="list-group-item list-group-header">\n    {{ctx.header}}\n  </li>\n  {% } %}\n  {% ctx.rows.forEach(function(row, rowIndex) { %}\n  <li class="list-group-item" ref="{{ctx.ref.row}}">\n    {{row}}\n    {% if (ctx.openRows[rowIndex] && !ctx.readOnly) { %}\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="{{ctx.ref.saveRow}}">{{ctx.t(ctx.component.saveRow || \'Save\')}}</button>\n      {% if (ctx.component.removeRow) { %}\n      <button class="btn btn-danger" ref="{{ctx.ref.cancelRow}}">{{ctx.t(ctx.component.removeRow || \'Cancel\')}}</button>\n      {% } %}\n    </div>\n    {% } %}\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        {{ctx.errors[rowIndex]}}\n      </div>\n    </div>\n  </li>\n  {% }) %}\n  {% if (ctx.footer) { %}\n  <li class="list-group-item list-group-footer">\n    {{ctx.footer}}\n  </li>\n  {% } %}\n</ul>\n'}),e("skylark-formio/templates/bootstrap/editgrid/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/field/form.ejs",[],function(){return"{% if (!ctx.label.hidden && ctx.label.labelPosition !== 'bottom') { %}\n  {{ ctx.labelMarkup }}\n{% } %}\n\n{% if (ctx.label.hidden && ctx.label.className && ctx.component.validate.required) { %}\n  <label class=\"{{ctx.label.className}}\"></label>\n{% } %}\n\n{{ctx.element}}\n\n{% if (!ctx.label.hidden && ctx.label.labelPosition === 'bottom') { %}\n  {{ ctx.labelMarkup }}\n{% } %}\n{% if (ctx.component.description) { %}\n  <div class=\"form-text text-muted\">{{ctx.t(ctx.component.description)}}</div>\n{% } %}\n"}),e("skylark-formio/templates/bootstrap/field/align.ejs",[],function(){return'<div class="field-wrapper\n  {{ctx.isRightPosition ? \'field-wrapper--reverse\' : \'\'}}">\n  {% if (!ctx.label.hidden) { %}\n    <div class="field-label\n      {{ctx.isRightAlign ? \'field-label--right\' : \'\'}}"\n      style="{{ctx.labelStyles}}">\n    {{ ctx.labelMarkup }}\n    </div>\n  {% } %}\n\n  {% if (ctx.label.hidden && ctx.label.className && ctx.component.validate.required) { %}\n    <div class="field-label\n      {{ctx.isRightAlign ? \'field-label--right\' : \'\'}}"\n      style="{{ctx.labelStyles}}">\n      <label class="{{ctx.label.className}}"></label>\n    </div>\n  {% } %}\n\n  <div class="filed-content" style="{{ctx.contentStyles}}">\n    {{ctx.element}}\n  </div>\n</div>\n\n{% if (ctx.component.description) { %}\n  <div class="form-text text-muted">{{ctx.t(ctx.component.description)}}</div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/field/index",["./form.ejs","./align.ejs"],function(e,t){"use strict";return{form:e,align:t}}),e("skylark-formio/templates/bootstrap/fieldset/form.ejs",[],function(){return'<fieldset>\n  {% if (ctx.component.legend) { %}\n  <legend ref="header" class="{{ctx.component.collapsible ? \'formio-clickable\' : \'\'}}">\n    {{ctx.t(ctx.component.legend)}}\n    {% if (ctx.component.tooltip) { %}\n      <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n    {% } %}\n  </legend>\n  {% } %}\n  {% if (!ctx.collapsed) { %}\n  <div class="fieldset-body" ref="{{ctx.nestedKey}}">\n    {{ctx.children}}\n  </div>\n  {% } %}\n</fieldset>\n'}),e("skylark-formio/templates/bootstrap/fieldset/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/file/form.ejs",[],function(){return'{% if (!ctx.self.imageUpload) { %}\n  <ul class="list-group list-group-striped">\n    <li class="list-group-item list-group-header hidden-xs hidden-sm">\n      <div class="row">\n        {% if (!ctx.disabled) { %}\n          <div class="col-md-1"></div>\n        {% } %}\n        <div class="col-md-{% if (ctx.self.hasTypes) { %}7{% } else { %}9{% } %}"><strong>{{ctx.t(\'File Name\')}}</strong></div>\n        <div class="col-md-2"><strong>{{ctx.t(\'Size\')}}</strong></div>\n        {% if (ctx.self.hasTypes) { %}\n          <div class="col-md-2"><strong>{{ctx.t(\'Type\')}}</strong></div>\n        {% } %}\n      </div>\n    </li>\n    {% ctx.files.forEach(function(file) { %}\n      <li class="list-group-item">\n        <div class="row">\n          {% if (!ctx.disabled) { %}\n            <div class="col-md-1"><i class="{{ctx.iconClass(\'remove\')}}" ref="removeLink"></i></div>\n          {% } %}\n          <div class="col-md-{% if (ctx.self.hasTypes) { %}7{% } else { %}9{% } %}">\n            {% if (ctx.component.uploadOnly) { %}\n              {{file.originalName || file.name}}\n            {% } else { %}\n              <a href="{{file.url || \'#\'}}" target="_blank" ref="fileLink">{{file.originalName || file.name}}</a>\n            {% } %}\n          </div>\n          <div class="col-md-2">{{ctx.fileSize(file.size)}}</div>\n          {% if (ctx.self.hasTypes && !ctx.disabled) { %}\n            <div class="col-md-2">\n              <select class="file-type" ref="fileType">\n                {% ctx.component.fileTypes.map(function(type) { %}\n                  <option class="test" value="{{ type.value }}" {% if (type.label === file.fileType) { %}selected="selected"{% } %}>{{ type.label }}</option>\n                {% }); %}\n              </select>\n            </div>\n          {% } %}\n          {% if (ctx.self.hasTypes && ctx.disabled) { %}\n          <div class="col-md-2">{{file.fileType}}</div>\n          {% } %}\n        </div>\n      </li>\n    {% }) %}\n  </ul>\n{% } else { %}\n  <div>\n    {% ctx.files.forEach(function(file) { %}\n      <div>\n        <span>\n          <img ref="fileImage" src="" alt="{{file.originalName || file.name}}" style="width:{{ctx.component.imageSize}}px">\n          {% if (!ctx.disabled) { %}\n            <i class="{{ctx.iconClass(\'remove\')}}" ref="removeLink"></i>\n          {% } %}\n        </span>\n      </div>\n    {% }) %}\n  </div>\n{% } %}\n{% if (!ctx.disabled && (ctx.component.multiple || !ctx.files.length)) { %}\n  {% if (ctx.self.useWebViewCamera) { %}\n    <div class="fileSelector">\n      <button class="btn btn-primary" ref="galleryButton"><i class="fa fa-book"></i> {{ctx.t(\'Gallery\')}}</button>\n      <button class="btn btn-primary" ref="cameraButton"><i class="fa fa-camera"></i> {{ctx.t(\'Camera\')}}</button>\n    </div>\n  {% } else if (!ctx.self.cameraMode) { %}\n    <div class="fileSelector" ref="fileDrop">\n      <i class="{{ctx.iconClass(\'cloud-upload\')}}"></i> {{ctx.t(\'Drop files to attach,\')}}\n        {% if (ctx.self.imageUpload) { %}\n          <a href="#" ref="toggleCameraMode"><i class="fa fa-camera"></i> {{ctx.t(\'Use Camera,\')}}</a>\n        {% } %}\n        {{ctx.t(\'or\')}} <a href="#" ref="fileBrowse" class="browse">{{ctx.t(\'browse\')}}</a>\n    </div>\n  {% } else { %}\n    <div>\n      <video class="video" autoplay="true" ref="videoPlayer"></video>\n    </div>\n    <button class="btn btn-primary" ref="takePictureButton"><i class="fa fa-camera"></i> {{ctx.t(\'Take Picture\')}}</button>\n    <button class="btn btn-primary" ref="toggleCameraMode">{{ctx.t(\'Switch to file upload\')}}</button>\n  {% } %}\n{% } %}\n{% ctx.statuses.forEach(function(status) { %}\n  <div class="file {{ctx.statuses.status === \'error\' ? \' has-error\' : \'\'}}">\n    <div class="row">\n      <div class="fileName col-form-label col-sm-10">{{status.originalName}} <i class="{{ctx.iconClass(\'remove\')}}" ref="fileStatusRemove"></i></div>\n      <div class="fileSize col-form-label col-sm-2 text-right">{{ctx.fileSize(status.size)}}</div>\n    </div>\n    <div class="row">\n      <div class="col-sm-12">\n        {% if (status.status === \'progress\') { %}\n          <div class="progress">\n            <div class="progress-bar" role="progressbar" aria-valuenow="{{status.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{status.progress}}%">\n              <span class="sr-only">{{status.progress}}% {{ctx.t(\'Complete\')}}</span>\n            </div>\n          </div>\n        {% } else { %}\n          <div class="bg-{{status.status}}">{{ctx.t(status.message)}}</div>\n        {% } %}\n      </div>\n    </div>\n  </div>\n{% }) %}\n{% if (!ctx.component.storage || ctx.support.hasWarning) { %}\n  <div class="alert alert-warning">\n    {% if (!ctx.component.storage) { %}\n      <p>{{ctx.t(\'No storage has been set for this field. File uploads are disabled until storage is set up.\')}}</p>\n    {% } %}\n    {% if (!ctx.support.filereader) { %}\n      <p>{{ctx.t(\'File API & FileReader API not supported.\')}}</p>\n    {% } %}\n    {% if (!ctx.support.formdata) { %}\n      <p>{{ctx.t("XHR2\'s FormData is not supported.")}}</p>\n    {% } %}\n    {% if (!ctx.support.progress) { %}\n      <p>{{ctx.t("XHR2\'s upload progress isn\'t supported.")}}</p>\n    {% } %}\n  </div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/file/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/html/form.ejs",[],function(){return'<{{ctx.tag}} class="{{ ctx.component.className }}" ref="html"\n  {% ctx.attrs.forEach(function(attr) { %}\n    {{attr.attr}}="{{attr.value}}"\n  {% }) %}\n>{{ctx.content}}{% if (!ctx.singleTags || ctx.singleTags.indexOf(ctx.tag) === -1) { %}</{{ctx.tag}}>{% } %}\n'}),e("skylark-formio/templates/bootstrap/html/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/icon/form.ejs",[],function(){return'<i ref="{{ctx.ref}}" class="{{ctx.className}}" style="{{ctx.styles}}">{{ctx.content}}</i>\n'}),e("skylark-formio/templates/bootstrap/icon/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/iconClass",[],function(){"use strict";return(e,t,n)=>{if("fa"===e)switch(t){case"save":t="download";break;case"zoom-in":t="search-plus";break;case"zoom-out":t="search-minus";break;case"question-sign":t="question-circle";break;case"remove-circle":t="times-circle-o";break;case"new-window":t="window-restore";break;case"move":t="arrows";break;case"time":t="clock-o"}return n?`${e} ${e}-${t} ${e}-spin`:`${e} ${e}-${t}`}}),e("skylark-formio/templates/bootstrap/input/form.ejs",[],function(){return'{% if (ctx.component.prefix || ctx.component.suffix) { %}\n<div class="input-group">\n{% } %}\n{% if (ctx.component.prefix) { %}\n<div class="input-group-prepend" ref="prefix">\n  <span class="input-group-text">\n    {{ctx.component.prefix}}\n  </span>\n</div>\n{% } %}\n<{{ctx.input.type}}\n  ref="{{ctx.input.ref ? ctx.input.ref : \'input\'}}"\n  {% for (var attr in ctx.input.attr) { %}\n  {{attr}}="{{ctx.input.attr[attr]}}"\n  {% } %}\n>{{ctx.input.content}}</{{ctx.input.type}}>\n{% if (ctx.component.showCharCount) { %}\n<span class="text-muted pull-right" ref="charcount"></span>\n{% } %}\n{% if (ctx.component.showWordCount) { %}\n<span class="text-muted pull-right" ref="wordcount"></span>\n{% } %}\n{% if (ctx.component.suffix) { %}\n<div class="input-group-append" ref="suffix">\n  <span class="input-group-text">\n    {{ctx.component.suffix}}\n  </span>\n</div>\n{% } %}\n{% if (ctx.component.prefix || ctx.component.suffix) { %}\n</div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/input/html.ejs",[],function(){return'<div ref="value">{% if (ctx.value) { %}{{ctx.value}}{% } else { %}-{% } %}</div>\n'}),e("skylark-formio/templates/bootstrap/input/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/label/form.ejs",[],function(){return'<label class="col-form-label {{ctx.label.className}}">\n  {{ ctx.t(ctx.component.label) }}\n  {% if (ctx.component.tooltip) { %}\n    <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n  {% } %}\n</label>\n'}),e("skylark-formio/templates/bootstrap/label/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/loader/form.ejs",[],function(){return'<div class="formio-loader">\n  <div class="loader-wrapper">\n    <div class="loader text-center"></div>\n  </div> \n</div>\n'}),e("skylark-formio/templates/bootstrap/loader/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/loading/form.ejs",[],function(){return"Loading...\n"}),e("skylark-formio/templates/bootstrap/loading/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/map/form.ejs",[],function(){return'<div id="{{ctx.mapId}}" style="min-height: 300px; height: calc(100vh - 600px);" ref="gmapElement"></div>\n'}),e("skylark-formio/templates/bootstrap/map/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/message/form.ejs",[],function(){return'<div class="form-text {{ctx.level}}">{{ctx.message}}</div>\n'}),e("skylark-formio/templates/bootstrap/message/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/multipleMasksInput/form.ejs",[],function(){return'<div\n  class="input-group formio-multiple-mask-container"\n  ref="{{ctx.input.ref ? ctx.input.ref : \'input\'}}"\n>\n  <select\n    class="form-control formio-multiple-mask-select"\n    id="{{ctx.key}}-mask"\n    ref="select">\n    {% ctx.selectOptions.forEach(function(option) { %}\n    <option value="{{option.value}}">{{option.label}}</option>\n    {% }); %}\n  </select>\n  <input\n    ref="mask"\n    {% for (var attr in ctx.input.attr) { %}\n    {{attr}}="{{ctx.input.attr[attr]}}"\n    {% } %}\n  >\n</div>\n'}),e("skylark-formio/templates/bootstrap/multipleMasksInput/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/multiValueRow/form.ejs",[],function(){return'<tr ref="row">\n  <td>\n    {{ctx.element}}\n  </td>\n  {% if (!ctx.disabled) { %}\n  <td>\n    <button type="button" class="btn btn-secondary" ref="removeRow">\n      <i class="{{ctx.iconClass(\'remove-circle\')}}"></i>\n    </button>\n  </td>\n  {% } %}\n</tr>\n'}),e("skylark-formio/templates/bootstrap/multiValueRow/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/multiValueTable/form.ejs",[],function(){return'<table class="table table-bordered">\n  <tbody>\n  {{ctx.rows}}\n  {% if (!ctx.disabled) { %}\n  <tr>\n    <td colspan="2">\n      <button class="btn btn-primary formio-button-add-another" ref="addButton"><i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(ctx.addAnother)}}</button>\n    </td>\n  </tr>\n  {% } %}\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/multiValueTable/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/panel/form.ejs",[],function(){return'<div class="mb-2 card border">\n  <div class="card-header {{ctx.transform(\'class\', \'bg-\' + ctx.component.theme)}}" ref="header">\n    <span class="mb-0 card-title">\n      {% if (ctx.component.collapsible) { %}\n        <i class="formio-collapse-icon {{ctx.iconClass(ctx.collapsed ? \'plus-square-o\' : \'minus-square-o\')}} text-muted" data-title="Collapse Panel"></i>\n      {% } %}\n      {{ctx.t(ctx.component.title)}}\n      {% if (ctx.component.tooltip) { %}\n        <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n      {% } %}\n    </span>\n  </div>\n  {% if (!ctx.collapsed || ctx.builder) { %}\n  <div class="card-body" ref="{{ctx.nestedKey}}">\n    {{ctx.children}}\n  </div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/panel/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/pdf/form.ejs",[],function(){return'<div class="{{ctx.classes}}" ref="webform">\n\t<span data-noattach="true" ref="zoomIn" style="position:absolute;right:10px;top:10px;cursor:pointer;" class="btn btn-default btn-secondary no-disable">\n\t\t<i class="{{ ctx.iconClass(\'zoom-in\') }}"></i>\n\t</span>\n\t<span data-noattach="true" ref="zoomOut" style="position:absolute;right:10px;top:60px;cursor:pointer;" class="btn btn-default btn-secondary no-disable">\n\t\t<i class="{{ ctx.iconClass(\'zoom-out\') }}"></i>\n\t</span>\n  <div data-noattach="true" ref="iframeContainer"></div>\n  <button type="button" class="btn btn-primary" ref="submitButton">{{ctx.t(\'Submit\')}}</button>\n</div>\n'}),e("skylark-formio/templates/bootstrap/pdf/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/pdfBuilder/form.ejs",[],function(){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    {{ctx.sidebar}}\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">\n\t  <div class="formio-drop-zone" ref="iframeDropzone"></div>\n    {{ctx.form}}\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/pdfBuilder/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/pdfBuilderUpload/form.ejs",[],function(){return'<div class="pdf-upload formio-component-file">\n  <h3 class="label">{{ctx.t(\'Upload a PDF File\')}}</h3>\n  <input type="file" style="opacity: 0; position: absolute;" tabindex="-1" accept=".pdf" ref="hiddenFileInputElement">\n  <div class="fileSelector" ref="fileDrop">\n    <i class="{{ctx.iconClass(\'cloud-upload\')}}"></i>{{ctx.t(\'Drop pdf to start, or\')}} <a href="#" ref="fileBrowse" class="browse">{{ctx.t(\'browse\')}}</a>\n  </div>\n  <div class="alert alert-danger" ref="uploadError">\n\n  </div>\n</div>\n\n'}),e("skylark-formio/templates/bootstrap/pdfBuilderUpload/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/radio/form.ejs",[],function(){return'<div class="form-radio radio">\n  {% ctx.values.forEach(function(item) { %}\n  <div class="form-check{{ctx.inline ? \'-inline\' : \'\'}}" ref="wrapper">\n    <label class="form-check-label label-position-{{ ctx.component.optionsLabelPosition }}" for="{{ctx.id}}{{ctx.row}}-{{item.value}}">\n      {% if (ctx.component.optionsLabelPosition === \'left\' || ctx.component.optionsLabelPosition === \'top\') { %}\n      <span>{{ctx.t(item.label)}}</span>\n      {% } %}\n      <{{ctx.input.type}}\n        ref="input"\n        {% for (var attr in ctx.input.attr) { %}\n        {{attr}}="{{ctx.input.attr[attr]}}"\n        {% } %}\n        value="{{item.value}}"\n        {% if (ctx.value && (ctx.value === item.value || (typeof ctx.value === \'object\' && ctx.value.hasOwnProperty(item.value) && ctx.value[item.value]))) { %}\n          checked=true\n        {% } %}\n        {% if (item.disabled) { %}\n          disabled=true\n        {% } %}\n        id="{{ctx.id}}{{ctx.row}}-{{item.value}}"\n      >\n      {% if (!ctx.component.optionsLabelPosition || ctx.component.optionsLabelPosition === \'right\' || ctx.component.optionsLabelPosition === \'bottom\') { %}\n      <span>{{ctx.t(item.label)}}</span>\n      {% } %}\n    </label>\n  </div>\n  {% }) %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/radio/html.ejs",[],function(){return"<div ref=\"value\">\n  {% var filtered = ctx.values.filter(function(item) {return ctx.value === item.value || (typeof ctx.value === 'object' && ctx.value.hasOwnProperty(item.value) && ctx.value[item.value])}).map(function(item) { return ctx.t(item.label)}).join(', ') %}\n  {{ filtered }}\n  </div>\n"}),e("skylark-formio/templates/bootstrap/radio/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/resourceAdd/form.ejs",[],function(){return'<table class="table table-bordered">\n  <tbody>\n    <tr>\n      <td>\n        {{ctx.element}}\n      </td>\n    </tr>\n    <tr>\n      <td colspan="2">\n        <button class="btn btn-primary formio-button-add-resource" ref="addResource">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i>\n          {{ctx.t(ctx.component.addResourceLabel || \'Add Resource\')}}\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/resourceAdd/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/select/form.ejs",[],function(){return'<select\n  ref="{{ctx.input.ref ? ctx.input.ref : \'selectContainer\'}}"\n  {{ ctx.input.multiple ? \'multiple\' : \'\' }}\n  {% for (var attr in ctx.input.attr) { %}\n  {{attr}}="{{ctx.input.attr[attr]}}"\n  {% } %}\n>{{ctx.selectOptions}}</select>\n<input type="text"\n       class="formio-select-autocomplete-input"\n       ref="autocompleteInput"\n       {% if (ctx.input.attr.autocomplete) { %}\n       autocomplete="{{ctx.input.attr.autocomplete}}"\n       {% } %}\n       tabindex="-1"\n/>\n'}),e("skylark-formio/templates/bootstrap/select/html.ejs",[],function(){return'<div ref="value">{% if (ctx.value) { %}{{ ctx.self.itemValueForHTMLMode(ctx.value) }}{% } else { %}-{% } %}</div>\n'}),e("skylark-formio/templates/bootstrap/select/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/selectOption/form.ejs",[],function(){return'<option {{ ctx.selected ? \'selected="selected"\' : \'\' }}\n  value="{{ctx.useId ? ctx.id : ctx.option.value}}"\n  {% for (var attr in ctx.attrs) { %}\n  {{attr}}="{{ctx.attrs[attr]}}"\n  {% } %}\n  >\n  {{ctx.t(ctx.option.label)}}\n</option>\n'}),e("skylark-formio/templates/bootstrap/selectOption/html.ejs",[],function(){return"{% if (ctx.selected) { %}{{ctx.t(ctx.option.label)}}{% } %}\n"}),e("skylark-formio/templates/bootstrap/selectOption/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/signature/form.ejs",[],function(){return'{{ctx.element}}\n<div\n  class="signature-pad-body"\n  style="width: {{ctx.component.width}};height: {{ctx.component.height}};padding:0;margin:0;"\n  tabindex="{{ctx.component.tabindex || 0}}"\n  ref="padBody"\n>\n  <a class="btn btn-sm btn-light signature-pad-refresh" ref="refresh">\n    <i class="{{ctx.iconClass(\'refresh\')}}"></i>\n  </a>\n  <canvas class="signature-pad-canvas" height="{{ctx.component.height}}" ref="canvas"></canvas>\n  {% if (ctx.required) { %}\n  <span class="form-control-feedback field-required-inline text-danger">\n    <i class="{{ctx.iconClass(\'asterisk\')}}"></i>\n  </span>\n  {% } %}\n  <img style="width: 100%;display: none;" ref="signatureImage">\n</div>\n{% if (ctx.component.footer) { %}\n  <div class="signature-pad-footer">\n    {{ctx.t(ctx.component.footer)}}\n  </div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/signature/html.ejs",[],function(){return'<img style="width: 100%;" ref="signatureImage">\n'}),e("skylark-formio/templates/bootstrap/signature/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/survey/form.ejs",[],function(){return'<table class="table table-striped table-bordered">\n  <thead>\n    <tr>\n      <th></th>\n      {% ctx.component.values.forEach(function(value) { %}\n      <th style="text-align: center;">{{ctx.t(value.label)}}</th>\n      {% }) %}\n    </tr>\n  </thead>\n  <tbody>\n    {% ctx.component.questions.forEach(function(question) { %}\n    <tr>\n      <td>{{ctx.t(question.label)}}</td>\n      {% ctx.component.values.forEach(function(value) { %}\n      <td style="text-align: center;">\n        <input type="radio" name="{{ ctx.self.getInputName(question) }}" value="{{value.value}}" id="{{ctx.key}}-{{question.value}}-{{value.value}}" ref="input">\n      </td>\n      {% }) %}\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/survey/html.ejs",[],function(){return'<table class="table table-striped table-bordered">\n  <tbody>\n    {% ctx.component.questions.forEach(function(question) { %}\n    <tr>\n      <th>{{ctx.t(question.label)}}</th>\n      <td>\n      {% ctx.component.values.forEach(function(item) { %}\n        {% if (ctx.value && ctx.value.hasOwnProperty(question.value) && ctx.value[question.value] === item.value) { %}\n          {{ctx.t(item.label)}}\n        {% } %}\n      {% }) %}\n      </td>\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/survey/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/tab/flat.ejs",[],function(){return'{% ctx.component.components.forEach(function(tab, index) { %}\n  <div class="mb-2 card border">\n    <div class="card-header bg-default">\n      <h4 class="mb-0 card-title">{{ ctx.t(tab.label) }}</h4>\n    </div>\n    <div class="card-body">\n      {{ ctx.tabComponents[index] }}\n    </div>\n  </div>\n{% }) %}\n'}),e("skylark-formio/templates/bootstrap/tab/form.ejs",[],function(){return'<div class="card">\n  <div class="card-header">\n    <ul class="nav nav-tabs card-header-tabs">\n      {% ctx.component.components.forEach(function(tab, index) { %}\n      <li class="nav-item{{ ctx.currentTab === index ? \' active\' : \'\'}}" role="presentation" ref="{{ctx.tabLikey}}">\n        <a class="nav-link{{ ctx.currentTab === index ? \' active\' : \'\'}}" href="#{{tab.key}}" ref="{{ctx.tabLinkKey}}">{{ctx.t(tab.label)}}</a>\n      </li>\n      {% }) %}\n    </ul>\n  </div>\n  {% ctx.component.components.forEach(function(tab, index) { %}\n  <div\n    role="tabpanel"\n    class="card-body tab-pane{{ ctx.currentTab === index ? \' active\' : \'\'}}"\n    style="display: {{ctx.currentTab === index ? \'block\' : \'none\'}}"\n    ref="{{ctx.tabKey}}"\n  >\n    {{ctx.tabComponents[index]}}\n  </div>\n  {% }) %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/tab/index",["./flat.ejs","./form.ejs"],function(e,t){"use strict";return{flat:e,form:t}}),e("skylark-formio/templates/bootstrap/table/form.ejs",[],function(){return"<table class=\"table\n    {{ ctx.component.striped ? 'table-striped' : ''}}\n    {{ ctx.component.bordered ? 'table-bordered' : ''}}\n    {{ ctx.component.hover ? 'table-hover' : ''}}\n    {{ ctx.component.condensed ? 'table-sm' : ''}}\n  \">\n  {% if (ctx.component.header && ctx.component.header.length > 0) { %}\n  <thead>\n    <tr>\n      {% ctx.component.header.forEach(function(header) { %}\n      <th>{{ctx.t(header)}}</th>\n      {% }) %}\n    </tr>\n  </thead>\n  {% } %}\n  <tbody>\n    {% ctx.tableComponents.forEach(function(row, rowIndex) { %}\n    <tr ref=\"row-{{ctx.id}}\">\n      {% row.forEach(function(column, colIndex) { %}\n      <td ref=\"{{ctx.tableKey}}-{{rowIndex}}\"{% if (ctx.cellClassName) { %} class=\"{{ctx.cellClassName}}\"{% } %}>{{column}}</td>\n      {% }) %}\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n"}),e("skylark-formio/templates/bootstrap/table/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/tree/form.ejs",[],function(){return'{% if (ctx.node.isRoot) { %}\n  <div ref="root" class="list-group-item">\n{% } else { %}\n  <li ref="node" class="list-group-item col-sm-12 tree__level tree__level_{{ ctx.odd ? \'odd\' : \'even\' }}">\n{% } %}\n  {% if (ctx.content) { %}\n    <div ref="content" class="tree__node-content">\n      {{ ctx.content }}\n    </div>\n  {% } %}\n  {% if (ctx.childNodes && ctx.childNodes.length) { %}\n    <ul ref="childNodes" class="tree__node-children list-group row">\n      {{ ctx.childNodes.join(\'\') }}\n    </ul>\n  {% } %}\n{% if (ctx.node.isRoot) { %}\n  </div>\n{% } else { %}\n  </li>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/tree/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/tree/partials/edit.ejs",[],function(){return'<div class="node-edit">\n  <div ref="nodeEdit">{{ ctx.children }}</div>\n  {% if (!ctx.readOnly) { %}\n    <div class="node-actions">\n      <button ref="saveNode" class="btn btn-primary saveNode">{{ ctx.t(\'Save\') }}</button>\n      <button ref="cancelNode" class="btn btn-danger cancelNode">{{ ctx.t(\'Cancel\') }}</button>\n    </div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/tree/partials/view.ejs",[],function(){return'<div class="row">\n  {% ctx.values.forEach(function(value) { %}\n    <div class="col-sm-2">\n      {{ value }}\n    </div>\n  {% }) %}\n  <div class="col-sm-3">\n    <div class="btn-group pull-right">\n      {% if (ctx.node.hasChildren) { %}\n        <button ref="toggleNode" class="btn btn-default btn-sm toggleNode">{{ ctx.t(ctx.node.collapsed ? \'Expand\' : \'Collapse\') }}</button>\n      {% } %}\n      {% if (!ctx.readOnly) { %}\n        <button ref="addChild" class="btn btn-default btn-sm addChild">{{ ctx.t(\'Add\') }}</button>\n        <button ref="editNode" class="btn btn-default btn-sm editNode">{{ ctx.t(\'Edit\') }}</button>\n        <button ref="removeNode" class="btn btn-danger btn-sm removeNode">{{ ctx.t(\'Delete\') }}</button>\n        {% if (ctx.node.revertAvailable) { %}\n          <button ref="revertNode" class="btn btn-danger btn-sm revertNode">{{ ctx.t(\'Revert\') }}</button>\n        {% } %}\n      {% } %}\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/tree/partials/index",["./edit.ejs","./view.ejs"],function(e,t){"use strict";return{treeView:{form:t},treeEdit:{form:e}}}),e("skylark-formio/templates/bootstrap/webform/form.ejs",[],function(){return'<div class="{{ctx.classes}}" ref="webform" novalidate>{{ctx.children}}</div>\n'}),e("skylark-formio/templates/bootstrap/webform/builder.ejs",[],function(){return'<div class="text-muted text-center p-2">{{ ctx.t(ctx.component.title) }}</div>\n'}),e("skylark-formio/templates/bootstrap/webform/index",["./form.ejs","./builder.ejs"],function(e,t){"use strict";return{form:e,builder:t}}),e("skylark-formio/templates/bootstrap/well/form.ejs",[],function(){return'<div class="card card-body bg-light">\n  <div ref="{{ctx.nestedKey}}">\n    {{ctx.children}}\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/well/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/wizard/form.ejs",[],function(){return'<div class="{{ctx.className}}">\n  <div style="position: relative;">\n    {{ ctx.wizardHeader }}\n    <div class="wizard-page" ref="{{ctx.wizardKey}}">\n      {{ctx.components}}\n    </div>\n    {{ ctx.wizardNav }}\n  </div>\n</div>'}),e("skylark-formio/templates/bootstrap/wizard/builder.ejs",[],function(){return'<div class="text-muted text-center p-2">{{ ctx.t(ctx.component.title) }}</div>\n'}),e("skylark-formio/templates/bootstrap/wizard/index",["./form.ejs","./builder.ejs"],function(e,t){"use strict";return{form:e,builder:t}}),e("skylark-formio/templates/bootstrap/wizardHeader/form.ejs",[],function(){return'<nav aria-label="navigation" id="{{ ctx.wizardKey }}-header">\n  <ul class="pagination">\n    {% ctx.panels.forEach(function(panel, index) { %}\n    <li class="page-item{{ctx.currentPage === index ? \' active\' : \'\'}}" style="">\n      <span class="page-link" ref="{{ctx.wizardKey}}-link">{{panel.title}}</span>\n    </li>\n    {% }) %}\n  </ul>\n</nav>\n'}),e("skylark-formio/templates/bootstrap/wizardHeader/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/wizardNav/form.ejs",[],function(){return'<ul class="list-inline" id="{{ ctx.wizardKey }}-nav">\n  {% if (ctx.buttons.cancel) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel" ref="{{ctx.wizardKey}}-cancel">{{ctx.t(\'cancel\')}}</button>\n  </li>\n  {% } %}\n  {% if (ctx.buttons.previous) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous" ref="{{ctx.wizardKey}}-previous">{{ctx.t(\'previous\')}}</button>\n  </li>\n  {% } %}\n  {% if (ctx.buttons.next) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="{{ctx.wizardKey}}-next">{{ctx.t(\'next\')}}</button>\n  </li>\n  {% } %}\n  {% if (ctx.buttons.submit) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-submit" ref="{{ctx.wizardKey}}-submit">{{ctx.t(\'submit\')}}</button>\n  </li>\n  {% } %}\n</ul>\n'}),e("skylark-formio/templates/bootstrap/wizardNav/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/cssClasses",[],function(){"use strict";return{"border-default":"","formio-tab-panel-active":"active","formio-tab-link-active":"active","formio-tab-link-container-active":"active"}}),e("skylark-formio/templates/bootstrap/index",["./address/index","./builder/index","./builderComponent/index","./builderComponents/index","./builderEditForm/index","./builderPlaceholder/index","./builderSidebar/index","./builderSidebarGroup/index","./builderWizard/index","./button/index","./checkbox/index","./columns/index","./component/index","./componentModal/index","./components/index","./container/index","./datagrid/index","./day/index","./dialog/index","./editgrid/index","./field/index","./fieldset/index","./file/index","./html/index","./icon/index","./iconClass","./input/index","./label/index","./loader/index","./loading/index","./map/index","./message/index","./multipleMasksInput/index","./multiValueRow/index","./multiValueTable/index","./panel/index","./pdf/index","./pdfBuilder/index","./pdfBuilderUpload/index","./radio/index","./resourceAdd/index","./select/index","./selectOption/index","./signature/index","./survey/index","./tab/index","./table/index","./tree/index","./tree/partials/index","./webform/index","./well/index","./wizard/index","./wizardHeader/index","./wizardNav/index","./cssClasses"],function(e,t,n,r,s,o,i,a,l,c,u,d,p,h,m,f,g,y,b,v,k,x,w,C,A,E,_,T,O,S,P,j,L,D,R,I,M,N,V,z,U,F,$,q,B,H,K,W,G,J,Y,Z,X,Q,ee){"use strict";return{transform(e,t){if(!t)return t;switch(e){case"class":return this.cssClasses.hasOwnProperty(t.toString())?this.cssClasses[t.toString()]:t}return t},defaultIconset:"fa",iconClass:E,cssClasses:ee,address:e,builder:t,builderComponent:n,builderComponents:r,builderEditForm:s,builderPlaceholder:o,builderSidebar:i,builderSidebarGroup:a,builderWizard:l,button:c,checkbox:u,columns:d,component:p,componentModal:h,components:m,container:f,datagrid:g,day:y,dialog:b,editgrid:v,field:k,fieldset:x,file:w,html:C,icon:A,input:_,label:T,loader:O,loading:S,map:P,message:j,multipleMasksInput:L,multiValueRow:D,multiValueTable:R,panel:I,pdf:M,pdfBuilder:N,pdfBuilderUpload:V,radio:z,resourceAdd:U,select:F,selectOption:$,signature:q,survey:B,tab:H,table:K,tree:W,...G,webform:J,well:Y,wizard:Z,wizardHeader:X,wizardNav:Q}}),e("skylark-formio/templates/index",["./bootstrap/index"],function(e,t,n){"use strict";return{bootstrap:e}}),e("skylark-formio/templates/Templates",["./index","skylark-lodash"],function(e,t){"use strict";return class n{static get templates(){return n._templates||(n._templates=e),n._templates}static addTemplate(e,t){n.templates[e]=t}static extendTemplate(e,r){n.templates[e]=t.merge({},n.templates[e],r)}static setTemplate(e,t){n.addTemplate(e,t)}static set current(e){const r=n.current;n._current=t.merge({},r,e)}static get current(){return n._current?n._current:n.defaultTemplates}static get defaultTemplates(){return n.templates.bootstrap}static set framework(e){n.templates.hasOwnProperty(e)&&(n._framework=e,n._current=n.templates[e])}static get framework(){return n._framework}}}),e("skylark-formio/components/_classes/componentModal/ComponentModal",[],function(){"use strict";return class{static render(e,t,n){const r=e.renderTemplate("component",t,n);return e.renderTemplate("componentModal",{...t,children:r})}constructor(e,t){this.component=e,this.modal=t,this.currentValue=this.component.dataValue,this.dataLoaded=!1,this.init()}get refs(){return this.component.refs}init(){this.loadRefs()}setValue(e){this.dataLoaded||(this.currentValue=e,this.dataLoaded=!0,this.updateView())}setOpenModalElement(e){this.openModalTemplate=e,this.component.setContent(this.refs.openModalWrapper,e),this.loadRefs(),this.setEventListeners()}loadRefs(){this.component.loadRefs(this.modal,{modalOverlay:"single",modalContents:"single",modalClose:"single",openModalWrapper:"single",openModal:"single",modalSave:"single",modalWrapper:"single"})}setEventListeners(){this.component.addEventListener(this.refs.openModal,"click",this.openModalHandler.bind(this)),this.component.addEventListener(this.refs.modalOverlay,"click",this.closeModalHandler.bind(this)),this.component.addEventListener(this.refs.modalClose,"click",this.closeModalHandler.bind(this)),this.component.addEventListener(this.refs.modalSave,"click",this.saveModalValueHandler.bind(this))}setOpenEventListener(){this.component.loadRefs(this.modal,{openModal:"single"}),this.component.addEventListener(this.refs.openModal,"click",this.openModalHandler.bind(this))}openModalHandler(e){e.preventDefault(),this.refs.modalWrapper.classList.remove("component-rendering-hidden")}updateView(){const e=this.currentValue===this.component.defaultValue?this.openModalTemplate:this.component.getModalPreviewTemplate();this.component.setContent(this.refs.openModalWrapper,e),this.setOpenEventListener()}closeModal(){this.refs.modalWrapper.classList.add("component-rendering-hidden"),this.updateView()}closeModalHandler(e){e.preventDefault(),this.component.setValue(this.currentValue),this.closeModal()}saveModalValueHandler(e){e.preventDefault(),this.currentValue=this.component.dataValue,this.closeModal()}}}),e("skylark-formio/components/_classes/component/Component",["../../../vendors/vanilla-text-mask/conformToMask","../../../vendors/getify/npo","../../../vendors/tooltip-js/Tooltip","skylark-lodash","../../../vendors/ismobilejs/isMobile","../../../Formio","../../../utils/utils","../../../validator/Validator","../../../templates/Templates","../../../utils/utils","../../../Element","../componentModal/ComponentModal"],function(e,t,n,r,s,o,i,a,l,c,u,d){"use strict";const p="https://cdn.form.io/quill/1.3.7";return class h extends u{static schema(...e){return r.merge({input:!0,key:"",placeholder:"",prefix:"",customClass:"",suffix:"",multiple:!1,defaultValue:null,protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,refreshOn:"",redrawOn:"",tableView:!1,modalEdit:!1,label:"",labelPosition:"top",description:"",errorLabel:"",tooltip:"",hideLabel:!1,tabindex:"",disabled:!1,autofocus:!1,dbIndex:!1,customDefaultValue:"",calculateValue:"",widget:null,attributes:{},validateOn:"change",validate:{required:!1,custom:"",customPrivate:!1,strictDateValidation:!1,multiple:!1,unique:!1},conditional:{show:null,when:null,eq:""},overlay:{style:"",left:"",top:"",width:"",height:""},allowCalculateOverride:!1,encrypted:!1,showCharCount:!1,showWordCount:!1,properties:{},allowMultipleMasks:!1},...e)}static tableView(e,t){}constructor(e,t,n){super(Object.assign({renderMode:"form",attachMode:"full"},t||{})),this._hasCondition=null,this.refs={},e&&this.options.components&&this.options.components[e.type]&&r.merge(e,this.options.components[e.type]),this.validator=a,this.path="",this.component=this.mergeSchema(e||{}),this.originalComponent=c.fastCloneDeep(this.component),this.attached=!1,this.rendered=!1,this._data=n||{},this.component.id=this.id,this.error="",this.tooltip="",this.row=this.options.row,this._disabled=!!c.boolValue(this.component.disabled)&&this.component.disabled,this.root=this.options.root,this.pristine=!0,this.parent=this.options.parent,this.options.name=this.options.name||"data",this.validators=["required","minLength","maxLength","minWords","maxWords","custom","pattern","json","mask"],this._path="",this._parentVisible=!this.options.hasOwnProperty("parentVisible")||this.options.parentVisible,this._visible=this._parentVisible&&this.conditionallyVisible(null,n),this._parentDisabled=!1;let s=null,o=[];const i=r.debounce((...e)=>(this.root&&(this.root.changing=!1),o=[],!e[1]&&s&&(e[1]=s),r.isEmpty(e[0])&&s&&(e[0]=s.flags),s=null,this.onChange(...e)),100);this.triggerChange=((...e)=>(e[1]&&(s=e[1]),this.root&&(this.root.changing=!0),e.length&&(o=e),i(...o))),this.triggerRedraw=r.debounce(this.redraw.bind(this),100),this.tooltips=[],this.invalid=!1,this.component&&(this.type=this.component.type,this.allowData&&this.key&&(this.options.name+=`[${this.key}]`,!this.visible&&this.component.clearOnHide||(this.hasValue()?this.dataValue=this.dataValue:this.dataValue=this.defaultValue)),this.info=this.elementInfo()),this.hook("component"),this.options.skipInit||this.init()}get data(){return this._data}set data(e){this._data=e}mergeSchema(e={}){return r.defaultsDeep(e,this.defaultSchema)}get ready(){return t.resolve(this)}get labelInfo(){const e={};return e.hidden=this.labelIsHidden(),e.className="",e.labelPosition=this.component.labelPosition,e.tooltipClass=`${this.iconClass("question-sign")} text-muted`,this.hasInput&&this.component.validate&&c.boolValue(this.component.validate.required)&&(e.className+=" field-required"),e.hidden&&(e.className+=" control-label--hidden"),this.info.attr.id&&(e.for=this.info.attr.id),e}init(){this.disabled=this.shouldDisabled}destroy(){super.destroy(),this.detach()}get shouldDisabled(){return this.options.readOnly||this.component.disabled||this.options.hasOwnProperty("disabled")&&this.options.disabled[this.key]}get isInputComponent(){return!this.component.hasOwnProperty("input")||this.component.input}get allowData(){return this.hasInput}get hasInput(){return this.isInputComponent||this.refs.input&&this.refs.input.length}get defaultSchema(){return h.schema()}get key(){return r.get(this.component,"key","")}set parentVisible(e){this._parentVisible!==e&&(this._parentVisible=e,this.clearOnHide(),this.redraw())}get parentVisible(){return this._parentVisible}set parentDisabled(e){this._parentDisabled!==e&&(this._parentDisabled=e,this.clearOnHide(),this.redraw())}get parentDisabled(){return this._parentDisabled}set visible(e){this._visible!==e&&(this._visible=e,this.clearOnHide(),this.redraw())}get visible(){return!(!this.builderMode&&!this.options.showHiddenFields)||(!this.options.hide||!this.options.hide[this.component.key])&&(!(!this.options.show||!this.options.show[this.component.key])||this._visible&&this._parentVisible)}get currentForm(){return this._currentForm}set currentForm(e){this._currentForm=e}get fullMode(){return"full"===this.options.attachMode}get builderMode(){return"builder"===this.options.attachMode}get calculatedPath(){if(this._path)return this._path;if(this._path=this.key,!this.root)return this._path;let e=this.parent;for(;e&&e.id!==this.root.id;)(["datagrid","container","editgrid"].includes(e.type)||e.tree)&&(this._path=`${e.key}.${this._path}`),e=e.parent;return this._path}get labelPosition(){return this.component.labelPosition}get labelWidth(){return this.component.labelWidth||30}get labelMargin(){return this.component.labelMargin||3}get isAdvancedLabel(){return["left-left","left-right","right-left","right-right"].includes(this.labelPosition)}get labelPositions(){return this.labelPosition.split("-")}rightDirection(e){return"right"===e}getLabelInfo(){const e=this.rightDirection(this.labelPositions[0]),t=this.rightDirection(this.labelPositions[1]),n=`\n      flex: ${this.labelWidth};\n      ${e?"margin-left":"margin-right"}:${this.labelMargin}%;\n    `,r=`\n      flex: ${100-this.labelWidth-this.labelMargin};\n    `;return{isRightPosition:e,isRightAlign:t,labelStyles:n,contentStyles:r}}getModifiedSchema(e,t,n){const s={};return t?(r.each(e,(e,o)=>{if(!r.isArray(e)&&r.isObject(e)&&t.hasOwnProperty(o)){const n=this.getModifiedSchema(e,t[o],!0);r.isEmpty(n)||(s[o]=n)}else r.isArray(e)?0!==e.length&&(s[o]=e):(!n&&"type"===o||!n&&"key"===o||!n&&"label"===o||!n&&"input"===o||!n&&"tableView"===o||""!==e&&!t.hasOwnProperty(o)||""!==e&&e!==t[o])&&(s[o]=e)}),s):e}get schema(){return c.fastCloneDeep(this.getModifiedSchema(r.omit(this.component,"id"),this.defaultSchema))}t(e,t){if(!e)return"";(t=t||{}).data=this.rootValue,t.row=this.data,t.component=this.component,t.nsSeparator="::",t.keySeparator=".|.",t.pluralSeparator="._.",t.contextSeparator="._.";const n=this.i18next.t(e,t);return n||e}labelIsHidden(){return!this.component.label||!this.inDataGrid&&this.component.hideLabel||this.inDataGrid&&!this.component.dataGridLabel||this.options.inputsOnly}get transform(){return l.current.hasOwnProperty("transform")?l.current.transform.bind(l.current):(e,t)=>t}getTemplate(e,t){t=Array.isArray(t)?t:[t],e=Array.isArray(e)?e:[e],t.includes("form")||t.push("form");let n=null;if(this.options.templates&&(n=this.checkTemplate(this.options.templates,e,t)))return n;const r=this.options.template?l.templates[this.options.template]:l.current;if(n=this.checkTemplate(r,e,t))return n;const s=e[e.length-1],o=l.defaultTemplates[s];if(!o)return`Unknown template: ${s}`;const i=this.checkTemplateMode(o,t);return i||o.form}checkTemplate(e,t,n){for(const r of t){const t=e[r];if(t){const e=this.checkTemplateMode(t,n);if(e)return e}}return null}checkTemplateMode(e,t){for(const n of t){const t=e[n];if(t)return t}return null}renderTemplate(e,t={},n){const r=n||this.options.renderMode||"form";t.component=this.component,t.self=this,t.options=this.options,t.readOnly=this.options.readOnly,t.iconClass=this.iconClass.bind(this),t.t=this.t.bind(this),t.transform=this.transform,t.id=t.id||this.id,t.key=t.key||this.key,t.value=t.value||this.dataValue,t.disabled=this.disabled,t.builder=this.builderMode,t.render=((...e)=>(console.warn("Form.io 'render' template function is deprecated.\n      If you need to render template (template A) inside of another template (template B),\n      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B"),this.renderTemplate(...e))),t.label=this.labelInfo,t.tooltip=this.interpolate(this.component.tooltip||"").replace(/(?:\r\n|\r|\n)/g,"<br />");const s=[`${e}-${this.component.type}-${this.key}`,`${e}-${this.component.type}`,`${e}-${this.key}`,`${e}`];return this.hook(`render${e.charAt(0).toUpperCase()+e.substring(1,e.length)}`,this.interpolate(this.getTemplate(s,r),t),t,r)}sanitize(e){return i.sanitize(e,this.options)}renderString(e,t){return e?this.interpolate(e,t):""}performInputMapping(e){return e}getBrowserLanguage(){const e=window.navigator,t=["language","browserLanguage","systemLanguage","userLanguage"];let n;if(Array.isArray(e.languages))for(let t=0;t<e.languages.length;t++)if((n=e.languages[t])&&n.length)return n.split(";")[0];for(let r=0;r<t.length;r++)if((n=e[t[r]])&&n.length)return n.split(";")[0];return null}beforePage(){return t.resolve(!0)}beforeNext(){return this.beforePage(!0)}beforeSubmit(){return t.resolve(!0)}get submissionTimezone(){return this.options.submissionTimezone=this.options.submissionTimezone||r.get(this.root,"options.submissionTimezone"),this.options.submissionTimezone}loadRefs(e,t){for(const n in t)"single"===t[n]?this.refs[n]=e.querySelector(`[ref="${n}"]`):this.refs[n]=e.querySelectorAll(`[ref="${n}"]`)}setOpenModalElement(){const e=`\n      <label class="control-label">${this.component.label}</label><br>\n      <button lang='en' class='btn btn-light btn-md open-modal-button' ref='openModal'>Click to set value</button>\n    `;this.componentModal.setOpenModalElement(e)}getModalPreviewTemplate(){return`\n      <label class="control-label">${this.component.label}</label><br>\n      <button lang='en' class='btn btn-light btn-md open-modal-button' ref='openModal'>${this.getValueAsString(this.dataValue)}</button>`}build(e){return e=e||this.element,this.empty(e),this.setContent(e,this.render()),this.attach(e)}render(e=`Unknown component: ${this.component.type}`,t=!1){const n=this.visible;return this.rendered=!0,!this.builderMode&&this.component.modalEdit?d.render(this,{visible:n,id:this.id,classes:this.className,styles:this.customStyle,children:e},t):this.renderTemplate("component",{visible:n,id:this.id,classes:this.className,styles:this.customStyle,children:e},t)}attach(e){!this.builderMode&&this.component.modalEdit&&(this.componentModal=new d(this,e),this.setOpenModalElement()),this.attached=!0,this.element=e,e.component=this,this.element.id&&(this.id=this.element.id),this.loadRefs(e,{messageContainer:"single",tooltip:"multiple"}),this.refs.tooltip.forEach((e,t)=>{const r=this.interpolate(e.getAttribute("data-title")||this.t(this.component.tooltip)).replace(/(?:\r\n|\r|\n)/g,"<br />");this.tooltips[t]=new n(e,{trigger:"hover click focus",placement:"right",html:!0,title:r,template:'\n          <div class="tooltip" style="opacity: 1;" role="tooltip">\n            <div class="tooltip-arrow"></div>\n            <div class="tooltip-inner"></div>\n          </div>'})}),this.attachLogic(),this.autofocus(),this.hook("attachComponent",e,this);const r=this.component.type;return r&&this.hook(`attach${r.charAt(0).toUpperCase()+r.substring(1,r.length)}`,e,this),t.resolve()}addShortcut(e,t){e&&this.root&&this.root!==this&&(t||(t=this.component.shortcut),this.root.addShortcut(e,t))}removeShortcut(e,t){e&&this.root!==this&&(t||(t=this.component.shortcut),this.root.removeShortcut(e,t))}detach(){this.refs={},this.removeEventListeners(),this.detachLogic(),this.tooltip&&this.tooltip.dispose()}checkRefresh(e,t){const n=r.get(t,"instance.calculatedPath",!1);n&&this.calculatedPath===n||("data"===e?this.refresh(this.data):n&&n===e&&t&&t.instance&&this.inContext(t.instance)&&this.refresh(t.value))}checkRefreshOn(e){const t=this.component.refreshOn||this.component.redrawOn;t&&(Array.isArray(t)?t.forEach(t=>{this.checkRefresh(t,e)}):this.checkRefresh(t,e))}refresh(e){this.hasOwnProperty("refreshOnValue")?this.refreshOnChanged=!r.isEqual(e,this.refreshOnValue):this.refreshOnChanged=!0,this.refreshOnValue=c.fastCloneDeep(e),this.refreshOnChanged&&(this.component.clearOnRefresh&&this.setValue(null),this.triggerRedraw())}inContext(e){if(e.data===this.data)return!0;let t=this.parent;for(;t;){if(t.data===e.data)return!0;t=t.parent}return!1}get viewOnly(){return this.options.readOnly&&this.options.viewAsHtml}createViewOnlyElement(){return this.element=this.ce("dl",{id:this.id}),this.element&&(this.element.component=this),this.element}get defaultViewOnlyValue(){return"-"}getWidgetValueAsString(e){const t=!this.refs.input||!this.refs.input[0]||!this.refs.input[0].widget;if(!e||t)return e;if(Array.isArray(e)){const t=[];return e.forEach((e,n)=>{const r=this.refs.input[n]&&this.refs.input[n].widge;r&&t.push(r.getValueAsString(e))}),t}const n=this.refs.input[0].widget;return n.getValueAsString(e)}getValueAsString(e){return e?(e=this.getWidgetValueAsString(e),Array.isArray(e)?e.join(", "):r.isPlainObject(e)?JSON.stringify(e):null===e||void 0===e?"":e.toString()):""}getView(e){return this.component.protected?"--- PROTECTED ---":this.getValueAsString(e)}updateItems(...e){this.restoreValue(),this.onChange(...e)}itemValue(e,t=!1){if(r.isObject(e)){if(this.valueProperty)return r.get(e,this.valueProperty);if(t)return e.value}return e}itemValueForHTMLMode(e){if(Array.isArray(e)){const t=e.map(e=>Array.isArray(e)?this.itemValueForHTMLMode(e):this.itemValue(e));return t.join(", ")}return this.itemValue(e)}createModal(e,t){const n=this.ce("div",t||{});this.setContent(n,this.renderTemplate("dialog")),n.refs={},this.loadRefs.call(n,n,{dialogOverlay:"single",dialogContents:"single",dialogClose:"single"}),n.refs.dialogContents.appendChild(e),document.body.appendChild(n),document.body.classList.add("modal-open"),n.close=(()=>{document.body.classList.remove("modal-open"),n.dispatchEvent(new CustomEvent("close"))}),this.addEventListener(n,"close",()=>this.removeChildFrom(n,document.body));const r=e=>{e.preventDefault(),n.close()};return this.addEventListener(n.refs.dialogOverlay,"click",r),this.addEventListener(n.refs.dialogClose,"click",r),n}get className(){let e=this.hasInput?"form-group has-feedback ":"";return e+=`formio-component formio-component-${this.component.type} `,this.key&&(e+=`formio-component-${this.key} `),this.component.multiple&&(e+="formio-component-multiple "),this.component.customClass&&(e+=this.component.customClass),this.hasInput&&this.component.validate&&c.boolValue(this.component.validate.required)&&(e+=" required"),this.labelIsHidden()&&(e+=" formio-component-label-hidden"),this.visible||(e+=" formio-hidden"),e}get customStyle(){let e="";return r.each(this.component.style,(t,n)=>{""!==t&&(e+=`${n}:${t};`)}),e}get isMobile(){return s()}getElement(){return this.element}evalContext(e){return super.evalContext(Object.assign({component:this.component,row:this.data,rowIndex:this.rowIndex,data:this.rootValue,iconClass:this.iconClass.bind(this),submission:this.root?this.root._submission:{},form:this.root?this.root._form:{}},e))}setPristine(e){this.pristine=e}removeValue(e){this.splice(e),this.redraw(),this.restoreValue(),this.triggerRootChange()}iconClass(e,t){const n=this.options.iconset||l.current.defaultIconset||"fa";return l.current.hasOwnProperty("iconClass")?l.current.iconClass(n,e,t):"fa"===this.options.iconset?l.defaultTemplates.iconClass(n,e,t):e}get name(){return this.t(this.component.label||this.component.placeholder||this.key)}get errorLabel(){return this.t(this.component.errorLabel||this.component.label||this.component.placeholder||this.key)}errorMessage(e){return this.component.errors&&this.component.errors[e]?this.component.errors[e]:e}setContent(e,t){return e instanceof HTMLElement&&(e.innerHTML=this.sanitize(t),!0)}redraw(){if(!this.element||!this.element.parentNode)return t.resolve();this.clear();const e=this.element.parentNode,n=Array.prototype.indexOf.call(e.children,this.element);return this.element.outerHTML=this.sanitize(this.render()),this.element=e.children[n],this.attach(this.element)}rebuild(){return this.destroy(),this.init(),this.redraw()}removeEventListeners(){super.removeEventListeners(),this.tooltips.forEach(e=>e.dispose()),this.tooltips=[],this.refs.input=[]}hasClass(e,t){if(e)return super.hasClass(e,this.transform("class",t))}addClass(e,t){if(e)return super.addClass(e,this.transform("class",t))}removeClass(e,t){if(e)return super.removeClass(e,this.transform("class",t))}hasCondition(){return null!==this._hasCondition?this._hasCondition:(this._hasCondition=i.hasCondition(this.component),this._hasCondition)}conditionallyVisible(e,t){return e=e||this.rootValue,t=t||this.data,this.builderMode||!this.hasCondition()?!this.component.hidden:(e=e||(this.root?this.root.data:{}),this.checkCondition(t,e))}checkCondition(e,t){return i.checkCondition(this.component,e||this.data,t||this.rootValue,this.root?this.root._form:{},this)}checkComponentConditions(e,t,n){e=e||this.rootValue,t=t||{},n=n||this.data,!this.builderMode&&this.fieldLogic(e,n)&&this.redraw();const r=this.conditionallyVisible(e,n);return this.visible!==r&&(this.visible=r),r}checkConditions(e,t,n){return e=e||this.rootValue,t=t||{},n=n||this.data,this.checkComponentConditions(e,t,n)}get logic(){return this.component.logic||[]}fieldLogic(e,t){e=e||this.rootValue,t=t||this.data;const n=this.logic;if(0===n.length)return;const s=c.fastCloneDeep(this.originalComponent);let o=n.reduce((n,r)=>{const o=i.checkTrigger(s,r.trigger,t,e,this.root?this.root._form:{},this);return!!o&&this.applyActions(s,r.actions,o,t,e)||n},!1);return r.isEqual(this.component,s)||(this.component=s,this.disabled=this.shouldDisabled,o=!0),o}isIE(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);const n=e.indexOf("Trident/");if(n>0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}applyActions(e,t,n,s,o){return o=o||this.rootValue,s=s||this.data,t.reduce((t,a)=>{switch(a.type){case"property":{i.setActionProperty(e,a,n,s,o,this);const l=a.property.value;r.isEqual(r.get(this.component,l),r.get(e,l))||(t=!0);break}case"value":{const i=this.getValue(),l=this.evaluate(a.value,{value:r.clone(i),data:o,row:s,component:e,result:n},"value");r.isEqual(i,l)||(this.setValue(l),this.viewOnly&&(this.dataValue=l),t=!0);break}case"mergeComponentSchema":{const i=this.evaluate(a.schemaDefinition,{value:r.clone(this.getValue()),data:o,row:s,component:e,result:n},"schema");r.assign(e,i),r.isEqual(this.component,e)||(t=!0);break}}return t},!1)}addInputError(e,t,n){this.addMessages(e),this.setErrorClasses(n,t,!!e)}removeInputError(e){this.setErrorClasses(e,!0,!1)}addMessages(e){e&&("string"==typeof e&&(e={messages:e,level:"error"}),Array.isArray(e)||(e=[e]),this.refs.messageContainer&&this.setContent(this.refs.messageContainer,e.map(e=>this.renderTemplate("message",e)).join("")))}setErrorClasses(e,t,n,r){this.clearErrorClasses(),e.forEach(e=>this.removeClass(this.performInputMapping(e),"is-invalid")),n&&(e.forEach(e=>this.addClass(this.performInputMapping(e),"is-invalid")),t&&this.options.highlightErrors?this.addClass(this.element,this.options.componentErrorClass):this.addClass(this.element,"has-error")),r&&this.addClass(this.element,"has-message")}clearOnHide(){this.rootPristine||!1===this.component.clearOnHide||this.options.readOnly||this.options.showHiddenFields||(this.visible?this.hasValue()||this.setValue(this.defaultValue,{noUpdateEvent:!0}):this.deleteValue())}triggerRootChange(...e){this.options.onChange?this.options.onChange(...e):this.root&&this.root.triggerChange(...e)}onChange(e,t){(e=e||{}).modified&&(this.pristine=!1,this.addClass(this.getElement(),"formio-modified")),"blur"!==this.component.validateOn||this.errors.length||(e.noValidate=!0),this.component.onChange&&this.evaluate(this.component.onChange,{flags:e});const n={instance:this,component:this.component,value:this.dataValue,flags:e};this.emit("componentChange",n);let r=!1;return e.modified&&(r=!0,delete e.modified),t||this.triggerRootChange(e,n,r),n}get wysiwygDefault(){return{quill:{theme:"snow",placeholder:this.t(this.component.placeholder),modules:{toolbar:[[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],["bold","italic","underline","strike",{script:"sub"},{script:"super"},"clean"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{align:[]}],["blockquote","code-block"],["link","image","video","formula","source"]]}},ace:{theme:"ace/theme/xcode",maxLines:12,minLines:12,tabSize:2,mode:"javascript",placeholder:this.t(this.component.placeholder)},ckeditor:{image:{toolbar:["imageTextAlternative","|","imageStyle:full","imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight"],styles:["full","alignLeft","alignCenter","alignRight"]}},tiny:{theme:"silver"},default:{}}}addCKE(e,n,s){return(n=r.isEmpty(n)?{}:n).base64Upload=!0,n.mediaEmbed={previewsInData:!0},n=r.merge(this.wysiwygDefault.ckeditor,r.get(this.options,"editors.ckeditor.settings",{}),n),o.requireLibrary("ckeditor","ClassicEditor",r.get(this.options,"editors.ckeditor.src","https://cdn.form.io/ckeditor/16.0.0/ckeditor.js"),!0).then(()=>e.parentNode?ClassicEditor.create(e,n).then(e=>(e.model.document.on("change",()=>s(e.data.get())),e)):t.reject())}addQuill(e,n,s){return n=r.isEmpty(n)?this.wysiwygDefault.quill:n,n=r.merge(this.wysiwygDefault.quill,r.get(this.options,"editors.quill.settings",{}),n),o.requireLibrary(`quill-css-${n.theme}`,"Quill",[{type:"styles",src:`${p}/quill.${n.theme}.css`}],!0),o.requireLibrary("quill","Quill",r.get(this.options,"editors.quill.src",`${p}/quill.min.js`),!0).then(()=>{if(!e.parentNode)return t.reject();this.quill=new Quill(e,n);const r=document.createElement("textarea");r.setAttribute("class","quill-source-code"),this.quill.addContainer("ql-custom").appendChild(r);const o=e.parentNode.querySelector(".ql-source");o&&this.addEventListener(o,"click",e=>{e.preventDefault(),"inherit"===r.style.display&&this.quill.setContents(this.quill.clipboard.convert(r.value)),r.style.display="none"===r.style.display?"inherit":"none"}),this.addEventListener(e,"click",()=>this.quill.focus());const i=document.querySelectorAll(".ql-formats > button");for(let e=0;e<i.length;e++)i[e].setAttribute("tabindex","-1");return this.quill.on("text-change",()=>{r.value=this.quill.root.innerHTML,s(r)}),this.quill})}addAce(e,t,n){return t=r.merge(this.wysiwygDefault.ace,r.get(this.options,"editors.ace.settings",{}),t||{}),o.requireLibrary("ace","ace",r.get(this.options,"editors.ace.src","https://cdn.form.io/ace/1.4.8/ace.js"),!0).then(r=>((r=r.edit(e)).removeAllListeners("change"),r.setOptions(t),r.getSession().setMode(`ace/mode/${t.mode}`),r.on("change",()=>n(r.getValue())),r))}addTiny(e,t,n){return o.requireLibrary("tinymce","tinymce","https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js".replace("no-api-key",t.tinyApiKey),!0).then(r=>r.init({...t,target:e,init_instance_callback:e=>{e.on("Change",()=>n(e.getContent()))}}))}get tree(){return this.component.tree||!1}get emptyValue(){return null}hasValue(e){return r.has(e||this.data,this.key)}get rootValue(){return this.root?this.root.data:this.data}get rootPristine(){return r.get(this,"root.pristine",!1)}get dataValue(){if(!this.key||!this.visible&&this.component.clearOnHide&&!this.rootPristine)return this.emptyValue;if(!this.hasValue()){const e=this.component.multiple?[]:this.emptyValue;return this.rootPristine||(this.dataValue=e),e}return r.get(this._data,this.key)}set dataValue(e){return this.allowData&&this.key&&(this.visible||!this.component.clearOnHide||this.rootPristine)?(null!==e&&void 0!==e&&(e=this.hook("setDataValue",e,this.key,this._data)),null===e||void 0===e?(this.unset(),e):(r.set(this._data,this.key,e),e)):e}splice(e){if(this.hasValue()){const t=this.dataValue||[];r.isArray(t)&&t.hasOwnProperty(e)&&(t.splice(e,1),this.dataValue=t,this.triggerChange())}}unset(){r.unset(this._data,this.key)}deleteValue(){this.setValue(null,{noUpdateEvent:!0,noDefault:!0}),this.unset()}get defaultValue(){let t=this.emptyValue;return this.component.defaultValue&&(t=this.component.defaultValue),this.component.customDefaultValue&&!this.options.preview&&(t=this.evaluate(this.component.customDefaultValue,{value:""},"value")),this.defaultMask&&("string"==typeof t?(t=e(t,this.defaultMask).conformedValue,i.matchInputMask(t,this.defaultMask)||(t="")):t=""),r.cloneDeep(t)}getValue(){if(!this.hasInput||this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;const e=[];for(const t in this.refs.input)if(this.refs.input.hasOwnProperty(t)){if(!this.component.multiple)return this.getValueAt(t);e.push(this.getValueAt(t))}return 0!==e.length||this.component.multiple?e:""}getValueAt(e){const t=this.performInputMapping(this.refs.input[e]);return t?t.value:void 0}setValue(e,t={}){const n=this.updateValue(e,t);if(this.componentModal&&t&&t.fromSubmission&&this.componentModal.setValue(e),e=this.dataValue,!this.hasInput)return n;const r=Array.isArray(e);r&&Array.isArray(this.defaultValue)&&this.refs.hasOwnProperty("input")&&this.refs.input&&this.refs.input.length!==e.length&&this.redraw();for(const n in this.refs.input)this.refs.input.hasOwnProperty(n)&&this.setValueAt(n,r?e[n]:e,t);return n}setValueAt(e,t,n={}){n.noDefault||null!==t&&void 0!==t||this.component.multiple||(t=this.defaultValue);const r=this.performInputMapping(this.refs.input[e]);r.mask?r.mask.textMaskInputElement.update(t):r.widget&&r.widget.setValue?r.widget.setValue(t):r.value=t}get hasSetValue(){return this.hasValue()&&!this.isEmpty(this.dataValue)}restoreValue(){if(this.hasSetValue)this.setValue(this.dataValue,{noUpdateEvent:!0});else if(this.defaultValue){const e=this.component.multiple&&!this.dataValue.length?[]:this.defaultValue;this.setValue(e,{noUpdateEvent:!0})}}normalizeValue(e){return this.component.multiple&&!Array.isArray(e)&&(e=e?[e]:[]),e}updateComponentValue(e,t={}){let n=t.resetValue||void 0!==e&&null!==e?e:this.getValue();const r=void 0!==(n=this.normalizeValue(n,t))&&this.hasChanged(n,this.dataValue);return r&&(this.dataValue=n,this.updateOnChange(t,r)),r}updateValue(...e){return this.updateComponentValue(...e)}getIcon(e,t,n,r="icon"){return this.renderTemplate("icon",{className:this.iconClass(e),ref:r,styles:n,content:t})}resetValue(){this.setValue(this.emptyValue,{noUpdateEvent:!0,noValidate:!0,resetValue:!0}),this.unset()}hasChanged(e,t){return(void 0!==e&&null!==e||void 0!==t&&null!==t&&!this.isEmpty(t))&&(void 0!==e&&null!==e&&!this.hasValue()||!r.isEqual(e,t))}updateOnChange(e={},t=!1){return!(e.noUpdateEvent||!t)&&(this.triggerChange(e),!0)}convertNumberOrBoolToString(e){return"number"==typeof e||"boolean"==typeof e?e.toString():e}calculateComponentValue(e,t,n){if(!this.component.calculateValue||(!this.visible||this.component.hidden)&&this.component.clearOnHide&&!this.rootPristine)return!1;const s=this.component.allowCalculateOverride;let o=!1;const i=this.dataValue;if(void 0===this.calculatedValue&&(o=!0,this.calculatedValue=null),s&&this.calculatedValue&&!r.isEqual(i,this.convertNumberOrBoolToString(this.calculatedValue)))return!1;const a=this.evaluate(this.component.calculateValue,{value:i,data:e,row:n||this.data},"value");if(s&&o&&!this.isEmpty(i)&&!r.isEqual(i,this.convertNumberOrBoolToString(a)))return this.calculatedValue=a,!0;const l=this.setValue(a,t);return this.calculatedValue=this.dataValue,l}calculateValue(e,t,n){return e=e||this.rootValue,t=t||{},n=n||this.data,this.calculateComponentValue(e,t,n)}get label(){return this.component.label}set label(e){this.component.label=e,this.labelElement&&(this.labelElement.innerText=e)}getRoot(){return this.root}invalidMessage(e,t,n,s){return n||this.checkCondition(s,e)?this.invalid?this.invalid:!this.hasInput||!t&&this.pristine?"":r.map(a.checkComponent(this,e),"message").join("\n\n"):""}isValid(e,t){return!this.invalidMessage(e,t)}setComponentValidity(e,t){const n=!!e.filter(e=>"error"===e.level).length;return!e.length||!t&&this.pristine?this.setCustomValidity(""):this.setCustomValidity(e,t),!n}checkComponentValidity(e,n,r,s=!1){if(e=e||this.rootValue,r=r||this.data,this.shouldSkipValidation(e,n,r))return this.setCustomValidity(""),!s||t.resolve(!0);const o=a.checkComponent(this,e,r,!0,s);return s?o.then(e=>this.setComponentValidity(e,n)):this.setComponentValidity(o,n)}checkValidity(e,t,n){return e=e||this.rootValue,n=n||this.data,this.checkComponentValidity(e,t,n)}checkAsyncValidity(e,n,r){return t.resolve(this.checkComponentValidity(e,n,r,!0))}checkData(e,t,n){if(e=e||this.rootValue,t=t||{},n=n||this.data,this.checkRefreshOn(t.changed),t.noCheck)return!0;if(this.calculateComponentValue(e,t,n),this.checkComponentConditions(e,t,n),t.noValidate)return!0;let r=!this.builderMode&&!this.options.preview&&!this.isEmpty(this.defaultValue)&&this.isEqual(this.defaultValue,this.dataValue);return(this.options.alwaysDirty||t.dirty)&&(r=!0),t.fromSubmission&&this.hasValue(e)&&(r=!0),this.checkComponentValidity(e,r,n)}get validationValue(){return this.dataValue}isEmpty(e=this.dataValue){const t=!(!r.isArray(e)||1!==e.length)&&r.isEqual(e[0],this.emptyValue);return null==e||0===e.length||r.isEqual(e,this.emptyValue)||t}isEqual(e,t=this.dataValue){return this.isEmpty(e)&&this.isEmpty(t)||r.isEqual(e,t)}validateMultiple(){return!0}get errors(){return this.error?[this.error]:[]}clearErrorClasses(){this.removeClass(this.element,this.options.componentErrorClass),this.removeClass(this.element,"alert alert-danger"),this.removeClass(this.element,"has-error"),this.removeClass(this.element,"has-message")}setCustomValidity(e,t,n){"string"==typeof e&&e&&(e={level:"error",message:e}),Array.isArray(e)||(e=e?[e]:[]);const r=!!e.filter(e=>"error"===e.level).length;e.length?(this.refs.messageContainer&&this.empty(this.refs.messageContainer),this.error={component:this.component,message:e[0].message,messages:e,external:!!n},this.emit("componentError",this.error),this.addMessages(e,t,this.refs.input),this.refs.input&&this.setErrorClasses(this.refs.input,t,r,!!e.length)):this.error&&this.error.external===!!n&&(this.refs.messageContainer&&this.empty(this.refs.messageContainer),this.error=null,this.refs.input&&this.setErrorClasses(this.refs.input,t,r,!!e.length),this.clearErrorClasses())}isValueHidden(){return!(!this.root||!this.root.hasOwnProperty("editing"))&&(!(!this.root||!this.root.editing)&&(this.component.protected||!this.component.persistent||"client-only"===this.component.persistent))}shouldSkipValidation(e,t,n){const r=[()=>this.shouldDisabled,()=>this.isValueHidden(),()=>!this.visible,()=>!this.checkCondition(n,e)];return r.some(e=>e())}whenReady(){return console.warn("The whenReady() method has been deprecated. Please use the dataReady property instead."),this.dataReady}get dataReady(){return t.resolve()}asString(e){return e=e||this.getValue(),(Array.isArray(e)?e:[e]).map(r.toString).join(", ")}get disabled(){return this._disabled||this.parentDisabled}set disabled(e){this._disabled=e}setDisabled(e,t){e&&(e.disabled=t,t?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))}setLoading(e,t){e&&e.loading!==t&&(e.loading=t,!e.loader&&t&&(e.loader=this.ce("i",{class:`${this.iconClass("refresh",!0)} button-icon-right`})),e.loader&&(t?this.appendTo(e.loader,e):this.removeChildFrom(e.loader,e)))}selectOptions(e,t,n,s){r.each(n,t=>{const n={value:t.value};void 0!==s&&t.value===s&&(n.selected="selected");const r=this.ce("option",n);r.appendChild(this.text(t.label)),e.appendChild(r)})}setSelectValue(e,t){const n=e.querySelectorAll("option");r.each(n,e=>{e.value===t?e.setAttribute("selected","selected"):e.removeAttribute("selected")}),e.onchange&&e.onchange(),e.onselect&&e.onselect()}clear(){this.detach(),this.empty(this.getElement())}append(e){this.appendTo(e,this.element)}prepend(e){this.prependTo(e,this.element)}removeChild(e){this.removeChildFrom(e,this.element)}detachLogic(){this.logic.forEach(e=>{if("event"===e.trigger.type){const t=this.interpolate(e.trigger.event);this.off(t)}})}attachLogic(){this.builderMode||this.logic.forEach(e=>{if("event"===e.trigger.type){const t=this.interpolate(e.trigger.event);this.on(t,(...t)=>{const n=c.fastCloneDeep(this.originalComponent);this.applyActions(n,e.actions,t)&&(r.isEqual(this.component,n)||(this.component=n),this.redraw())},!0)}})}elementInfo(){const e={name:this.options.name,type:this.component.inputType||"text",class:"form-control",lang:this.options.language};return this.component.placeholder&&(e.placeholder=this.t(this.component.placeholder)),this.component.tabindex&&(e.tabindex=this.component.tabindex),this.disabled&&(e.disabled="disabled"),r.defaults(e,this.component.attributes),{type:"input",component:this.component,changeEvent:"change",attr:e}}autofocus(){this.component.autofocus&&!this.builderMode&&this.on("render",()=>this.focus(),!0)}focus(){this.refs.input&&this.refs.input[0]&&this.refs.input[0].focus()}}}),e("skylark-formio/components/_classes/field/Field",["../component/Component"],function(e){"use strict";return class extends e{render(e){return this.noField?super.render(e):this.isAdvancedLabel?super.render(this.renderTemplate("field",{...this.getLabelInfo(),labelMarkup:this.renderTemplate("label"),element:e},"align")):super.render(this.renderTemplate("field",{labelMarkup:this.renderTemplate("label"),element:e}))}}}),e("skylark-formio/components/_classes/nested/NestedComponent",["skylark-lodash","../field/Field","../../Components","../../../vendors/getify/npo"],function(e,t,n,r){"use strict";return class s extends t{static schema(...e){return t.schema({tree:!1},...e)}constructor(e,t,n){super(e,t,n),this.type="components",this._collapsed=!!this.component.collapsed}get defaultSchema(){return s.schema()}get schema(){const t=super.schema,n=e.uniqBy(this.getComponents(),"component.key");return t.components=e.map(n,"schema"),t}get collapsed(){return this._collapsed}set collapsed(e){this._collapsed=e,this.redraw()}set visible(e){super.visible=e;const t=this.visible,n=this.options.show&&this.options.show[this.component.key],r=this.options.hide&&this.options.hide[this.component.key];this.components.forEach(e=>{const s=e.conditionallyVisible();n||s?e.visible=!0:!r&&t&&s||(e.visible=!1),e.visible||(e.error=""),e.parentVisible=t})}get visible(){return super.visible}set parentVisible(e){super.parentVisible=e,this.components.forEach(e=>{e.parentVisible=this.visible})}get parentVisible(){return super.parentVisible}get disabled(){return super.disabled}set disabled(e){super.disabled=e,this.components.forEach(t=>t.parentDisabled=e)}set parentDisabled(e){super.parentDisabled=e,this.components.forEach(e=>{e.parentDisabled=this.disabled})}get parentDisabled(){return super.parentDisabled}get ready(){return r.all(this.getComponents().map(e=>e.ready))}get currentForm(){return super.currentForm}set currentForm(e){super.currentForm=e,this.getComponents().forEach(t=>{t.currentForm=e})}get rowIndex(){return this._rowIndex}set rowIndex(e){this._rowIndex=e,this.eachComponent(t=>{t.rowIndex=e})}componentContext(){return this._data}get data(){return this._data}set data(e){this._data=e,this.eachComponent(e=>{e.data=this.componentContext(e)})}getComponents(){return this.components||[]}everyComponent(t){const n=this.getComponents();e.each(n,(e,r)=>!1!==t(e,n,r)&&(("function"!=typeof e.everyComponent||!1!==e.everyComponent(t))&&void 0))}hasComponent(e){let t=!1;return this.everyComponent(n=>{if(n===e)return t=!0,!1}),t}flattenComponents(){const e={};return this.everyComponent(t=>{e[t.component.flattenAs||t.key]=t}),e}eachComponent(t){e.each(this.getComponents(),(e,n)=>{if(!1===t(e,n))return!1})}getComponent(t,n){t=Array.isArray(t)?t:[t];const[r,...s]=t;let o=null;return e.isString(r)?(this.everyComponent((e,t)=>{if(e.component.key===r)return o=e,s.length>0&&"getComponent"in e?o=e.getComponent(s,n):n&&n(e,t),!1}),o):o}getComponentById(e,t){let n=null;return this.everyComponent((r,s)=>{if(r.id===e)return n=r,t&&t(r,s),!1}),n}createComponent(t,r,s,o){if(!t)return;r=r||this.options,s=s||this.data,r.parent=this,r.parentVisible=this.visible,r.root=this.root||this,r.skipInit=!0;const i=n.create(t,r,s,!0);if(t.key){let e=this;for(;e&&!e.allowData&&e.parent;)e=e.parent;i.path=e.path?`${e.path}.`:"",i.path+=t.key}if(i.init(),t.internal)return i;if(o){const t=e.findIndex(this.components,{id:o.id});-1!==t?this.components.splice(t,0,i):this.components.push(i)}else this.components.push(i);return i}getContainer(){return this.element}get componentComponents(){return this.component.components||[]}get nestedKey(){return`nested-${this.key}`}get templateName(){return"container"}init(){return this.components=this.components||[],this.addComponents(),super.init()}addComponents(e,t){if(e=e||this.data,(t=t||this.options).components)this.components=t.components;else{const t=this.hook("addComponents",this.componentComponents,this)||[];t.forEach(t=>this.addComponent(t,e))}}addComponent(e,t,n,r){t=t||this.data,e=this.hook("addComponent",e,t,n,r);const s=this.createComponent(e,this.options,t,n||null);return s}render(e){return super.render(e||this.renderTemplate(this.templateName,{children:this.renderComponents(),nestedKey:this.nestedKey,collapsed:this.collapsed}))}renderComponents(e){const t=(e=e||this.getComponents()).map(e=>e.render());return this.renderTemplate("components",{children:t,components:e})}attach(e){const t=super.attach(e);this.loadRefs(e,{header:"single",collapsed:this.collapsed,[this.nestedKey]:"single"});let n=r.resolve();return this.refs[this.nestedKey]&&(n=this.attachComponents(this.refs[this.nestedKey])),this.component.collapsible&&this.refs.header&&this.addEventListener(this.refs.header,"click",()=>{this.collapsed=!this.collapsed}),r.all([t,n])}attachComponents(e,t,n){if(t=t||this.components,n=n||this.component.components,!(e=this.hook("attachComponents",e,t,n,this)))return new r(()=>{});let s=0;const o=[];return Array.prototype.slice.call(e.children).forEach(e=>{!e.getAttribute("data-noattach")&&t[s]&&(o.push(t[s].attach(e)),s++)}),r.all(o)}removeComponent(t,n){n=n||this.components,t.destroy(),e.remove(n,{id:t.id})}removeComponentByKey(e,t){const n=this.getComponent(e,(e,n)=>{this.removeComponent(e,n),t&&t(e,n)});if(!n)return t&&t(null),null}removeComponentById(e,t){const n=this.getComponentById(e,(e,n)=>{this.removeComponent(e,n),t&&t(e,n)});if(!n)return t&&t(null),null}updateValue(e,t={}){return this.components.reduce((e,n)=>n.updateValue(null,t)||e,super.updateValue(e,t))}shouldSkipValidation(e,t,n){return!this.component.input||super.shouldSkipValidation(e,t,n)}checkData(e,t,n,r){return!!this.builderMode||(e=e||this.rootValue,t=t||{},n=n||this.data,(r=r||this.getComponents()).reduce((r,s)=>s.checkData(e,t,n)&&r,super.checkData(e,t,n)))}checkConditions(e,t,n){return this.getComponents().forEach(r=>r.checkConditions(e,t,n)),super.checkConditions(e,t,n)}clearOnHide(e){super.clearOnHide(e),this.component.clearOnHide&&(this.allowData&&!this.hasValue()&&(this.dataValue=this.defaultValue),this.hasValue()&&this.restoreComponentsContext()),this.getComponents().forEach(t=>t.clearOnHide(e))}restoreComponentsContext(){this.getComponents().forEach(e=>e.data=this.dataValue)}beforePage(e){return r.all(this.getComponents().map(t=>t.beforePage(e)))}beforeSubmit(){return r.all(this.getComponents().map(e=>e.beforeSubmit()))}calculateValue(e,t,n){return!!this.conditionallyVisible()&&this.getComponents().reduce((r,s)=>s.calculateValue(e,t,n)||r,super.calculateValue(e,t,n))}isLastPage(){return this.pages.length-1===this.page}isValid(e,t){return this.getComponents().reduce((n,r)=>r.isValid(e,t)&&n,super.isValid(e,t))}checkValidity(e,t,n){return this.checkCondition(n,e)?this.getComponents().reduce((r,s)=>s.checkValidity(e,t,n)&&r,super.checkValidity(e,t,n)):(this.setCustomValidity(""),!0)}checkAsyncValidity(e,t,n){const s=[super.checkAsyncValidity(e,t,n)];return this.eachComponent(r=>s.push(r.checkAsyncValidity(e,t,n))),r.all(s).then(e=>e.reduce((e,t)=>e&&t,!0))}setPristine(e){super.setPristine(e),this.getComponents().forEach(t=>t.setPristine(e))}detach(){this.components.forEach(e=>{e.detach()}),super.detach()}destroy(){this.destroyComponents(),super.destroy()}destroyComponents(){const e=this.getComponents().slice();e.forEach(e=>this.removeComponent(e,this.components)),this.components=[]}get errors(){const e=this.error?[this.error]:[];return this.getComponents().reduce((e,t)=>e.concat(t.errors||[]),e)}getValue(){return this.data}resetValue(){this.getComponents().forEach(e=>e.resetValue()),this.unset(),this.setPristine(!0)}get dataReady(){return r.all(this.getComponents().map(e=>e.dataReady))}setNestedValue(t,n,r={}){return t._data=this.componentContext(t),"button"!==t.type&&("components"===t.type?t.setValue(n,r):n&&t.hasValue(n)?t.setValue(e.get(n,t.key),r):!this.rootPristine||t.visible?(r.noValidate=!r.dirty,r.resetValue=!0,t.setValue(t.defaultValue,r)):void 0)}setValue(e,t={}){return!!e&&this.getComponents().reduce((n,r)=>this.setNestedValue(r,e,t,n)||n,!1)}}}),e("skylark-formio/components/Components",["./_classes/component/Component","./_classes/nested/NestedComponent","skylark-lodash"],function(e,t,n){"use strict";return class r{static get components(){return r._components||(r._components={}),r._components}static setComponents(e){e.base&&(e.base.tableView=function(e,t){const n=r.create(t.component,t.options||{},t.data||{},!0);return n.getView(e)}),n.assign(r.components,e)}static addComponent(e,t){return r.setComponent(e,t)}static setComponent(e,t){r.components[e]=t}static create(n,s,o){let i=null;return i=n.type&&r.components.hasOwnProperty(n.type)?new r.components[n.type](n,s,o):Array.isArray(n.components)?new t(n,s,o):new e(n,s,o)}}}),e("skylark-formio/components/_classes/nesteddata/NestedDataComponent",["../component/Component","../nested/NestedComponent","skylark-lodash"],function(e,t,n){"use strict";return class extends t{hasChanged(e,t){return void 0!==e&&null!==e&&!this.hasValue()||!n.isEqual(e,t)}get allowData(){return!0}getValueAsString(){return"[Complex Data]"}getValue(){return this.dataValue}updateValue(t,n={}){return e.prototype.updateValue.call(this,t,n)}}}),e("skylark-formio/Webform",["skylark-lodash","skylark-moment","./EventEmitter","skylark-i18next","./Formio","./vendors/getify/npo","./components/Components","./components/_classes/nesteddata/NestedDataComponent","./utils/utils","./utils/formUtils"],function(e,t,n,r,s,o,i,a,l,c){"use strict";return s.forms={},s.registerComponent=i.setComponent,class extends a{constructor(){let t,i;arguments[0]instanceof HTMLElement||arguments[1]?(t=arguments[0],i=arguments[1]):i=arguments[0],super(null,function(t){(t=e.defaults(t,{submitOnEnter:!1,iconset:(o=t&&t.icons?t.icons:s.icons,"fontawesome"===o?"fa":o||""),i18next:r,saveDraft:!1,alwaysDirty:!1,saveDraftThrottle:5e3})).events||(t.events=new n({wildcard:!1,maxListeners:0}));var o;return t}(i)),this.element=t,s.forms[this.id]=this,this.options.baseUrl&&s.setBaseUrl(this.options.baseUrl);let a=require("./i18n").default;i&&i.i18n&&!i.i18nReady&&(i.i18n.resources?a=i.i18n:e.each(i.i18n,(t,n)=>{"options"===n?e.merge(a,t):a.resources[n]?e.assign(a.resources[n].translation,t):a.resources[n]={translation:t}}),i.i18n=a,i.i18nReady=!0),i&&i.i18n?this.options.i18n=i.i18n:this.options.i18n=a,this.options.language&&(this.options.i18n.lng=this.options.language),this.type="form",this._src="",this._loading=!1,this._form={},this.draftEnabled=!1,this.savingDraft=!0,this.options.saveDraftThrottle?this.triggerSaveDraft=e.throttle(this.saveDraft.bind(this),this.options.saveDraftThrottle):this.triggerSaveDraft=this.saveDraft.bind(this),this.customErrors=[],this.nosubmit=!1,this.submitted=!1,this.submitting=!1,this.formio=null,this.loader=null,this.alert=null,this.onSubmission=null,this.submissionSet=!1,this.formReady=new o((e,t)=>{this.formReadyResolve=e,this.formReadyReject=t}),this.submissionReady=new o((e,t)=>{this.submissionReadyResolve=e,this.submissionReadyReject=t}),this.shortcuts=[],this.localize().then(()=>{this.language=this.options.language}),this.options.saveDraft&&s.events&&s.events.on("formio.user",e=>{this.formReady.then(()=>{this.submissionSet||this.restoreDraft(e._id)})}),this.component.clearOnHide=!1,this.root=this}set language(e){return new o((t,n)=>{if(this.options.language=e,r.language===e)return t();try{r.changeLanguage(e,e=>{if(e)return n(e);this.redraw(),this.emit("languageChanged"),t()})}catch(e){return n(e)}})}addLanguage(e,t,n=!1){r.addResourceBundle(e,"translation",t,!0,!0),n&&(this.language=e)}localize(){return r.initialized?o.resolve(r):(r.initialized=!0,new o((e,t)=>{try{r.init(this.options.i18n,n=>{if(this.options.language=r.language.split(";")[0],n)return t(n);e(r)})}catch(e){return t(e)}}))}keyboardCatchableElement(e){return"TEXTAREA"!==e.nodeName&&("INPUT"!==e.nodeName||-1===["text","email","password"].indexOf(e.type))}executeShortcuts(t){const{target:n}=t;if(!this.keyboardCatchableElement(n))return;const r=t.ctrlKey||t.metaKey,s=t.keyCode;let o="";65<=s&&s<=90?o=String.fromCharCode(s):13===s?o="Enter":27===s&&(o="Esc"),e.each(this.shortcuts,e=>{e.ctrl&&!r||e.shortcut===o&&(e.element.click(),t.preventDefault())})}addShortcut(t,n){if(n&&/^([A-Z]|Enter|Esc)$/i.test(n))if("Enter"===(n=e.capitalize(n))||"Esc"===n){if("BUTTON"!==t.tagName)return;this.shortcuts.push({shortcut:n,element:t})}else this.shortcuts.push({ctrl:!0,shortcut:n,element:t})}removeShortcut(t,n){n&&/^([A-Z]|Enter|Esc)$/i.test(n)&&e.remove(this.shortcuts,{shortcut:n,element:t})}get src(){return this._src}loadSubmission(){return this.loadingSubmission=!0,this.formio.submissionId?this.onSubmission=this.formio.loadSubmission().then(e=>this.setSubmission(e),e=>this.submissionReadyReject(e)).catch(e=>this.submissionReadyReject(e)):this.submissionReadyResolve(),this.submissionReady}setSrc(e,t){return this.setUrl(e,t)?(this.nosubmit=!1,this.formio.loadForm({params:{live:1}}).then(e=>{const t=this.setForm(e);return this.loadSubmission(),t}).catch(e=>{console.warn(e),this.formReadyReject(e)})):o.resolve()}set src(e){this.setSrc(e)}get url(){return this._src}setUrl(e,t){return!(!e||"string"!=typeof e||e===this._src)&&(this._src=e,this.nosubmit=!0,this.formio=this.options.formio=new s(e,t),"form"===this.type&&(this.options.src=e),!0)}set url(e){this.setUrl(e)}get ready(){return this.formReady.then(()=>super.ready.then(()=>!this.loadingSubmission||this.submissionReady))}get loading(){return this._loading}set loading(e){if(this._loading!==e){if(this._loading=e,!this.loader&&e){this.loader=this.ce("div",{class:"loader-wrapper"});const e=this.ce("div",{class:"loader text-center"});this.loader.appendChild(e)}if(this.loader)try{e?this.prependTo(this.loader,this.wrapper):this.removeChildFrom(this.loader,this.wrapper)}catch(e){}}}setForm(e){if(this._form=e,e&&e.settings&&e.settings.components&&(this.options.components=e.settings.components),e&&e.module){let t=null;if("string"==typeof e.module)try{t=this.evaluate(`return ${e.module}`)}catch(e){console.warn(e)}else t=e.module;t&&(s.use(t),t.options&&t.options.form&&(this.options=Object.assign(this.options,t.options.form)))}this.initialized=!1;const t=this.rebuild()||o.resolve();return t.then(()=>(this.emit("formLoad",e),this.triggerRecaptcha(),setTimeout(()=>{this.onChange(),this.formReadyResolve()},0),this.formReady))}get form(){return this._form||(this._form={components:[]}),this._form}set form(e){this.setForm(e)}get submission(){return this.getValue()}set submission(e){this.setSubmission(e)}setSubmission(e,t={}){return t={...t,fromSubmission:!0},this.onSubmission=this.formReady.then(()=>(this.submissionSet=!0,this.triggerChange(t),this.setValue(e,t),this.submissionReadyResolve(e)),e=>this.submissionReadyReject(e)).catch(e=>this.submissionReadyReject(e))}saveDraft(){if(!this.draftEnabled)return;if(!this.formio)return void console.warn("Cannot save draft because there is no formio instance.");if(!s.getUser())return void console.warn("Cannot save draft unless a user is authenticated.");const t=this.submission;t.state="draft",this.savingDraft||(this.savingDraft=!0,this.formio.saveSubmission(t).then(n=>{const r=e.merge(n,t);this.emit("saveDraft",n),t._id?this.savingDraft=!1:this.setSubmission(r).then(()=>{this.savingDraft=!1})}))}restoreDraft(e){this.formio?(this.savingDraft=!0,this.formio.loadSubmissions({params:{state:"draft",owner:e}}).then(e=>{if(e.length>0&&!this.options.skipDraftRestore){const t=l.fastCloneDeep(e[0]);return this.setSubmission(t).then(()=>{this.draftEnabled=!0,this.savingDraft=!1,this.emit("restoreDraft",t)})}this.draftEnabled=!0,this.savingDraft=!1,this.emit("restoreDraft",null)})):console.warn("Cannot restore draft because there is no formio instance.")}get schema(){const t=l.fastCloneDeep(e.omit(this._form,["components"]));return t.components=[],this.undefined(e=>t.components.push(e.schema)),t}mergeData(t,n){e.mergeWith(t,n,(e,t)=>{if(Array.isArray(e)&&Array.isArray(t)&&e.length!==t.length)return t})}setValue(e,t={}){e&&e.data||(e={data:{}}),this._submission.metadata=e.metadata||{},this.editing=!!e._id,!this.options.submissionTimezone&&e.metadata&&e.metadata.timezone&&(this.options.submissionTimezone=e.metadata.timezone);const n=super.setValue(e.data,t);return t.sanitize||this.mergeData(this.data,e.data),e.data=this.data,this._submission=e,n}getValue(){if(this._submission.data||(this._submission.data={}),this.viewOnly)return this._submission;const e=this._submission;return e.data=this.data,this._submission}init(){return this._submission=this._submission||{data:{}},this.components&&this.components.length&&(this.destroyComponents(),this.components=[]),this.component?this.component.components=this.form?this.form.components:[]:this.component=this.form,this.component.type="form",this.component.input=!1,this.addComponents(),this.on("submitButton",e=>{this.submit(!1,e).catch(e=>!1!==e&&console.log(e))},!0),this.on("checkValidity",e=>this.checkValidity(e,!0,e),!0),this.on("requestUrl",e=>this.submitUrl(e.url,e.headers),!0),this.on("resetForm",()=>this.resetValue(),!0),this.on("deleteSubmission",()=>this.deleteSubmission(),!0),this.on("refreshData",()=>this.updateValue(),!0),this.executeFormController(),this.formReady}executeFormController(){if(!this.form||!this.form.controller||(!this.visible||this.component.hidden)&&this.component.clearOnHide&&!this.rootPristine)return!1;this.formReady.then(()=>{this.evaluate(this.form.controller,{components:this.components})})}destroy(){return this.off("submitButton"),this.off("checkValidity"),this.off("requestUrl"),this.off("resetForm"),this.off("deleteSubmission"),this.off("refreshData"),super.destroy()}build(e){return e||this.element?this.ready.then(()=>{e=e||this.element,super.build(e)}):this.ready}getClassName(){return"formio-form"}render(){return super.render(this.renderTemplate("webform",{classes:this.getClassName(),children:this.renderComponents()}),this.builderMode?"builder":"form",!0)}redraw(){return this.element?(this.clear(),this.setContent(this.element,this.render()),this.attach(this.element)):o.resolve()}attach(e){this.element=e,this.loadRefs(e,{webform:"single"});const t=this.attachComponents(this.refs.webform);return this.addEventListener(this.element,"keydown",this.executeShortcuts),this.currentForm=this,t.then(()=>(this.emit("render"),this.setValue(this._submission,{noUpdateEvent:!0})))}hasRequiredFields(){let e=!1;return c.eachComponent(this.form.components,t=>{if(t.validate.required)return e=!0,!0},!0),e}resetValue(){e.each(this.getComponents(),e=>e.resetValue()),this.setPristine(!0)}setAlert(e,t){if(e||!this.submitted)if(this.options.noAlerts)t||this.emit("error",!1);else{if(this.alert)try{this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(e=>{this.removeEventListener(e,"click"),this.removeEventListener(e,"keypress")}),this.removeChild(this.alert),this.alert=null}catch(e){}t&&(this.alert=this.ce("div",{id:`error-list-${this.id}`,class:`alert alert-${e}`,role:"alert"}),t instanceof HTMLElement?this.appendTo(t,this.alert):this.setContent(this.alert,t)),this.alert&&(this.loadRefs(this.alert,{errorRef:"multiple"}),this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(e=>{this.addEventListener(e,"click",e=>{const t=e.currentTarget.dataset.componentKey;this.focusOnComponent(t)}),this.addEventListener(e,"keypress",e=>{if(13===e.keyCode){const t=e.currentTarget.dataset.componentKey;this.focusOnComponent(t)}})}),this.prepend(this.alert))}else this.alert&&(this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(e=>{this.removeEventListener(e,"click"),this.removeEventListener(e,"keypress")}),this.removeChild(this.alert),this.alert=null)}focusOnComponent(e){if(e){const t=this.getComponent(e);t&&t.focus()}}showErrors(t,n){this.loading=!1;let r=this.errors;if(t?Array.isArray(t)?r=r.concat(t):r.push(t):r=super.errors,!(r=r.concat(this.customErrors)).length)return void this.setAlert(!1);r.forEach(t=>{const{components:n=[]}=t;t.component&&n.push(t.component),t.path&&n.push(t.path),n.forEach(n=>{const r=this.getComponent(n,e.identity),s=e.compact(Array.isArray(r)?r:[r]);s.forEach(e=>e.setCustomValidity(t.message,!0))})});const s=document.createDocumentFragment(),o=this.ce("p");this.setContent(o,this.t("error"));const i=this.ce("ul");return r.forEach(t=>{if(t){const n=e=>{const n={ref:"errorRef",tabIndex:0,"aria-label":`${e}. Click to navigate to the field with following error.`},r=this.ce("li",n);this.setContent(r,e),t.component&&t.component.key&&(r.dataset.componentKey=t.component.key),this.appendTo(r,i)};if(t.messages&&t.messages.length)t.messages.forEach(({message:e})=>n(`${this.t(t.component.label)}. ${e}`));else if(t){const r=e.isObject(t)?t.message||"":t;n(r)}}}),o.appendChild(i),s.appendChild(o),this.setAlert("danger",s),n&&this.emit("error",r),r}onSubmit(e,t){return this.loading=!1,this.submitting=!1,this.setPristine(!0),this.setValue(l.fastCloneDeep(e),{noValidate:!0,noCheck:!0}),this.setAlert("success",`<p>${this.t("complete")}</p>`),this.emit("submit",e),t&&this.emit("submitDone",e),e}onSubmissionError(e){return e&&("string"==typeof e&&(e={message:e}),"details"in e&&(e=e.details)),this.submitting=!1,this.setPristine(!1),this.emit("submitError",e),e&&e.silent?(this.emit("change",{isValid:!0}),!1):this.showErrors(e,!0)}onChange(t,n,r){t=t||{};let s=!1;n&&n.component&&(this.customErrors=this.customErrors.filter(e=>e.component&&e.component!==n.component.key)),super.onChange(t,!0);const o=e.clone(this.submission);t.changed=o.changed=n,r&&this.pristine&&(this.pristine=!1),o.isValid=this.checkData(o.data,t),this.loading=!1,this.submitted&&this.showErrors(),r&&this.options.saveDraft&&this.triggerSaveDraft(),t&&t.noEmit||(this.emit("change",o,t),s=!0),s&&!this.initialized&&(this.emit("initialized"),this.initialized=!0)}checkData(t,n={}){const r=super.checkData(t,n);return(e.isEmpty(n)||n.noValidate)&&this.submitted&&this.showErrors(),r}deleteSubmission(){return this.formio.deleteSubmission().then(()=>{this.emit("submissionDeleted",this.submission),this.resetValue()})}cancel(e){const t=this.hook("beforeCancel",!0);return!(!t||!e&&!confirm("Are you sure you want to cancel?"))&&(this.resetValue(),!0)}submitForm(n={}){return new o((r,o)=>{if(this.options.readOnly)return r({submission:this.submission,saved:!1});const i=l.fastCloneDeep(this.submission||{});i.metadata=i.metadata||{},e.defaults(i.metadata,{timezone:e.get(this,"_submission.metadata.timezone",l.currentTimezone()),offset:parseInt(e.get(this,"_submission.metadata.offset",t().utcOffset()),10),referrer:document.referrer,browserName:navigator.appName,userAgent:navigator.userAgent,pathName:window.location.pathname,onLine:navigator.onLine}),i.state=n.state||"submitted";const a="draft"===i.state;this.hook("beforeSubmit",{...i,component:n.component},t=>t?o(t):a||i.data?a||this.checkValidity(i.data,!0,i.data)?(this.everyComponent(t=>{const{persistent:n}=t.component;"client-only"===n&&e.unset(i.data,t.path)}),void this.hook("customValidation",{...i,component:n.component},e=>{if(e)return"string"==typeof e&&(e={message:e}),e=Array.isArray(e)?e:[e],this.customErrors=e,o();if(this.loading=!0,this._form&&this._form.action){const e=i.data._id&&this._form.action.includes(i.data._id)?"PUT":"POST";return s.makeStaticRequest(this._form.action,e,i,this.formio?this.formio.options:{}).then(e=>r({submission:e,saved:!0})).catch(o)}const t=this.formio;if(this.nosubmit||!t)return r({submission:i,saved:!1});const n=t.actionUrl?"saveAction":"saveSubmission";t[n](i).then(e=>r({submission:e,saved:!0})).catch(o)})):o():o("Invalid Submission"))})}executeSubmit(e){return this.submitted=!0,this.submitting=!0,this.submitForm(e).then(({submission:e,saved:t})=>this.onSubmit(e,t)).catch(e=>o.reject(this.onSubmissionError(e)))}submit(e,t){return e?this.executeSubmit(t):this.beforeSubmit(t).then(()=>this.executeSubmit(t))}submitUrl(e,t){if(!e)return console.warn("Missing URL argument");const n=this.submission||{},r=e,o={method:"POST",headers:{}};if(t&&t.length>0&&t.map(e=>{""!==e.header&&""!==e.value&&(o.headers[e.header]=this.interpolate(e.value,n))}),!r||!o)return this.emit("error","You should add a URL to this button."),this.setAlert("warning","You should add a URL to this button."),console.warn("You should add a URL to this button.");try{s.makeStaticRequest(r,o.method,n,{headers:o.headers}).then(()=>{this.emit("requestDone"),this.setAlert("success","<p> Success </p>")})}catch(e){this.showErrors(`${e.statusText} ${e.status}`),this.emit("error",`${e.statusText} ${e.status}`),console.error(`${e.statusText} ${e.status}`)}}triggerRecaptcha(){if(!this||!this.components)return;const e=this.components.find(e=>"recaptcha"===e.component.type&&"formLoad"===e.component.eventType);e&&e.verify(`${this.form.name?this.form.name:"form"}Load`)}set nosubmit(e){this._nosubmit=!!e,this.emit("nosubmit",this._nosubmit)}get nosubmit(){return this._nosubmit||!1}}}),e("skylark-formio/PDF",["./vendors/getify/npo","./Formio","./Webform","./utils/utils"],function(e,t,n,r){"use strict";return class extends n{constructor(e,t){super(e,t),this.components=[]}init(){super.init(),this.on("iframe-submission",e=>this.setValue(e,{fromIframe:!0}),!0),this.on("iframe-change",e=>this.setValue(e,{fromIframe:!0}),!0),this.on("iframe-getIframePositions",()=>{const e=document.querySelector("iframe").getBoundingClientRect();this.postMessage({name:"iframePositions",data:{iframe:{top:e.top},scrollY:window.scrollY||window.pageYOffset}})}),this.on("iframe-ready",()=>this.iframeReadyResolve(),!0)}render(){return this.renderTemplate("pdf",{classes:"formio-form-pdf",children:this.renderComponents()})}redraw(){return super.redraw()}attach(t){return super.attach(t).then(()=>{this.loadRefs(t,{submitButton:"single",zoomIn:"single",zoomOut:"single",iframeContainer:"single"}),this.iframeReady=new e((e,t)=>{this.iframeReadyResolve=e,this.iframeReadyReject=t}),this.iframeElement=this.ce("iframe",{src:this.getSrc(),id:`iframe-${this.id}`,seamless:!0,class:"formio-iframe"}),this.iframeElement.formioContainer=this.component.components,this.iframeElement.formioComponent=this,this.empty(this.refs.iframeContainer),this.appendChild(this.refs.iframeContainer,this.iframeElement),this.postMessage({name:"form",data:this.form});const n=this.components.find(e=>e.element===this.refs.submitButton);this.refs.submitButton.classList.toggle("hidden",!n.visible),this.addEventListener(this.refs.submitButton,"click",()=>(this.postMessage({name:"getErrors"}),this.submit())),this.addEventListener(this.refs.zoomIn,"click",e=>{e.preventDefault(),this.postMessage({name:"zoomIn"})}),this.addEventListener(this.refs.zoomOut,"click",e=>{e.preventDefault(),this.postMessage({name:"zoomOut"})});const s=r.fastCloneDeep(this.form);this.formio&&(s.projectUrl=this.formio.projectUrl,s.url=this.formio.formUrl,s.base=this.formio.base,this.postMessage({name:"token",data:this.formio.getToken()})),this.emit("attach")})}getSubmission(){return new e(e=>{this.once("iframe-submission",e),this.postMessage({name:"getSubmission"})})}submitForm(e={}){return this.getSubmission().then(()=>super.submitForm(e))}getSrc(){if(!this._form||!this._form.settings||!this._form.settings.pdf)return"";let e=`${this._form.settings.pdf.src}.html`;const t=[`id=${this.id}`];return this.options.readOnly&&t.push("readonly=1"),this.options.zoom&&t.push(`zoom=${this.options.zoom}`),this.builderMode&&t.push("builder=1"),t.length&&(e+=`?${t.join("&")}`),e}setForm(e){return super.setForm(e).then(()=>{this.formio&&(e.projectUrl=this.formio.projectUrl,e.url=this.formio.formUrl,e.base=this.formio.base,this.postMessage({name:"token",data:this.formio.getToken()})),this.postMessage({name:"form",data:e})})}setValue(e,t={}){const n=super.setValue(e,t);return t&&t.fromIframe||this.once("iframe-ready",()=>{this.postMessage({name:"submission",data:e})}),n}setSubmission(e){return e.readOnly=!!this.options.readOnly,super.setSubmission(e).then(()=>{this.formio&&this.formio.getDownloadUrl().then(e=>{e&&(this.downloadButton||(this.options.primaryProject&&(e+=`&project=${this.options.primaryProject}`),this.downloadButton=this.ce("a",{href:e,target:"_blank",style:"position:absolute;right:10px;top:110px;cursor:pointer;"},this.ce("img",{src:require("./pdf.image"),style:"width:3em;"})),this.element.insertBefore(this.downloadButton,this.iframe)))})})}postMessage(e){this.iframeReady&&(e.type||(e.type="iframe-data"),this.iframeReady.then(()=>{this.iframeElement&&this.iframeElement.contentWindow&&this.iframeElement.contentWindow.postMessage(JSON.stringify(e),"*")}))}focusOnComponent(e){this.postMessage({name:"focusErroredField",data:e})}clear(){}showErrors(e,t){const n=document.getElementById("submit-error");if(!n){const e=this.ce("p",{class:"help-block"});this.setContent(e,this.t("submitError")),e.addEventListener("click",()=>{window.scrollTo(0,0)});const t=this.ce("div",{id:"submit-error",class:"has-error"});this.appendTo(e,t),this.appendTo(t,this.element)}!this.errors.length&&n&&n.remove(),this.errors.length&&this.focusOnComponent(this.errors[0].component.key),this.errors.length&&this.focusOnComponent(this.errors[0].component.key),super.showErrors(e,t)}}}),e("skylark-formio/Wizard",["./vendors/getify/npo","skylark-lodash","./Webform","./Formio","./utils/utils"],function(e,t,n,r,s){"use strict";return class extends n{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],super(e,t),this.pages=[],this.prefixComps=[],this.suffixComps=[],this.components=[],this.originalComponents=[],this.page=0,this.currentNextPage=0,this._seenPages=[0]}isLastPage(){const e=this.getNextPage();return t.isNumber(e)?0<e&&e>=this.pages.length:t.isNull(e)}getPages(e={}){const{all:n=!1}=e,r=this.pages.filter(n?t.identity:(e,t)=>this._seenPages.includes(t));return r}getComponents(){return this.submitting?this.getPages({all:this.isLastPage()}):super.getComponents()}resetValue(){this.getPages({all:!0}).forEach(e=>e.resetValue()),this.setPristine(!0)}init(){this.options.buttonSettings=t.defaults(this.options.buttonSettings,{showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!this.options.readOnly}),this.options.breadcrumbSettings=t.defaults(this.options.breadcrumbSettings,{clickable:!0}),this.page=0;const e=super.init();return this.setComponentSchema(),e}get wizardKey(){return`wizard-${this.id}`}get form(){return this.wizard}set form(e){super.form=e}get buttons(){const e={};return[{name:"cancel",method:"cancel"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"},{name:"submit",method:"submit"}].forEach(t=>{this.hasButton(t.name)&&(e[t.name]=t)}),e}get renderContext(){return{wizardKey:this.wizardKey,isBreadcrumbClickable:this.isBreadcrumbClickable(),panels:this.pages.map(e=>e.component),buttons:this.buttons,currentPage:this.page}}render(){const e=this.renderContext;return this.renderTemplate("wizard",{...e,className:super.getClassName(),wizardHeader:this.renderTemplate("wizardHeader",e),wizardNav:this.renderTemplate("wizardNav",e),components:this.renderComponents([...this.prefixComps,...this.currentPage.components,...this.suffixComps])},this.builderMode?"builder":"form")}redrawNavigation(){if(this.element){let e=this.element.querySelector(`#${this.wizardKey}-nav`);e&&(this.detachNav(),e.outerHTML=this.renderTemplate("wizardNav",this.renderContext),e=this.element.querySelector(`#${this.wizardKey}-nav`),this.loadRefs(e,{[`${this.wizardKey}-cancel`]:"single",[`${this.wizardKey}-previous`]:"single",[`${this.wizardKey}-next`]:"single",[`${this.wizardKey}-submit`]:"single"}),this.attachNav())}}redrawHeader(){if(this.element){let e=this.element.querySelector(`#${this.wizardKey}-header`);e&&(this.detachHeader(),e.outerHTML=this.renderTemplate("wizardHeader",this.renderContext),e=this.element.querySelector(`#${this.wizardKey}-header`),this.loadRefs(e,{[`${this.wizardKey}-link`]:"multiple"}),this.attachHeader())}}attach(e){this.element=e,this.loadRefs(e,{[this.wizardKey]:"single",[`${this.wizardKey}-cancel`]:"single",[`${this.wizardKey}-previous`]:"single",[`${this.wizardKey}-next`]:"single",[`${this.wizardKey}-submit`]:"single",[`${this.wizardKey}-link`]:"multiple"});const t=this.attachComponents(this.refs[this.wizardKey],[...this.prefixComps,...this.currentPage.components,...this.suffixComps]);return this.attachNav(),this.attachHeader(),t.then(()=>this.emit("render"))}isBreadcrumbClickable(){return t.get(this.options,"breadcrumbSettings.clickable",!0)}attachNav(){t.each(this.buttons,e=>{const t=this.refs[`${this.wizardKey}-${e.name}`];this.addEventListener(t,"click",n=>{n.preventDefault(),t.setAttribute("disabled","disabled"),this.setLoading(t,!0),this[e.method]().then(()=>{t.removeAttribute("disabled"),this.setLoading(t,!1)}).catch(()=>{t.removeAttribute("disabled"),this.setLoading(t,!1)})})})}attachHeader(){this.isBreadcrumbClickable()&&this.refs[`${this.wizardKey}-link`].forEach((e,t)=>{this.addEventListener(e,"click",e=>(this.emit("wizardNavigationClicked",this.pages[t]),e.preventDefault(),this.setPage(t).then(()=>{this.emit("wizardPageSelected",this.pages[t],t)})))})}detachNav(){t.each(this.buttons,e=>{this.removeEventListener(this.refs[`${this.wizardKey}-${e.name}`],"click")})}detachHeader(){this.refs[`${this.wizardKey}-link`].forEach(e=>{this.removeEventListener(e,"click")})}establishPages(){this.pages=[],this.prefixComps=[],this.suffixComps=[];const e=[],n={},r=t.clone(this.options);return this.components&&this.components.length&&this.components.map(e=>{"panel"===e.component.type&&(n[e.component.key||e.component.title]=e)}),this.originalComponents&&this.originalComponents.forEach(t=>{if("panel"===t.type){t.key||(t.key=t.title);let o=n[t.key];const i=s.checkCondition(t,this.data,this.data,this.component,this);i&&(e.push(t),o&&this.pages.push(o)),!o&&i?(o=this.createComponent(t,r),this.pages.push(o),o.eachComponent(e=>{e.page=this.pages.length-1})):o&&!i&&this.removeComponent(o)}else"button"!==t.type&&(this.pages.length?this.suffixComps.push(this.createComponent(t,r)):this.prefixComps.push(this.createComponent(t,r)))}),e}addComponents(){this.establishPages()}setPage(t){return t===this.page?e.resolve():!this.wizard.full&&t>=0&&t<this.pages.length?(this.page=t,this.pageFieldLogic(t),this.getNextPage(),this._seenPages.includes(t)||(this._seenPages=this._seenPages.concat(t)),this.redraw().then(()=>{this.options.readOnly||this.checkValidity(this.submission.data,!1,this.submission.data,!0)}),e.resolve()):this.wizard.full||!this.pages.length?(this.redraw(),e.resolve()):e.reject("Page not found")}pageFieldLogic(e){this.component=this.pages[e].component,this.originalComponent=s.fastCloneDeep(this.component),this.fieldLogic(this.data),this.disabled=this.shouldDisabled}get currentPage(){return this.pages&&this.pages.length>=this.page?this.pages[this.page]:{components:[]}}getNextPage(){const e=this.submission.data,t=this.pages[this.page].component;if(t){const n=this.pages.length>this.page+1?this.page+1:-1;if(t.nextPage){const r=this.evaluate(t.nextPage,{next:n,data:e,page:n,form:t},"next");if(null===r)return this.currentNextPage=null,null;const s=parseInt(r,10);return!isNaN(parseInt(s,10))&&isFinite(s)?(this.currentNextPage=s,s):(this.currentNextPage=this.getPageIndexByKey(r),this.currentNextPage)}return this.currentNextPage=n,n}return this.currentNextPage=null,null}getPreviousPage(){return this.page-1}beforeSubmit(){return e.all(this.getPages().map(e=>(e.options.beforeSubmit=!0,e.beforeSubmit())))}beforePage(t){return new e((e,n)=>{this.hook(t?"beforeNext":"beforePrev",this.currentPage,this.submission,r=>{r&&(this.showErrors(r,!0),n(r));const s=this.currentPage;s?s.beforePage(t).then(e).catch(n):e()})})}nextPage(){return this.options.readOnly?this.setPage(this.getNextPage()).then(()=>{this.emit("nextPage",{page:this.page,submission:this.submission})}):this.checkValidity(this.submission.data,!0,this.submission.data,!0)?(this.checkData(this.submission.data),this.beforePage(!0).then(()=>this.setPage(this.getNextPage()).then(()=>{this.emit("nextPage",{page:this.page,submission:this.submission})}))):(this.currentPage.components.forEach(e=>e.setPristine(!1)),e.reject(this.showErrors([],!0)))}prevPage(){return this.beforePage().then(()=>this.setPage(this.getPreviousPage()).then(()=>{this.emit("prevPage",{page:this.page,submission:this.submission})}))}cancel(t){return super.cancel(t)?(this.setPristine(!0),this.setPage(0).then(()=>(this.redraw(),this.page))):e.resolve()}getPageIndexByKey(e){let t=this.page;return this.pages.forEach((n,r)=>{if(n.component.key===e)return t=r,!1}),t}get schema(){return this.wizard}setComponentSchema(){const e={};if(this.originalComponents=[],this.component.components.map(n=>{"panel"===n.type&&(n.key=s.uniqueKey(e,n.key||"panel"),e[n.key]=!0),this.originalComponents.push(t.clone(n))}),!Object.keys(e).length){const e={type:"panel",title:"Page 1",label:"Page 1",key:"page1",components:this.component.components};this.component.components=[e],this.originalComponents.push(t.clone(e))}}setForm(e){if(e)return this.wizard=e,this.component.components=e.components||[],this.setComponentSchema(),super.setForm(e)}setValue(e,t={}){const n=super.setValue(e,t);return this.pageFieldLogic(this.page),n}isClickable(e,n){return this.page!==n&&s.firstNonNil([t.get(e,"breadcrumbClickable"),this.options.breadcrumbSettings.clickable])}hasButton(e,n){const r=this.currentPage;if("previous"===e){const e=s.firstNonNil([t.get(r,"buttonSettings.previous"),this.options.buttonSettings.showPrevious]);return this.getPreviousPage()>-1&&e}if(n=void 0===n?this.getNextPage():n,"next"===e){const e=s.firstNonNil([t.get(r,"buttonSettings.next"),this.options.buttonSettings.showNext]);return null!==n&&-1!==n&&e}if("cancel"===e)return s.firstNonNil([t.get(r,"buttonSettings.cancel"),this.options.buttonSettings.showCancel]);if("submit"===e){const e=s.firstNonNil([t.get(r,"buttonSettings.submit"),this.options.buttonSettings.showSubmit]);return e&&!this.options.readOnly&&(null===n||this.page===this.pages.length-1)}return!0}pageId(e){return e.key?`${e.key}-${e.title}`:e.components&&e.components.length>0?this.pageId(e.components[0]):e.title}onChange(e,n,r){super.onChange(e,n,r),this.alert&&!this.submitted&&(this.checkValidity(this.submission.data,!1,this.submission.data,!0),this.showErrors([],!0));const s=this.pages.map(e=>e.component.key),o=this.establishPages().map(e=>e.key),i=this.currentNextPage;t.isEqual(o,s)||this.redrawHeader(),i!==this.getNextPage()&&this.redrawNavigation()}checkValidity(e,t,n,r){if(!this.undefined(n,e))return this.setCustomValidity(""),!0;const s=!r||this.isLastPage()?this.getComponents():this.currentPage.components;return s.reduce((r,s)=>s.checkValidity(e,t,n)&&r,!0)}get errors(){return this.isLastPage()?super.errors:this.currentPage.errors}focusOnComponent(e){let t=0;const[n]=this.pages.filter((n,r)=>!!n.getComponent(e)&&(t=r,!0));return n&&n!==this.currentPage?this.setPage(t).then(()=>{this.checkValidity(this.submission.data,!0,this.submission.data),this.showErrors(),super.focusOnComponent(e)}):super.focusOnComponent(e)}}}),e("skylark-formio/displays/Displays",["skylark-lodash","../PDF","../Webform","../Wizard"],function(e,t,n,r){"use strict";return class t{static addDisplay(e,n){t.displays[e]=n}static addDisplays(n){t.displays=e.merge(t.displays,n)}static getDisplay(e){return t.displays[e]}static getDisplays(){return t.displays}}}),e("skylark-formio/displays/index",["./Displays"],function(e){"use strict";return e}),e("skylark-formio/Form",["./Element","./Formio","./displays/index","./templates/index","./utils/utils","./vendors/getify/npo"],function(e,t,n,r,s,o){"use strict";return class i extends e{constructor(...e){let n=e[0]instanceof HTMLElement?e[2]:e[1];t.options&&t.options.form&&(n=Object.assign(n,t.options.form)),super(n),this.ready=new o((e,t)=>{this.readyResolve=e,this.readyReject=t}),this.instance=null,e[0]instanceof HTMLElement?(this.element=e[0],this.options=e[2]||{},this.options.events=this.events,this.setForm(e[1]).then(()=>this.readyResolve(this.instance)).catch(this.readyReject)):e[0]?(this.element=null,this.options=e[1]||{},this.options.events=this.events,this.setForm(e[0]).then(()=>this.readyResolve(this.instance)).catch(this.readyReject)):(this.element=null,this.options={},this.options.events=this.events),this.display=""}create(e){return this.options&&(this.options.flatten||"flat"===this.options.renderMode)&&(e="form"),this.display=e,n.displays[e]?new n.displays[e](this.element,this.options):new n.displays.webform(this.element,this.options)}set form(e){return this.setForm(e)}errorForm(e){return{components:[{label:"HTML",tag:"div",className:"error error-message alert alert-danger ui red message",attrs:[{attr:"role",value:"alert"}],key:"errorMessage",type:"htmlelement",input:!1,content:"string"==typeof e?e:e.message}]}}setForm(e){let n;if("string"==typeof(e=e||this.form)){const r=new t(e);let s;n=this.getSubmission(r).catch(e=>{s=e}).then(t=>r.loadForm().catch(e=>{s=e}).then(n=>{if(s&&(n=this.errorForm(s)),this.instance=this.instance||this.create(n.display),this.instance.url=e,this.instance.nosubmit=!1,this._form=this.instance.form=n,t&&(this.instance.submission=t),s)throw s;return this.instance}))}else this.instance=this.instance||this.create(e.display),this._form=this.instance.form=e,n=this.instance.ready;return n.then(()=>(this.element=this.instance.element,this.instance))}getSubmission(e){return e.submissionId?e.loadSubmission():o.resolve()}get form(){return this._form}setDisplay(e){return this.display===e&&this.instance?o.resolve(this.instance):(this.form.display=e,this.instance.destroy(),this.instance=this.create(e),this.setForm(this.form))}empty(){if(this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}static embed(e){return new o(t=>{e&&e.src||t();const n=this.id||`formio-${Math.random().toString(36).substring(7)}`,r=e.class||"formio-form-wrapper";let s=e.styles?`<link rel="stylesheet" href="${e.styles}">`:"";s+=`<div id="${n}" class="${r}"></div>`,document.write(s);let o=0;const a=setInterval(()=>{o++;const r=document.getElementById(n);(r||o>10)&&(t(new i(r,e.src).ready),clearInterval(a))},10)})}sanitize(e){return s.sanitize(e,this.options)}setContent(e,t){return e instanceof HTMLElement&&(e.innerHTML=this.sanitize(t),!0)}build(){if(!this.instance)return o.reject("Form not ready. Use form.ready promise");if(!this.element)return o.reject("No DOM element for form.");const e=this.options&&this.options.template?this.options.template:"bootstrap",t=r[e].loader||r.bootstrap.loader;return this.setContent(this.element,t.form),this.render().then(e=>(this.setContent(this.element,e),this.attach(this.element).then(()=>this.instance))).then(e=>(this.emit("build",e),e))}render(){return this.instance?o.resolve(this.instance.render()).then(e=>(this.emit("render",e),e)):o.reject("Form not ready. Use form.ready promise")}attach(e){return this.instance?(this.element=e,this.instance.attach(this.element).then(e=>(this.emit("attach",e),e))):o.reject("Form not ready. Use form.ready promise")}}}),e("skylark-formio/vendors/tooltip-js/tooltip",["skylark-popper"],function(e){var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const n={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"};var r=function(){this.show=(()=>this._show(this.reference,this.options)),this.hide=(()=>this._hide()),this.dispose=(()=>this._dispose()),this.toggle=(()=>this._isOpen?this.hide():this.show()),this.updateTitleContent=(e=>this._updateTitleContent(e)),this._events=[],this._setTooltipNodeEvent=((e,t,n,r)=>{const s=e.relatedreference||e.toElement||e.relatedTarget,o=n=>{const s=n.relatedreference||n.toElement||n.relatedTarget;this._tooltipNode.removeEventListener(e.type,o),t.contains(s)||this._scheduleHide(t,r.delay,r,n)};return!!this._tooltipNode.contains(s)&&(this._tooltipNode.addEventListener(e.type,o),!0)})};return class{constructor(e,s){r.call(this),s=t({},n,s),e.jquery&&(e=e[0]),this.reference=e,this.options=s;const o="string"==typeof s.trigger?s.trigger.split(" ").filter(e=>-1!==["click","hover","focus"].indexOf(e)):[];this._isOpen=!1,this._popperOptions={},this._setEventListeners(e,o,s)}_create(e,t,n,r){const s=window.document.createElement("div");s.innerHTML=t.trim();const o=s.childNodes[0];o.id=`tooltip_${Math.random().toString(36).substr(2,10)}`,o.setAttribute("aria-hidden","false");const i=s.querySelector(this.options.innerSelector);return this._addTitleContent(e,n,r,i),o}_addTitleContent(e,t,n,r){if(1===t.nodeType||11===t.nodeType)n&&r.appendChild(t);else if((s=t)&&"[object Function]"==={}.toString.call(s)){const s=t.call(e);n?r.innerHTML=s:r.textContent=s}else n?r.innerHTML=t:r.textContent=t;var s}_show(n,r){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this;const s=n.getAttribute("title")||r.title;if(!s)return this;const o=this._create(n,r.template,s,r.html);n.setAttribute("aria-describedby",o.id);const i=this._findContainer(r.container,n);return this._append(o,i),this._popperOptions=t({},r.popperOptions,{placement:r.placement}),this._popperOptions.modifiers=t({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:r.offset}}),r.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={boundariesElement:r.boundariesElement}),this.popperInstance=new e(n,o,this._popperOptions),this._tooltipNode=o,this}_hide(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true"),this):this}_dispose(){return this._events.forEach(({func:e,event:t})=>{this.reference.removeEventListener(t,e)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}_findContainer(e,t){return"string"==typeof e?e=window.document.querySelector(e):!1===e&&(e=t.parentNode),e}_append(e,t){t.appendChild(e)}_setEventListeners(e,t,n){const r=[],s=[];t.forEach(e=>{switch(e){case"hover":r.push("mouseenter"),s.push("mouseleave");break;case"focus":r.push("focus"),s.push("blur");break;case"click":r.push("click"),s.push("click")}}),r.forEach(t=>{const r=t=>{!0!==this._isOpening&&(t.usedByTooltip=!0,this._scheduleShow(e,n.delay,n,t))};this._events.push({event:t,func:r}),e.addEventListener(t,r)}),s.forEach(t=>{const r=t=>{!0!==t.usedByTooltip&&this._scheduleHide(e,n.delay,n,t)};this._events.push({event:t,func:r}),e.addEventListener(t,r),"click"===t&&n.closeOnClickOutside&&document.addEventListener("mousedown",t=>{if(!this._isOpening)return;const n=this.popperInstance.popper;e.contains(t.target)||n.contains(t.target)||r(t)},!0)})}_scheduleShow(e,t,n){this._isOpening=!0;const r=t&&t.show||t||0;this._showTimeout=window.setTimeout(()=>this._show(e,n),r)}_scheduleHide(e,t,n,r){this._isOpening=!1;const s=t&&t.hide||t||0;window.setTimeout(()=>{if(window.clearTimeout(this._showTimeout),!1!==this._isOpen&&document.body.contains(this._tooltipNode)){if("mouseleave"===r.type){const s=this._setTooltipNodeEvent(r,e,t,n);if(s)return}this._hide(e,n)}},s)}_updateTitleContent(e){if(void 0===this._tooltipNode)return void(void 0!==this.options.title&&(this.options.title=e));const t=this._tooltipNode.parentNode.querySelector(this.options.innerSelector);this._clearTitleContent(t,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,e,this.options.html,t),this.options.title=e,this.popperInstance.update()}_clearTitleContent(e,t,n){1===n.nodeType||11===n.nodeType?t&&e.removeChild(n):t?e.innerHTML="":e.textContent=""}}}),e("skylark-formio/utils/builder",["skylark-lodash","./utils"],function(e,t){"use strict";return{uniquify(e,n){let r=!1;const s={};return t.eachComponent(e,function(e){s[e.key]=!0},!0),t.eachComponent([n],e=>{if(!e.key)return;const n=t.uniqueKey(s,e.key);n!==e.key&&(e.key=n,s[n]=!0,r=!0)},!0),r},additionalShortcuts:{button:["Enter","Esc"]},getAlphaShortcuts:()=>e.range("A".charCodeAt(),"Z".charCodeAt()+1).map(e=>String.fromCharCode(e)),getAdditionalShortcuts(e){return this.additionalShortcuts[e]||[]},getBindedShortcuts(e,n){const r=[];return t.eachComponent(e,e=>{e!==n&&(e.shortcut&&r.push(e.shortcut),e.values&&e.values.forEach(e=>{e.shortcut&&r.push(e.shortcut)}))},!0),r},getAvailableShortcuts(t,n){return n?[""].concat(e.difference(this.getAlphaShortcuts().concat(this.getAdditionalShortcuts(n.type)),this.getBindedShortcuts(t.components,n))).map(e=>({label:e,value:e})):[]}}}),e("skylark-formio/WebformBuilder",["./Webform","./components/_classes/component/Component","skylark-dragula","./vendors/tooltip-js/tooltip","./vendors/getify/npo","./components/Components","./Formio","./utils/utils","./utils/formUtils","./utils/builder","skylark-lodash","./templates/Templates"],function(e,t,n,r,s,o,i,a,l,c,u,d){"use strict";return require("./components/builder"),class extends t{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],t.skipInit=!1,super(null,t),this.element=e,this.builderHeight=0,this.schemas={},this.sideBarScroll=u.get(this.options,"sideBarScroll",!0),this.sideBarScrollOffset=u.get(this.options,"sideBarScrollOffset",0);const n={};for(const e in o.components){const t=o.components[e];t.builderInfo&&(t.type=e,n[e]=t.builderInfo)}this.dragDropEnabled=!0,this.builder=u.defaultsDeep({},this.options.builder,this.defaultGroups),u.each(this.defaultGroups,(e,t)=>{!1===e&&(this.builder[t]=!1)}),this.groups={},this.groupOrder=[];for(const e in this.builder)this.builder[e]&&(this.builder[e].key=e,this.groups[e]=this.builder[e],this.groups[e].components=this.groups[e].components||{},this.groups[e].componentOrder=this.groups[e].componentOrder||[],this.groups[e].subgroups=Object.keys(this.groups[e].groups||{}).map(t=>(this.groups[e].groups[t].componentOrder=Object.keys(this.groups[e].groups[t].components).map(e=>e),this.groups[e].groups[t])),this.groupOrder.push(this.groups[e]));this.groupOrder=this.groupOrder.filter(e=>e&&!e.ignore).sort((e,t)=>e.weight-t.weight).map(e=>e.key);for(const e in o.components){const t=o.components[e];if(t.builderInfo){this.schemas[e]=t.builderInfo.schema,t.type=e;const n=t.builderInfo;n.key=t.type,this.addBuilderComponentInfo(n)}}for(const e in this.groups){const t=this.groups[e];for(const e in t.components){const r=t.components[e];r&&(r.schema&&(this.schemas[e]=r.schema),t.components[e]=!0===r?n[e]:r,t.components[e].key=e)}}for(const e in this.groups)this.groups[e]&&this.groups[e].components&&(this.groups[e].componentOrder=Object.keys(this.groups[e].components).map(t=>this.groups[e].components[t]).filter(e=>e&&!e.ignore).sort((e,t)=>e.weight-t.weight).map(e=>e.key));this.options.hooks=this.options.hooks||{},this.options.hooks.renderComponent=((e,{self:t})=>"form"!==t.type||t.key?this.options.disabled&&this.options.disabled.includes(t.key)||t.parent.noDragDrop?e:this.renderTemplate("builderComponent",{html:e}):e.replace("formio-component-form","")),this.options.hooks.renderComponents=((e,{components:t,self:n})=>"datagrid"===n.type&&t.length>0||n.noDragDrop?e:((!t||!t.length&&!t.nodrop||"form"===n.type&&t.length<=1&&(0===t.length||"button"===t[0].type))&&(e=this.renderTemplate("builderPlaceholder",{position:0})+e),this.renderTemplate("builderComponents",{key:n.key,type:n.type,html:e}))),this.options.hooks.renderInput=((e,{self:t})=>"hidden"===t.type?e+t.name:e),this.options.hooks.renderLoading=((e,{self:t})=>"form"===t.type&&t.key?t.name:e),this.options.hooks.attachComponents=((e,t,n,r)=>{if(!e)return;if(r.noDragDrop)return e;const s=e.querySelector(`[ref="${r.component.key}-container"]`)||e;return s.formioContainer=n,s.formioComponent=r,this.dragula&&this.allowDrop(e)&&this.dragula.containers.push(s),("datagrid"===r.type||"datamap"===r.type)&&t.length>0?e:e.children[0]}),this.options.hooks.attachDatagrid=((e,t)=>{t.loadRefs(e,{[`${t.key}-container`]:"single"}),t.attachComponents(t.refs[`${t.key}-container`].parentNode,[],t.component.components)}),this.options.hooks.attachComponent=((e,t)=>{if(e.formioComponent=t,t.loadRefs(e,{removeComponent:"single",editComponent:"single",moveComponent:"single",copyComponent:"single",pasteComponent:"single",editJson:"single"}),t.refs.copyComponent&&(new r(t.refs.copyComponent,{trigger:"hover",placement:"top",title:this.t("Copy")}),t.addEventListener(t.refs.copyComponent,"click",()=>this.copyComponent(t))),t.refs.pasteComponent){const e=new r(t.refs.pasteComponent,{trigger:"hover",placement:"top",title:this.t("Paste below")});t.addEventListener(t.refs.pasteComponent,"click",()=>{e.hide(),this.pasteComponent(t)})}t.refs.moveComponent&&new r(t.refs.moveComponent,{trigger:"hover",placement:"top",title:this.t("Move")});const n=this.getParentElement(e);return t.refs.editComponent&&(new r(t.refs.editComponent,{trigger:"hover",placement:"top",title:this.t("Edit")}),t.addEventListener(t.refs.editComponent,"click",()=>this.editComponent(t.schema,n,!1,!1,t.component))),t.refs.editJson&&(new r(t.refs.editJson,{trigger:"hover",placement:"top",title:this.t("Edit JSON")}),t.addEventListener(t.refs.editJson,"click",()=>this.editComponent(t.schema,n,!1,!0,t.component))),t.refs.removeComponent&&(new r(t.refs.removeComponent,{trigger:"hover",placement:"top",title:this.t("Remove")}),t.addEventListener(t.refs.removeComponent,"click",()=>this.removeComponent(t.schema,n,t.component))),e});const s={params:{type:"resource",limit:4294967295,select:"_id,title,name,components"}};this.options&&this.options.resourceTag?s.params.tags=[this.options.resourceTag]:this.options&&this.options.hasOwnProperty("resourceTag")||(s.params.tags=["builder"]);const a=new i(i.projectUrl),l=this.options.builder&&!1===this.options.builder.resource;if(!a.noProject&&!l){const e=this.options.builder&&this.options.builder.resource;a.loadForms(s).then(t=>{t.length&&(this.builder.resource={title:e?e.title:"Existing Resource Fields",key:"resource",weight:e?e.weight:50,subgroups:[],components:[],componentOrder:[]},this.groups.resource={title:e?e.title:"Existing Resource Fields",key:"resource",weight:e?e.weight:50,subgroups:[],components:[],componentOrder:[]},this.groupOrder.includes("resource")||this.groupOrder.push("resource"),this.addExistingResourceFields(t))})}this.options.attachMode="builder",this.webform=this.webform||this.createForm(this.options)}allowDrop(){return!0}addExistingResourceFields(e){u.each(e,(e,t)=>{const n=`resource-${e.name}`,r={key:n,title:e.title,components:[],componentOrder:[],default:0===t};l.eachComponent(e.components,t=>{if("button"===t.type)return;if(this.options&&this.options.resourceFilter&&(!t.tags||-1===t.tags.indexOf(this.options.resourceFilter)))return;let s=t.label;!s&&t.key&&(s=u.upperFirst(t.key)),r.componentOrder.push(t.key),r.components[t.key]=u.merge(a.fastCloneDeep(o.components[t.type].builderInfo),{key:t.key,title:s,group:"resource",subgroup:n},{schema:{...t,label:t.label,key:t.key,lockKey:!0,source:this.options.noSource?void 0:e._id,isNew:!0}})},!0),this.groups.resource.subgroups.push(r)}),this.triggerRedraw()}createForm(t){return this.webform=new e(this.element,t),this.element&&(this.loadRefs(this.element,{form:"single"}),this.refs.form&&(this.webform.element=this.refs.form)),this.webform}get ready(){return this.webform.ready}get defaultGroups(){return{basic:{title:"Basic",weight:0,default:!0},advanced:{title:"Advanced",weight:10},layout:{title:"Layout",weight:20},data:{title:"Data",weight:30},premium:{title:"Premium",weight:40}}}redraw(){return e.prototype.redraw.call(this)}get form(){return this.webform.form}get schema(){return this.webform.schema}set form(e){e.components||(e.components=[]);const t=!this.options.noDefaultSubmitButton&&!e.components.length;t&&e.components.push({type:"button",label:"Submit",key:"submit",size:"md",block:!1,action:"submit",disableOnInvalid:!0,theme:"primary"}),this.webform.form=e,this.rebuild()}get container(){return this.webform.form.components}findNamespaceRoot(e){const t=l.getComponent(this.webform.form.components,e.key,!0),n=this.recurseNamespace(t);if(!n||this.form.key===n)return this.form.components;if(n===e.key)return[...e.components,e];const r=l.getComponent(this.form.components,n,!0);return r.components}recurseNamespace(e){return e?["container","datagrid","editgrid","tree"].includes(e.type)||e.tree||e.arrayTree?e.key:this.recurseNamespace(e.parent):null}render(){return this.renderTemplate("builder",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:`builder-sidebar-${this.id}`,groups:this.groupOrder.map(e=>this.renderTemplate("builderSidebarGroup",{group:this.groups[e],groupKey:e,groupId:`builder-sidebar-${this.id}`,subgroups:this.groups[e].subgroups.map(t=>this.renderTemplate("builderSidebarGroup",{group:t,groupKey:t.key,groupId:`group-container-${e}`,subgroups:[]}))}))}),form:this.webform.render()})}attach(e){return this.on("change",e=>{this.populateRecaptchaSettings(e)}),super.attach(e).then(()=>{if(this.loadRefs(e,{form:"single",sidebar:"single",container:"multiple","sidebar-anchor":"multiple","sidebar-group":"multiple","sidebar-container":"multiple"}),this.sideBarScroll&&d.current.handleBuilderSidebarScroll&&d.current.handleBuilderSidebarScroll.call(this,this),window.sessionStorage){const e=window.sessionStorage.getItem("formio.clipboard");e&&this.addClass(this.refs.form,"builder-paste-mode")}if(a.bootstrapVersion(this.options)||(this.refs["sidebar-group"].forEach(e=>{e.style.display="true"===e.getAttribute("data-default")?"inherit":"none"}),this.refs["sidebar-anchor"].forEach((e,t)=>{this.addEventListener(e,"click",()=>{const n=e.getAttribute("data-parent").slice("#builder-sidebar-".length),r=e.getAttribute("data-target").slice("#group-".length);this.refs["sidebar-group"].forEach((e,s)=>{const o="true"===e.getAttribute("data-default"),i=e.getAttribute("id").slice("group-".length),a=e.getAttribute("data-parent").slice("#builder-sidebar-".length);e.style.display=o&&a===r||i===n||s===t?"inherit":"none"})},!0)})),this.dragDropEnabled&&this.initDragula(),this.refs.form)return this.webform.attach(this.refs.form)})}initDragula(){const e=this.options;this.dragula&&this.dragula.destroy();const t=Array.prototype.slice.call(this.refs["sidebar-container"]).filter(e=>"group-container-resource"!==e.id);this.dragula=n(t,{moves(t){let n=!0;const r=Array.from(t.classList).filter(e=>0===e.indexOf("formio-component-"));return r.forEach(t=>{const r=t.slice("formio-component-".length);e.disabled&&e.disabled.includes(r)&&(n=!1)}),t.classList.contains("no-drag")&&(n=!1),n},copy:e=>e.classList.contains("drag-copy"),accepts:(e,t)=>!e.contains(t)&&!t.classList.contains("no-drop")}).on("drop",(e,t,n,r)=>this.onDrop(e,t,n,r))}detach(){this.dragula&&this.dragula.destroy(),this.dragula=null,this.sideBarScroll&&d.current.clearBuilderSidebarScroll&&d.current.clearBuilderSidebarScroll.call(this,this),super.detach()}getComponentInfo(e,t){let n;if(this.schemas.hasOwnProperty(e))n=a.fastCloneDeep(this.schemas[e]);else if(this.groups.hasOwnProperty(t)){const r=this.groups[t].components;r.hasOwnProperty(e)&&(n=a.fastCloneDeep(r[e].schema))}if("resource"===t.slice(0,t.indexOf("-"))){const r=this.groups.resource.subgroups,s=u.find(r,{key:t});s&&s.components.hasOwnProperty(e)&&(n=a.fastCloneDeep(s.components[e].schema))}return n&&(n.key=u.camelCase(n.title||n.label||n.placeholder||n.type)),n}getComponentsPath(e,t){let n="components",r=0,s=0,o=0,i=0;switch(t.type){case"table":s=u.findIndex(t.rows,t=>t.some(t=>t.components.some(t=>t.key===e.key))),o=u.findIndex(t.rows[s],t=>t.components.some(t=>t.key===e.key)),n=`rows[${s}][${o}].components`;break;case"columns":r=u.findIndex(t.columns,t=>t.components.some(t=>t.key===e.key)),n=`columns[${r}].components`;break;case"tabs":i=u.findIndex(t.components,t=>t.components.some(t=>t.key===e.key)),n=`components[${i}].components`}return n}onDrop(e,t,n,r){if(!t)return;if(e.contains(t))return;const o=e.getAttribute("data-key"),i=e.getAttribute("data-type"),a=e.getAttribute("data-group");let l,d,p,h;if(o?(!(l=this.getComponentInfo(o,a))&&i&&(l=this.getComponentInfo(i,a)),d=!0):n.formioContainer&&-1!==(h=u.findIndex(n.formioContainer,{key:e.formioComponent.component.key}))&&(l=(l=n.formioContainer.splice(u.findIndex(n.formioContainer,{key:e.formioComponent.component.key}),1))[0]),!l)return;t!==n&&c.uniquify(this.findNamespaceRoot(t.formioComponent.component),l);const m=t.formioComponent;let f;return t.formioContainer&&(r?-1!==(h=r.getAttribute("data-noattach")?r.getAttribute("data-position"):-1===(h=u.findIndex(t.formioContainer,{key:u.get(r,"formioComponent.component.key")}))?0:h)&&t.formioContainer.splice(h,0,l):t.formioContainer.push(l),p=this.getComponentsPath(l,m.component),-1===(h=u.findIndex(u.get(m.schema,p),{key:l.key}))&&(h=0)),m&&m.addChildComponent&&m.addChildComponent(l,e,t,n,r),d&&!this.options.noNewEdit&&this.editComponent(l,t,d),t!==n?n.formioContainer&&n.contains(t)?f=n.formioComponent.rebuild():t.contains(n)?f=t.formioComponent.rebuild():(n.formioContainer&&(f=n.formioComponent.rebuild()),f=t.formioComponent.rebuild()):f=t.formioComponent.rebuild(),f||(f=s.resolve()),f.then(()=>{this.emit("addComponent",l,m,p,h,d)})}setForm(e){return this.emit("change",e),super.setForm(e).then(e=>(setTimeout(()=>this.builderHeight=this.refs.form.offsetHeight,200),e))}populateRecaptchaSettings(e){var t=!1;this.form.components&&(l.eachComponent(e.components,e=>{if(!t)return"recaptcha"===e.type?(t=!0,!1):void 0}),t?u.set(e,"settings.recaptcha.isEnabled",!0):u.get(e,"settings.recaptcha.isEnabled")&&u.set(e,"settings.recaptcha.isEnabled",!1))}removeComponent(e,t,n){if(!t)return;let r=!0;if(!e.skipRemoveConfirm&&(Array.isArray(e.components)&&e.components.length||Array.isArray(e.rows)&&e.rows.length||Array.isArray(e.columns)&&e.columns.length)){const e="Removing this component will also remove all of its children. Are you sure you want to do this?";r=window.confirm(this.t(e))}n||(n=t.formioContainer.find(t=>t.key===e.key));const o=t.formioContainer?t.formioContainer.indexOf(n):0;if(r&&-1!==o){const n=this.getComponentsPath(e,t.formioComponent.component);t.formioContainer?t.formioContainer.splice(o,1):t.formioComponent&&t.formioComponent.removeChildComponent&&t.formioComponent.removeChildComponent(e);const r=t.formioComponent.rebuild()||s.resolve();r.then(()=>{this.emit("removeComponent",e,t.formioComponent.schema,n,o),this.emit("change",this.form)})}return r}updateComponent(e,t){if(this.preview){this.preview.form={components:[u.omit(e,["hidden","conditional","calculateValue","logic","autofocus","customConditional"])]};const t=this.componentEdit.querySelector('[ref="preview"]');t&&(this.setContent(t,this.preview.render()),this.preview.attach(t))}const n=l.getComponent(this.editForm.components,"defaultValue");if(n){const r=t&&(t.component&&"defaultValue"===t.component.key||t.instance&&n.hasComponent&&n.hasComponent(t.instance));if(!r){u.assign(n.component,u.omit(e,["key","label","placeholder","tooltip","hidden","autofocus","validate","disabled","defaultValue","customDefaultValue","calculateValue","conditional","customConditional"]));const t=n.parent;let r=-1,s=-1;if(t.tabs.some((e,t)=>{e.some((e,o)=>e.id===n.id&&(r=t,s=o,!0))}),-1!==r&&-1!==s){const e=t.tabs[r][s+1];t.removeComponent(n);const o=t.addComponent(n.component,n.data,e);u.pull(o.validators,"required"),t.tabs[r].splice(s,1,o),o.checkValidity=(()=>!0),o.build(n.element)}}}this.emit("updateComponent",e)}highlightInvalidComponents(){const e=[],t=new Map;l.eachComponent(this.form.components,(n,r)=>{n.key&&(t.has(n.key)?t.get(n.key).includes(r)?e.push(r):t.set(n.key,[...t.get(n.key),r]):t.set(n.key,[r]))}),l.eachComponent(this.webform.getComponents(),(t,n)=>{e.includes(n)&&t.setCustomValidity(`API Key is not unique: ${t.key}`)})}saveComponent(e,t,n,r){this.editForm.detach();const o=t?t.formioContainer:this.container,i=t?t.formioComponent:this;this.dialog.close();const a=o?this.getComponentsPath(e,i.component):"";r||(r=t.formioContainer.find(t=>t.key===e.key));const l=o?o.indexOf(r):0;if(-1!==l){let t=this.editForm.submission.data;t=t.componentJson||t,o?o[l]=t:i&&i.saveChildComponent&&i.saveChildComponent(t);const r=i.rebuild()||s.resolve();return r.then(()=>{let t=o?o[l]:[];i.getComponents().forEach(e=>{e.key===t.key&&(t=e.schema)}),this.emit("saveComponent",t,e,i.schema,a,l,n),this.emit("change",this.form),this.highlightInvalidComponents()})}return this.highlightInvalidComponents(),s.resolve()}editComponent(t,n,r,s,i){if(!t.key)return;let l=!1;const d=a.fastCloneDeep(t);let p=o.components[d.type];const h=void 0===p;s=s||h,p=h?o.components.unknown:p,this.dialog&&(this.dialog.close(),this.highlightInvalidComponents());const m=u.clone(u.get(this,"options.editForm",{}));this.editForm&&this.editForm.destroy();const f=u.get(this.options,`editForm.${d.type}`,{});m.editForm=this.form,m.editComponent=t,this.editForm=new e({...u.omit(this.options,["hooks","builder","events","attachMode","skipInit"]),language:this.options.language,...m}),this.editForm.form=s&&!h?{components:[{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"componentJson",label:"Component JSON",tooltip:"Edit the JSON for this component."}]}:p.editForm(u.cloneDeep(f));const g=new p(d);this.editForm.submission=s?{data:{componentJson:g.component}}:{data:g.component},this.preview&&this.preview.destroy(),p.builderInfo.hasOwnProperty("preview")&&!p.builderInfo.preview||(this.preview=new e(u.omit({...this.options,preview:!0},["hooks","builder","events","attachMode","calculateValue"]))),this.componentEdit=this.ce("div",{class:"component-edit-container"}),this.setContent(this.componentEdit,this.renderTemplate("builderEditForm",{componentInfo:p.builderInfo,editForm:this.editForm.render(),preview:!!this.preview&&this.preview.render()})),this.dialog=this.createModal(this.componentEdit,u.get(this.options,"dialogAttr",{})),this.editForm.attach(this.componentEdit.querySelector('[ref="editForm"]')),this.updateComponent(d),this.editForm.on("change",e=>{e.changed&&((e.changed.component&&"key"===e.changed.component.key||s)&&(d.keyModified=!0),e.changed.component&&["label","title"].includes(e.changed.component.key)&&r&&(e.data.keyModified||this.editForm.everyComponent(t=>{if("key"===t.key&&"tabs"===t.parent.component.key)return t.setValue(u.camelCase(e.data.title||e.data.label||e.data.placeholder||e.data.type)),!1}),this.form&&c.uniquify(this.findNamespaceRoot(n.formioComponent.component),e.data)),this.updateComponent(e.data.componentJson||e.data,e.changed))}),this.addEventListener(this.componentEdit.querySelector('[ref="cancelButton"]'),"click",e=>{e.preventDefault(),this.editForm.detach(),this.emit("cancelComponent",t),this.dialog.close(),this.highlightInvalidComponents()}),this.addEventListener(this.componentEdit.querySelector('[ref="removeButton"]'),"click",e=>{e.preventDefault(),l=!0,this.editForm.detach(),this.removeComponent(t,n,i),this.dialog.close(),this.highlightInvalidComponents()}),this.addEventListener(this.componentEdit.querySelector('[ref="saveButton"]'),"click",e=>{if(e.preventDefault(),!this.editForm.checkValidity(this.editForm.data,!0,this.editForm.data))return this.editForm.setPristine(!1),this.editForm.showErrors(),!1;l=!0,this.saveComponent(t,n,r,i)});const y=()=>{this.editForm.destroy(),this.preview&&(this.preview.destroy(),this.preview=null),r&&!l&&(this.removeComponent(t,n,i),this.highlightInvalidComponents()),this.removeEventListener(this.dialog,"close",y),this.dialog=null};this.addEventListener(this.dialog,"close",y),this.emit("editComponent",t)}copyComponent(e){if(!window.sessionStorage)return console.warn("Session storage is not supported in this browser.");this.addClass(this.refs.form,"builder-paste-mode"),window.sessionStorage.setItem("formio.clipboard",JSON.stringify(e.schema))}pasteComponent(e){if(!window.sessionStorage)return console.warn("Session storage is not supported in this browser.");if(this.removeClass(this.refs.form,"builder-paste-mode"),window.sessionStorage){const t=window.sessionStorage.getItem("formio.clipboard");if(t){const n=JSON.parse(t),r=this.getParentElement(e.element);c.uniquify(this.findNamespaceRoot(r.formioComponent.component),n);let s="",o=0;r.formioContainer?(o=r.formioContainer.indexOf(e.component),s=this.getComponentsPath(n,r.formioComponent.component),r.formioContainer.splice(o+1,0,n)):r.formioComponent&&r.formioComponent.saveChildComponent&&r.formioComponent.saveChildComponent(n,!1),r.formioComponent.rebuild(),this.emit("saveComponent",n,n,r.formioComponent.components,s,o+1,!0),this.emit("change",this.form)}}}getParentElement(e){let t=e;do{t=t.parentNode}while(t&&!t.formioComponent);return t}addBuilderComponentInfo(e){if(!e||!e.group||!this.groups[e.group])return;e=u.clone(e);const t=this.groups[e.group];return t.components.hasOwnProperty(e.key)||(t.components[e.key]=e),e}destroy(){this.webform.initialized&&this.webform.destroy(),super.destroy()}addBuilderGroup(e,t){this.groups[e]?this.updateBuilderGroup(e,t):(this.groups[e]=t,this.groupOrder.push(e),this.triggerRedraw())}updateBuilderGroup(e,t){this.groups[e]&&(this.groups[e]=t,this.triggerRedraw())}}}),e("skylark-formio/PDFBuilder",["skylark-lodash","./vendors/getify/npo","./vendors/fetch-ponyfill/fetch","./Formio","./WebformBuilder","./utils/utils","./utils/builder","./PDF"],function(e,t,n,r,s,o,i,a){"use strict";const{fetch:l,Headers:c}=n({Promise:t});return class extends s{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],t.skipInit=!0,e?super(e,t):super(t),this.dragDropEnabled=!1}get defaultGroups(){return{pdf:{title:"PDF Fields",weight:0,default:!0,components:{textfield:!0,number:!0,password:!0,email:!0,phoneNumber:!0,currency:!0,checkbox:!0,signature:!0,select:!0,textarea:!0,datetime:!0,file:!0}},basic:!1,advanced:!1,layout:!1,data:!1,premium:!1,resource:!1}}get hasPDF(){return e.has(this.webform.form,"settings.pdf")}get projectUrl(){return this.options.projectUrl||r.getProjectUrl()}init(){this.options.attachMode="builder",this.webform=this.webform||this.createForm(this.options),this.webform.init()}render(){const e=this.renderTemplate("pdfBuilder",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:`builder-sidebar-${this.id}`,groups:this.groupOrder.map(e=>this.renderTemplate("builderSidebarGroup",{group:this.groups[e],groupKey:e,groupId:`builder-sidebar-${this.id}`,subgroups:this.groups[e].subgroups.map(t=>this.renderTemplate("builderSidebarGroup",{group:t,groupKey:t.key,groupId:`builder-sidebar-${e}`,subgroups:[]}))}))}),form:this.hasPDF?this.webform.render():this.renderTemplate("pdfBuilderUpload",{})});return e}attach(e){if(!this.hasPDF){if(this.loadRefs(e,{fileDrop:"single",fileBrowse:"single",hiddenFileInputElement:"single",uploadError:"single"}),this.addEventListener(this.refs["pdf-upload-button"],"click",e=>{e.preventDefault()}),this.projectUrl?this.setUploadError():this.setUploadError('Form options.projectUrl not set. Please set the "projectUrl" property of the options for this form or use Formio.setProjectUrl(). This setting is necessary to upload a pdf background.'),this.refs.fileDrop){const e=this;this.addEventListener(this.refs.fileDrop,"dragover",function(e){this.className="fileSelector fileDragOver",e.preventDefault()}),this.addEventListener(this.refs.fileDrop,"dragleave",function(e){this.className="fileSelector",e.preventDefault()}),this.addEventListener(this.refs.fileDrop,"drop",function(t){return this.className="fileSelector",t.preventDefault(),e.upload(t.dataTransfer.files[0]),!1})}return this.refs.fileBrowse&&this.refs.hiddenFileInputElement&&(this.addEventListener(this.refs.fileBrowse,"click",e=>{e.preventDefault(),"function"==typeof this.refs.hiddenFileInputElement.trigger?this.refs.hiddenFileInputElement.trigger("click"):this.refs.hiddenFileInputElement.click()}),this.addEventListener(this.refs.hiddenFileInputElement,"change",()=>{this.upload(this.refs.hiddenFileInputElement.files[0]),this.refs.hiddenFileInputElement.value=""})),t.resolve()}return super.attach(e).then(()=>(this.loadRefs(this.element,{iframeDropzone:"single","sidebar-container":"multiple"}),this.afterAttach(),this.element))}afterAttach(){this.initIframeEvents(),this.updateDropzoneDimensions(),this.initDropzoneEvents(),this.prepSidebarComponentsForDrag()}upload(t){const n=new c({Accept:"application/json, text/plain, */*","x-jwt-token":r.getToken()}),s=new FormData;s.append("file",t),l(`${this.projectUrl}/upload`,{method:"POST",headers:n,body:s}).then(t=>{201!==t.status?t.text().then(e=>{this.setUploadError(`${t.statusText} - ${e}`)}):t.json().then(t=>{e.set(this.webform.form,"settings.pdf",{id:t.file,src:`${t.filesServer}${t.path}`}),this.emit("pdfUploaded",t),this.redraw()})}).catch(()=>{this.setUploadError("Upload failed.")})}setUploadError(e){this.refs.uploadError&&(this.refs.uploadError.style.display=e?"":"none",this.refs.uploadError.innerHTML=e)}createForm(e){return e.skipInit=!1,this.webform=new a(this.element,e),this.webform.on("attach",()=>{this.refs.iframeDropzone&&![...this.refs.form.children].includes(this.refs.iframeDropzone)&&this.prependTo(this.refs.iframeDropzone,this.refs.form)}),this.webform}setForm(e){return super.setForm(e).then(()=>this.ready.then(()=>this.webform?(this.webform.postMessage({name:"form",data:e}),this.webform.setForm(e)):e))}saveComponent(...e){return super.saveComponent(...e).then(()=>this.afterAttach())}destroy(){super.destroy(),this.webform.destroy()}initIframeEvents(){this.webform.iframeElement&&(this.webform.off("iframe-elementUpdate"),this.webform.off("iframe-componentUpdate"),this.webform.off("iframe-componentClick"),this.webform.on("iframe-elementUpdate",e=>{const t=this.webform.getComponentById(e.id);return t&&t.component&&(t.component.overlay={page:e.page,left:e.left,top:e.top,height:e.height,width:e.width},this.editComponent(t.component,this.webform.iframeElement),this.emit("updateComponent",t)),t}),this.webform.on("iframe-componentUpdate",t=>{const n=this.webform.getComponentById(t.id);if(n&&n.component){n.component.overlay={page:t.overlay.page,left:t.overlay.left,top:t.overlay.top,height:t.overlay.height,width:t.overlay.width},this.emit("updateComponent",n);const r=e.find(this.form.components,{id:t.id});r&&(r.overlay=e.clone(n.component.overlay)),this.emit("change",this.form)}return n}),this.webform.on("iframe-componentClick",e=>{const t=this.webform.getComponentById(e.id);t&&this.editComponent(t.component,this.webform.iframeElement)},!0))}initDropzoneEvents(){this.refs.iframeDropzone&&(this.removeEventListener(this.refs.iframeDropzone,"dragover"),this.removeEventListener(this.refs.iframeDropzone,"drop"),this.addEventListener(this.refs.iframeDropzone,"dragover",e=>(e.preventDefault(),!1)),this.addEventListener(this.refs.iframeDropzone,"drop",this.onDropzoneDrop.bind(this)))}prepSidebarComponentsForDrag(){this.refs["sidebar-container"]&&this.refs["sidebar-container"].forEach(e=>{[...e.children].forEach(e=>{e.draggable=!0,e.setAttribute("draggable",!0),this.removeEventListener(e,"dragstart"),this.removeEventListener(e,"dragend"),this.addEventListener(e,"dragstart",this.onDragStart.bind(this),!0),this.addEventListener(e,"dragend",this.onDragEnd.bind(this),!0)})})}updateDropzoneDimensions(){if(!this.refs.iframeDropzone)return;const e=o.getElementRect(this.webform.refs.iframeContainer);this.refs.iframeDropzone.style.height=e&&e.height?`${e.height}px`:"1000px",this.refs.iframeDropzone.style.width=e&&e.width?`${e.width}px`:"100%"}tryUpdateCustomComponentSchema(t,n){const r=e.get(this,`groups.custom.components[${n}]`);return!!r&&(t.key=r.schema&&r.schema.key||t.key,t.label=r.schema&&r.schema.label||t.label,t.keyForShow=t.key,t.customField=!0,!0)}onDragStart(e){e.dataTransfer.setData("text/html",null),this.updateDropzoneDimensions(),this.addClass(this.refs.iframeDropzone,"enabled")}onDropzoneDrop(e){return this.dropEvent=e,e.preventDefault(),!1}onDragEnd(t){const n=this.dropEvent?this.dropEvent.offsetX:null,r=this.dropEvent?this.dropEvent.offsetY:null;if(this.removeClass(this.refs.iframeDropzone,"enabled"),!this.dropEvent)return;const s=t.target,a=s.getAttribute("data-type"),l=s.getAttribute("data-group"),c=s.getAttribute("data-key"),u=o.fastCloneDeep(this.schemas[a]);"custom"===l&&c&&this.tryUpdateCustomComponentSchema(u,c)||(u.key=e.camelCase(u.label||u.placeholder||u.type)),i.uniquify([this.webform.component],u),this.webform.component.components.push(u),this.emit("addComponent",u),u.overlay={top:r,left:n,width:100,height:20},this.webform.addComponent(u,{},null,!0),this.webform.postMessage({name:"addElement",data:u}),this.dropEvent=null}}}),e("skylark-formio/WizardBuilder",["./WebformBuilder","./Webform","./utils/builder","skylark-lodash"],function(e,t,n,r){"use strict";return class s extends e{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],t.skipInit=!1,super(e,t),this._form={components:[this.getPageConfig(1)]},this.page=0,this.options.hooks.attachPanel=((e,t)=>{t.refs.removeComponent&&this.addEventListener(t.refs.removeComponent,"click",()=>{const e=this.pages.findIndex(e=>e.key===t.key),n=this._form.components.findIndex(e=>e.key===t.key);-1!==e&&this.removePage(e,n)})});const n=this.options.hooks.renderComponents;this.options.hooks.renderComponents=((e,{components:t,self:r})=>"form"!==r.type||r.root?n(e,{components:t,self:r}):e);const r=this.options.hooks.attachComponents;this.options.hooks.attachComponents=((e,t,n,s)=>"form"!==s.type||s.root?r(e,t,n,s):e),this.on("saveComponent",(e,t)=>{const n=this.webform.components.map(({component:e})=>e);this._form.components.includes(t)?(this._form.components[this._form.components.indexOf(t)]=e,this.rebuild()):n.includes(t)&&(this._form.components.push(e),this.rebuild())},!0)}allowDrop(e){return!this.webform||!this.webform.refs||this.webform.refs.webform!==e}get pages(){return r.filter(this._form.components,{type:"panel"})}get currentPage(){const e=this.pages;return e&&e.length>=this.page?e[this.page]:null}set form(e){if(this._form=e,this._form.components&&Array.isArray(this._form.components)||(this._form.components=[]),0===this.pages.length){const e=this._form.components.filter(e=>"button"!==e.type);this._form.components=[this.getPageConfig(1,e)]}this.rebuild()}get form(){return this._form}get schema(){r.assign(this.currentPage,this.webform._form.components[0]);const e=new t(this.options);return e.form=this._form,e.schema}render(){return this.renderTemplate("builderWizard",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:`builder-sidebar-${this.id}`,groups:this.groupOrder.map(e=>this.renderTemplate("builderSidebarGroup",{group:this.groups[e],groupKey:e,groupId:`builder-sidebar-${this.id}`,subgroups:this.groups[e].subgroups.map(t=>this.renderTemplate("builderSidebarGroup",{group:t,groupKey:t.key,groupId:`builder-sidebar-${e}`,subgroups:[]}))}))}),pages:this.pages,form:this.webform.render()})}attach(e){return this.loadRefs(e,{addPage:"multiple",gotoPage:"multiple"}),this.refs.addPage.forEach(e=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.addPage()})}),this.refs.gotoPage.forEach((e,t)=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.setPage(t)})}),super.attach(e)}rebuild(){const e=this.currentPage;return this.webform.form={display:"form",type:"form",components:e?[e]:[]},this.redraw()}addPage(){const e=this.pages.length+1,t=this.getPageConfig(e);return n.uniquify(this._form.components,t),this._form.components.push(t),this.emit("saveComponent",t),this.rebuild()}removePage(e,t){return this._form.components.splice(t,1),e===this.pages.length?0===e?(this._form.components.push(this.getPageConfig(1)),this.rebuild()):this.setPage(e-1):this.rebuild()}setPage(e){if(e!==this.page)return this.page=e,this.rebuild()}getPageConfig(e,t=[]){return{title:`Page ${e}`,label:`Page ${e}`,type:"panel",key:`page${e}`,components:t}}pasteComponent(e){if(!(e instanceof s))return super.pasteComponent(e)}}}),e("skylark-formio/main",["./Formio","./Form","./Webform","./WebformBuilder","./PDF","./PDFBuilder","./Wizard","./WizardBuilder"],function(){}),e("skylark-formio",["skylark-formio/main"],function(e){return e})}(n,require),!r){var i=require("skylark-langx-ns");s?module.exports=i:t.skylarkjs=i}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-formio.js.map
