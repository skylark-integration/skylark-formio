/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,i="function"==typeof n&&n.amd,o=!i&&"undefined"!=typeof exports;if(!i&&!n){var s={};n=t.define=function(e,t,n){"function"==typeof n?(s[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var o=0;o<i.length;o++)"."!=i[o]&&(".."==i[o]?n.pop():n.push(i[o]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):s[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!s.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=s[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-formio/vendors/kraaden/autocomplete",[],function(){return function(e){var t,n,i=document,o=i.createElement("div"),s=o.style,r=navigator.userAgent,a=-1!==r.indexOf("Firefox")&&-1!==r.indexOf("Mobile"),l=e.debounceWaitMs||0,c=e.preventSubmit||!1,d=a?"input":"keyup",u=[],h="",p=2,m=e.showOnFocus,f=0;void 0!==e.minLength&&(p=e.minLength);if(!e.input)throw new Error("input undefined");var g=e.input;function y(){n&&window.clearTimeout(n)}function b(){return!!o.parentNode}function v(){var e;f++,u=[],h="",t=void 0,(e=o.parentNode)&&e.removeChild(o)}function k(){for(;o.firstChild;)o.removeChild(o.firstChild);var n=function(e,t){var n=i.createElement("div");return n.textContent=e.label||"",n};e.render&&(n=e.render);var r=function(e,t){var n=i.createElement("div");return n.textContent=e,n};e.renderGroup&&(r=e.renderGroup);var a=i.createDocumentFragment(),l="#9?$";if(u.forEach(function(i){if(i.group&&i.group!==l){l=i.group;var o=r(i.group,h);o&&(o.className+=" group",a.appendChild(o))}var s=n(i,h);s&&(s.addEventListener("click",function(t){e.onSelect(i,g),v(),t.preventDefault(),t.stopPropagation()}),i===t&&(s.className+=" selected"),a.appendChild(s))}),o.appendChild(a),u.length<1){if(!e.emptyMsg)return void v();var c=i.createElement("div");c.className="empty",c.textContent=e.emptyMsg,o.appendChild(c)}o.parentNode||i.body.appendChild(o),function(){if(!b())return;s.height="auto",s.width=g.offsetWidth+"px";var t,n=0;function r(){var e=i.documentElement,o=e.clientTop||i.body.clientTop||0,r=e.clientLeft||i.body.clientLeft||0,a=window.pageYOffset||e.scrollTop,l=window.pageXOffset||e.scrollLeft,c=(t=g.getBoundingClientRect()).top+g.offsetHeight+a-o,d=t.left+l-r;s.top=c+"px",s.left=d+"px",(n=window.innerHeight-(t.top+g.offsetHeight))<0&&(n=0),s.top=c+"px",s.bottom="",s.left=d+"px",s.maxHeight=n+"px"}r(),r(),e.customize&&t&&e.customize(g,t,o,n)}(),function(){var e=o.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<o.scrollTop)o.scrollTop=t.offsetTop;else{var i=t.offsetTop+t.offsetHeight,s=o.scrollTop+o.offsetHeight;i>s&&(o.scrollTop+=i-s)}}}()}function w(){b()&&k()}function x(){w()}function C(e){e.target!==o?w():e.preventDefault()}function S(e){for(var t=e.which||e.keyCode||0,n=0,i=[38,13,27,39,37,16,17,18,20,91,9];n<i.length;n++){var o=i[n];if(t===o)return}t>=112&&t<=123||40===t&&b()||T(0)}function E(n){var i=n.which||n.keyCode||0;if(38===i||40===i||27===i){var o=b();if(27===i)v();else{if(!b||u.length<1)return;38===i?function(){if(u.length<1)t=void 0;else if(t===u[0])t=u[u.length-1];else for(var e=u.length-1;e>0;e--)if(t===u[e]||1===e){t=u[e-1];break}}():function(){u.length<1&&(t=void 0);if(!t||t===u[u.length-1])return void(t=u[0]);for(var e=0;e<u.length-1;e++)if(t===u[e]){t=u[e+1];break}}(),k()}return n.preventDefault(),void(o&&n.stopPropagation())}13===i&&(t&&(e.onSelect(t,g),v()),c&&n.preventDefault())}function A(){m&&T(1)}function T(i){var o=++f,s=g.value;s.length>=p||1===i?(y(),n=window.setTimeout(function(){e.fetch(s,function(e){f===o&&e&&(h=s,t=(u=e).length>0?u[0]:void 0,k())},0)},0===i?l:0)):v()}function D(){setTimeout(function(){i.activeElement!==g&&v()},200)}return o.className="autocomplete "+(e.className||""),s.position="absolute",o.addEventListener("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),o.addEventListener("focus",function(){return g.focus()}),g.addEventListener("keydown",E),g.addEventListener(d,S),g.addEventListener("blur",D),g.addEventListener("focus",A),window.addEventListener("resize",x),i.addEventListener("scroll",C,!0),{destroy:function(){g.removeEventListener("focus",A),g.removeEventListener("keydown",E),g.removeEventListener(d,S),g.removeEventListener("blur",D),window.removeEventListener("resize",x),i.removeEventListener("scroll",C,!0),y(),v()}}}}),e("skylark-formio/vendors/getify/npo",[],function(){return Promise}),e("skylark-formio/vendors/fetch-ponyfill/fetch",[],function(){var e=window;return function(t){var n=t&&t.Promise||e.Promise,i=t&&t.XMLHttpRequest||e.XMLHttpRequest,o=e;return function(){var e=Object.create(o,{fetch:{value:void 0,writable:!0}});return function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},r=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};h.prototype.append=function(e,t){e=c(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=d(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),u(e)},h.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},h.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),u(e)},t.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];k.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.Headers=h,e.Request=b,e.Response=k,e.fetch=function(e,o){return new n(function(n,s){var r=new b(e,o),a=new i;a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new h,e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var o=n.join(":").trim();t.append(i,o)}}),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new k(o,i))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.open(r.method,r.url,!0),"include"===r.credentials&&(a.withCredentials=!0),"responseType"in a&&t.blob&&(a.responseType="blob"),r.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function h(e){this.map={},e instanceof h?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(e.bodyUsed)return n.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new n(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&s(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!r(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return n.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return n.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return n.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||n.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e,t,i,o=p(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,i=m(t),t.readAsText(e),i;if(this._bodyArrayBuffer)return n.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return n.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(e,t){var n,i,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),a.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function k(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}}(void 0!==e?e:this),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response}}()}}),e("skylark-formio/vendors/eventemitter2/EventEmitter2",[],function(){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n="object"==typeof process&&"function"==typeof process.nextTick,i="function"==typeof Symbol,o="object"==typeof Reflect,s="function"==typeof setImmediate,r=s?setImmediate:setTimeout,a=i?o&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function l(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),void 0!==e.maxListeners&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function d(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,process.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var u=function(e,t,n){var i=arguments.length;switch(i){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var o=new Array(i);i--;)o[i]=arguments[i];return o}};function h(e,t){for(var n,i={},o=e.length,s=t?value.length:0,r=0;r<o;r++)n=e[r],i[n]=r<s?t[r]:void 0;return i}function p(e,t,n){var i,o;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(i=n.on,o=n.off),t.addEventListener?(i=t.addEventListener,o=t.removeEventListener):t.addListener?(i=t.addListener,o=t.removeListener):t.on&&(i=t.on,o=t.off),!i&&!o)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof o)throw TypeError("off method must be a function");this._on=i,this._off=o;var s=e._observers;s?s.push(this):e._observers=[this]}function m(t,n,i,o){var s=Object.assign({},n);if(!t)return s;if("object"!=typeof t)throw TypeError("options must be an object");var r,a,l,c=Object.keys(t),d=c.length;function u(e){throw Error('Invalid "'+r+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<d;h++){if(r=c[h],!o&&!e.call(n,r))throw Error('Unknown "'+r+'" option');void 0!==(a=t[r])&&(l=i[r],s[r]=l?l(a,u):a)}return s}function f(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function g(e){var t="value must be type of "+e.join("|"),n=e.length,i=e[0],o=e[1];return 1===n?function(e,n){if(typeof e===i)return e;n(t)}:2===n?function(e,n){var s=typeof e;if(s===i||s===o)return e;n(t)}:function(i,o){for(var s=typeof i,r=n;r-- >0;)if(s===e[r])return i;o(t)}}Object.assign(p.prototype,{subscribe:function(e,t,n){var i=this,o=this._target,s=this._emitter,r=this._listeners,a=function(){var i=u.apply(null,arguments),r={data:i,name:t,original:e};if(n){var a=n.call(o,r);!1!==a&&s.emit.apply(s,[r.name].concat(i))}else s.emit.apply(s,[t].concat(i))};if(r[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,s._newListener&&s._removeListener&&!i._onNewListener?(this._onNewListener=function(n){n===t&&null===r[e]&&(r[e]=a,i._on.call(o,e,a))},s.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!s.hasListeners(n)&&r[e]&&(r[e]=null,i._off.call(o,e,a))},r[e]=null,s.on("removeListener",this._onRemoveListener)):(r[e]=a,i._on.call(o,e,a))},unsubscribe:function(e){var t,n,i,o=this,s=this._listeners,r=this._emitter,l=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function d(){o._onNewListener&&(r.off("newListener",o._onNewListener),r.off("removeListener",o._onRemoveListener),o._onNewListener=null,o._onRemoveListener=null);var e=k.call(r,o);r._observers.splice(e,1)}if(e){if(!(t=s[e]))return;l.call(c,e,t),delete s[e],--this._listenersCount||d()}else{for(n=a(s),i=n.length;i-- >0;)e=n[i],l.call(c,e,s[e]);this._listeners={},this._listenersCount=0,d()}}});var y=g(["function"]),b=g(["object","function"]);function v(e,t,n){var i,o,s,r=0,a=new e(function(l,c,d){function u(){o&&(o=null),r&&(clearTimeout(r),r=0)}n=m(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}});var h=function(e){u(),l(e)},p=function(e){u(),c(e)};(i=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof d)?t(h,p,d):(o=[function(e){p(e||Error("canceled"))}],t(h,p,function(e){if(s)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");o.push(e)}),s=!0),n.timeout>0&&(r=setTimeout(function(){var e=Error("timeout");r=0,a.cancel(e),c(e)},n.timeout))});return i||(a.cancel=function(e){if(o){for(var t=o.length,n=1;n<t;n++)o[n](e);o[0](e),o=null}}),a}function k(e){var t=this._observers;if(!t)return-1;for(var n=t.length,i=0;i<n;i++)if(t[i]._target===e)return i;return-1}function w(e,t,n,i,o){if(!n)return null;if(0===i){var s=typeof t;if("string"===s){var r,l,c=0,d=0,u=this.delimiter,h=u.length;if(-1!==(l=t.indexOf(u))){r=new Array(5);do{r[c++]=t.slice(d,l),d=l+h}while(-1!==(l=t.indexOf(u,d)));r[c++]=t.slice(d),t=r,o=c}else t=[t],o=1}else"object"===s?o=t.length:(t=[t],o=1)}var p,m,f,g,y,b,v,k=null,x=t[i],C=t[i+1];if(i===o&&n._listeners)return"function"==typeof n._listeners?(e&&e.push(n._listeners),[n]):(e&&e.push.apply(e,n._listeners),[n]);if("*"===x){for(b=a(n),l=b.length;l-- >0;)"_listeners"!==(p=b[l])&&(v=w(e,t,n[p],i+1,o))&&(k?k.push.apply(k,v):k=v);return k}if("**"===x){for((y=i+1===o||i+2===o&&"*"===C)&&n._listeners&&(k=w(e,t,n,o,o)),b=a(n),l=b.length;l-- >0;)"_listeners"!==(p=b[l])&&("*"===p||"**"===p?(n[p]._listeners&&!y&&(v=w(e,t,n[p],o,o))&&(k?k.push.apply(k,v):k=v),v=w(e,t,n[p],i,o)):v=w(e,t,n[p],p===C?i+2:i,o),v&&(k?k.push.apply(k,v):k=v));return k}if(n[x]&&(k=w(e,t,n[x],i+1,o)),(m=n["*"])&&w(e,t,m,i+1,o),f=n["**"])if(i<o)for(f._listeners&&w(e,t,f,o,o),b=a(f),l=b.length;l-- >0;)"_listeners"!==(p=b[l])&&(p===C?w(e,t,f[p],i+2,o):p===x?w(e,t,f[p],i+1,o):((g={})[p]=f[p],w(e,t,{"**":g},i+1,o)));else f._listeners?w(e,t,f,o,o):f["*"]&&f["*"]._listeners&&w(e,t,f["*"],o,o);return k}function x(e){for(var t,n,i,o=a(e),s=o.length;s-- >0;)n=o[s],(t=e[n])&&(i=!0,"_listeners"===n||x(t)||delete e[n]);return i}function C(e,t,n){this.emitter=e,this.event=t,this.listener=n}function S(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}C.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},S.EventEmitter2=S,S.prototype.listenTo=function(e,n,i){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function s(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,s=i.reducers,r=k.call(o,e);n=-1===r?new p(o,e,i):o._observers[r];for(var l,c=a(t),d=c.length,u="function"==typeof s,h=0;h<d;h++)l=c[h],n.subscribe(l,t[l]||l,u?s:s&&s[l])}return i=m(i,{on:void 0,off:void 0,reducers:void 0},{on:y,off:y,reducers:b}),t(n)?s(h(n)):s("string"==typeof n?h(n.split(/\s+/)):n),this},S.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var i,o=n.length,s=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;o-- >0;)i=n[o],e&&i._target!==e||(i.unsubscribe(t),s=!0);return s},S.prototype.delimiter=".",S.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},S.prototype.getMaxListeners=function(){return this._maxListeners},S.prototype.event="",S.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},S.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},S.prototype._once=function(e,t,n,i){return this._many(e,1,t,n,i)},S.prototype.many=function(e,t,n,i){return this._many(e,t,n,!1,i)},S.prototype.prependMany=function(e,t,n,i){return this._many(e,t,n,!0,i)},S.prototype._many=function(e,t,n,i,o){var s=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function r(){return 0==--t&&s.off(e,r),n.apply(this,arguments)}return r._origin=n,this._on(e,r,i,o)},S.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,n,o,s,r,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,i)for(o=0;o<n;o++)if("symbol"==typeof a[o]){r=!0;break}r||(a=a.join(this.delimiter))}var d,u=arguments.length;if(this._all&&this._all.length)for(d=this._all.slice(),o=0,n=d.length;o<n;o++)switch(this.event=a,u){case 1:d[o].call(this,a);break;case 2:d[o].call(this,a,arguments[1]);break;case 3:d[o].call(this,a,arguments[1],arguments[2]);break;default:d[o].apply(this,arguments)}if(c)d=[],w.call(this,d,e,this.listenerTree,0,n);else{if("function"==typeof(d=this._events[a])){switch(this.event=a,u){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(u-1),s=1;s<u;s++)t[s-1]=arguments[s];d.apply(this,t)}return!0}d&&(d=d.slice())}if(d&&d.length){if(u>3)for(t=new Array(u-1),s=1;s<u;s++)t[s-1]=arguments[s];for(o=0,n=d.length;o<n;o++)switch(this.event=a,u){case 1:d[o].call(this);break;case 2:d[o].call(this,arguments[1]);break;case 3:d[o].call(this,arguments[1],arguments[2]);break;default:d[o].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},S.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,n,o,s,r,a=arguments[0],c=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(o=a.length,i)for(s=0;s<o;s++)if("symbol"==typeof a[s]){t=!0;break}t||(a=a.join(this.delimiter))}var d,u=[],h=arguments.length;if(this._all)for(s=0,o=this._all.length;s<o;s++)switch(this.event=a,h){case 1:u.push(this._all[s].call(this,a));break;case 2:u.push(this._all[s].call(this,a,arguments[1]));break;case 3:u.push(this._all[s].call(this,a,arguments[1],arguments[2]));break;default:u.push(this._all[s].apply(this,arguments))}if(c?(d=[],w.call(this,d,e,this.listenerTree,0)):d=this._events[a],"function"==typeof d)switch(this.event=a,h){case 1:u.push(d.call(this));break;case 2:u.push(d.call(this,arguments[1]));break;case 3:u.push(d.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(h-1),r=1;r<h;r++)n[r-1]=arguments[r];u.push(d.apply(this,n))}else if(d&&d.length){if(d=d.slice(),h>3)for(n=new Array(h-1),r=1;r<h;r++)n[r-1]=arguments[r];for(s=0,o=d.length;s<o;s++)switch(this.event=a,h){case 1:u.push(d[s].call(this));break;case 2:u.push(d[s].call(this,arguments[1]));break;case 3:u.push(d[s].call(this,arguments[1],arguments[2]));break;default:u.push(d[s].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},S.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},S.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},S.prototype.onAny=function(e){return this._onAny(e,!1)},S.prototype.prependAny=function(e){return this._onAny(e,!0)},S.prototype.addListener=S.prototype.on,S.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},S.prototype._on=function(e,t,i,o){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||l.call(this);var s,a=this;return void 0!==o&&(s=function(e,t,i){if(!0===i)s=!0;else if(!1===i)o=!0;else{if(!i||"object"!=typeof i)throw TypeError("options should be an object or true");var o=i.async,s=i.promisify,a=i.nextTick,l=i.objectify}if(o||a||s){var c=t,d=t._origin||t;if(a&&!n)throw Error("process.nextTick is not supported");void 0===s&&(s="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,n=this.event;return s?a?Promise.resolve():new Promise(function(e){r(e)}).then(function(){return t.event=n,c.apply(t,e)}):(a?process.nextTick:r)(function(){t.event=n,c.apply(t,e)})})._async=!0,t._origin=d}return[t,l?new C(this,e,t):this]}.call(this,e,t,o),t=s[0],a=s[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(function(e,t){var n,i,o=0,s=0,r=this.delimiter,a=r.length;if("string"==typeof e)if(-1!==(n=e.indexOf(r))){i=new Array(5);do{i[o++]=e.slice(s,n),s=n+a}while(-1!==(n=e.indexOf(r,s)));i[o++]=e.slice(s)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(n=0;n+1<o;n++)if("**"===i[n]&&"**"===i[n+1])return;var l,c=this.listenerTree;for(n=0;n<o;n++)if(l=i[n],c=c[l]||(c[l]={}),n===o-1)return c._listeners?("function"==typeof c._listeners&&(c._listeners=[c._listeners]),c._listeners.push(t),!c._listeners.warned&&this._maxListeners>0&&c._listeners.length>this._maxListeners&&(c._listeners.warned=!0,d.call(this,c._listeners.length,l))):c._listeners=t,!0;return!0}.call(this,e,t),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,d.call(this,this._events[e].length,e))):this._events[e]=t,a)},S.prototype.off=function(e,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");var i,o=[];if(this.wildcard){var s="string"==typeof e?e.split(this.delimiter):e.slice();if(!(o=w.call(this,null,s,this.listenerTree,0)))return this}else{if(!this._events[e])return this;i=this._events[e],o.push({_listeners:i})}for(var r=0;r<o.length;r++){var a=o[r];if(i=a._listeners,t(i)){for(var l=-1,c=0,d=i.length;c<d;c++)if(i[c]===n||i[c].listener&&i[c].listener===n||i[c]._origin&&i[c]._origin===n){l=c;break}if(l<0)continue;return this.wildcard?a._listeners.splice(l,1):this._events[e].splice(l,1),0===i.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,n),this}(i===n||i.listener&&i.listener===n||i._origin&&i._origin===n)&&(this.wildcard?delete a._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,n))}return this.listenerTree&&x(this.listenerTree),this},S.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,i=t.length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},S.prototype.removeListener=S.prototype.off,S.prototype.removeAllListeners=function(e){if(void 0===e)return!this._events||l.call(this),this;if(this.wildcard){var t,n=w.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&x(this.listenerTree)}else this._events&&(this._events[e]=null);return this},S.prototype.listeners=function(e){var t,n,i,o,s,r=this._events;if(void 0===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!r)return[];for(t=a(r),o=t.length,i=[];o-- >0;)"function"==typeof(n=r[t[o]])?i.push(n):i.push.apply(i,n);return i}if(this.wildcard){if(!(s=this.listenerTree))return[];var l=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return w.call(this,l,c,s,0),l}return r&&(n=r[e])?"function"==typeof n?[n]:n:[]},S.prototype.eventNames=function(e){var t=this._events;return this.wildcard?function e(t,n,i,o){var s=a(t);var r=s.length;var l,c,d;var u=t._listeners;var h;for(;r-- >0;)c=s[r],l=t[c],d="_listeners"===c?i:i?i.concat(c):[c],h=o||"symbol"==typeof c,u&&n.push(h?d:d.join(this.delimiter)),"object"==typeof l&&e.call(this,l,n,d,h);return n}.call(this,this.listenerTree,[],null,e):t?a(t):[]},S.prototype.listenerCount=function(e){return this.listeners(e).length},S.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return w.call(this,t,n,this.listenerTree,0),t.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(void 0===e?a(i).length:i[e]))},S.prototype.listenersAny=function(){return this._all?this._all:[]},S.prototype.waitFor=function(e,t){var n=this,i=typeof t;return"number"===i?t={timeout:t}:"function"===i&&(t={filter:t}),v((t=m(t,{timeout:0,filter:void 0,handleError:!1,Promise:Promise,overload:!1},{filter:y,Promise:f})).Promise,function(i,o,s){function r(){var s=t.filter;if(!s||s.apply(n,arguments))if(n.off(e,r),t.handleError){var a=arguments[0];a?o(a):i(u.apply(null,arguments).slice(1))}else i(u.apply(null,arguments))}s(function(){n.off(e,r)}),n._on(e,r,!1)},{timeout:t.timeout,overload:t.overload})};var E=S.prototype;return Object.defineProperties(S,{defaultMaxListeners:{get:function(){return E._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");E._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return v((n=m(n,{Promise:Promise,timeout:0,overload:!1},{Promise:f})).Promise,function(n,i,o){var s;if("function"==typeof e.addEventListener)return s=function(){n(u.apply(null,arguments))},o(function(){e.removeEventListener(t,s)}),void e.addEventListener(t,s,{once:!0});var r,a=function(){r&&e.removeListener("error",r),n(u.apply(null,arguments))};"error"!==t&&(r=function(n){e.removeListener(t,a),i(n)},e.once("error",r)),o(function(){r&&e.removeListener("error",r),e.removeListener(t,a)}),e.once(t,a)},{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(E,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),S}),e("skylark-formio/vendors/json-logic-js/logic",[],function(){"use strict";Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var e={},t={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t,n){return void 0===n?e<t:e<t&&t<n},"<=":function(e,t,n){return void 0===n?e<=t:e<=t&&t<=n},"!!":function(t){return e.truthy(t)},"!":function(t){return!e.truthy(t)},"%":function(e,t){return e%t},log:function(e){return console.log(e),e},in:function(e,t){return!(!t||void 0===t.indexOf)&&-1!==t.indexOf(e)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function(e,t,n){if(n<0){var i=String(e).substr(t);return i.substr(0,i.length+n)}return String(e).substr(t,n)},"+":function(){return Array.prototype.reduce.call(arguments,function(e,t){return parseFloat(e,10)+parseFloat(t,10)},0)},"*":function(){return Array.prototype.reduce.call(arguments,function(e,t){return parseFloat(e,10)*parseFloat(t,10)})},"-":function(e,t){return void 0===t?-e:e-t},"/":function(e,t){return e/t},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,function(e,t){return e.concat(t)},[])},var:function(e,t){var n=void 0===t?null:t,i=this;if(void 0===e||""===e||null===e)return i;for(var o=String(e).split("."),s=0;s<o.length;s++){if(null===i)return n;if(void 0===(i=i[o[s]]))return n}return i},missing:function(){for(var t=[],n=Array.isArray(arguments[0])?arguments[0]:arguments,i=0;i<n.length;i++){var o=n[i],s=e.apply({var:o},this);null!==s&&""!==s||t.push(o)}return t},missing_some:function(t,n){var i=e.apply({missing:n},this);return n.length-i.length>=t?[]:i},method:function(e,t,n){return e[t].apply(e,n)}};return e.is_logic=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length},e.truthy=function(e){return(!Array.isArray(e)||0!==e.length)&&!!e},e.get_operator=function(e){return Object.keys(e)[0]},e.get_values=function(t){return t[e.get_operator(t)]},e.apply=function(n,i){if(Array.isArray(n))return n.map(function(t){return e.apply(t,i)});if(!e.is_logic(n))return n;i=i||{};var o,s,r,a,l,c=e.get_operator(n),d=n[c];if(Array.isArray(d)||(d=[d]),"if"===c||"?:"==c){for(o=0;o<d.length-1;o+=2)if(e.truthy(e.apply(d[o],i)))return e.apply(d[o+1],i);return d.length===o+1?e.apply(d[o],i):null}if("and"===c){for(o=0;o<d.length;o+=1)if(s=e.apply(d[o],i),!e.truthy(s))return s;return s}if("or"===c){for(o=0;o<d.length;o+=1)if(s=e.apply(d[o],i),e.truthy(s))return s;return s}if("filter"===c)return a=e.apply(d[0],i),r=d[1],Array.isArray(a)?a.filter(function(t){return e.truthy(e.apply(r,t))}):[];if("map"===c)return a=e.apply(d[0],i),r=d[1],Array.isArray(a)?a.map(function(t){return e.apply(r,t)}):[];if("reduce"===c)return a=e.apply(d[0],i),r=d[1],l=void 0!==d[2]?d[2]:null,Array.isArray(a)?a.reduce(function(t,n){return e.apply(r,{current:n,accumulator:t})},l):l;if("all"===c){if(a=e.apply(d[0],i),r=d[1],!a.length)return!1;for(o=0;o<a.length;o+=1)if(!e.truthy(e.apply(r,a[o])))return!1;return!0}if("none"===c)return 0===e.apply({filter:d},i).length;if("some"===c)return e.apply({filter:d},i).length>0;if(d=d.map(function(t){return e.apply(t,i)}),"function"==typeof t[c])return t[c].apply(i,d);if(c.indexOf(".")>0){var u=String(c).split("."),h=t;for(o=0;o<u.length;o++)if(void 0===(h=h[u[o]]))throw new Error("Unrecognized operation "+c+" (failed at "+u.slice(0,o+1).join(".")+")");return h.apply(i,d)}throw new Error("Unrecognized operation "+c)},e.uses_data=function(t){var n=[];if(e.is_logic(t)){var i=e.get_operator(t),o=t[i];Array.isArray(o)||(o=[o]),"var"===i?n.push(o[0]):o.map(function(t){n.push.apply(n,e.uses_data(t))})}return function(e){for(var t=[],n=0,i=e.length;n<i;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n)},e.add_operation=function(e,n){t[e]=n},e.rm_operation=function(e){delete t[e]},e.rule_like=function(t,n){if(n===t)return!0;if("@"===n)return!0;if("number"===n)return"number"==typeof t;if("string"===n)return"string"==typeof t;if("array"===n)return Array.isArray(t)&&!e.is_logic(t);if(e.is_logic(n)){if(e.is_logic(t)){var i=e.get_operator(n),o=e.get_operator(t);if("@"===i||i===o)return e.rule_like(e.get_values(t,!1),e.get_values(n,!1))}return!1}if(Array.isArray(n)){if(Array.isArray(t)){if(n.length!==t.length)return!1;for(var s=0;s<n.length;s+=1)if(!e.rule_like(t[s],n[s]))return!1;return!0}return!1}return!1},e}),e("skylark-formio/vendors/moment/timezone",["skylark-moment"],function(e){"use strict";void 0===e.version&&e.default&&(e=e.default);var t,n={},i={},o={},s={},r={};e&&"string"==typeof e.version||M("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var a=e.version.split("."),l=+a[0],c=+a[1];function d(e){return e>96?e-87:e>64?e-29:e-48}function u(e){var t,n=0,i=e.split("."),o=i[0],s=i[1]||"",r=1,a=0,l=1;for(45===e.charCodeAt(0)&&(n=1,l=-1);n<o.length;n++)t=d(o.charCodeAt(n)),a=60*a+t;for(n=0;n<s.length;n++)r/=60,t=d(s.charCodeAt(n)),a+=t*r;return a*l}function h(e){for(var t=0;t<e.length;t++)e[t]=u(e[t])}function p(e,t){var n,i=[];for(n=0;n<t.length;n++)i[n]=e[t[n]];return i}function m(e){var t=e.split("|"),n=t[2].split(" "),i=t[3].split(""),o=t[4].split(" ");return h(n),h(i),h(o),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(o,i.length),{name:t[0],abbrs:p(t[1].split(" "),i),offsets:p(n,i),untils:o,population:0|t[5]}}function f(e){e&&this._set(m(e))}function g(e,t){this.name=e,this.zones=t}function y(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function b(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function v(e,t){for(var n,i;i=6e4*((t.at-e.at)/12e4|0);)(n=new y(new Date(e.at+i))).offset===e.offset?e=n:t=n;return e}function k(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function w(e,t){var n,i;for(h(t),n=0;n<t.length;n++)i=t[n],r[i]=r[i]||{},r[i][e]=!0}function x(e){var t,n,i,o=e.length,a={},l=[];for(t=0;t<o;t++)for(n in i=r[e[t].offset]||{})i.hasOwnProperty(n)&&(a[n]=!0);for(t in a)a.hasOwnProperty(t)&&l.push(s[t]);return l}function C(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=s[S(e)];if(t)return t;M("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,i,o,r=function(){var e,t,n,i=(new Date).getFullYear()-2,o=new y(new Date(i,0,1)),s=[o];for(n=1;n<48;n++)(t=new y(new Date(i,n,1))).offset!==o.offset&&(e=v(o,t),s.push(e),s.push(new y(new Date(e.at+6e4)))),o=t;for(n=0;n<4;n++)s.push(new y(new Date(i+n,0,1))),s.push(new y(new Date(i+n,6,1)));return s}(),a=r.length,l=x(r),c=[];for(i=0;i<l.length;i++){for(n=new b(A(l[i]),a),o=0;o<a;o++)n.scoreOffsetAt(r[o]);c.push(n)}return c.sort(k),c.length>0?c[0].zone.name:void 0}function S(e){return(e||"").toLowerCase().replace(/\//g,"_")}function E(e){var t,i,o,r;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)o=e[t].split("|"),i=o[0],r=S(i),n[r]=e[t],s[r]=i,w(r,o[2].split(" "))}function A(e,t){e=S(e);var o,r=n[e];return r instanceof f?r:"string"==typeof r?(r=new f(r),n[e]=r,r):i[e]&&t!==A&&(o=A(i[e],A))?((r=n[e]=new f)._set(o),r.name=s[e],r):null}function T(e){var t,n,o,r;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=e[t].split("|"),o=S(n[0]),r=S(n[1]),i[o]=r,s[o]=n[0],i[r]=o,s[r]=n[1]}function D(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function M(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function V(t){var n=Array.prototype.slice.call(arguments,0,-1),i=arguments[arguments.length-1],o=A(i),s=e.utc.apply(null,n);return o&&!e.isMoment(t)&&D(s)&&s.add(o.parse(s),"minutes"),s.tz(i),s}(l<2||2===l&&c<6)&&M("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),f.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,i=this.untils;for(t=0;t<i.length;t++)if(n<i[t])return t},countries:function(){var e=this.name;return Object.keys(o).filter(function(t){return-1!==o[t].zones.indexOf(e)})},parse:function(e){var t,n,i,o,s=+e,r=this.offsets,a=this.untils,l=a.length-1;for(o=0;o<l;o++)if(t=r[o],n=r[o+1],i=r[o?o-1:o],t<n&&V.moveAmbiguousForward?t=n:t>i&&V.moveInvalidForward&&(t=i),s<a[o]-6e4*t)return r[o];return r[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return M("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},b.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},V.version="0.5.31",V.dataVersion="",V._zones=n,V._links=i,V._names=s,V._countries=o,V.add=E,V.link=T,V.load=function(e){E(e.zones),T(e.links),function(e){var t,n,i,s;if(!e||!e.length)return;for(t=0;t<e.length;t++)s=e[t].split("|"),n=s[0].toUpperCase(),i=s[1].split(" "),o[n]=new g(n,i)}(e.countries),V.dataVersion=e.version},V.zone=A,V.zoneExists=function e(t){e.didShowError||(e.didShowError=!0,M("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')"));return!!A(t)},V.guess=function(e){t&&!e||(t=C());return t},V.names=function(){var e,t=[];for(e in s)s.hasOwnProperty(e)&&(n[e]||n[i[e]])&&s[e]&&t.push(s[e]);return t.sort()},V.Zone=f,V.unpack=m,V.unpackBase60=u,V.needsOffset=D,V.moveInvalidForward=!0,V.moveAmbiguousForward=!1,V.countries=function(){return Object.keys(o)},V.zonesForCountry=function(e,t){if(n=e,n=n.toUpperCase(),!(e=o[n]||null))return null;var n;var i=e.zones.sort();if(t)return i.map(function(e){var t=A(e);return{name:e,offset:t.utcOffset(new Date)}});return i};var _,R=e.fn;function P(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function F(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=V,e.defaultZone=null,e.updateOffset=function(t,n){var i,o=e.defaultZone;if(void 0===t._z&&(o&&D(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(o.parse(t),"minutes")),t._z=o),t._z)if(i=t._z.utcOffset(t),Math.abs(i)<16&&(i/=60),void 0!==t.utcOffset){var s=t._z;t.utcOffset(-i,n),t._z=s}else t.zone(i,n)},R.tz=function(t,n){if(t){if("string"!=typeof t)throw new Error("Time zone name must be a string, got "+t+" ["+typeof t+"]");return this._z=A(t),this._z?e.updateOffset(this,n):M("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},R.zoneName=P(R.zoneName),R.zoneAbbr=P(R.zoneAbbr),R.utc=F(R.utc),R.local=F(R.local),R.utcOffset=(_=R.utcOffset,function(){return arguments.length>0&&(this._z=null),_.apply(this,arguments)}),e.tz.setDefault=function(t){return(l<2||2===l&&c<9)&&M("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?A(t):null,e};var O=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(O)?(O.push("_z"),O.push("_a")):O&&(O._z=null),e}),e("skylark-formio/vendors/jstimezonedetect/jstz",[],function(){var e=function(){"use strict";var t={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk","Africa/Windhoek"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},n=function(e){var t=-e.getTimezoneOffset();return null!==t?t:0},i=function(){for(var e=[],i=0;i<=11;i++)for(var o=1;o<=28;o++){var s=n(new Date(t.BASELINE_YEAR,i,o));e?e&&e[e.length-1]!==s&&e.push(s):e.push()}return e},o=function(e){for(var t=new Date(e,0,1,0,0,1,0).getTime(),n=new Date(e,12,31,23,59,59).getTime(),i=t,o=new Date(i).getTimezoneOffset(),r=null,a=null;i<n-864e5;){var l=new Date(i),c=l.getTimezoneOffset();c!==o&&(c<o&&(r=l),c>o&&(a=l),o=c),i+=864e5}return!(!r||!a)&&{s:s(r).getTime(),e:s(a).getTime()}},s=function e(n,i,o){void 0===i&&(i=t.DAY,o=t.HOUR);for(var s=new Date(n.getTime()-i).getTime(),r=n.getTime()+i,a=new Date(s).getTimezoneOffset(),l=s,c=null;l<r-o;){var d=new Date(l),u=d.getTimezoneOffset();if(u!==a){c=d;break}l+=o}return i===t.DAY?e(c,t.HOUR,t.MINUTE):i===t.HOUR?e(c,t.MINUTE,t.SECOND):c},r=function(n){var i=function(){for(var t=[],n=0;n<e.olson.dst_rules.years.length;n++){var i=o(e.olson.dst_rules.years[n]);t.push(i)}return t}(),s=function(e){for(var t=0;t<e.length;t++)if(!1!==e[t])return!0;return!1}(i);return s?function(n,i){for(var o=function(e){for(var o=0,s=0;s<n.length;s++)if(e.rules[s]&&n[s]){if(!(n[s].s>=e.rules[s].s&&n[s].e<=e.rules[s].e)){o="N/A";break}if(o=0,o+=Math.abs(n[s].s-e.rules[s].s),(o+=Math.abs(e.rules[s].e-n[s].e))>t.MAX_SCORE){o="N/A";break}}return o=function(e,t,n,i){if("N/A"!==n)return n;if("Asia/Beirut"===t){if("Africa/Cairo"===i.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===i.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===t){if("America/Asuncion"===i.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===i.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===t){if("America/Sao_Paulo"===i.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===t&&"Pacific/Fiji"===i.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return n}(n,i,o,e)},s={},r=e.olson.dst_rules.zones,a=r.length,l=t.AMBIGUITIES[i],c=0;c<a;c++){var d=r[c],u=o(r[c]);"N/A"!==u&&(s[d.name]=u)}for(var h in s)if(s.hasOwnProperty(h))for(var p=0;p<l.length;p++)if(l[p]===h)return h;return i}(i,n):n};return{determine:function(n){var o=!1,s=function(){var e=0,t=i();t.length>1&&(e=t[0]-t[1]);if(t.length>3)return t[0]+",1,weird";if(e<0)return t[0]+",1";if(e>0)return t[1]+",1,s";return t[0]+",0"}();(n||void 0===n)&&(o=function(){var e,t;if(!Intl||"undefined"==typeof Intl||void 0===Intl.DateTimeFormat)return;if(void 0===(e=Intl.DateTimeFormat())||void 0===e.resolvedOptions)return;if((t=e.resolvedOptions().timeZone)&&(t.indexOf("/")>-1||"UTC"===t))return t}());o||(o=e.olson.timezones[s],void 0!==t.AMBIGUITIES[o]&&(o=r(o)));return{name:function(){return o},using_intl:n||void 0===n,needle:s,offsets:i()}}}}();return e.olson=e.olson||{},e.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","0,1,weird":"Africa/Casablanca","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,weird":"Africa/Casablanca","120,1":"Asia/Beirut","120,1,weird":"Africa/Cairo","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Calcutta","345,0":"Asia/Katmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},e.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12891204e5,s:12685608e5},{e:132057e7,s:13000104e5},{e:13520196e5,s:133146e7},{e:13834692e5,s:13629096e5},{e:14149188e5,s:13943592e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Africa/Windhoek",rules:[{e:12207492e5,s:120744e7},{e:12521988e5,s:12388896e5},{e:12836484e5,s:12703392e5},{e:1315098e6,s:13017888e5},{e:13465476e5,s:13332384e5},{e:13779972e5,s:13652928e5},{e:14100516e5,s:13967424e5}]}]},e}),e("skylark-formio/utils/jsonlogic/operators",[],function(){"use strict";return{lodashOperators:["chunk","compact","concat","difference","differenceBy","differenceWith","drop","dropRight","dropRightWhile","dropWhile","findIndex","findLastIndex","first","flatten","flattenDeep","flattenDepth","fromPairs","head","indexOf","initial","intersection","intersectionBy","intersectionWith","join","last","lastIndexOf","nth","slice","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","sortedUniq","sortedUniqBy","tail","take","takeRight","takeRightWhile","takeWhile","union","unionBy","unionWith","uniq","uniqBy","uniqWith","unzip","unzipWith","without","xor","xorBy","xorWith","zip","zipObject","zipObjectDeep","zipWith","countBy","every","filter","find","findLast","flatMap","flatMapDeep","flatMapDepth","groupBy","includes","invokeMap","keyBy","map","orderBy","partition","reduce","reduceRight","reject","sample","sampleSize","shuffle","size","some","sortBy","now","flip","negate","overArgs","partial","partialRight","rearg","rest","spread","castArray","clone","cloneDeep","cloneDeepWith","cloneDeep","conformsTo","eq","gt","gte","isArguments","isArray","isArrayBuffer","isArrayLike","isArrayLikeObject","isBoolean","isBuffer","isDate","isElement","isEmpty","isEqual","isEqualWith","isError","isFinite","isFunction","isInteger","isLength","isMap","isMatch","isMatchWith","isNaN","isNative","isNil","isNull","isNumber","isObject","isObjectLike","isPlainObject","isRegExp","isSafeInteger","isSet","isString","isSymbol","isTypedArray","isUndefined","isWeakMap","isWeakSet","lt","lte","toArray","toFinite","toInteger","toLength","toNumber","toPlainObject","toSafeInteger","toString","add","ceil","divide","floor","max","maxBy","mean","meanBy","min","minBy","multiply","round","subtract","sum","sumBy","clamp","inRange","random","at","entries","entriesIn","findKey","findLastKey","functions","functionsIn","get","has","hasIn","invert","invertBy","invoke","keys","keysIn","mapKeys","mapValues","omit","omitBy","pick","pickBy","result","toPairs","toPairsIn","transform","values","valuesIn","camelCase","capitalize","deburr","endsWith","escape","escapeRegExp","kebabCase","lowerCase","lowerFirst","pad","padEnd","padStart","parseInt","repeat","replace","snakeCase","split","startCase","startsWith","toLower","toUpper","trim","trimEnd","trimStart","truncate","unescape","upperCase","upperFirst","words","cond","conforms","constant","defaultTo","flow","flowRight","identity","iteratee","matches","matchesProperty","method","methodOf","nthArg","over","overEvery","overSome","property","propertyOf","range","rangeRight","stubArray","stubFalse","stubObject","stubString","stubTrue","times","toPath","uniqueId"]}}),e("skylark-formio/vendors/dompurify/purify",[],function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,i=Object.keys,o=Object.freeze,s=Object.seal,r=Object.create,a="undefined"!=typeof Reflect&&Reflect,l=a.apply,c=a.construct;l||(l=function(e,t,n){return e.apply(t,n)}),o||(o=function(e){return e}),s||(s=function(e){return e}),c||(c=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var d=S(Array.prototype.forEach),u=S(Array.prototype.indexOf),h=S(Array.prototype.join),p=S(Array.prototype.pop),m=S(Array.prototype.push),f=S(Array.prototype.slice),g=S(String.prototype.toLowerCase),y=S(String.prototype.match),b=S(String.prototype.replace),v=S(String.prototype.indexOf),k=S(String.prototype.trim),w=S(RegExp.prototype.test),x=E(RegExp),C=E(TypeError);function S(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return l(e,t,i)}}function E(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return c(e,n)}}function A(e,i){t&&t(e,null);for(var o=i.length;o--;){var s=i[o];if("string"==typeof s){var r=g(s);r!==s&&(n(i)||(i[o]=r),s=r)}e[s]=!0}return e}function T(t){var n=r(null),i=void 0;for(i in t)l(e,t,[i])&&(n[i]=t[i]);return n}var D=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),V=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),R=o(["#text"]),P=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),F=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),O=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),I=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),N=s(/<%[\s\S]*|[\s\S]*%>/gm),j=s(/^data-[\-\w.\u00B7-\uFFFF]/),U=s(/^aria-[\-\w]+$/),z=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B=s(/^(?:\w+script|data):/i),$=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var W=function(){return"undefined"==typeof window?null:window},K=function(e,t){if("object"!==(void 0===e?"undefined":q(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var Y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();var n=function(t){return e(t)};n.version="2.0.16";n.removed=[];if(!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var s=t.document;var r=!1;var a=t.document;var l=t.DocumentFragment,c=t.HTMLTemplateElement,S=t.Node,E=t.NodeFilter,Y=t.NamedNodeMap,G=void 0===Y?t.NamedNodeMap||t.MozNamedAttrMap:Y,J=t.Text,Z=t.Comment,X=t.DOMParser,Q=t.trustedTypes;if("function"==typeof c){var ee=a.createElement("template");ee.content&&ee.content.ownerDocument&&(a=ee.content.ownerDocument)}var te=K(Q,s);var ne=te&&Oe?te.createHTML(""):"";var ie=a,oe=ie.implementation,se=ie.createNodeIterator,re=ie.getElementsByTagName,ae=ie.createDocumentFragment;var le=s.importNode;var ce={};try{ce=T(a).documentMode?a.documentMode:{}}catch(e){}var de={};n.isSupported=oe&&void 0!==oe.createHTMLDocument&&9!==ce;var ue=I,he=N,pe=j,me=U,fe=B,ge=$;var ye=z;var be=null;var ve=A({},[].concat(H(D),H(M),H(V),H(_),H(R)));var ke=null;var we=A({},[].concat(H(P),H(F),H(O),H(L)));var xe=null;var Ce=null;var Se=!0;var Ee=!0;var Ae=!1;var Te=!1;var De=!1;var Me=!1;var Ve=!1;var _e=!1;var Re=!1;var Pe=!1;var Fe=!1;var Oe=!1;var Le=!0;var Ie=!0;var Ne=!1;var je={};var Ue=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]);var ze=null;var Be=A({},["audio","video","img","source","image","track"]);var $e=null;var qe=A({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]);var He=null;var We=a.createElement("form");var Ke=function(e){He&&He===e||(e&&"object"===(void 0===e?"undefined":q(e))||(e={}),e=T(e),be="ALLOWED_TAGS"in e?A({},e.ALLOWED_TAGS):ve,ke="ALLOWED_ATTR"in e?A({},e.ALLOWED_ATTR):we,$e="ADD_URI_SAFE_ATTR"in e?A(T(qe),e.ADD_URI_SAFE_ATTR):qe,ze="ADD_DATA_URI_TAGS"in e?A(T(Be),e.ADD_DATA_URI_TAGS):Be,xe="FORBID_TAGS"in e?A({},e.FORBID_TAGS):{},Ce="FORBID_ATTR"in e?A({},e.FORBID_ATTR):{},je="USE_PROFILES"in e&&e.USE_PROFILES,Se=!1!==e.ALLOW_ARIA_ATTR,Ee=!1!==e.ALLOW_DATA_ATTR,Ae=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=e.SAFE_FOR_JQUERY||!1,De=e.SAFE_FOR_TEMPLATES||!1,Me=e.WHOLE_DOCUMENT||!1,Re=e.RETURN_DOM||!1,Pe=e.RETURN_DOM_FRAGMENT||!1,Fe=e.RETURN_DOM_IMPORT||!1,Oe=e.RETURN_TRUSTED_TYPE||!1,_e=e.FORCE_BODY||!1,Le=!1!==e.SANITIZE_DOM,Ie=!1!==e.KEEP_CONTENT,Ne=e.IN_PLACE||!1,ye=e.ALLOWED_URI_REGEXP||ye,De&&(Ee=!1),Pe&&(Re=!0),je&&(be=A({},[].concat(H(R))),ke=[],!0===je.html&&(A(be,D),A(ke,P)),!0===je.svg&&(A(be,M),A(ke,F),A(ke,L)),!0===je.svgFilters&&(A(be,V),A(ke,F),A(ke,L)),!0===je.mathMl&&(A(be,_),A(ke,O),A(ke,L))),e.ADD_TAGS&&(be===ve&&(be=T(be)),A(be,e.ADD_TAGS)),e.ADD_ATTR&&(ke===we&&(ke=T(ke)),A(ke,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&A($e,e.ADD_URI_SAFE_ATTR),Ie&&(be["#text"]=!0),Me&&A(be,["html","head","body"]),be.table&&(A(be,["tbody"]),delete xe.tbody),o&&o(e),He=e)};var Ye=function(e){m(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=ne}};var Ge=function(e,t){try{m(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(n.removed,{attribute:null,from:t})}t.removeAttribute(e)};var Je=function(e){var t=void 0,n=void 0;if(_e)e="<remove></remove>"+e;else{var i=y(e,/^[\r\n\t ]+/);n=i&&i[0]}var o=te?te.createHTML(e):e;try{t=(new X).parseFromString(o,"text/html")}catch(e){}if(r&&A(xe,["title"]),!t||!t.documentElement){var s=t=oe.createHTMLDocument(""),l=s.body;l.parentNode.removeChild(l.parentNode.firstElementChild),l.outerHTML=o}return e&&n&&t.body.insertBefore(a.createTextNode(n),t.body.childNodes[0]||null),re.call(t,Me?"html":"body")[0]};n.isSupported&&function(){try{var e=Je("<x/><title>&lt;/title&gt;&lt;img&gt;");w(/<\/title/,e.querySelector("title").innerHTML)&&(r=!0)}catch(e){}}();var Ze=function(e){return se.call(e.ownerDocument||e,e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,function(){return E.FILTER_ACCEPT},!1)};var Xe=function(e){return"object"===(void 0===S?"undefined":q(S))?e instanceof S:e&&"object"===(void 0===e?"undefined":q(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName};var Qe=function(e,t,i){de[e]&&d(de[e],function(e){e.call(n,t,i,He)})};var et=function(e){var t=void 0;if(Qe("beforeSanitizeElements",e,null),function(e){if(e instanceof J||e instanceof Z)return!1;if("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof G)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI)return!0;return!1}(e))return Ye(e),!0;if(y(e.nodeName,/[\u0080-\uFFFF]/))return Ye(e),!0;var i=g(e.nodeName);if(Qe("uponSanitizeElement",e,{tagName:i,allowedTags:be}),("svg"===i||"math"===i)&&0!==e.querySelectorAll("p, br, form").length)return Ye(e),!0;if(!be[i]||xe[i]){if(Ie&&!Ue[i]&&"function"==typeof e.insertAdjacentHTML)try{var o=e.innerHTML;e.insertAdjacentHTML("AfterEnd",te?te.createHTML(o):o)}catch(e){}return Ye(e),!0}return"noscript"===i&&w(/<\/noscript/i,e.innerHTML)?(Ye(e),!0):"noembed"===i&&w(/<\/noembed/i,e.innerHTML)?(Ye(e),!0):(!Te||Xe(e.firstElementChild)||Xe(e.content)&&Xe(e.content.firstElementChild)||!w(/</g,e.textContent)||(m(n.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=b(e.innerHTML,/</g,"&lt;"):e.innerHTML=b(e.textContent,/</g,"&lt;")),De&&3===e.nodeType&&(t=e.textContent,t=b(t,ue," "),t=b(t,he," "),e.textContent!==t&&(m(n.removed,{element:e.cloneNode()}),e.textContent=t)),Qe("afterSanitizeElements",e,null),!1)};var tt=function(e,t,n){if(Le&&("id"===t||"name"===t)&&(n in a||n in We))return!1;if(Ee&&w(pe,t));else if(Se&&w(me,t));else{if(!ke[t]||Ce[t])return!1;if($e[t]);else if(w(ye,b(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(n,"data:")||!ze[e]){if(Ae&&!w(fe,b(n,ge,"")));else if(n)return!1}else;}return!0};var nt=function(e){var t=void 0,o=void 0,s=void 0,r=void 0,a=void 0;Qe("beforeSanitizeAttributes",e,null);var l=e.attributes;if(l){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(a=l.length;a--;){var d=t=l[a],m=d.name,y=d.namespaceURI;if(o=k(t.value),s=g(m),c.attrName=s,c.attrValue=o,c.keepAttr=!0,c.forceKeepAttr=void 0,Qe("uponSanitizeAttribute",e,c),o=c.attrValue,!c.forceKeepAttr){if("name"===s&&"IMG"===e.nodeName&&l.id)r=l.id,l=f(l,[]),Ge("id",e),Ge(m,e),u(l,r)>a&&e.setAttribute("id",r.value);else{if("INPUT"===e.nodeName&&"type"===s&&"file"===o&&c.keepAttr&&(ke[s]||!Ce[s]))continue;"id"===m&&e.setAttribute(m,""),Ge(m,e)}if(c.keepAttr)if(Te&&w(/\/>/i,o))Ge(m,e);else if(w(/svg|math/i,e.namespaceURI)&&w(x("</("+h(i(Ue),"|")+")","i"),o))Ge(m,e);else{De&&(o=b(o,ue," "),o=b(o,he," "));var v=e.nodeName.toLowerCase();if(tt(v,s,o))try{y?e.setAttributeNS(y,m,o):e.setAttribute(m,o),p(n.removed)}catch(e){}}}}Qe("afterSanitizeAttributes",e,null)}};var it=function e(t){var n=void 0,i=Ze(t);for(Qe("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Qe("uponSanitizeShadowNode",n,null),et(n)||(n.content instanceof l&&e(n.content),nt(n));Qe("afterSanitizeShadowDOM",t,null)};n.sanitize=function(e,i){var o=void 0,r=void 0,a=void 0,c=void 0,d=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Xe(e)){if("function"!=typeof e.toString)throw C("toString is not a function");if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}if(!n.isSupported){if("object"===q(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Xe(e))return t.toStaticHTML(e.outerHTML)}return e}if(Ve||Ke(i),n.removed=[],"string"==typeof e&&(Ne=!1),Ne);else if(e instanceof S)o=Je("\x3c!--\x3e"),1===(r=o.ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName?o=r:"HTML"===r.nodeName?o=r:o.appendChild(r);else{if(!Re&&!De&&!Me&&-1===e.indexOf("<"))return te&&Oe?te.createHTML(e):e;if(!(o=Je(e)))return Re?null:ne}o&&_e&&Ye(o.firstChild);for(var u=Ze(Ne?e:o);a=u.nextNode();)3===a.nodeType&&a===c||et(a)||(a.content instanceof l&&it(a.content),nt(a),c=a);if(c=null,Ne)return e;if(Re){if(Pe)for(d=ae.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return Fe&&(d=le.call(s,d,!0)),d}var h=Me?o.outerHTML:o.innerHTML;return De&&(h=b(h,ue," "),h=b(h,he," ")),te&&Oe?te.createHTML(h):h};n.setConfig=function(e){Ke(e),Ve=!0};n.clearConfig=function(){He=null,Ve=!1};n.isValidAttribute=function(e,t,n){He||Ke({});var i=g(e),o=g(t);return tt(i,o,n)};n.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],m(de[e],t))};n.removeHook=function(e){de[e]&&p(de[e])};n.removeHooks=function(e){de[e]&&(de[e]=[])};n.removeAllHooks=function(){de={}};return n}();return Y}),e("skylark-formio/vendors/fast-json-patch/helpers",[],function(){var e=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},t=Object.prototype.hasOwnProperty;function n(e,n){return t.call(e,n)}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),i=0;i<t.length;i++)t[i]=""+i;return t}if(Object.keys)return Object.keys(e);var t=[];for(var o in e)n(e,o)&&t.push(o);return t}function o(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e,t){var i;for(var r in e)if(n(e,r)){if(e[r]===t)return o(r)+"/";if("object"==typeof e[r]&&""!=(i=s(e[r],t)))return o(r)+"/"+i}return""}var r=function(t){function n(e,n,i,o,s){t.call(this,e),this.message=e,this.name=n,this.index=i,this.operation=o,this.tree=s}return e(n,t),n}(Error);return{hasOwnProperty:n,PatchError:r,hasUndefined:function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,o=t.length;n<o;n++)if(e(t[n]))return!0}else if("object"==typeof t)for(var s=i(t),r=s.length,n=0;n<r;n++)if(e(t[s[n]]))return!0;return!1},getPath:function(e,t){if(e===t)return"/";var n=s(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n},unescapePathComponent:function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},escapePathComponent:o,isInteger:function(e){var t,n=0,i=e.length;for(;n<i;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0},_objectKeys:i,_deepClone:function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},_getPathRecursive:s}}),e("skylark-formio/vendors/fast-json-patch/core",["skylark-lodash","./helpers"],function(e,t){var n=function(t,n){return e.isEqual(t,n)},i={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,n,i){var o=s(i,this.path);o&&(o=t._deepClone(o));var a=r(i,{op:"remove",path:this.from}).removed;return r(i,{op:"add",path:this.path,value:a}),{newDocument:i,removed:o}},copy:function(e,n,i){var o=s(i,this.from);return r(i,{op:"add",path:this.path,value:t._deepClone(o)}),{newDocument:i}},test:function(e,t,i){return{newDocument:i,test:n(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},o={add:function(e,n,i){return t.isInteger(n)?e.splice(n,0,this.value):e[n]=this.value,{newDocument:i,index:n}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:i.move,copy:i.copy,test:i.test,_get:i._get};function s(e,t){if(""==t)return e;var n={op:"_get",path:t};return r(e,n),n.value}function r(e,r,a,c){if(void 0===a&&(a=!1),void 0===c&&(c=!0),a&&("function"==typeof a?a(r,0,e,r.path):l(r,0)),""===r.path){var d={newDocument:e};if("add"===r.op)return d.newDocument=r.value,d;if("replace"===r.op)return d.newDocument=r.value,d.removed=e,d;if("move"===r.op||"copy"===r.op)return d.newDocument=s(e,r.from),"move"===r.op&&(d.removed=e),d;if("test"===r.op){if(d.test=n(e,r.value),!1===d.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,r,e);return d.newDocument=e,d}if("remove"===r.op)return d.removed=e,d.newDocument=null,d;if("_get"===r.op)return r.value=e,d;if(a)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,r,e);return d}c||(e=t._deepClone(e));var u=r.path||"",h=u.split("/"),p=e,m=1,f=h.length,g=void 0,y=void 0,b=void 0;for(b="function"==typeof a?a:l;;){if(y=h[m],a&&void 0===g&&(void 0===p[y]?g=h.slice(0,m).join("/"):m==f-1&&(g=r.path),void 0!==g&&b(r,0,e,g)),m++,Array.isArray(p)){if("-"===y)y=p.length;else{if(a&&!t.isInteger(y))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,r.path,r);t.isInteger(y)&&(y=~~y)}if(m>=f){if(a&&"add"===r.op&&y>p.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,r.path,r);var d=o[r.op].call(r,p,y,e);if(!1===d.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,r,e);return d}}else if(y&&-1!=y.indexOf("~")&&(y=t.unescapePathComponent(y)),m>=f){var d=i[r.op].call(r,p,y,e);if(!1===d.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,r,e);return d}p=p[y]}}function a(e,n,i,o){if(void 0===o&&(o=!0),i&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(e=t._deepClone(e));for(var s=new Array(n.length),a=0,l=n.length;a<l;a++)s[a]=r(e,n[a],i),e=s[a].newDocument;return s.newDocument=e,s}function l(e,n,o,s){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,o);if(!i[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,o);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,o);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,o);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,o);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,o);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&t.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,o);if(o)if("add"==e.op){var r=e.path.split("/").length,a=s.split("/").length;if(r!==a+1&&r!==a)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,o)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==s)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,o)}else if("move"===e.op||"copy"===e.op){var l={op:"_get",path:e.from,value:void 0},d=c([l],o);if(d&&"OPERATION_PATH_UNRESOLVABLE"===d.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,o)}}function c(e,n,i){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)a(t._deepClone(n),t._deepClone(e),i||!0);else{i=i||l;for(var o=0;o<e.length;o++)i(e[o],o,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}return{JsonPatchError:t.PatchError,deepClone:t._deepClone,getValueByPointer:s,applyOperation:r,applyPatch:a,applyReducer:function(e,n){var i=r(e,n);if(!1===i.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return i.newDocument},validator:l,validate:c}}),e("skylark-formio/vendors/fast-json-patch/duplex",["./helpers","./core"],function(e,t){var n=new WeakMap,i=function(){return function(e){this.observers=new Map,this.obj=e}}(),o=function(){return function(e,t){this.callback=e,this.observer=t}}();function s(e){var i=n.get(e.object);r(i.value,e.object,e.patches,""),e.patches.length&&t.applyPatch(i.value,e.patches);var o=e.patches;return o.length>0&&(e.patches=[],e.callback&&e.callback(o)),o}function r(t,n,i,o){if(n!==t){"function"==typeof n.toJSON&&(n=n.toJSON());for(var s=e._objectKeys(n),a=e._objectKeys(t),l=!1,c=a.length-1;c>=0;c--){var d=a[c],u=t[d];if(!e.hasOwnProperty(n,d)||void 0===n[d]&&void 0!==u&&!1===Array.isArray(n))i.push({op:"remove",path:o+"/"+e.escapePathComponent(d)}),l=!0;else{var h=n[d];"object"==typeof u&&null!=u&&"object"==typeof h&&null!=h?r(u,h,i,o+"/"+e.escapePathComponent(d)):u!==h&&(!0,i.push({op:"replace",path:o+"/"+e.escapePathComponent(d),value:e._deepClone(h)}))}}if(l||s.length!=a.length)for(var c=0;c<s.length;c++){var d=s[c];e.hasOwnProperty(t,d)||void 0===n[d]||i.push({op:"add",path:o+"/"+e.escapePathComponent(d),value:e._deepClone(n[d])})}}}return{applyPatch:t.applyPatch,unobserve:function(e,t){t.unobserve()},observe:function(t,r){var a,l=function(e){return n.get(e)}(t);if(l){var c=function(e,t){return e.observers.get(t)}(l,r);a=c&&c.observer}else l=new i(t),n.set(t,l);if(a)return a;if(a={},l.value=e._deepClone(t),r){a.callback=r,a.next=null;var d=function(){s(a)},u=function(){clearTimeout(a.next),a.next=setTimeout(d)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u)):(document.documentElement.attachEvent("onmouseup",u),document.documentElement.attachEvent("onkeyup",u),document.documentElement.attachEvent("onmousedown",u),document.documentElement.attachEvent("onkeydown",u),document.documentElement.attachEvent("onchange",u)))}return a.patches=[],a.object=t,a.unobserve=function(){s(a),clearTimeout(a.next),function(e,t){e.observers.delete(t.callback)}(l,a),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u)):(document.documentElement.detachEvent("onmouseup",u),document.documentElement.detachEvent("onkeyup",u),document.documentElement.detachEvent("onmousedown",u),document.documentElement.detachEvent("onkeydown",u)))},l.observers.set(r,new o(r,a)),a},generate:s,compare:function(e,t){var n=[];return r(e,t,n,""),n}}}),e("skylark-formio/utils/formUtils",["skylark-lodash","../vendors/fast-json-patch/duplex"],function(e,t){"use strict";const{get:n,set:i,has:o,clone:s,forOwn:r,isString:a,isNaN:l,isNil:c,isPlainObject:d,round:u,chunk:h,pad:p}=e;function m(e,t,n,i,o){e&&(i=i||"",e.forEach(e=>{if(!e)return;const r=e.columns&&Array.isArray(e.columns),a=e.rows&&Array.isArray(e.rows),l=e.components&&Array.isArray(e.components);let c=!1;const d=e.key?i?`${i}.${e.key}`:e.key:"";o&&(e.parent=s(o),delete e.parent.components,delete e.parent.componentMap,delete e.parent.columns,delete e.parent.rows),(n||e.tree||!r&&!a&&!l)&&(c=t(e,d));const u=()=>e.key&&!["panel","table","well","columns","fieldset","tabs","form"].includes(e.type)&&(["datagrid","container","editgrid"].includes(e.type)||e.tree)?d:e.key&&"form"===e.type?`${d}.data`:i;c||(r?e.columns.forEach(i=>m(i.components,t,n,u(),o?e:null)):a?e.rows.forEach(i=>{Array.isArray(i)&&i.forEach(i=>m(i.components,t,n,u(),o?e:null))}):l&&m(e.components,t,n,u(),o?e:null))}))}function f(e,t){if(a(t))return e.key===t||e.path===t;{let i=!1;return r(t,(t,o)=>{if(!(i=n(e,o)===t))return!1}),i}}function g(e,t){const n=[];return m(e,e=>{f(e,t)&&n.push(e)},!0),n}function y(e,t,n,i){if(e){if(n=n||[],!t)return i(e);e.forEach(function(e,o){var s=n.slice();s.push(o),e&&(e.hasOwnProperty("columns")&&Array.isArray(e.columns)&&(s.push("columns"),e.columns.forEach(function(e,n){var o=s.slice();o.push(n),o.push("components"),y(e.components,t,o,i)})),e.hasOwnProperty("rows")&&Array.isArray(e.rows)&&(s.push("rows"),e.rows.forEach(function(e,n){var o=s.slice();o.push(n),e.forEach(function(e,n){var s=o.slice();s.push(n),s.push("components"),y(e.components,t,s,i)})})),e.hasOwnProperty("components")&&Array.isArray(e.components)&&(s.push("components"),y(e.components,t,s,i)),e.key===t&&i(e,s))})}}function b(e,t){var i=t.pop();0!==t.length&&(e=n(e,t)),e.splice(i,1)}function v(e){return parseFloat(a(e)?e.replace(/[^\de.+-]/gi,""):e)}return{isLayoutComponent:function(e){return Boolean(e.columns&&Array.isArray(e.columns)||e.rows&&Array.isArray(e.rows)||e.components&&Array.isArray(e.components))},eachComponent:m,matchComponent:f,getComponent:function(e,t,n){let i;return m(e,(e,n)=>{if(n===t||e.path===t)return i=e,!0},n),i},searchComponents:g,findComponents:function(e,t){return console.warn("formio.js/utils findComponents is deprecated. Use searchComponents instead."),g(e,t)},findComponent:y,removeComponent:b,generateFormChange:function(e,t){let n;switch(e){case"add":n={op:"add",key:t.component.key,container:t.parent.key,path:t.path,index:t.index,component:t.component};break;case"edit":(n={op:"edit",key:t.originalComponent.key,patches:duplex.compare(t.originalComponent,t.component)}).patches.length||(n=null);break;case"remove":n={op:"remove",key:t.component.key}}return n},applyFormChanges:function(e,t){const o=[];return t.forEach(function(t){var s=!1;switch(t.op){case"add":var r=t.component;y(e.components,t.container,null,function(i){t.container||(i=e),y(e.components,t.key,null,function(t,n){r=t,b(e.components,n)}),s=!0,n(i,t.path).splice(t.index,0,r)});break;case"remove":y(e.components,t.key,null,function(t,i){s=!0,n(e.components,i).key!==t.key&&i.pop(),b(e.components,i)});break;case"edit":y(e.components,t.key,null,function(r,a){s=!0;try{const s=n(e.components,a),l=duplex.applyPatch(r,t.patches).newDocument;s.key!==l.key&&a.pop(),i(e.components,a,l)}catch(e){o.push(t)}})}s||o.push(t)}),{form:e,failed:o}},flattenComponents:function(e,t){const n={};return m(e,(e,t)=>{n[t]=e},t),n},hasCondition:function(e){return Boolean(e.customConditional||e.conditional&&e.conditional.when||e.conditional&&e.conditional.json)},parseFloatExt:v,formatAsCurrency:function(e){const t=v(e);if(l(t))return"";const n=u(t,2).toString().split(".");return n[0]=h(Array.from(n[0]).reverse(),3).reverse().map(e=>e.reverse().join("")).join(","),n[1]=p(n[1],2,"0"),n.join(".")},escapeRegExCharacters:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")},getValue:function(e,t){const n=e=>{if(d(e)){if(o(e,t))return e[t];let i=null;return r(e,e=>{const t=n(e);if(!c(t))return i=t,!1}),i}return null};return n(e.data)},getStrings:function(e){const t=["label","title","legend","tooltip","description","placeholder","prefix","suffix","errorLabel","content","html"],n=[];return m(e.components,e=>{if(t.forEach(t=>{e.hasOwnProperty(t)&&e[t]&&n.push({key:e.key,type:e.type,property:t,string:e[t]})}),(!e.dataSrc||"values"===e.dataSrc)&&e.hasOwnProperty("values")&&Array.isArray(e.values)&&e.values.length&&e.values.forEach((t,i)=>{n.push({key:e.key,property:`value[${i}].label`,string:e.values[i].label})}),"day"===e.type&&(["day","month","year","Day","Month","Year","january","february","march","april","may","june","july","august","september","october","november","december"].forEach(t=>{n.push({key:e.key,property:"day",string:t})}),e.fields.day.placeholder&&n.push({key:e.key,property:"fields.day.placeholder",string:e.fields.day.placeholder}),e.fields.month.placeholder&&n.push({key:e.key,property:"fields.month.placeholder",string:e.fields.month.placeholder}),e.fields.year.placeholder&&n.push({key:e.key,property:"fields.year.placeholder",string:e.fields.year.placeholder})),"editgrid"===e.type){const t=e.addAnother||"Add Another";e.addAnother&&n.push({key:e.key,property:"addAnother",string:t})}"select"===e.type&&["loading...","Type to search"].forEach(t=>{n.push({key:e.key,property:"select",string:t})})},!0),n}}}),e("skylark-formio/utils/Evaluator",["skylark-lodash"],function(e){"use strict";function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}const n={noeval:!1,cache:{},templateSettings:{evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{\{\{([\s\S]+?)\}\}\}/g},evaluator:(t,...i)=>n.noeval?(console.warn("No evaluations allowed for this renderer."),e.noop):("object"==typeof i[0]&&(i=e.keys(i[0])),new Function(...i,t)),template(i,o){o=o||t(i);try{return i=i.replace(/ctx\./g,""),n.cache[o]=e.template(i,n.templateSettings)}catch(e){console.warn("Error while processing template",e,i)}},interpolate(i,o){if("function"==typeof i)try{return i(o)}catch(e){return console.warn("Error interpolating template",e,o),e.message}const s=t(i=String(i));let r;if(n.cache[s])r=n.cache[s];else{if(n.noeval)return i.replace(/({{\s*(.*?)\s*}})/g,(t,n,i)=>e.get(o,i));r=n.template(i,s)}if("function"==typeof r)try{return r(o)}catch(e){return console.warn("Error interpolating template",e,i,o),e.message}return r},evaluate:(e,t)=>Array.isArray(t)?e(...t):e(t)};return n}),e("skylark-formio/utils/utils",["skylark-lodash","../vendors/fetch-ponyfill/fetch","../vendors/json-logic-js/logic","../vendors/moment/timezone","../vendors/jstimezonedetect/jstz","./jsonlogic/operators","../vendors/getify/npo","../vendors/dompurify/purify","./formUtils","./Evaluator"],function(e,t,n,i,o,s,r,a,l,c){"use strict";const d=c.interpolate,{fetch:u}=t({Promise:r});function h(t,i,o,s){let r=null;const a=i.component?i.component:{key:"unknown"};!i.form&&i.instance&&(i.form=e.get(i.instance,"root._form",{}));const l=a.key;if("string"==typeof t){o&&(t+=`;return ${o}`),s&&(t=t.replace(/({{\s+(.*)\s+}})/,(t,n,o)=>0===o.indexOf("data.")?e.get(i.data,o.replace("data.","")):0===o.indexOf("row.")?e.get(i.row,o.replace("row.","")):e.get(i.data,o)));try{t=c.evaluator(t,i),i=e.values(i)}catch(e){console.warn(`An error occured within the custom function for ${l}`,e),r=null,t=!1}}if("function"==typeof t)try{r=c.evaluate(t,i)}catch(e){r=null,console.warn(`An error occured within custom function for ${l}`,e)}else if("object"==typeof t)try{r=n.apply(t,i)}catch(e){r=null,console.warn(`An error occured within custom function for ${l}`,e)}else t&&console.warn(`Unknown function type for ${l}`);return r}function p(e,t){let n=e.getPropertyValue(t);return n=n?n.replace(/[^0-9.]/g,""):"0",parseFloat(n)}function m(t,n,i,o){let s=null;i&&(s=l.getValue({data:i},n.when)),o&&e.isNil(s)&&(s=l.getValue({data:o},n.when)),e.isNil(s)&&(s="");const r=String(n.eq),a=String(n.show);return e.isObject(s)&&e.has(s,n.eq)?String(s[n.eq])===a:Array.isArray(s)&&s.map(String).includes(r)?"true"===a:String(s)===r==("true"===a)}function f(e,t,n,i,o,s,r,a){"string"==typeof t&&(t=`var ${s} = true; ${t}; return ${s};`);const l=a&&a.evaluate?a.evaluate(t):h(t,{row:n,data:i,form:o});return null===l?r:l}function g(t,i,o,s,r,a){try{return n.apply(i,{data:s,row:o,form:r,_:e})}catch(e){return console.warn(`An error occurred in jsonLogic advanced condition for ${t.key}`,e),a}}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function b(){return i.currentTimezone?i.currentTimezone:(i.currentTimezone=o.determine().name(),i.currentTimezone)}function v(e,t){if("UTC"===t)return{date:new Date(e.getTime()+6e4*e.getTimezoneOffset()),abbr:"UTC"};const n=i(e).tz(t);return{date:new Date(e.getTime()+6e4*(n.utcOffset()+e.getTimezoneOffset())),abbr:n.format("z")}}function k(e){return e!==b()&&"UTC"!==e}function w(t){return t&&!k(t)?new r(e.noop):i.zonesPromise?i.zonesPromise:i.zonesPromise=u("https://cdn.form.io/moment-timezone/data/packed/latest.json").then(e=>e.json().then(e=>{if(i.tz.load(e),i.zonesLoaded=!0,document&&document.createEvent&&document.body&&document.body.dispatchEvent){var t=document.createEvent("Event");t.initEvent("zonesLoaded",!0,!0),document.body.dispatchEvent(t)}}))}function x(e){return e.replace(/y/g,"Y").replace(/d/g,"D").replace(/E/g,"d").replace(/a/g,"A").replace(/U/g,"X")}function C(e){return e.match(/(\d+)$/)?e.replace(/(\d+)$/,function(e){return Number(e)+1}):`${e}1`}function S(e){return"function"==typeof e?e():e}s.lodashOperators.forEach(t=>n.add_operation(`_${t}`,e[t])),n.add_operation("getDate",e=>i(e).toISOString()),n.add_operation("relativeMinDate",e=>i().subtract(e,"days").toISOString()),n.add_operation("relativeMaxDate",e=>i().add(e,"days").toISOString());const E=e.flow([e.partialRight(e.map,S),e.partialRight(e.find,t=>!e.isUndefined(t))]);return{jsonLogic:n,moment:i,evaluate:h,getRandomComponentId:function(){return`e${Math.random().toString(36).substring(7)}`},getPropertyValue:p,getElementRect:function(e){const t=window.getComputedStyle(e,null);return{x:p(t,"left"),y:p(t,"top"),width:p(t,"width"),height:p(t,"height")}},boolValue:function(t){return e.isBoolean(t)?t:e.isString(t)?"true"===t.toLowerCase():!!t},isMongoId:function(e){return e.toString().match(/^[0-9a-fA-F]{24}$/)},checkCalculated:function(t,n,i){t.calculateValue&&e.set(i,t.key,h(t.calculateValue,{value:void 0,data:n?n.data:i,row:i,util:this,component:t},"value"))},checkSimpleConditional:m,checkCustomConditional:f,checkJsonConditional:g,checkCondition:function(e,t,n,i,o){if(e.customConditional)return f(e,e.customConditional,t,n,i,"show",!0,o);if(e.conditional&&e.conditional.when)return m(e,e.conditional,t,n);if(e.conditional&&e.conditional.json)return g(e,e.conditional.json,t,n,i,!0);return!0},checkTrigger:function(e,t,n,i,o,s){if(!t[t.type])return!1;switch(t.type){case"simple":return m(e,t.simple,n,i);case"javascript":return f(e,t.javascript,n,i,o,"result",!1,s);case"json":return g(e,t.json,n,i,o,!1)}return!1},setActionProperty:function(t,n,i,o,s,r){const a=n.property.value;switch(n.property.type){case"boolean":{const i=e.get(t,a,!1).toString(),o=n.state.toString();i!==o&&e.set(t,a,"true"===o);break}case"string":{const l={data:s,row:o,component:t,result:i},d=n.property.component?n[n.property.component]:n.text,u=e.get(t,a,""),h=r&&r.interpolate?r.interpolate(d,l):c.interpolate(d,l);h!==u&&e.set(t,a,h);break}}return t},uniqueName:function(t,n,i){(n=n||"{{fileName}}-{{guid}}").includes("{{guid}}")||(n=`${n}-{{guid}}`);const o=t.split(".");let s=o.slice(0,o.length-1).join(".");const r=o.length>1?`.${e.last(o)}`:"";return s=s.substr(0,100),i=Object.assign(i||{},{fileName:s,guid:y()}),`${c.interpolate(n,i)}${r}`.replace(/[^0-9a-zA-Z.\-_ ]/g,"-")},guid:y,getDateSetting:function(t){if(e.isNil(t)||e.isNaN(t)||""===t)return null;if(t instanceof Date)return t;if("function"==typeof t.toDate)return t.isValid()?t.toDate():null;let n="string"!=typeof t||-1===t.indexOf("moment(")?i(t):null;if(n&&n.isValid())return n.toDate();n=null;try{const e=c.evaluator(`return ${t};`,"moment")(i);"string"==typeof e?n=i(e):"function"==typeof e.toDate?n=i(e.toDate().toUTCString()):e instanceof Date&&(n=i(e))}catch(e){return null}if(!n)return null;if(!n.isValid())return null;return n.toDate()},isValidDate:function(t){return e.isDate(t)&&!e.isNaN(t.getDate())},currentTimezone:b,offsetDate:v,zonesLoaded:function(){return i.zonesLoaded},shouldLoadZones:k,loadZones:w,momentDate:function(e,t,n){const o=i(e);"UTC"===n&&(n="Etc/UTC");if((n!==b()||t&&t.match(/\s(z$|z\s)/))&&i.zonesLoaded)return o.tz(n);return o},formatDate:function(e,t,n){const o=i(e);if(n===b())return t.match(/\s(z$|z\s)/)?(w(),i.zonesLoaded?o.tz(n).format(x(t)):o.format(x(t.replace(/\s(z$|z\s)/,"")))):o.format(x(t));if("UTC"===n){const e=v(o.toDate(),"UTC");return`${i(e.date).format(x(t))} UTC`}return w(),i.zonesLoaded?o.tz(n).format(`${x(t)} z`):o.format(x(t))},formatOffset:function(e,t,n,o){if(o===b())return e(t,n);if("UTC"===o)return`${e(v(t,"UTC").date,n)} UTC`;if(w(),i.zonesLoaded){const i=v(t,o);return`${e(i.date,n)} ${i.abbr}`}return e(t,n)},getLocaleDateFormatInfo:function(e){const t={},n=new Date(2017,11,21).toLocaleDateString(e);return t.dayFirst=n.slice(0,2)===21..toString(),t},convertFormatToFlatpickr:function(e){return e.replace(/Z/g,"").replace(/y/g,"Y").replace("YYYY","Y").replace("YY","y").replace("MMMM","F").replace(/M/g,"n").replace("nnn","M").replace("nn","m").replace(/d/g,"j").replace(/jj/g,"d").replace("EEEE","l").replace("EEE","D").replace("HH","H").replace("hh","G").replace("mm","i").replace("ss","S").replace(/a/g,"K")},convertFormatToMoment:x,convertFormatToMask:function(e){return e.replace(/M{4}/g,"MM").replace(/M{3}/g,"***").replace(/e/g,"Q").replace(/[ydhmsHMG]/g,"9").replace(/a/g,"AA")},getInputMask:function(e){if(e instanceof Array)return e;const t=[];t.numeric=!0;for(let n=0;n<e.length;n++)switch(e[n]){case"9":t.push(/\d/);break;case"A":t.numeric=!1,t.push(/[a-zA-Z]/);break;case"a":t.numeric=!1,t.push(/[a-z]/);break;case"*":t.numeric=!1,t.push(/[a-zA-Z0-9]/);break;default:t.numeric=!1,t.push(e[n])}return t},matchInputMask:function(t,n){if(!n)return!0;if(t.length>n.length)return!1;for(let i=0;i<n.length;i++){const o=t[i],s=n[i];if(!(e.isRegExp(s)&&s.test(o)||s===o))return!1}return!0},getNumberSeparators:function(e="en"){const t=12345.6789.toLocaleString(e).match(/..(.)...(.)../);if(!t)return{delimiter:",",decimalSeparator:"."};return{delimiter:t.length>1?t[1]:",",decimalSeparator:t.length>2?t[2]:"."}},getNumberDecimalLimit:function(t,n){if(e.has(t,"decimalLimit"))return e.get(t,"decimalLimit");let i=n||20;const o=e.get(t,"validate.step","any");if("any"!==o){const e=o.toString().split(".");e.length>1&&(i=e[1].length)}return i},getCurrencyAffixes:function({currency:e="USD",decimalLimit:t,decimalSeparator:n,lang:i}){let o="(.*)?100";t&&(o+=`${"."===n?"\\.":n}0{${t}}`);o+="(.*)?";const s=100..toLocaleString(i,{style:"currency",currency:e,useGrouping:!0,maximumFractionDigits:t,minimumFractionDigits:t}).replace(".",n).match(new RegExp(o));return{prefix:s[1]||"",suffix:s[2]||""}},fieldData:function(e,t){if(!e)return"";if(!t||!t.key)return e;if(t.key.includes(".")){let n=e;const i=t.key.split(".");let o="";for(let e=0;e<i.length;e++){if(o=i[e],n.hasOwnProperty("_id")&&(n=n.data),!n.hasOwnProperty(o))return;o===i[i.length-1]&&t.multiple&&!Array.isArray(n[o])&&(n[o]=[n[o]]),n=n[o]}return n}return t.multiple&&!Array.isArray(e[t.key])&&(e[t.key]=[e[t.key]]),e[t.key]},delay:function(e,t=0,...n){const i=setTimeout(e,t,...n);function o(){clearTimeout(i)}function s(){return o(),e(...n)}return s.timer=i,s.cancel=o,s},iterateKey:C,uniqueKey:function(e,t){let n=t;for(;e.hasOwnProperty(n);)n=C(n);return n},bootstrapVersion:function(e){if(e.bootstrap)return e.bootstrap;if("function"==typeof $&&"function"==typeof $().collapse)return parseInt($.fn.collapse.Constructor.VERSION.split(".")[0],10);return 0},unfold:S,firstNonNil:E,withSwitch:function(e,t){let n=e,i=t;return[function(){return n},function(){const e=n;n=i,i=e}]},observeOverload:function(e,t={}){const{limit:n=50,delay:i=500}=t;let o=0,s=0;const r=()=>o=0;return()=>{if(0!==s&&(clearTimeout(s),s=0),s=setTimeout(r,i),(o+=1)>=n)return clearTimeout(s),r(),e()}},getContextComponents:function(e){const t=[];return e.utils.eachComponent(e.instance.options.editForm.components,(n,i)=>{n.key!==e.data.key&&t.push({label:`${n.label||n.key} (${i})`,value:n.key})}),t},sanitize:function(e,t){const n={ADD_ATTR:["ref","target"],USE_PROFILES:{html:!0}};t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.addAttr)&&t.sanitizeConfig.addAttr.length>0&&t.sanitizeConfig.addAttr.forEach(e=>{n.ADD_ATTR.push(e)});t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.addTags)&&t.sanitizeConfig.addTags.length>0&&(n.ADD_TAGS=t.sanitizeConfig.addTags);t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.allowedTags)&&t.sanitizeConfig.allowedTags.length>0&&(n.ALLOWED_TAGS=t.sanitizeConfig.allowedTags);t.sanitizeConfig&&Array.isArray(t.sanitizeConfig.allowedAttrs)&&t.sanitizeConfig.allowedAttrs.length>0&&(n.ALLOWED_ATTR=t.sanitizeConfig.allowedAttrs);t.sanitizeConfig&&t.sanitizeConfig.allowedUriRegex&&(n.ALLOWED_URI_REGEXP=t.sanitizeConfig.allowedUriRegex);return a.sanitize(e,n)},fastCloneDeep:function(e){return e?JSON.parse(JSON.stringify(e)):e},Evaluator:c,interpolate:d,isInputComponent:function(e){if(!1===e.input||!0===e.input)return e.input;switch(e.type){case"htmlelement":case"content":case"columns":case"fieldset":case"panel":case"table":case"tabs":case"well":case"button":return!1;default:return!0}},isLayoutComponent:l.isLayoutComponent,eachComponent:l.eachComponent,matchComponent:l.matchComponent,getComponent:l.getComponent,searchComponents:l.searchComponents,findComponents:l.findComponents,findComponent:l.findComponent,removeComponent:l.removeComponent,generateFormChange:l.generateFormChange,applyFormChanges:l.applyFormChanges,flattenComponents:l.flattenComponents,hasCondition:l.hasCondition,parseFloatExt:l.parseFloatExt,formatAsCurrency:l.formatAsCurrency,escapeRegExCharacters:l.escapeRegExCharacters,getValue:l.getValue,getStrings:l.getStrings}}),e("skylark-formio/EventEmitter",["./vendors/eventemitter2/EventEmitter2","./utils/utils"],function(e,t){"use strict";return class extends e{constructor(e={}){const{loadLimit:n=50,eventsSafeInterval:i=300,pause:o=500,...s}=e;super(s);const[r,a]=t.withSwitch(!1,!0),l=t.observeOverload(()=>{console.warn("Infinite loop detected",this.id,o),a(),setTimeout(a,o)},{limit:n,delay:i});this.emit=((...e)=>{r()||(super.emit(...e),l())})}}}),e("skylark-formio/vendors/browser-cookies/cookies",[],function(){var exports={set:function(e,t,n){var i=n||{},o=exports.defaults,s=i.expires||o.expires,r=i.domain||o.domain,a=void 0!==i.path?i.path:void 0!==o.path?o.path:"/",l=void 0!==i.secure?i.secure:o.secure,c=void 0!==i.httponly?i.httponly:o.httponly,d=void 0!==i.samesite?i.samesite:o.samesite,u=s?new Date("number"==typeof s?(new Date).getTime()+864e5*s:s):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(u&&u.getTime()>=0?";expires="+u.toUTCString():"")+(r?";domain="+r:"")+(a?";path="+a:"")+(l?";secure":"")+(c?";httponly":"")+(d?";samesite="+d:"")},get:function(e){for(var t=document.cookie.split(";");t.length;){var n=t.pop(),i=n.indexOf("=");i=i<0?n.length:i;var o=decodeURIComponent(n.slice(0,i).replace(/^\s+/,""));if(o===e)return decodeURIComponent(n.slice(i+1))}return null},erase:function(e,t){exports.set(e,"",{expires:-1,domain:t&&t.domain,path:t&&t.path,secure:0,httponly:0})},all:function(){for(var e={},t=document.cookie.split(";");t.length;){var n=t.pop(),i=n.indexOf("=");i=i<0?n.length:i;var o=decodeURIComponent(n.slice(0,i).replace(/^\s+/,""));e[o]=decodeURIComponent(n.slice(i+1))}return e}};return exports}),e("skylark-formio/providers/address/AddressProvider",["skylark-lodash","../../Formio"],function(e,t){"use strict";return{AddressProvider:class{static get name(){return"address"}static get displayName(){return"Address"}constructor(t={}){this.options=e.merge({},this.defaultOptions,t)}get defaultOptions(){return{}}get queryProperty(){return"query"}get responseProperty(){return null}get displayValueProperty(){return null}serialize(t){return e.toPairs(t).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")}getRequestOptions(t={}){return e.merge({},this.options,t)}getRequestUrl(e={}){throw new Error("Method AddressProvider#getRequestUrl(options) is abstract.")}makeRequest(e={}){return t.makeStaticRequest(this.getRequestUrl(e),"GET",null,{noToken:!0})}search(t,n={}){const i=this.getRequestOptions(n),o=i.params=i.params||{};return o[this.queryProperty]=t,this.makeRequest(i).then(t=>this.responseProperty?e.get(t,this.responseProperty,[]):t)}getDisplayValue(t){return this.displayValueProperty?e.get(t,this.displayValueProperty,""):String(t)}}}}),e("skylark-formio/providers/address/AzureAddressProvider",["./AddressProvider"],function(e){"use strict";return{AzureAddressProvider:class extends e.AddressProvider{static get name(){return"azure"}static get displayName(){return"Azure Maps"}get defaultOptions(){return{params:{"api-version":"1.0",typeahead:"true"}}}get responseProperty(){return"results"}get displayValueProperty(){return"address.freeformAddress"}getRequestUrl(e={}){const{params:t}=e;return`https://atlas.microsoft.com/search/address/json?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/CustomAddressProvider",["./AddressProvider"],function(e){"use strict";return{CustomAddressProvider:class extends e.AddressProvider{static get name(){return"custom"}static get displayName(){return"Custom"}get queryProperty(){return this.options.queryProperty||super.queryProperty}get responseProperty(){return this.options.responseProperty||super.responseProperty}get displayValueProperty(){return this.options.displayValueProperty||super.displayValueProperty}getRequestUrl(e={}){const{params:t,url:n}=e;return`${n}?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/GoogleAddressProvider",["./AddressProvider"],function(e){"use strict";return{GoogleAddressProvider:class extends e.AddressProvider{static get name(){return"google"}static get displayName(){return"Google Maps"}get defaultOptions(){return{params:{sensor:"false"}}}get queryProperty(){return"address"}get responseProperty(){return"results"}get displayValueProperty(){return"formatted_address"}makeRequest(e={}){return new Promise((t,n)=>{var i=new XMLHttpRequest;i.responseType="json",i.open("GET",this.getRequestUrl(e),!0),i.onload=(()=>t(i.response)),i.onerror=n,i.send()})}getRequestUrl(e={}){const{params:t}=e;return`https://maps.googleapis.com/maps/api/geocode/json?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/NominatimAddressProvider",["./AddressProvider"],function(e){"use strict";return{NominatimAddressProvider:class extends e.AddressProvider{static get name(){return"nominatim"}static get displayName(){return"OpenStreetMap Nominatim"}get defaultOptions(){return{params:{addressdetails:"1",format:"json"}}}get queryProperty(){return"q"}get displayValueProperty(){return"display_name"}getRequestUrl(e={}){const{params:t}=e;return`https://nominatim.openstreetmap.org/search?${this.serialize(t)}`}}}}),e("skylark-formio/providers/address/index",["./AzureAddressProvider","./CustomAddressProvider","./GoogleAddressProvider","./NominatimAddressProvider"],function(e,t,n,i){"use strict";return{[e.AzureAddressProvider.name]:e.AzureAddressProvider,[t.CustomAddressProvider.name]:t.CustomAddressProvider,[n.GoogleAddressProvider.name]:n.GoogleAddressProvider,[i.NominatimAddressProvider.name]:i.NominatimAddressProvider}}),e("skylark-formio/providers/auth/index",[],function(){"use strict";return{}}),e("skylark-formio/providers/storage/base64",["../../vendors/getify/npo"],function(e){"use strict";const t=()=>({title:"Base64",name:"base64",uploadFile(t,n){const i=new FileReader;return new e((e,o)=>{i.onload=(i=>{const o=i.target.result;e({storage:"base64",name:n,url:o,size:t.size,type:t.type})}),i.onerror=(()=>o(this)),i.readAsDataURL(t)})},downloadFile:t=>e.resolve(t)});return t.title="Base64",t}),e("skylark-formio/providers/storage/dropbox",["../../vendors/getify/npo"],function(e){"use strict";const t=t=>({uploadFile:(n,i,o,s)=>new e((e,r)=>{const a=new XMLHttpRequest;"function"==typeof s&&(a.upload.onprogress=s);const l=new FormData;l.append("name",i),l.append("dir",o),l.append("file",n),a.onerror=(e=>{e.networkError=!0,r(e)}),a.onload=(()=>{if(a.status>=200&&a.status<300){const t=JSON.parse(a.response);t.storage="dropbox",t.size=n.size,t.type=n.type,t.url=t.path_lower,e(t)}else r(a.response||"Unable to upload file")}),a.onabort=r,a.open("POST",`${t.formUrl}/storage/dropbox`);const c=t.getToken();c&&a.setRequestHeader("x-jwt-token",c),a.send(l)}),downloadFile(n){const i=t.getToken();return n.url=`${t.formUrl}/storage/dropbox?path_lower=${n.path_lower}${i?`&x-jwt-token=${i}`:""}`,e.resolve(n)}});return t.title="Dropbox",t}),e("skylark-formio/providers/storage/xhr",["../../vendors/getify/npo","skylark-lodash"],function(e,t){"use strict";t.trim;const n={trim:e=>_trim(e,"/"),path:e=>e.filter(e=>!!e).map(n.trim).join("/"),upload:(t,i,o,s,r,a,l)=>new e((e,c)=>{const d=new XMLHttpRequest;d.onerror=(e=>{e.networkError=!0,c(e)}),d.onabort=c,d.onload=(()=>{if(d.status>=200&&d.status<300){const t=JSON.parse(d.response),n=new XMLHttpRequest;"function"==typeof l&&(n.upload.onprogress=l),n.onerror=(e=>{e.networkError=!0,c(e)}),n.onabort=(e=>{e.networkError=!0,c(e)}),n.onload=(()=>{n.status>=200&&n.status<300?e(t):c(n.response||"Unable to upload file")}),n.onabort=c,n.send(o(n,t))}else c(d.response||"Unable to sign file")}),d.open("POST",`${t.formUrl}/storage/${i}`),d.setRequestHeader("Accept","application/json"),d.setRequestHeader("Content-Type","application/json; charset=UTF-8");const u=t.getToken();u&&d.setRequestHeader("x-jwt-token",u),d.send(JSON.stringify({name:n.path([a,r]),size:s.size,type:s.type}))})};return n}),e("skylark-formio/providers/storage/s3",["../../vendors/getify/npo","./xhr"],function(e,t){"use strict";const n=n=>({uploadFile:(e,i,o,s)=>t.upload(n,"s3",(n,s)=>{if(s.data.fileName=i,s.data.key=t.path([s.data.key,o,i]),s.signed)return n.open("PUT",s.signed),n.setRequestHeader("Content-Type",e.type),e;{const t=new FormData;for(const e in s.data)t.append(e,s.data[e]);return t.append("file",e),n.open("POST",s.url),t}},e,i,o,s).then(n=>({storage:"s3",name:i,bucket:n.bucket,key:n.data.key,url:t.path([n.url,n.data.key]),acl:n.data.acl,size:e.size,type:e.type})),downloadFile:i=>"public-read"!==i.acl?n.makeRequest("file",`${n.formUrl}/storage/s3?bucket=${t.trim(i.bucket)}&key=${t.trim(i.key)}`,"GET"):e.resolve(i)});return n.title="S3",n}),e("skylark-formio/providers/storage/azure",["./xhr"],function(e){"use strict";const t=t=>({uploadFile:(n,i,o,s)=>e.upload(t,"azure",(e,t)=>(e.open("PUT",t.url),e.setRequestHeader("Content-Type",n.type),e.setRequestHeader("x-ms-blob-type","BlockBlob"),n),n,i,o,s).then(()=>({storage:"azure",name:e.path([o,i]),size:n.size,type:n.type})),downloadFile:n=>t.makeRequest("file",`${t.formUrl}/storage/azure?name=${e.trim(n.name)}`,"GET")});return t.title="Azure File Services",t}),e("skylark-formio/providers/storage/url",["../../vendors/getify/npo"],function(e){"use strict";const t=t=>{const n=(n,i,o,s,r,a)=>new e((e,l)=>{const c=new XMLHttpRequest,d="string"==typeof s,u=new FormData;if("function"==typeof a&&(c.upload.onprogress=a),!d)for(const e in s)u.append(e,s[e]);c.onload=(()=>{if(c.status>=200&&c.status<300){let t={};try{t=(t="string"==typeof c.response?JSON.parse(c.response):{})&&t.data?t.data:t}catch(e){t={}}let o=t.hasOwnProperty("url")?t.url:`${c.responseURL}/${i}`;o&&"/"===o[0]&&(o=`${n}${o}`),e({url:o,data:t})}else l(c.response||"Unable to upload file")}),c.onerror=(()=>l(c)),c.onabort=(()=>l(c));let h=n+(n.indexOf("?")>-1?"&":"?");for(const e in o)h+=`${e}=${o[e]}&`;"&"===h[h.length-1]&&(h=h.substr(0,h.length-1)),c.open("POST",h),d&&c.setRequestHeader("Content-Type","application/json");const p=t.getToken();if(p&&c.setRequestHeader("x-jwt-token",p),r){const e="string"==typeof r?JSON.parse(r):r;for(const t in e)c[t]=e[t]}c.send(d?s:u)});return{title:"Url",name:"url",uploadFile(e,i,o,s,r,a,l){const c=function(c){return n(r,i,{baseUrl:encodeURIComponent(t.projectUrl),project:c?c.project:"",form:c?c._id:""},{[l]:e,name:i,dir:o},a,s).then(n=>(n.data=n.data||{},n.data.baseUrl=t.projectUrl,n.data.project=c?c.project:"",n.data.form=c?c._id:"",{storage:"url",name:i,url:n.url,size:e.size,type:e.type,data:n.data}))};return e.private&&t.formId?t.loadForm().then(e=>c(e)):c()},deleteFile:t=>new e((e,n)=>{const i=new XMLHttpRequest;i.open("DELETE",t.url,!0),i.onload=(()=>{i.status>=200&&i.status<300?e("File deleted"):n(i.response||"Unable to delete file")}),i.send(null)}),downloadFile:i=>i.private?(t.submissionId&&i.data&&(i.data.submission=t.submissionId),n(i.url,i.name,{},JSON.stringify(i)).then(e=>e.data)):e.resolve(i)}};return t.title="Url",t}),e("skylark-formio/vendors/uuid/rng",[],function(){var e,t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e=function(){return t(n),n}}else{var i=new Array(16);e=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}return e}),e("skylark-formio/vendors/uuid/bytesToUuid",[],function(){for(var e=[],t=0;t<256;++t)e[t]=(t+256).toString(16).substr(1);return function(t,n){var i=n||0,o=e;return[o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]]].join("")}}),e("skylark-formio/vendors/uuid/v4",["./rng","./bytesToUuid"],function(e,t){return function(n,i,o){var s=i&&o||0;"string"==typeof n&&(i="binary"===n?new Array(16):null,n=null);var r=(n=n||{}).random||(n.rng||e)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var a=0;a<16;++a)i[s+a]=r[a];return i||t(r)}}),e("skylark-formio/providers/storage/indexeddb",["../../vendors/uuid/v4","../../vendors/getify/npo"],function(e,t){"use strict";const n=()=>({title:"indexedDB",name:"indexeddb",uploadFile(n,i,o,s,r,a){if("indexedDB"in window)return new t(e=>{const t=indexedDB.open(a.indexeddb,3);t.onsuccess=function(t){const n=t.target.result;e(n)},t.onupgradeneeded=function(e){const t=e.target.result;t.createObjectStore(a.indexeddbTable)}}).then(i=>{const o=new FileReader;return new t((t,s)=>{o.onload=(()=>{const o=new Blob([n],{type:n.type}),s=e(o),l={id:s,data:o,name:n.name,size:n.size,type:n.type,url:r},c=i.transaction([a.indexeddbTable],"readwrite"),d=c.objectStore(a.indexeddbTable).put(l,s);d.onerror=function(e){console.log("error storing data"),console.error(e)},c.oncomplete=function(){t({storage:"indexeddb",name:n.name,size:n.size,type:n.type,url:r,id:s})}}),o.onerror=(()=>s(this)),o.readAsDataURL(n)})});console.log("This browser doesn't support IndexedDB")},downloadFile(e,n){return new t(e=>{const t=indexedDB.open(n.indexeddb,3);t.onsuccess=function(t){const n=t.target.result;e(n)}}).then(i=>new t((t,o)=>{const s=i.transaction([n.indexeddbTable],"readonly"),r=s.objectStore(n.indexeddbTable).get(e.id);r.onsuccess=(()=>{s.oncomplete=(()=>{const n=r.result,i=new File([r.result.data],e.name,{type:r.result.type}),s=new FileReader;s.onload=(e=>{n.url=e.target.result,t(n)}),s.onerror=(()=>o(this)),s.readAsDataURL(i)})}),r.onerror=(()=>o(this))}))}});return n.title="IndexedDB",n}),e("skylark-formio/providers/storage/index",["./base64","./dropbox","./s3","./azure","./url","./indexeddb"],function(e,t,n,i,o,s){"use strict";return{base64:e,dropbox:t,s3:n,url:o,azure:i,indexeddb:s}}),e("skylark-formio/providers/Providers",["skylark-lodash","./address/index","./auth/index","./storage/index"],function(e,t,n,i){"use strict";return class{static addProvider(e,t,n){Providers.providers[e]=Providers.providers[e]||{},Providers.providers[e][t]=n}static addProviders(t,n){Providers.providers[t]=e.merge(Providers.providers[t],n)}static getProvider(e,t){if(Providers.providers[e]&&Providers.providers[e][t])return Providers.providers[e][t]}static getProviders(e){if(Providers.providers[e])return Providers.providers[e]}}}),e("skylark-formio/providers/index",["./Providers"],function(e){"use strict";return e}),e("skylark-formio/vendors/jwt-decode/atob",[],function(){return window.atob}),e("skylark-formio/vendors/jwt-decode/base64_url_decode",["./atob"],function(e){return function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(e(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(n)}catch(t){return e(n)}}}),e("skylark-formio/vendors/jwt-decode/decode",["./base64_url_decode"],function(e){"use strict";function t(e){this.message=e}return t.prototype=new Error,t.prototype.name="InvalidTokenError",function(n,i){if("string"!=typeof n)throw new t("Invalid token specified");var o=!0===(i=i||{}).header?0:1;try{return JSON.parse(e(n.split(".")[o]))}catch(e){throw new t("Invalid token specified: "+e.message)}}}),e("skylark-formio/polyfills/custom-event-polyfill",[],function(){try{var e=new window.CustomEvent("test");if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}),e("skylark-formio/polyfills/ElementPolyfill",[],function(){"undefined"!=typeof window&&void 0!==window.document&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})),function(e,t){var n,i,o;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(e){return!1}}()||(n=Object.defineProperty,i=Object.prototype.hasOwnProperty.call(Object.prototype,"__defineGetter__"),o="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(e,t,s){if(n&&(e===window||e===document||e===Element.prototype||e instanceof Element))return n(e,t,s);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object.defineProperty called on non-object");if(!(s instanceof Object))throw new TypeError("Property description must be an object");var r=String(t),a="value"in s||"writable"in s,l="get"in s&&typeof s.get,c="set"in s&&typeof s.set;if(l){if("function"!==l)throw new TypeError("Getter must be a function");if(!i)throw new TypeError("Getters & setters cannot be defined on this javascript engine");if(a)throw new TypeError(o);Object.__defineGetter__.call(e,r,s.get)}else e[r]=s.value;if(c){if("function"!==c)throw new TypeError("Setter must be a function");if(!i)throw new TypeError("Getters & setters cannot be defined on this javascript engine");if(a)throw new TypeError(o);Object.__defineSetter__.call(e,r,s.set)}return"value"in s&&(e[r]=s.value),e});var s,r=function(){var e=!0,t=function(t,n,i,o){Object.defineProperty?Object.defineProperty(t,n,{configurable:!1===e||!!o,get:i}):t.__defineGetter__(n,i)};try{t({},"support")}catch(t){e=!1}return function(e,n){var i=this,o=[],s={},r=0,a=0,l=function(e){t(i,e,function(){return d(),o[e]},!1)},c=function(){if(r>=a)for(;a<r;++a)l(a)},d=function(){var t,i,a=arguments,l=/\s+/;if(a.length)for(i=0;i<a.length;++i)if(l.test(a[i]))throw(t=new SyntaxError('String "'+a[i]+'" contains an invalid character')).code=5,t.name="InvalidCharacterError",t;for(""===(o="object"==typeof e[n]?(""+e[n].baseVal).replace(/^\s+|\s+$/g,"").split(l):(""+e[n]).replace(/^\s+|\s+$/g,"").split(l))[0]&&(o=[]),s={},i=0;i<o.length;++i)s[o[i]]=!0;r=o.length,c()};return d(),t(i,"length",function(){return d(),r}),i.toLocaleString=i.toString=function(){return d(),o.join(" ")},i.item=function(e){return d(),o[e]},i.contains=function(e){return d(),!!s[e]},i.add=function(){d.apply(i,t=arguments);for(var t,a,l=0,u=t.length;l<u;++l)a=t[l],s[a]||(o.push(a),s[a]=!0);r!==o.length&&(r=o.length>>>0,"object"==typeof e[n]?e[n].baseVal=o.join(" "):e[n]=o.join(" "),c())},i.remove=function(){d.apply(i,t=arguments);for(var t,a={},l=0,u=[];l<t.length;++l)a[t[l]]=!0,delete s[t[l]];for(l=0;l<o.length;++l)a[o[l]]||u.push(o[l]);o=u,r=u.length>>>0,"object"==typeof e[n]?e[n].baseVal=o.join(" "):e[n]=o.join(" "),c()},i.toggle=function(e,t){return d.apply(i,[e]),void 0!==t?t?(i.add(e),!0):(i.remove(e),!1):s[e]?(i.remove(e),!1):(i.add(e),!0)},i}}();"DOMTokenList"in e&&!("classList"in(s=document.createElement("x"))&&(s.classList.toggle("x",!1)||s.className))||function(e){var t,n="DOMTokenList"in e&&e.DOMTokenList;n&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(e.DOMTokenList=r),"classList"in(t=document.createElement("span"))&&(t.classList.toggle("x",!1),t.classList.contains("x")&&(t.classList.constructor.prototype.toggle=function(e){var t=arguments[1];if(void 0===t){var n=!this.contains(e);return this[n?"add":"remove"](e),n}return this[(t=!!t)?"add":"remove"](e),t})),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a","b"),!e.classList.contains("b"))){var t=e.classList.constructor.prototype.add;e.classList.constructor.prototype.add=function(){for(var e=arguments,n=arguments.length,i=0;i<n;i++)t.call(this,e[i])}}}(),function(){var e=document.createElement("span");if("classList"in e&&(e.classList.add("a"),e.classList.add("b"),e.classList.remove("a","b"),e.classList.contains("b"))){var t=e.classList.constructor.prototype.remove;e.classList.constructor.prototype.remove=function(){for(var e=arguments,n=arguments.length,i=0;i<n;i++)t.call(this,e[i])}}}()}(e)}("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{})}),e("skylark-formio/polyfills/index",["./custom-event-polyfill","./ElementPolyfill"],function(){"use strict"}),e("skylark-formio/Formio",["./vendors/getify/npo","./vendors/fetch-ponyfill/fetch","./EventEmitter","./vendors/browser-cookies/cookies","./providers/index","skylark-lodash","./utils/utils","./vendors/jwt-decode/decode","./polyfills/index"],function(e,t,n,i,o,s,r,a){"use strict";const l=s.intersection,c=s.get,d=s.cloneDeep,u=s.defaults,{fetch:h,Headers:p}=t({Promise:e}),m=e=>typeof e==typeof!0,f=e=>null===e||void 0===e,g=e=>e&&"object"==typeof e;function y(e){const t=d(e);return Array.isArray(e)&&(t.skip=e.skip,t.limit=e.limit,t.serverCount=e.serverCount),t}class b{constructor(e,t={}){if(!(this instanceof b))return new b(e);if(this.base="",this.projectsUrl="",this.projectUrl="",this.projectId="",this.roleUrl="",this.rolesUrl="",this.roleId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.vsUrl="",this.vId="",this.vUrl="",this.query="",this.path=e,this.options=t,t.hasOwnProperty("base")?this.base=t.base:b.baseUrl?this.base=b.baseUrl:this.base=window.location.href.match(/http[s]?:\/\/api./)[0],!e)return this.projectUrl=b.projectUrl||`${this.base}/project`,this.projectsUrl=`${this.base}/project`,this.projectId=!1,void(this.query="");t.hasOwnProperty("project")&&(this.projectUrl=t.project);const n=this.projectUrl||b.projectUrl,i=/(^|\/)(project)($|\/[^/]+)/,o=-1!==e.search(i);n&&this.base===n&&!o&&(this.noProject=!0,this.projectUrl=this.base),0!==e.indexOf("http")&&0!==e.indexOf("//")&&(e=this.base+e);const s=this.getUrlParts(e);let r=[];const a=s[1]+s[2],l=(e=s.length>3?s[3]:"").split("?");l.length>1&&(e=l[0],this.query=`?${l[1]}`);const c=(t,n)=>{this[`${t}sUrl`]=`${n}/${t}`;const i=new RegExp(`/${t}/([^/]+)`);return-1!==e.search(i)&&(r=e.match(i),this[`${t}Url`]=r?n+r[0]:"",this[`${t}Id`]=r.length>1?r[1]:"",n+=r[0]),n},d=(e,t,n)=>{for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];if(Array.isArray(o))d(o,t,!0);else{const e=c(o,t);t=n?t:e}}};if(this.projectUrl&&this.projectUrl!==this.base||(this.projectUrl=a),!this.noProject){if(o)d(["project"],a),e=e.replace(i,"");else if(a===this.base){if(s.length>3&&e.split("/").length>1){const t=e.split("/");t.shift(),this.projectId=t.shift(),e=`/${t.join("/")}`,this.projectUrl=`${a}/${this.projectId}`}}else s.length>2&&(s[2].split(".").length>2||a.includes("localhost"))&&(this.projectUrl=a,this.projectId=s[2].split(".")[0]);this.projectsUrl=this.projectsUrl||`${this.base}/project`}if(d(["role"],this.projectUrl),/(^|\/)(form)($|\/)/.test(e))d(["form",["submission","action","v"]],this.projectUrl);else{const t=new RegExp("/(submission|action|v)($|/.*)"),n=e.match(t);this.pathType=n&&n.length>1?n[1]:"",e=(e=e.replace(t,"")).replace(/\/$/,""),this.formsUrl=`${this.projectUrl}/form`,this.formUrl=e?this.projectUrl+e:"",this.formId=e.replace(/^\/+|\/+$/g,"");const i=["submission","action","v"];for(const t in i)if(i.hasOwnProperty(t)){const o=i[t];this[`${o}sUrl`]=`${this.projectUrl+e}/${o}`,this.pathType===o&&n.length>2&&n[2]&&(this[`${o}Id`]=n[2].replace(/^\/+|\/+$/g,""),this[`${o}Url`]=this.projectUrl+e+n[0])}}b.projectUrlSet||(b.projectUrl=this.projectUrl)}delete(t,n){const i=`${t}Id`,o=`${t}Url`;return this[i]||e.reject("Nothing to delete"),b.cache={},this.makeRequest(t,this[o],"delete",null,n)}index(e,t,n){const i=`${e}Url`;return(t=t||"")&&g(t)&&(t=`?${b.serialize(t.params)}`),this.makeRequest(e,this[i]+t,"get",null,n)}save(e,t,n){const i=`${e}Id`,o=`${e}Url`,s=this[i]||t._id?"put":"post";let r=this[i]?this[o]:this[`${e}sUrl`];return this[i]||!t._id||"put"!==s||r.includes(t._id)||(r+=`/${t._id}`),b.cache={},this.makeRequest(e,r+this.query,s,t,n)}load(t,n,i){const o=`${t}Id`,s=`${t}Url`;return n&&g(n)&&(n=b.serialize(n.params)),n=n?this.query?`${this.query}&${n}`:`?${n}`:this.query,this[o]?this.makeRequest(t,this[s]+n,"get",null,i):e.reject(`Missing ${o}`)}makeRequest(...e){return b.makeRequest(this,...e)}loadProject(e,t){return this.load("project",e,t)}saveProject(e,t){return this.save("project",e,t)}deleteProject(e){return this.delete("project",e)}static loadProjects(e,t){return g(e=e||"")&&(e=`?${b.serialize(e.params)}`),b.makeStaticRequest(`${b.baseUrl}/project${e}`,"GET",null,t)}loadRole(e){return this.load("role",null,e)}saveRole(e,t){return this.save("role",e,t)}deleteRole(e){return this.delete("role",e)}loadRoles(e){return this.index("roles",null,e)}loadForm(e,t){return this.load("form",e,t).then(n=>!n.revisions||isNaN(parseInt(this.vId))?n:"current"===n.revisions&&this.submissionId?n:(e&&g(e)&&(e=b.serialize(e.params)),e=e?this.query?`${this.query}&${e}`:`?${e}`:this.query,this.makeRequest("form",this.vUrl+e,"get",null,t).then(e=>(n.components=e.components,n.settings=e.settings,Object.assign({},n))).catch(()=>Object.assign({},n))))}saveForm(e,t){return this.save("form",e,t)}deleteForm(e){return this.delete("form",e)}loadForms(e,t){return this.index("forms",e,t)}loadSubmission(e,t){return this.load("submission",e,t).then(e=>(this.vId=e._fvid,this.vUrl=`${this.formUrl}/v/${this.vId}`,e))}saveSubmission(e,t){return isNaN(parseInt(this.vId))||(e._fvid=this.vId),this.save("submission",e,t)}deleteSubmission(e){return this.delete("submission",e)}loadSubmissions(e,t){return this.index("submissions",e,t)}loadAction(e,t){return this.load("action",e,t)}saveAction(e,t){return this.save("action",e,t)}deleteAction(e){return this.delete("action",e)}loadActions(e,t){return this.index("actions",e,t)}availableActions(){return this.makeRequest("availableActions",`${this.formUrl}/actions`)}actionInfo(e){return this.makeRequest("actionInfo",`${this.formUrl}/actions/${e}`)}isObjectId(e){const t=new RegExp("^[0-9a-fA-F]{24}$");return t.test(e)}getProjectId(){return this.projectId?this.isObjectId(this.projectId)?e.resolve(this.projectId):this.loadProject().then(e=>e._id):e.resolve("")}getFormId(){return this.formId?this.isObjectId(this.formId)?e.resolve(this.formId):this.loadForm().then(e=>e._id):e.resolve("")}currentUser(e){return b.currentUser(this,e)}accessInfo(){return b.accessInfo(this)}getToken(e){return b.getToken(Object.assign({formio:this},this.options,e))}setToken(e,t){return b.setToken(e,Object.assign({formio:this},this.options,t))}getTempToken(t,n,i){const o=b.getToken(i);if(!o)return e.reject("You must be authenticated to generate a temporary auth token.");const s=b.authUrl||this.projectUrl;return this.makeRequest("tempToken",`${s}/token`,"GET",null,{ignoreCache:!0,header:new p({"x-expire":t,"x-allow":n})})}getDownloadUrl(t){if(!this.submissionId)return e.resolve("");if(!t)return this.loadForm().then(e=>e?this.getDownloadUrl(e):"");let n=`/project/${t.project}`;n+=`/form/${t._id}`,n+=`/submission/${this.submissionId}`,n+="/download";let i=this.base+n;return new e((e,t)=>{this.getTempToken(3600,`GET:${n}`).then(t=>{i+=`?token=${t.key}`,e(i)},()=>{e(i)}).catch(t)})}uploadFile(e,t,n,i,s,r,a,l){const c={provider:e,method:"upload",file:t,fileName:n,dir:i};l=l||"file";const d=b.pluginWait("preRequest",c).then(()=>b.pluginGet("fileRequest",c).then(c=>{if(e&&f(c)){const c=o.getProvider("storage",e);if(c){const e=new c(this);return e.uploadFile(t,n,i,s,r,a,l)}throw"Storage provider not found"}return c||{url:""}}));return b.pluginAlter("wrapFileRequestPromise",d,c)}downloadFile(e,t){const n={method:"download",file:e},i=b.pluginWait("preRequest",n).then(()=>b.pluginGet("fileRequest",n).then(n=>{if(e.storage&&f(n)){const n=o.getProvider("storage",e.storage);if(n){const i=new n(this);return i.downloadFile(e,t)}throw"Storage provider not found"}return n||{url:""}}));return b.pluginAlter("wrapFileRequestPromise",i,n)}userPermissions(t,n,i){return e.all([void 0!==n?e.resolve(n):this.loadForm(),void 0!==t?e.resolve(t):this.currentUser(),void 0===i&&this.submissionId?this.loadSubmission():e.resolve(i),this.accessInfo()]).then(e=>{const t=e.shift(),n=e.shift()||{_id:!1,roles:[]},i=e.shift(),o=e.shift(),s={create:"create",read:"read",update:"edit",delete:"delete"},a={user:n,form:t,access:o,create:!1,read:!1,edit:!1,delete:!1};for(const e in o.roles)if(o.roles.hasOwnProperty(e)){const t=o.roles[e];if(t.default&&!1===n._id)n.roles.push(t._id);else if(t.admin&&-1!==n.roles.indexOf(t._id))return a.create=!0,a.read=!0,a.delete=!0,a.edit=!0,a}if(t&&t.submissionAccess)for(let e=0;e<t.submissionAccess.length;e++){const o=t.submissionAccess[e],[r,c]=o.type.split("_");["create","read","update","delete"].includes(r)&&l(o.roles,n.roles).length&&(a[s[r]]="all"===c||!i||n._id===i.owner)}return i&&r.eachComponent(t.components,(e,t)=>{if(e&&e.defaultPermission){const o=c(i.data,t),r=Array.isArray(o)?o:[o];r.forEach(t=>{t&&t._id&&n.roles.indexOf(t._id)>-1&&("read"===e.defaultPermission&&(a[s.read]=!0),"create"===e.defaultPermission&&(a[s.create]=!0,a[s.read]=!0),"write"===e.defaultPermission&&(a[s.create]=!0,a[s.read]=!0,a[s.update]=!0),"admin"===e.defaultPermission&&(a[s.create]=!0,a[s.read]=!0,a[s.update]=!0,a[s.delete]=!0))})}}),a})}canSubmit(){return this.userPermissions().then(e=>!e.create&&b.getUser()?this.userPermissions(null).then(e=>!!e.create&&(b.setUser(null),!0)):e.create)}getUrlParts(e){return b.getUrlParts(e,this)}static getUrlParts(e,t){const n=t&&t.base?t.base:b.baseUrl;let i="^(http[s]?:\\/\\/)";return n&&0===e.indexOf(n)?i+=`(${n.replace(/^http[s]?:\/\//,"")})`:i+="([^/]+)",i+="($|\\/.*)",e.match(new RegExp(i))}static serialize(e,t){const n=[];for(const o in e)e.hasOwnProperty(o)&&n.push(`${encodeURIComponent(o)}=${encodeURIComponent((i=e[o],t?t(i):i))}`);var i;return n.join("&")}static getRequestArgs(e,t,n,i,o,s){i=(i||"GET").toUpperCase(),s&&g(s)||(s={});const r={url:n,method:i,data:o||null,opts:s};return t&&(r.type=t),e&&(r.formio=e),r}static makeStaticRequest(e,t,n,i){const o=b.getRequestArgs(null,"",e,t,n,i),s=b.pluginWait("preRequest",o).then(()=>b.pluginGet("staticRequest",o).then(n=>f(n)?b.request(e,t,o.data,o.opts.header,o.opts):n));return b.pluginAlter("wrapStaticRequestPromise",s,o)}static makeRequest(e,t,n,i,o,s){if(!e)return b.makeStaticRequest(n,i,o,s);const r=b.getRequestArgs(e,t,n,i,o,s);r.opts=r.opts||{},r.opts.formio=e,r.opts.headers||(r.opts.headers={}),r.opts.headers=u(r.opts.headers,{Accept:"application/json","Content-type":"application/json"});const a=b.pluginWait("preRequest",r).then(()=>b.pluginGet("request",r).then(e=>f(e)?b.request(n,i,r.data,r.opts.header,r.opts):e));return b.pluginAlter("wrapRequestPromise",a,r)}static request(t,n,i,o,s){if(!t)return e.reject("No url provided");n=(n||"GET").toUpperCase(),m(s)&&(s={ignoreCache:s}),s&&g(s)||(s={});const r=btoa(t);if(!s.ignoreCache&&"GET"===n&&b.cache.hasOwnProperty(r))return e.resolve(y(b.cache[r]));const a=o||new p(s.headers||{Accept:"application/json","Content-type":"application/json"}),l=b.getToken(s);l&&!s.noToken&&a.append("x-jwt-token",l);const c={};a.forEach(function(e,t){c[t]=e});let d={method:n,headers:c,mode:"cors"};i&&(d.body=JSON.stringify(i)),((d=b.pluginAlter("requestOptions",d,t)).namespace||b.namespace)&&(s.namespace=d.namespace||b.namespace);const u=d.headers["x-jwt-token"],h=b.pluginAlter("wrapFetchRequestPromise",b.fetch(t,d),{url:t,method:n,data:i,opts:s}).then(o=>{if(!(o=b.pluginAlter("requestResponse",o,b,i)).ok)return 440===o.status?(b.setToken(null,s),b.events.emit("formio.sessionExpired",o.body)):401===o.status&&b.events.emit("formio.unauthorized",o.body),(o.headers.get("content-type").includes("application/json")?o.json():o.text()).then(t=>e.reject(t));const r=o.headers.get("x-jwt-token");let a=!1;if("GET"!==n||u||!r||s.external||t.includes("token=")||t.includes("x-jwt-token=")||(console.warn("Token was introduced in request."),a=!0),o.status>=200&&o.status<300&&r&&""!==r&&!a&&b.setToken(r,s),204===o.status)return{};const l=o.headers.get("content-type").includes("application/json")?o.json():o.text();return l.then(e=>{let t=o.headers.get("content-range");if(t&&g(e)){if("*"!==(t=t.split("/"))[0]){const n=t[0].split("-");e.skip=Number(n[0]),e.limit=n[1]-n[0]+1}e.serverCount="*"===t[1]?t[1]:Number(t[1])}if(!s.getHeaders)return e;const n={};return o.headers.forEach((e,t)=>{n[t]=e}),{result:e,headers:n}})}).then(e=>s.getHeaders?e:("GET"===n&&(b.cache[r]=e),y(e))).catch(t=>("Bad Token"===t&&(b.setToken(null,s),b.events.emit("formio.badToken",t)),t.message&&(t.message=`Could not connect to API server (${t.message})`,t.networkError=!0),"GET"===n&&delete b.cache[r],e.reject(t)));return h}static get token(){return b.tokens||(b.tokens={}),b.tokens.formioToken?b.tokens.formioToken:""}static set token(e){return b.tokens||(b.tokens={}),b.tokens.formioToken=e||""}static setToken(e="",t){e=e||"";var n=`${(t="string"==typeof t?{namespace:t}:t||{}).namespace||b.namespace||"formio"}Token`;if(b.tokens||(b.tokens={}),!b.tokens[n]||b.tokens[n]!==e){if(b.tokens[n]=e,!e){t.fromUser||(t.fromToken=!0,b.setUser(null,t));try{return localStorage.removeItem(n)}catch(e){return i.erase(n,{path:"/"})}}try{localStorage.setItem(n,e)}catch(t){i.set(n,e,{path:"/"})}return b.currentUser(t.formio,t)}}static getToken(e){const t=`${(e="string"==typeof e?{namespace:e}:e||{}).namespace||b.namespace||"formio"}Token`,n=e.decode?`${t}Decoded`:t;if(b.tokens||(b.tokens={}),b.tokens[n])return b.tokens[n];try{return b.tokens[t]=localStorage.getItem(t)||"",e.decode?(b.tokens[n]=b.tokens[t]?a(b.tokens[t]):{},b.tokens[n]):b.tokens[t]}catch(e){return b.tokens[t]=i.get(t),b.tokens[t]}}static setUser(e,t={}){var n=`${t.namespace||b.namespace||"formio"}User`;if(!e){t.fromToken||(t.fromUser=!0,b.setToken(null,t)),b.events.emit("formio.user",null);try{return localStorage.removeItem(n)}catch(e){return i.erase(n,{path:"/"})}}try{localStorage.setItem(n,JSON.stringify(e))}catch(t){i.set(n,JSON.stringify(e),{path:"/"})}b.events.emit("formio.user",e)}static getUser(e){var t=`${(e=e||{}).namespace||b.namespace||"formio"}User`;try{return JSON.parse(localStorage.getItem(t)||null)}catch(e){return JSON.parse(i.get(t))}}static setBaseUrl(e){b.baseUrl=e,b.projectUrlSet||(b.projectUrl=e)}static getBaseUrl(){return b.baseUrl}static setApiUrl(e){return b.setBaseUrl(e)}static getApiUrl(){return b.getBaseUrl()}static setAppUrl(e){console.warn("Formio.setAppUrl() is deprecated. Use Formio.setProjectUrl instead."),b.projectUrl=e,b.projectUrlSet=!0}static setProjectUrl(e){b.projectUrl=e,b.projectUrlSet=!0}static setAuthUrl(e){b.authUrl=e}static getAppUrl(){return console.warn("Formio.getAppUrl() is deprecated. Use Formio.getProjectUrl instead."),b.projectUrl}static getProjectUrl(){return b.projectUrl}static clearCache(){b.cache={}}static noop(){}static identity(e){return e}static deregisterPlugin(e){const t=b.plugins.length;return b.plugins=b.plugins.filter(t=>t!==e&&t.__name!==e||((t.deregister||b.noop).call(e,b),!1)),t!==b.plugins.length}static registerPlugin(e,t){b.plugins.push(e),b.plugins.sort((e,t)=>(t.priority||0)-(e.priority||0)),e.__name=t,(e.init||b.noop).call(e,b)}static getPlugin(e){for(const t of b.plugins)if(t.__name===e)return t;return null}static pluginWait(t,...n){return e.all(b.plugins.map(e=>(e[t]||b.noop).call(e,...n)))}static pluginGet(t,...n){const i=o=>{const s=b.plugins[o];return s?e.resolve((s[t]||b.noop).call(s,...n)).then(e=>f(e)?i(o+1):e):e.resolve(null)};return i(0)}static pluginAlter(e,t,...n){return b.plugins.reduce((t,i)=>(i[e]||b.identity)(t,...n),t)}static accessInfo(e){const t=e?e.projectUrl:b.projectUrl;return b.makeRequest(e,"accessInfo",`${t}/access`)}static projectRoles(e){const t=e?e.projectUrl:b.projectUrl;return b.makeRequest(e,"projectRoles",`${t}/role`)}static currentUser(t,n){let i=b.authUrl;i||(i=t?t.projectUrl:b.projectUrl||b.baseUrl),i+="/current";const o=b.getUser(n);if(o)return b.pluginAlter("wrapStaticRequestPromise",e.resolve(o),{url:i,method:"GET",options:n});const s=b.getToken(n);return n&&n.external||s?b.makeRequest(t,"currentUser",i,"GET",null,n).then(e=>(b.setUser(e,n),e)):b.pluginAlter("wrapStaticRequestPromise",e.resolve(null),{url:i,method:"GET",options:n})}static logout(e,t){(t=t||{}).formio=e,b.setToken(null,t),b.setUser(null,t),b.clearCache();const n=b.authUrl?b.authUrl:e?e.projectUrl:b.baseUrl;return b.makeRequest(e,"logout",`${n}/logout`)}static pageQuery(){if(b._pageQuery)return b._pageQuery;b._pageQuery={},b._pageQuery.paths=[];const e=location.hash.substr(1).replace(/\?/g,"&").split("&");let t=[];return location.search.substr(1).split("&").forEach(function(e){(t=e.split("=")).length>1&&(b._pageQuery[t[0]]=t[1]&&decodeURIComponent(t[1]))}),e.forEach(function(e){(t=e.split("=")).length>1?b._pageQuery[t[0]]=t[1]&&decodeURIComponent(t[1]):0===e.indexOf("/")&&(b._pageQuery.paths=e.substr(1).split("/"))}),b._pageQuery}static oAuthCurrentUser(e,t){return b.currentUser(e,{external:!0,headers:{Authorization:`Bearer ${t}`}})}static samlInit(e){e=e||{};const t=b.pageQuery();if(t.saml){b.setUser(null);const e=b.setToken(t.saml);let n=window.location.toString();return n=n.substring(0,n.indexOf("?")),window.location.hash&&(n+=window.location.hash),window.history.replaceState({},document.title,n),e}e.relay||(e.relay=window.location.href);const n=b.authUrl||b.projectUrl;return window.location.href=`${n}/saml/sso?relay=${encodeURI(e.relay)}`,!1}static oktaInit(t){if(t=t||{},void 0!==typeof OktaAuth&&(t.OktaAuth=OktaAuth),void 0===typeof t.OktaAuth){const t="Cannot find OktaAuth. Please include the Okta JavaScript SDK within your application. See https://developer.okta.com/code/javascript/okta_auth_sdk for an example.";return console.warn(t),e.reject(t)}return new e((e,n)=>{const i=t.OktaAuth;delete t.OktaAuth;var o=new i(t);o.tokenManager.get("accessToken").then(i=>{i?e(b.oAuthCurrentUser(t.formio,i.accessToken)):location.hash?o.token.parseFromUrl().then(n=>{o.tokenManager.add("accessToken",n),e(b.oAuthCurrentUser(t.formio,n.accessToken))}).catch(e=>{console.warn(e),n(e)}):(o.token.getWithRedirect({responseType:"token",scopes:t.scopes}),e(!1))}).catch(e=>{n(e)})})}static ssoInit(t,n){switch(t){case"saml":return b.samlInit(n);case"okta":return b.oktaInit(n);default:return console.warn("Unknown SSO type"),e.reject("Unknown SSO type")}}static requireLibrary(t,n,i,o){if(!b.libraries.hasOwnProperty(t)){b.libraries[t]={},b.libraries[t].ready=new e((e,n)=>{b.libraries[t].resolve=e,b.libraries[t].reject=n});const s=`${t}Callback`;o||window[s]||(window[s]=(()=>b.libraries[t].resolve()));const r=c(window,n);if(r)b.libraries[t].resolve(r);else if((i=Array.isArray(i)?i:[i]).forEach(e=>{let t={},n="";switch("string"==typeof e&&(e={type:"script",src:e}),e.type){case"script":n="script",t={src:e.src,type:"text/javascript",defer:!0,async:!0,referrerpolicy:"origin"};break;case"styles":n="link",t={href:e.src,rel:"stylesheet"}}const i=document.createElement(n);if(i.setAttribute)for(const e in t)i.setAttribute(e,t[e]);const{head:o}=document;o&&o.appendChild(i)}),o){const e=setInterval(()=>{const i=c(window,n);i&&(clearInterval(e),b.libraries[t].resolve(i))},200)}}return b.libraries[t].ready}static libraryReady(t){return b.libraries.hasOwnProperty(t)&&b.libraries[t].ready?b.libraries[t].ready:e.reject(`${t} library was not required.`)}}return b.libraries={},b.Promise=e,b.fetch=h,b.Headers=p,b.baseUrl="https://api.form.io",b.projectUrl=b.baseUrl,b.authUrl="",b.projectUrlSet=!1,b.plugins=[],b.cache={},b.Providers=o,b.version="---VERSION---",b.events=new n({wildcard:!1,maxListeners:0}),"object"!=typeof global||global.Formio||(global.Formio=b),"object"!=typeof window||window.Formio||(window.Formio=b),b}),e("skylark-formio/vendors/vanilla-text-mask/constants",[],function(){return{placeholderChar:"_",strFunction:"function"}}),e("skylark-formio/vendors/vanilla-text-mask/utilities",["./constants"],function(e){const t=e.placeholderChar,n=[];function i(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}const o="[]";return{convertMaskToPlaceholder:function(e=n,o=t){if(!i(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(o))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+`The placeholder character that was received is: ${JSON.stringify(o)}\n\n`+`The mask that was received is: ${JSON.stringify(e)}`);return e.map(e=>e instanceof RegExp?o:e).join("")},isArray:i,isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e&&void 0===e.length&&!isNaN(e)},isNil:function(e){return void 0===e||null===e},processCaretTraps:function(e){const t=[];let n;for(;-1!==(n=e.indexOf(o));)t.push(n),e.splice(n,1);return{maskWithoutCaretTraps:e,indexes:t}}}}),e("skylark-formio/vendors/vanilla-text-mask/conformToMask",["./utilities","./constants"],function(e,t){const{convertMaskToPlaceholder:n,isArray:i,processCaretTraps:o}=e,{strFunction:s}=t,r=t.placeholderChar,a=[],l="";return function(e=l,t=a,c={}){if(!i(t)){if(typeof t!==s)throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=t(e,c),t=o(t).maskWithoutCaretTraps}const{guide:d=!0,previousConformedValue:u=l,placeholderChar:h=r,placeholder:p=n(t,h),currentCaretPosition:m,keepCharPositions:f}=c,g=!1===d&&void 0!==u,y=e.length,b=u.length,v=p.length,k=t.length,w=y-b,x=w>0,C=m+(x?-w:0),S=C+Math.abs(w);if(!0===f&&!x){let t=l;for(let e=C;e<S;e++)p[e]===h&&(t+=h);e=e.slice(0,C)+t+e.slice(C,y)}const E=e.split(l).map((e,t)=>({char:e,isNew:t>=C&&t<S}));for(let e=y-1;e>=0;e--){const{char:t}=E[e];if(t!==h){const n=e>=C&&b===k;t===p[n?e-w:e]&&E.splice(e,1)}}let A=l,T=!1;e:for(let e=0;e<v;e++){const n=p[e];if(n===h){if(E.length>0)for(;E.length>0;){const{char:n,isNew:i}=E.shift();if(n===h&&!0!==g){A+=h;continue e}if(t[e].test(n)){if(!0===f&&!1!==i&&u!==l&&!1!==d&&x){const t=E.length;let i=null;for(let e=0;e<t;e++){const t=E[e];if(t.char!==h&&!1===t.isNew)break;if(t.char===h){i=e;break}}null!==i?(A+=n,E.splice(i,1)):e--}else A+=n;continue e}T=!0}!1===g&&(A+=p.substr(e,v));break}A+=n}if(g&&!1===x){let e=null;for(let t=0;t<A.length;t++)p[t]===h&&(e=t);A=null!==e?A.substr(0,e+1):l}return{conformedValue:A,meta:{someCharsRejected:T}}}}),e("skylark-formio/vendors/tooltip-js/Tooltip",["skylark-popper"],function(e){var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};const n={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"};var i=function(){this.show=(()=>this._show(this.reference,this.options)),this.hide=(()=>this._hide()),this.dispose=(()=>this._dispose()),this.toggle=(()=>this._isOpen?this.hide():this.show()),this.updateTitleContent=(e=>this._updateTitleContent(e)),this._events=[],this._setTooltipNodeEvent=((e,t,n,i)=>{const o=e.relatedreference||e.toElement||e.relatedTarget,s=n=>{const o=n.relatedreference||n.toElement||n.relatedTarget;this._tooltipNode.removeEventListener(e.type,s),t.contains(o)||this._scheduleHide(t,i.delay,i,n)};return!!this._tooltipNode.contains(o)&&(this._tooltipNode.addEventListener(e.type,s),!0)})};return class{constructor(e,o){i.call(this),o=t({},n,o),e.jquery&&(e=e[0]),this.reference=e,this.options=o;const s="string"==typeof o.trigger?o.trigger.split(" ").filter(e=>-1!==["click","hover","focus"].indexOf(e)):[];this._isOpen=!1,this._popperOptions={},this._setEventListeners(e,s,o)}_create(e,t,n,i){const o=window.document.createElement("div");o.innerHTML=t.trim();const s=o.childNodes[0];s.id=`tooltip_${Math.random().toString(36).substr(2,10)}`,s.setAttribute("aria-hidden","false");const r=o.querySelector(this.options.innerSelector);return this._addTitleContent(e,n,i,r),s}_addTitleContent(e,t,n,i){if(1===t.nodeType||11===t.nodeType)n&&i.appendChild(t);else if((o=t)&&"[object Function]"==={}.toString.call(o)){const o=t.call(e);n?i.innerHTML=o:i.textContent=o}else n?i.innerHTML=t:i.textContent=t;var o}_show(n,i){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this;const o=n.getAttribute("title")||i.title;if(!o)return this;const s=this._create(n,i.template,o,i.html);n.setAttribute("aria-describedby",s.id);const r=this._findContainer(i.container,n);return this._append(s,r),this._popperOptions=t({},i.popperOptions,{placement:i.placement}),this._popperOptions.modifiers=t({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:i.offset}}),i.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={boundariesElement:i.boundariesElement}),this.popperInstance=new e(n,s,this._popperOptions),this._tooltipNode=s,this}_hide(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true"),this):this}_dispose(){return this._events.forEach(({func:e,event:t})=>{this.reference.removeEventListener(t,e)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}_findContainer(e,t){return"string"==typeof e?e=window.document.querySelector(e):!1===e&&(e=t.parentNode),e}_append(e,t){t.appendChild(e)}_setEventListeners(e,t,n){const i=[],o=[];t.forEach(e=>{switch(e){case"hover":i.push("mouseenter"),o.push("mouseleave");break;case"focus":i.push("focus"),o.push("blur");break;case"click":i.push("click"),o.push("click")}}),i.forEach(t=>{const i=t=>{!0!==this._isOpening&&(t.usedByTooltip=!0,this._scheduleShow(e,n.delay,n,t))};this._events.push({event:t,func:i}),e.addEventListener(t,i)}),o.forEach(t=>{const i=t=>{!0!==t.usedByTooltip&&this._scheduleHide(e,n.delay,n,t)};this._events.push({event:t,func:i}),e.addEventListener(t,i),"click"===t&&n.closeOnClickOutside&&document.addEventListener("mousedown",t=>{if(!this._isOpening)return;const n=this.popperInstance.popper;e.contains(t.target)||n.contains(t.target)||i(t)},!0)})}_scheduleShow(e,t,n){this._isOpening=!0;const i=t&&t.show||t||0;this._showTimeout=window.setTimeout(()=>this._show(e,n),i)}_scheduleHide(e,t,n,i){this._isOpening=!1;const o=t&&t.hide||t||0;window.setTimeout(()=>{if(window.clearTimeout(this._showTimeout),!1!==this._isOpen&&document.body.contains(this._tooltipNode)){if("mouseleave"===i.type){const o=this._setTooltipNodeEvent(i,e,t,n);if(o)return}this._hide(e,n)}},o)}_updateTitleContent(e){if(void 0===this._tooltipNode)return void(void 0!==this.options.title&&(this.options.title=e));const t=this._tooltipNode.parentNode.querySelector(this.options.innerSelector);this._clearTitleContent(t,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,e,this.options.html,t),this.options.title=e,this.popperInstance.update()}_clearTitleContent(e,t,n){1===n.nodeType||11===n.nodeType?t&&e.removeChild(n):t?e.innerHTML="":e.textContent=""}}}),e("skylark-formio/vendors/ismobilejs/isMobile",[],function(){var e=/iPhone/i,t=/iPod/i,n=/iPad/i,i=/\biOS-universal(?:.+)Mac\b/i,o=/\bAndroid(?:.+)Mobile\b/i,s=/Android/i,r=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,a=/Silk/i,l=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,u=/BB10/i,h=/Opera Mini/i,p=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,f=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};return function(g){var y={userAgent:"",platform:"",maxTouchPoints:0};g||"undefined"==typeof navigator?"string"==typeof g?y.userAgent=g:g.userAgent&&(y={userAgent:g.userAgent,platform:g.platform,maxTouchPoints:g.maxTouchPoints||0}):y={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var b=y.userAgent,v=b.split("[FBAN");void 0!==v[1]&&(b=v[0]);void 0!==(v=b.split("Twitter"))[1]&&(b=v[0]);var k=function(e){return function(t){return t.test(e)}}(b),w={apple:{phone:k(e)&&!k(l),ipod:k(t),tablet:!k(e)&&(k(n)||f(y))&&!k(l),universal:k(i),device:(k(e)||k(t)||k(n)||k(i)||f(y))&&!k(l)},amazon:{phone:k(r),tablet:!k(r)&&k(a),device:k(r)||k(a)},android:{phone:!k(l)&&k(r)||!k(l)&&k(o),tablet:!k(l)&&!k(r)&&!k(o)&&(k(a)||k(s)),device:!k(l)&&(k(r)||k(a)||k(o)||k(s))||k(/\bokhttp\b/i)},windows:{phone:k(l),tablet:k(c),device:k(l)||k(c)},other:{blackberry:k(d),blackberry10:k(u),opera:k(h),firefox:k(m),chrome:k(p),device:k(d)||k(u)||k(h)||k(m)||k(p)},any:!1,phone:!1,tablet:!1};return w.any=w.apple.device||w.android.device||w.windows.device||w.other.device,w.phone=w.apple.phone||w.android.phone||w.windows.phone,w.tablet=w.apple.tablet||w.android.tablet||w.windows.tablet,w}}),e("skylark-formio/utils/calendarUtils",["skylark-moment","skylark-lodash"],function(e,t){"use strict";const n={INVALID:"You entered the Invalid Date",INCOMPLETE:"You entered an incomplete date.",greater:(e,t)=>`The entered date is greater than ${e.format(t)}`,less:(e,t)=>`The entered date is less than ${e.format(t)}`};function i(e,t){return{message:e,result:t}}function o(t,i,o,s){let r="",a=!0;if(o&&t.isValid()){const s=e(o,i);t>s&&(r=n.greater(s,i),a=!1)}if(s&&t.isValid()){const o=e(s,i);t<o&&(r=n.less(o,i),a=!1)}return{message:r,result:a}}return{CALENDAR_ERROR_MESSAGES:n,lessOrGreater:o,checkInvalidDate:function(s,r,a,l){const c=e(s,r,!0),d=c.isValid();if(!d){const c=s.match(/[^a-z0-9_]/gi),d=new RegExp(c.join("|"),"gi"),u=s.replace(/_*/gi,"").split(d),h=r[1]?r[1].split(d):r[0].split(d),p=t.findIndex(h,(e,t)=>1===e.length&&t===h.length-1),m=t.findIndex(h,e=>e.match(/yyyy/gi));if(u[m]/1e3<1)return i(n.INVALID,!1);if(u[0].length===h[0].length){const t=u.map((e,t)=>{let n=e;return e||t!==p?e||(n="01"):n="AM",c[t]&&(n=`${n}${c[t]}`),n}),s=e(t.join(""),r,!0);if(s.isValid()){const e=o(s,r[0],l,a);if(!e.result){const{message:t,result:n}=e;return i(t,n)}return i(n.INCOMPLETE,!1)}return i(n.INVALID,!1)}return i(n.INVALID,!1)}if(d&&-1===s.indexOf("_")){const e=o(c,r[0],l,a);if(!e.result){const{message:t,result:n}=e;return i(t,n)}}return i("",!0)}}}),e("skylark-formio/validator/rules/Rule",[],function(){"use strict";return class{constructor(e,t,n){this.component=e,this.settings=t,this.config=n}check(){}}}),e("skylark-formio/validator/rules/Custom",["./Rule"],function(e){"use strict";class t extends e{check(e,t,n,i){const o=this.settings.custom;if(!o)return!0;const s=this.component.evaluate(o,{valid:!0,data:t,row:n,rowIndex:i,input:e},"valid",!0);return null===s||s}}return t.prototype.defaultMessage="{{error}}",t}),e("skylark-formio/validator/rules/Date",["./Rule"],function(e){"use strict";class t extends e{check(e){return!e||e instanceof Date||"Invalid date"!==e&&"Invalid Date"!==e&&("string"==typeof e&&(e=new Date(e)),"Invalid Date"!==e.toString())}}return t.prototype.defaultMessage="{{field}} is not a valid date.",t}),e("skylark-formio/validator/rules/Day",["./Rule"],function(e){"use strict";class t extends e{check(e){if(!e)return!0;if("string"!=typeof e)return!1;const[t,n,i]=this.component.dayFirst?[0,1,2]:[1,0,2],o=e.split("/").map(e=>parseInt(e,10)),s=o[t],r=o[n],a=o[i],l=function(e,t){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return function(e){return!(e%400&&(!(e%100)||e%4))}(t)?29:28;default:return 31}}(r,a);return!(isNaN(s)||s<0||s>l)&&(!(isNaN(r)||r<0||r>12)&&!(isNaN(a)||a<0||a>9999))}}return t.prototype.defaultMessage="{{field}} is not a valid day.",t}),e("skylark-formio/validator/rules/Email",["./Rule"],function(e){"use strict";class t extends e{check(e){if(!e)return!0;return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}}return t.prototype.defaultMessage="{{field}} must be a valid email.",t}),e("skylark-formio/validator/rules/JSON",["./Rule"],function(e){"use strict";class t extends e{check(e,t,n,i){const{json:o}=this.settings;if(!o)return!0;const s=this.component.evaluate(o,{data:t,row:n,rowIndex:i,input:e});return null===s||s}}return t.prototype.defaultMessage="{{error}}",t}),e("skylark-formio/validator/rules/Mask",["./Rule","../../utils/utils"],function(e,t){"use strict";class n extends e{check(e){let n;if(this.component.isMultipleMasksField){const i=e?e.maskName:void 0,o=this.component.getMaskByName(i);o&&(n=t.getInputMask(o)),e=e?e.value:e}else n=t.getInputMask(this.settings.mask);return!e||!n||t.matchInputMask(e,n)}}return n.prototype.defaultMessage="{{field}} does not match the mask.",n}),e("skylark-formio/validator/rules/Max",["skylark-lodash","./Rule"],function(e,t){"use strict";class n extends t{check(t){const n=parseFloat(this.settings.limit);return!(!Number.isNaN(n)&&e.isNumber(t))||parseFloat(t)<=n}}return n.prototype.defaultMessage="{{field}} cannot be greater than {{settings.limit}}.",n}),e("skylark-formio/validator/rules/MaxDate",["./Rule","../../utils/utils","skylark-moment","skylark-lodash"],function(e,t,n,i){"use strict";class o extends e{check(e){if(!e)return!0;if(e===this.settings.dateLimit)return!0;const o=n(e),s=t.getDateSetting(this.settings.dateLimit);return!!i.isNull(s)||(s.setHours(0,0,0,0),o.isBefore(s)||o.isSame(s))}}return o.prototype.defaultMessage="{{field}} should not contain date after {{settings.dateLimit}}",o}),e("skylark-formio/validator/rules/MaxLength",["./Rule"],function(e){"use strict";class t extends e{check(e){const t=parseInt(this.settings.length,10);return!(e&&t&&e.hasOwnProperty("length"))||e.length<=t}}return t.prototype.defaultMessage="{{field}} must have no more than {{- settings.length}} characters.",t}),e("skylark-formio/validator/rules/MaxWords",["./Rule"],function(e){"use strict";class t extends e{check(e){const t=parseInt(this.settings.length,10);return!t||"string"!=typeof e||e.trim().split(/\s+/).length<=t}}return t.prototype.defaultMessage="{{field}} must have no more than {{- settings.length}} words.",t}),e("skylark-formio/validator/rules/Min",["skylark-lodash","./Rule"],function(e,t){class n extends t{check(t){const n=parseFloat(this.settings.limit);return!(!Number.isNaN(n)&&e.isNumber(t))||parseFloat(t)>=n}}return n.prototype.defaultMessage="{{field}} cannot be less than {{settings.limit}}.",n}),e("skylark-formio/validator/rules/MinDate",["./Rule","../../utils/utils","skylark-moment","skylark-lodash"],function(e,t,n,i){class o extends e{check(e){if(!e)return!0;const o=n(e),s=t.getDateSetting(this.settings.dateLimit);return!!i.isNull(s)||(s.setHours(0,0,0,0),o.isAfter(s)||o.isSame(s))}}return o.prototype.defaultMessage="{{field}} should not contain date before {{settings.dateLimit}}",o}),e("skylark-formio/validator/rules/MinLength",["./Rule"],function(e){"use strict";class t extends e{check(e){const t=parseInt(this.settings.length,10);return!(t&&e&&e.hasOwnProperty("length")&&!this.component.isEmpty(e))||e.length>=t}}return t.prototype.defaultMessage="{{field}} must have no more than {{- settings.length}} characters.",t}),e("skylark-formio/validator/rules/MinWords",["./Rule"],function(e){"use strict";class t extends e{check(e){const t=parseInt(this.settings.length,10);return!t||!e||"string"!=typeof e||e.trim().split(/\s+/).length>=t}}return t.prototype.defaultMessage="{{field}} must have at least {{- settings.length}} words.",t}),e("skylark-formio/validator/rules/Pattern",["./Rule"],function(e){"use strict";class t extends e{check(e){const{pattern:t}=this.settings;return!t||new RegExp(`^${t}$`).test(e)}}return t.prototype.defaultMessage="{{field}} does not match the pattern {{settings.pattern}}",t}),e("skylark-formio/validator/rules/Required",["./Rule"],function(e){"use strict";class t extends e{check(e){return!this.component.isValueHidden()&&!this.component.isEmpty(e)}}return t.prototype.defaultMessage="{{field}} is required",t}),e("skylark-formio/validator/rules/Select",["./Rule","../../utils/utils","../../vendors/getify/npo","../../vendors/fetch-ponyfill/fetch","skylark-lodash"],function(e,t,n,i,o){const{fetch:s,Headers:r,Request:a}=i({Promise:n});class l extends e{check(e,n,i,l){if(!e||o.isEmpty(e))return!0;if(!l)return!0;const c=this.component.component,d={url:this.settings.url,method:"GET",qs:{},json:!0,headers:{}};if(o.isBoolean(d.url)){if(d.url=!!d.url,!d.url||"url"!==c.dataSrc||!c.data.url||!c.searchField)return!0;d.url=c.data.url,d.qs[c.searchField]=e,c.filter&&(d.url+=(d.url.includes("?")?"&":"?")+c.filter),c.selectFields&&(d.qs.select=c.selectFields)}return!d.url||(d.url=t.interpolate(d.url,{data:this.component.data}),d.url+=(d.url.includes("?")?"&":"?")+o.chain(d.qs).map((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&").value(),c.data&&c.data.headers&&o.each(c.data.headers,e=>{e.key&&(d.headers[e.key]=e.value)}),c.authenticate&&this.config.token&&(d.headers["x-jwt-token"]=this.config.token),s(new a(d.url,{headers:new r(d.headers)})).then(e=>!!e.ok&&e.json()).then(e=>e&&e.length).catch(()=>!1))}}return l.prototype.defaultMessage="{{field}} contains an invalid selection",l}),e("skylark-formio/validator/rules/Unique",["./Rule","../../utils/utils","skylark-lodash","../../vendors/getify/npo"],function(e,t,n,i){class o extends e{check(e){return!(e&&!n.isEmpty(e))||(!this.config.db||new i(i=>{const o=this.config.form,s=this.config.submission,r=`data.${this.component.path}`,a={form:o._id};n.isString(e)?a[r]={$regex:new RegExp(`^${t.escapeRegExCharacters(e)}$`),$options:"i"}:n.isPlainObject(e)&&e.address&&e.address.address_components&&e.address.place_id?a[`${r}.address.place_id`]={$regex:new RegExp(`^${t.escapeRegExCharacters(e.address.place_id)}$`),$options:"i"}:n.isArray(e)?a[r]={$all:e}:n.isObject(e)&&(a[r]={$eq:e}),a.deleted={$eq:null},this.config.db.findOne(a,(e,t)=>i(!e&&(!t||s._id&&t._id.toString()===s._id)))}).catch(()=>!1))}}return o.prototype.defaultMessage="{{field}} must be unique",o}),e("skylark-formio/validator/rules/Url",["./Rule"],function(e){"use strict";class t extends e{check(e){return!e||/(https?:\/\/(?:www\.|(?!www)))?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(e)}}return t.prototype.defaultMessage="{{field}} must be a valid url.",t}),e("skylark-formio/validator/rules/MinYear",["./Rule"],function(e){"use strict";class t extends e{check(e){const t=this.settings;let n=/\d{4}$/.exec(e);return n=n?n[0]:null,!+t||!+n||+n>=+t}}return t.prototype.defaultMessage="{{field}} should not contain year less than {{minYear}}",t}),e("skylark-formio/validator/rules/MaxYear",["./Rule"],function(e){"use strict";class t extends e{check(e){const t=this.settings;let n=/\d{4}$/.exec(e);return n=n?n[0]:null,!+t||!+n||+n<=+t}}return t.prototype.defaultMessage="{{field}} should not contain year greater than {{maxYear}}",t}),e("skylark-formio/validator/rules/index",["./Custom","./Date","./Day","./Email","./JSON","./Mask","./Max","./MaxDate","./MaxLength","./MaxWords","./Min","./MinDate","./MinLength","./MinWords","./Pattern","./Required","./Select","./Unique","./Url","./MinYear","./MaxYear"],function(e,t,n,i,o,s,r,a,l,c,d,u,h,p,m,f,g,y,b,v,k){return{Custom:e,Date:t,Day:n,Email:i,JSON:o,Mask:s,Max:r,MaxDate:a,MaxLength:l,MaxWords:c,Min:d,MinDate:u,MinLength:h,MinWords:p,Pattern:m,Required:f,Select:g,Unique:y,Url:b,MinYear:v,MaxYear:k}}),e("skylark-formio/validator/Rules",["./rules/index"],function(e){"use strict";return class e{static addRule(t,n){e.rules[t]=n}static addRules(t){e.rules={...e.rules,...t}}static getRule(t){return e.rules[t]}static getRules(){return e.rules}}}),e("skylark-formio/validator/Validator",["skylark-lodash","../utils/utils","skylark-moment","../vendors/getify/npo","../vendors/fetch-ponyfill/fetch","../utils/calendarUtils","./Rules"],function(e,t,n,i,o,s,r){"use strict";const{fetch:a,Headers:l,Request:c}=o({Promise:i});class d{constructor(o={}){this.config=e.defaults(o,d.config),this.validators={required:{key:"validate.required",method:"validateRequired",message:e=>e.t(e.errorMessage("required"),{field:e.errorLabel,data:e.data}),check(e,n,i){if(!t.boolValue(n)||e.isValueHidden())return!0;const o=e.validators.some(e=>"calendar"===e);return!i&&o&&e.widget.enteredDate?!this.validators.calendar.check.call(this,e,n,i):!e.isEmpty(i)}},unique:{key:"validate.unique",message:e=>e.t(e.errorMessage("unique"),{field:e.errorLabel,data:e.data}),check(n,o,s){return!t.boolValue(o)||(!(s&&!e.isEmpty(s))||(!this.config.db||new i(i=>{const o=this.config.form,r=this.config.submission,a=`data.${n.path}`,l={form:o._id};e.isString(s)?l[a]={$regex:new RegExp(`^${t.escapeRegExCharacters(s)}$`),$options:"i"}:e.isPlainObject(s)&&s.address&&s.address.address_components&&s.address.place_id?l[`${a}.address.place_id`]={$regex:new RegExp(`^${t.escapeRegExCharacters(s.address.place_id)}$`),$options:"i"}:e.isArray(s)?l[a]={$all:s}:e.isObject(s)&&(l[a]={$eq:s}),l.deleted={$eq:null},this.config.db.findOne(l,(e,t)=>i(!e&&(!t||r._id&&t._id.toString()===r._id)))}).catch(()=>!1)))}},multiple:{key:"validate.multiple",message(e){const n=t.boolValue(e.component.multiple)||Array.isArray(e.emptyValue),i=e.component.validate.required,o=n?i?"array_nonempty":"array":"nonarray";return e.t(e.errorMessage(o),{field:e.errorLabel,data:e.data})},check(n,i,o){if(!n.validateMultiple())return!0;const s=t.boolValue(i),r=Array.isArray(n.emptyValue),a=Array.isArray(o),l=n.component.validate.required;return s?a?!l||!!o.length:!!e.isNil(o)&&!l:r||!a}},select:{key:"validate.select",message:e=>e.t(e.errorMessage("select"),{field:e.errorLabel,data:e.data}),check(n,i,o,s,r,d,u){if(!t.boolValue(i))return!0;if(!o||e.isEmpty(o))return!0;if(!u)return!0;const h=n.component,p={url:i,method:"GET",qs:{},json:!0,headers:{}};if(e.isBoolean(p.url)){if(p.url=!!p.url,!p.url||"url"!==h.dataSrc||!h.data.url||!h.searchField)return!0;p.url=h.data.url,p.qs[h.searchField]=o,h.filter&&(p.url+=(p.url.includes("?")?"&":"?")+h.filter),h.selectFields&&(p.qs.select=h.selectFields)}return!p.url||(p.url=t.interpolate(p.url,{data:n.data}),p.url+=(p.url.includes("?")?"&":"?")+e.chain(p.qs).map((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&").value(),h.data&&h.data.headers&&e.each(h.data.headers,e=>{e.key&&(p.headers[e.key]=e.value)}),h.authenticate&&this.config.token&&(p.headers["x-jwt-token"]=this.config.token),a(new c(p.url,{headers:new l(p.headers)})).then(e=>!!e.ok&&e.json()).then(e=>e&&e.length).catch(()=>!1))}},min:{key:"validate.min",message:(e,t)=>e.t(e.errorMessage("min"),{field:e.errorLabel,min:parseFloat(t),data:e.data}),check(t,n,i){const o=parseFloat(n);return!(!Number.isNaN(o)&&e.isNumber(i))||parseFloat(i)>=o}},max:{key:"validate.max",message:(e,t)=>e.t(e.errorMessage("max"),{field:e.errorLabel,max:parseFloat(t),data:e.data}),check(t,n,i){const o=parseFloat(n);return!(!Number.isNaN(o)&&e.isNumber(i))||parseFloat(i)<=o}},minSelectedCount:{key:"validate.minSelectedCount",message:(e,t)=>e.component.minSelectedCountMessage?e.component.minSelectedCountMessage:e.t(e.errorMessage("minSelectedCount"),{minCount:parseFloat(t),data:e.data}),check(e,t,n){const i=parseFloat(t);if(!i)return!0;const o=Object.keys(n).reduce((e,t)=>(n[t]&&e++,e),0);return o>=i}},maxSelectedCount:{key:"validate.maxSelectedCount",message:(e,t)=>e.component.maxSelectedCountMessage?e.component.maxSelectedCountMessage:e.t(e.errorMessage("maxSelectedCount"),{minCount:parseFloat(t),data:e.data}),check(e,t,n){const i=parseFloat(t);if(!i)return!0;const o=Object.keys(n).reduce((e,t)=>(n[t]&&e++,e),0);return o<=i}},minLength:{key:"validate.minLength",message:(e,t)=>e.t(e.errorMessage("minLength"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const i=parseInt(t,10);return!(i&&"string"==typeof n&&!e.isEmpty(n))||n.length>=i}},maxLength:{key:"validate.maxLength",message:(e,t)=>e.t(e.errorMessage("maxLength"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const i=parseInt(t,10);return!i||"string"!=typeof n||n.length<=i}},maxWords:{key:"validate.maxWords",message:(e,t)=>e.t(e.errorMessage("maxWords"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const i=parseInt(t,10);return!i||"string"!=typeof n||n.trim().split(/\s+/).length<=i}},minWords:{key:"validate.minWords",message:(e,t)=>e.t(e.errorMessage("minWords"),{field:e.errorLabel,length:t,data:e.data}),check(e,t,n){const i=parseInt(t,10);return!i||"string"!=typeof n||n.trim().split(/\s+/).length>=i}},email:{message:e=>e.t(e.errorMessage("invalid_email"),{field:e.errorLabel,data:e.data}),check:(e,t,n)=>!n||/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},url:{message:e=>e.t(e.errorMessage("invalid_url"),{field:e.errorLabel,data:e.data}),check:(e,t,n)=>!n||/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(n)},date:{message:e=>e.t(e.errorMessage("invalid_date"),{field:e.errorLabel,data:e.data}),check:(e,t,n)=>"Invalid date"!==n},day:{message:e=>e.t(e.errorMessage("invalid_day"),{field:e.errorLabel,data:e.data}),check(e,t,n){if(!n)return!0;const[i,o,s]=e.dayFirst?[0,1,2]:[1,0,2],r=n.split("/").map(e=>parseInt(e,10)),a=r[i],l=r[o],c=r[s],d=function(e,t){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return function(e){return!(e%400&&(!(e%100)||e%4))}(t)?29:28;default:return 31}}(l,c);return!(a<0||a>d)&&(!(l<0||l>12)&&!(c<0||c>9999))}},pattern:{key:"validate.pattern",message:(t,n)=>t.t(e.get(t,"component.validate.patternMessage",t.errorMessage("pattern"),{field:t.errorLabel,pattern:n,data:t.data})),check(e,t,n){const i=t;if(!i)return!0;const o=new RegExp(`^${i}$`);return o.test(n)}},json:{key:"validate.json",check(e,t,n,i,o,s){if(!t)return!0;const r=e.evaluate(t,{data:i,row:s,rowIndex:o,input:n});return null===r||r}},mask:{key:"inputMask",message:e=>e.t(e.errorMessage("mask"),{field:e.errorLabel,data:e.data}),check(e,n,i){let o;if(e.isMultipleMasksField){const t=i?i.maskName:void 0,n=e.getMaskByName(t);n&&(o=n),i=i?i.value:i}else o=n;return o=o?t.getInputMask(o):null,!i||!o||t.matchInputMask(i,o)}},custom:{key:"validate.custom",message:e=>e.t(e.errorMessage("custom"),{field:e.errorLabel,data:e.data}),check(e,t,n,i,o,s){if(!t)return!0;const r=e.evaluate(t,{valid:!0,data:i,rowIndex:o,row:s,input:n},"valid",!0);return null===r||r}},maxDate:{key:"maxDate",message(e,i){const o=t.getDateSetting(i);return e.t(e.errorMessage("maxDate"),{field:e.errorLabel,maxDate:n(o).format(e.format)})},check(i,o,s){if(i.isPartialDay&&i.isPartialDay(s))return!0;const r=n(s),a=t.getDateSetting(o);return!!e.isNull(a)||(a.setHours(0,0,0,0),r.isBefore(a)||r.isSame(a))}},minDate:{key:"minDate",message(e,i){const o=t.getDateSetting(i);return e.t(e.errorMessage("minDate"),{field:e.errorLabel,minDate:n(o).format(e.format)})},check(i,o,s){if(i.isPartialDay&&i.isPartialDay(s))return!0;const r=n(s),a=t.getDateSetting(o);return!!e.isNull(a)||(a.setHours(0,0,0,0),r.isAfter(a)||r.isSame(a))}},minYear:{key:"minYear",message:(e,t)=>e.t(e.errorMessage("minYear"),{field:e.errorLabel,minYear:t}),check(e,t,n){const i=t;let o=/\d{4}$/.exec(n);return o=o?o[0]:null,!+i||!+o||+o>=+i}},maxYear:{key:"maxYear",message:(e,t)=>e.t(e.errorMessage("maxYear"),{field:e.errorLabel,maxYear:t}),check(e,t,n){const i=t;let o=/\d{4}$/.exec(n);return o=o?o[0]:null,!+i||!+o||+o<=+i}},calendar:{key:"validate.calendar",messageText:"",message(e){return e.t(e.errorMessage(this.validators.calendar.messageText),{field:e.errorLabel,maxDate:n(e.dataValue).format(e.format)})},check(e,i,o,r,a){this.validators.calendar.messageText="";const l=e.getWidget(a);if(!l)return!0;const{settings:c,enteredDate:d}=l,{minDate:u,maxDate:h,format:p}=c,m=[t.convertFormatToMoment(p)];if(m[0].match(/M{3,}/g)&&m.push(m[0].replace(/M{3,}/g,"MM")),!o&&d){const{message:e,result:t}=s.checkInvalidDate(d,m,u,h);if(!t)return this.validators.calendar.messageText=e,t}return o&&d?n(o).format()!==n(d,m,!0).format()&&d.match(/_/gi)?(this.validators.calendar.messageText=s.CALENDAR_ERROR_MESSAGES.INCOMPLETE,!1):(l.enteredDate="",!0):void 0}}}}checkValidator(e,t,n,o,s,r,a,l){let c=null;c=t.method&&"function"==typeof e[t.method]?e[t.method](n,o,s,r,a,l):t.check.call(this,e,n,o,s,r,a,l);const d=i=>"string"==typeof i?i:!i&&t.message?t.message.call(this,e,n,r,a):"";return l?i.resolve(c).then(d):d(c)}validate(t,n,o,s,r,a,l){if(!t.conditionallyVisible())return!1;const c=this.validators[n],d=e.get(t.component,c.key,null),u=this.checkValidator(t,c,d,o,s,r,a,l),h=i=>!!i&&{message:e.get(i,"message",i),level:"warning"===e.get(i,"level")?"warning":"error",path:(t.path||"").replace(/[[\]]/g,".").replace(/\.\./g,".").split(".").map(t=>e.defaultTo(e.toNumber(t),t)),context:{validator:n,setting:d,key:t.key,label:t.label,value:o}};return l?i.resolve(u).then(h):h(u)}checkComponent(t,n,o,s=!1,r=!1){const a="undefined"!=typeof process&&"node"===e.get(process,"release.name")&&!e.defaultTo(t.component.persistent,!0);if(a||!1===t.component.validate)return r?i.resolve([]):[];n=n||t.rootValue,o=o||t.data;const l=t.component.multiple&&Array.isArray(t.validationValue)?t.validationValue:[t.validationValue],c=e.get(t,"component.validations");if(c&&Array.isArray(c)){const e=this.checkValidations(t,c,n,o,l,r),a=e=>s?e:e.filter(e=>"error"===e.level);return r?i.all(e).then(a):a(e)}const d=e.get(t,"component.validate.custom"),u=e.get(t,"component.validate.customMessage"),h=e(t.validators).chain().map(i=>this.validators.hasOwnProperty(i)?"required"!==i||l.length?e.map(l,(e,s)=>this.validate(t,i,e,n,s,o,r)):[this.validate(t,i,null,n,0,o,r)]:{message:`Validator for "${i}" is not defined`,level:"warning",context:{validator:i,key:t.key,label:t.label}}).flatten().value();t.component.validate=t.component.validate||{},t.component.validate.unique=t.component.unique,h.push(this.validate(t,"unique",t.validationValue,n,0,n,r)),t.component.validate.multiple=t.component.multiple,h.push(this.validate(t,"multiple",t.validationValue,n,0,n,r));const p=i=>(i=e(i).chain().flatten().compact().value(),(u||d)&&e.each(i,e=>{e.message=t.t(u||e.message,{field:t.errorLabel,data:n,row:o,error:e})}),s?i:e.reject(i,e=>"warning"===e.level));return r?i.all(h).then(p):p(h)}checkValidations(e,t,n,i,o,s){const r=t.map(t=>this.checkRule(e,t,n,i,o,s)),a=r.reduce((e,t)=>t?[...e,...t]:e,[]).filter(e=>e),l=a.reduce((e,t)=>(e[t.context.validator]=t,e),{});return Object.values(l)}checkRule(e,t,n,i,o,s){const a=r.getRule(t.rule),l=[];if(a){const r=new a(e,t.settings,this.config);o.map((o,a)=>{const c=r.check(o,n,i,s);!0!==c&&l.push({level:t.level||"error",message:e.t(t.message||r.defaultMessage,{settings:t.settings,field:e.errorLabel,data:n,row:i,error:c}),context:{key:e.key,index:a,label:e.label,validator:t.rule}})})}return 0!==l.length&&l}get check(){return this.checkComponent}get(){e.get.call(this,arguments)}each(){e.each.call(this,arguments)}has(){e.has.call(this,arguments)}}d.config={db:null,token:null,form:null,submission:null};d.instance=new d;return d.instance}),e("skylark-formio/templates/bootstrap/address/form.ejs",[],function(){return'{% if (ctx.mode.autocomplete) { %}\n  <div class="address-autocomplete-container">\n    <input\n      ref="{{ ctx.ref.searchInput }}"\n      {% for (var attr in ctx.inputAttributes) { %}\n        {{attr}}="{{ctx.inputAttributes[attr]}}"\n      {% } %}\n      value="{{ ctx.displayValue }}"\n      autocomplete="off"\n    >\n    {% if (!ctx.component.disableClearIcon) { %}\n      <i\n        class="address-autocomplete-remove-value-icon fa fa-times"\n        tabindex="{{ ctx.inputAttributes.tabindex }}"\n        ref="{{ ctx.ref.removeValueIcon }}"\n      ></i>\n    {% } %}\n  </div>\n{% } %}\n{% if (ctx.self.manualModeEnabled) { %}\n  <div class="form-check checkbox">\n    <label class="form-check-label">\n      <input\n        ref="{{ ctx.ref.modeSwitcher }}"\n        type="checkbox"\n        class="form-check-input"\n        tabindex="{{ ctx.inputAttributes.tabindex }}"\n        {% if (ctx.mode.manual) { %}checked=true{% } %}\n        {% if (ctx.disabled) { %}disabled=true{% } %}\n      >\n      <span>{{ ctx.component.switchToManualModeLabel }}</span>\n    </label>\n  </div>\n{% } %}\n{% if (ctx.self.manualMode) { %}\n  <div ref="{{ ctx.nestedKey }}">\n    {{ ctx.children }}\n  </div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/address/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builder/form.ejs",[],function(){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    {{ctx.sidebar}}\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">\n    {{ctx.form}}\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/builder/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderComponent/form.ejs",[],function(){return'<div class="builder-component" ref="dragComponent">\n  <div class="component-btn-group" data-noattach="true">\n    <div class="btn btn-xxs btn-danger component-settings-button component-settings-button-remove" ref="removeComponent">\n      <i class="{{ctx.iconClass(\'remove\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-copy" ref="copyComponent">\n      <i class="{{ctx.iconClass(\'copy\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-paste" ref="pasteComponent">\n      <i class="{{ctx.iconClass(\'save\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-edit-json" ref="editJson">\n      <i class="{{ctx.iconClass(\'wrench\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-default component-settings-button component-settings-button-move" ref="moveComponent">\n      <i class="{{ctx.iconClass(\'move\')}}"></i>\n    </div>\n    <div class="btn btn-xxs btn-secondary component-settings-button component-settings-button-edit", ref="editComponent">\n      <i class="{{ctx.iconClass(\'cog\')}}"></i>\n    </div>\n  </div>\n  {{ctx.html}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderComponent/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderComponents/form.ejs",[],function(){return'<div class="builder-components drag-container formio-builder-{{ctx.type}}" ref="{{ctx.key}}-container">\n  {{ctx.html}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderComponents/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderEditForm/form.ejs",[],function(){return'<div class="row">\n  <div class="col col-sm-6">\n    <p class="lead">{{ctx.t(ctx.componentInfo.title)}} {{ctx.t(\'Component\')}}</p>\n  </div>\n  <div class="col col-sm-6">\n    <div class="float-right" style="margin-right: 20px; margin-top: 10px">\n      <a href="{{ctx.t(ctx.componentInfo.documentation)}}" target="_blank">\n        <i class="{{ctx.iconClass(\'new-window\')}}"></i> {{ctx.t(\'Help\')}}\n      </a>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col {% if (ctx.preview) { %}col-sm-6{% } else { %}col-sm-12{% } %}">\n    <div ref="editForm">\n        {{ctx.editForm}}\n    </div>\n    {% if (!ctx.preview) { %}\n    <div style="margin-top: 10px;">\n      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">{{ctx.t(\'Save\')}}</button>\n      <button class="btn btn-secondary" style="margin-right: 10px;" ref="cancelButton">{{ctx.t(\'Cancel\')}}</button>\n      <button class="btn btn-danger" ref="removeButton">{{ctx.t(\'Remove\')}}</button>\n    </div>\n    {% } %}\n  </div>\n  {% if (ctx.preview) { %}\n  <div class="col col-sm-6">\n    <div class="card panel preview-panel">\n      <div class="card-header">\n        <h4 class="card-title mb-0">{{ctx.t(\'Preview\')}}</h4>\n      </div>\n      <div class="card-body">\n        <div class="component-preview" ref="preview">\n          {{ctx.preview}}\n        </div>\n      </div>\n    </div>\n    {% if (ctx.componentInfo.help) { %}\n    <div class="card card-body bg-light formio-settings-help">\n      {{ ctx.t(ctx.componentInfo.help) }}\n    </div>\n    {% } %}\n    <div style="margin-top: 10px;">\n      <button class="btn btn-success" style="margin-right: 10px;" ref="saveButton">{{ctx.t(\'Save\')}}</button>\n      <button class="btn btn-secondary" style="margin-right: 10px;" ref="cancelButton">{{ctx.t(\'Cancel\')}}</button>\n      <button class="btn btn-danger" ref="removeButton">{{ctx.t(\'Remove\')}}</button>\n    </div>\n  </div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderEditForm/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderPlaceholder/form.ejs",[],function(){return'<div\n  class="drag-and-drop-alert alert alert-info no-drag"\n  style="text-align:center;"\n  role="alert"\n  data-noattach="true"\n  data-position="{{ctx.position}}"\n>\n  {{ctx.t(\'Drag and Drop a form component\')}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderPlaceholder/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderSidebar/form.ejs",[],function(){return'<div id="{{ctx.groupId}}" class="accordion builder-sidebar{{ctx.scrollEnabled ? \' builder-sidebar_scroll\' : \'\'}}" ref="sidebar">\n  {% ctx.groups.forEach(function(group) { %}\n    {{ group }}\n  {% }) %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderSidebar/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderSidebarGroup/form.ejs",[],function(){return'<div class="card form-builder-panel" ref="group-panel-{{ctx.groupKey}}">\n  <div class="card-header form-builder-group-header" id="heading-{{ctx.groupKey}}">\n    <h5 class="mb-0 mt-0">\n      <button\n        class="btn btn-block builder-group-button"\n        type="button"\n        data-toggle="collapse"\n        data-target="#group-{{ctx.groupKey}}"\n        data-parent="#{{ctx.groupId}}"\n        aria-expanded="{{ctx.group.default}}"\n        aria-controls="group-{{ctx.groupKey}}"\n        ref="sidebar-anchor"\n      >\n        {{ctx.t(ctx.group.title)}}\n      </button>\n    </h5>\n  </div>\n  <div\n    id="group-{{ctx.groupKey}}"\n    class="collapse {{ctx.group.default ? \' show\' : \'\'}}"\n    data-parent="#{{ctx.groupId}}"\n    data-default="{{ctx.group.default}}"\n    aria-labelledby="heading-{{ctx.groupKey}}"\n    ref="sidebar-group"\n  >\n    <div id="group-container-{{ctx.groupKey}}" class="card-body no-drop p-2" ref="sidebar-container">\n      {% !ctx.group.componentOrder || ctx.group.componentOrder.forEach(function(componentKey) { %}\n      <span\n        data-group="{{ctx.groupKey}}"\n        data-key="{{ctx.group.components[componentKey].key}}"\n        data-type="{{ctx.group.components[componentKey].schema.type}}"\n        class="btn btn-primary btn-sm btn-block formcomponent drag-copy"\n      >\n        {% if (ctx.group.components[componentKey].icon) { %}\n          <i class="{{ctx.iconClass(ctx.group.components[componentKey].icon)}}" style="margin-right: 5px;"></i>\n        {% } %}\n        {{ctx.t(ctx.group.components[componentKey].title)}}\n        </span>\n      {% }) %}\n      {{ctx.subgroups.join(\'\')}}\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderSidebarGroup/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/builderWizard/form.ejs",[],function(){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    {{ctx.sidebar}}\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea">\n    <ol class="breadcrumb">\n      {% ctx.pages.forEach(function(page, pageIndex) { %}\n      <li>\n        <span title="{{page.title}}" class="mr-2 badge {% if (pageIndex === ctx.self.page) { %}badge-primary{% } else { %}badge-info{% } %} wizard-page-label" ref="gotoPage">{{page.title}}</span>\n      </li>\n      {% }) %}\n      <li>\n        <span title="{{ctx.t(\'Create Page\')}}" class="mr-2 badge badge-success wizard-page-label" ref="addPage">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(\'Page\')}}\n        </span>\n      </li>\n    </ol>\n    <div ref="form">\n      {{ctx.form}}\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/builderWizard/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/button/form.ejs",[],function(){return'<{{ctx.input.type}}\n  ref="button"\n  {% for (var attr in ctx.input.attr) { %}\n  {{attr}}="{{ctx.input.attr[attr]}}"\n  {% } %}\n>\n{% if (ctx.component.leftIcon) { %}<span class="{{ctx.component.leftIcon}}"></span>&nbsp;{% } %}\n{{ctx.input.content}}\n{% if (ctx.component.tooltip) { %}\n  <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n{% } %}\n{% if (ctx.component.rightIcon) { %}&nbsp;<span class="{{ctx.component.rightIcon}}"></span>{% } %}\n</{{ctx.input.type}}>\n<div ref="buttonMessageContainer">\n  <span class="help-block" ref="buttonMessage"></span>\n</div>\n'}),e("skylark-formio/templates/bootstrap/button/html.ejs",[],function(){return"\n"}),e("skylark-formio/templates/bootstrap/button/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/checkbox/form.ejs",[],function(){return'<div class="form-check checkbox">\n  <label class="{{ctx.input.labelClass}} form-check-label">\n    <{{ctx.input.type}}\n      ref="input"\n      {% for (var attr in ctx.input.attr) { %}\n      {{attr}}="{{ctx.input.attr[attr]}}"\n      {% } %}\n      {% if (ctx.checked) { %}checked=true{% } %}\n      >\n    {% if (!ctx.self.labelIsHidden()) { %}<span>{{ctx.input.label}}</span>{% } %}\n    {% if (ctx.component.tooltip) { %}\n      <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n    {% } %}\n    {{ctx.input.content}}\n    </{{ctx.input.type}}>\n  </label>\n</div>\n'}),e("skylark-formio/templates/bootstrap/checkbox/html.ejs",[],function(){return'<label class="{{ctx.input.labelClass}}">\n    {{ctx.input.content}}\n    {% if (!ctx.self.labelIsHidden()) { %}<span>{{ctx.input.label}}</span>{% } %}\n</label>\n<div ref="value">{% if (ctx.checked) { %}True{% } else { %}False{% } %}</div>\n'}),e("skylark-formio/templates/bootstrap/checkbox/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/columns/form.ejs",[],function(){return'{% ctx.component.columns.forEach(function(column, index) { %}\n<div class="\n    col-{{column.size}}-{{column.width}}\n    col-{{column.size}}-offset-{{column.offset}}\n    col-{{column.size}}-push-{{column.push}}\n    col-{{column.size}}-pull-{{column.pull}}\n  " ref="{{ctx.columnKey}}">\n  {{ctx.columnComponents[index]}}\n</div>\n{% }) %}\n'}),e("skylark-formio/templates/bootstrap/columns/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/component/form.ejs",[],function(){return'<div id="{{ctx.id}}" class="{{ctx.classes}}"{% if (ctx.styles) { %} styles="{{ctx.styles}}"{% } %} ref="component">\n  {% if (ctx.visible) { %}\n  {{ctx.children}}\n  <div ref="messageContainer" class="formio-errors invalid-feedback"></div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/component/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/componentModal/form.ejs",[],function(){return'<div class="formio-component-modal-wrapper" ref="componentModalWrapper">\n  <div ref="openModalWrapper"></div>\n\n  <div class="formio-dialog formio-dialog-theme-default component-rendering-hidden" ref="modalWrapper">\n    <div class="formio-dialog-overlay" ref="modalOverlay"></div>\n    <div class="formio-dialog-content" ref="modalContents">\n      <div ref="modalContents">\n        {% if (ctx.visible) { %}\n        {{ctx.children}}\n        {% } %}\n        <div class="formio-dialog-buttons">\n          <button class="btn btn-success formio-dialog-button" ref="modalSave">Save</button>\n        </div>\n      </div>\n      <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="modalClose"></button>\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/componentModal/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/components/form.ejs",[],function(){return"{{ ctx.children.join('') }}\n"}),e("skylark-formio/templates/bootstrap/components/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/container/form.ejs",[],function(){return'<div ref="{{ctx.nestedKey}}">\n  {{ctx.children}}\n</div>\n'}),e("skylark-formio/templates/bootstrap/container/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/datagrid/form.ejs",[],function(){return'<table class="table datagrid-table table-bordered\n    {{ ctx.component.striped ? \'table-striped\' : \'\'}}\n    {{ ctx.component.hover ? \'table-hover\' : \'\'}}\n    {{ ctx.component.condensed ? \'table-sm\' : \'\'}}\n    " {% if (ctx.component.layoutFixed) { %}style="table-layout: fixed;"{% } %}>\n  {% if (ctx.hasHeader) { %}\n  <thead>\n    <tr>\n      {% if (ctx.component.reorder) { %}<th></th>{% } %}\n      {% ctx.columns.forEach(function(col) { %}\n        <th class="{{col.validate && col.validate.required ? \'field-required\' : \'\'}}">\n          {{ col.hideLabel ? \'\' : ctx.t(col.label || col.title) }}\n          {% if (col.tooltip) { %} <i ref="tooltip" data-title="{{col.tooltip}}" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>{% } %}\n        </th>\n      {% }) %}\n      {% if (ctx.hasExtraColumn) { %}\n      <th>\n        {% if (!ctx.builder && ctx.hasAddButton && ctx.hasTopSubmit) { %}\n        <button class="btn btn-primary formio-button-add-row" ref="{{ctx.datagridKey}}-addRow">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i>{{ctx.t(ctx.component.addAnother || \'Add Another\')}}\n        </button>\n        {% } %}\n      </th>\n      {% } %}\n    </tr>\n  </thead>\n  {% } %}\n  <tbody ref="{{ctx.datagridKey}}-tbody">\n    {% ctx.rows.forEach(function(row, index) { %}\n    {% if (ctx.hasGroups && ctx.groups[index]) { %}\n    <tr ref="{{ctx.datagridKey}}-group-header" class="datagrid-group-header{{ctx.hasToggle ? \' clickable\' : \'\'}}">\n      <td\n        ref="{{ctx.datagridKey}}-group-label"\n        colspan="{{ctx.numColumns}}"\n        class="datagrid-group-label">{{ctx.groups[index].label}}</td>\n    </tr>\n    {% } %}\n    <tr ref="{{ctx.datagridKey}}-row">\n      {% if (ctx.component.reorder) { %}\n        <td>\n          <button type="button" class="formio-drag-button btn btn-default fa fa-bars"></button>\n        </td>\n      {% } %}\n      {% ctx.columns.forEach(function(col) { %}\n        <td ref="{{ctx.datagridKey}}">\n          {{row[col.key]}}\n        </td>\n      {% }) %}\n      {% if (ctx.hasExtraColumn) { %}\n        {% if (!ctx.builder && ctx.hasRemoveButtons) { %}\n        <td>\n          <button type="button" class="btn btn-secondary formio-button-remove-row" ref="{{ctx.datagridKey}}-removeRow">\n            <i class="{{ctx.iconClass(\'remove-circle\')}}"></i>\n          </button>\n        </td>\n        {% } %}\n        {% if (ctx.canAddColumn) { %}\n        <td ref="{{ctx.key}}-container">\n          {{ctx.placeholder}}\n        </td>\n        {% } %}\n      {% } %}\n    </tr>\n    {% }) %}\n  </tbody>\n  {% if (!ctx.builder && ctx.hasAddButton && ctx.hasBottomSubmit) { %}\n  <tfoot>\n    <tr>\n      <td colspan="{{ctx.numColumns + 1}}">\n        <button class="btn btn-primary formio-button-add-row" ref="{{ctx.datagridKey}}-addRow">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(ctx.component.addAnother || \'Add Another\')}}\n        </button>\n      </td>\n    </tr>\n  </tfoot>\n  {% } %}\n</table>\n'}),e("skylark-formio/templates/bootstrap/datagrid/html.ejs",[],function(){return"<table class=\"table datagrid-table table-bordered\n    {{ ctx.component.striped ? 'table-striped' : ''}}\n    {{ ctx.component.hover ? 'table-hover' : ''}}\n    {{ ctx.component.condensed ? 'table-sm' : ''}}\n    \">\n  {% if (ctx.hasHeader) { %}\n  <thead>\n    <tr>\n      {% ctx.columns.forEach(function(col) { %}\n        <th class=\"{{col.validate && col.validate.required ? 'field-required' : ''}}\">\n          {{ col.hideLabel ? '' : ctx.t(col.label || col.title) }}\n          {% if (col.tooltip) { %} <i ref=\"tooltip\" data-title=\"{{col.tooltip}}\" class=\"{{ctx.iconClass('question-sign')}} text-muted\"></i>{% } %}\n        </th>\n      {% }) %}\n    </tr>\n  </thead>\n  {% } %}\n  <tbody>\n    {% ctx.rows.forEach(function(row) { %}\n    <tr>\n      {% ctx.columns.forEach(function(col) { %}\n        <td ref=\"{{ctx.datagridKey}}\">\n          {{row[col.key]}}\n        </td>\n      {% }) %}\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n"}),e("skylark-formio/templates/bootstrap/datagrid/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/day/form.ejs",[],function(){return'<div class="row">\n  {% if (ctx.dayFirst && ctx.showDay) { %}\n  <div class="col col-xs-3">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-day" class="{% if(ctx.component.fields.day.required) { %}field-required{% } %}">{{ctx.t(\'Day\')}}</label>\n    {% } %}\n    <div>{{ctx.day}}</div>\n  </div>\n  {% } %}\n  {% if (ctx.showMonth) { %}\n  <div class="col col-xs-4">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-month" class="{% if(ctx.component.fields.month.required) { %}field-required{% } %}">{{ctx.t(\'Month\')}}</label>\n    {% } %}\n    <div>{{ctx.month}}</div>\n  </div>\n  {% } %}\n  {% if (!ctx.dayFirst && ctx.showDay) { %}\n  <div class="col col-xs-3">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-day" class="{% if(ctx.component.fields.day.required) { %}field-required{% } %}">{{ctx.t(\'Day\')}}</label>\n    {% } %}\n    <div>{{ctx.day}}</div>\n  </div>\n  {% } %}\n  {% if (ctx.showYear) { %}\n  <div class="col col-xs-5">\n    {% if (!ctx.component.hideInputLabels) { %}\n    <label for="{{ctx.component.key}}-year" class="{% if(ctx.component.fields.year.required) { %}field-required{% } %}">{{ctx.t(\'Year\')}}</label>\n    {% } %}\n    <div>{{ctx.year}}</div>\n  </div>\n  {% } %}\n</div>\n<input name="ctx.data[day]" type="hidden" class="form-control" lang="en" value="" ref="input">\n'}),e("skylark-formio/templates/bootstrap/day/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/dialog/form.ejs",[],function(){return'<div class="formio-dialog formio-dialog-theme-default component-settings">\n  <div class="formio-dialog-overlay" ref="dialogOverlay"></div>\n  <div class="formio-dialog-content" ref="dialogContents">\n    <div ref="dialogContents"></div>\n    <button class="formio-dialog-close float-right btn btn-secondary btn-sm" aria-label="close" ref="dialogClose"></button>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/dialog/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/editgrid/form.ejs",[],function(){return'<ul class="editgrid-listgroup list-group\n    {{ ctx.component.striped ? \'table-striped\' : \'\'}}\n    {{ ctx.component.bordered ? \'table-bordered\' : \'\'}}\n    {{ ctx.component.hover ? \'table-hover\' : \'\'}}\n    {{ ctx.component.condensed ? \'table-sm\' : \'\'}}\n    ">\n  {% if (ctx.header) { %}\n  <li class="list-group-item list-group-header">\n    {{ctx.header}}\n  </li>\n  {% } %}\n  {% ctx.rows.forEach(function(row, rowIndex) { %}\n  <li class="list-group-item" ref="{{ctx.ref.row}}">\n    {{row}}\n    {% if (ctx.openRows[rowIndex] && !ctx.readOnly) { %}\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="{{ctx.ref.saveRow}}">{{ctx.t(ctx.component.saveRow || \'Save\')}}</button>\n      {% if (ctx.component.removeRow) { %}\n      <button class="btn btn-danger" ref="{{ctx.ref.cancelRow}}">{{ctx.t(ctx.component.removeRow || \'Cancel\')}}</button>\n      {% } %}\n    </div>\n    {% } %}\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        {{ctx.errors[rowIndex]}}\n      </div>\n    </div>\n  </li>\n  {% }) %}\n  {% if (ctx.footer) { %}\n  <li class="list-group-item list-group-footer">\n    {{ctx.footer}}\n  </li>\n  {% } %}\n</ul>\n{% if (!ctx.readOnly && ctx.hasAddButton) { %}\n<button class="btn btn-primary" ref="{{ctx.ref.addRow}}">\n  <i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(ctx.component.addAnother || \'Add Another\')}}\n</button>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/editgrid/html.ejs",[],function(){return'<ul class="editgrid-listgroup list-group\n    {{ ctx.component.striped ? \'table-striped\' : \'\'}}\n    {{ ctx.component.bordered ? \'table-bordered\' : \'\'}}\n    {{ ctx.component.hover ? \'table-hover\' : \'\'}}\n    {{ ctx.component.condensed ? \'table-sm\' : \'\'}}\n    ">\n  {% if (ctx.header) { %}\n  <li class="list-group-item list-group-header">\n    {{ctx.header}}\n  </li>\n  {% } %}\n  {% ctx.rows.forEach(function(row, rowIndex) { %}\n  <li class="list-group-item" ref="{{ctx.ref.row}}">\n    {{row}}\n    {% if (ctx.openRows[rowIndex] && !ctx.readOnly) { %}\n    <div class="editgrid-actions">\n      <button class="btn btn-primary" ref="{{ctx.ref.saveRow}}">{{ctx.t(ctx.component.saveRow || \'Save\')}}</button>\n      {% if (ctx.component.removeRow) { %}\n      <button class="btn btn-danger" ref="{{ctx.ref.cancelRow}}">{{ctx.t(ctx.component.removeRow || \'Cancel\')}}</button>\n      {% } %}\n    </div>\n    {% } %}\n    <div class="has-error">\n      <div class="editgrid-row-error help-block">\n        {{ctx.errors[rowIndex]}}\n      </div>\n    </div>\n  </li>\n  {% }) %}\n  {% if (ctx.footer) { %}\n  <li class="list-group-item list-group-footer">\n    {{ctx.footer}}\n  </li>\n  {% } %}\n</ul>\n'}),e("skylark-formio/templates/bootstrap/editgrid/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/field/form.ejs",[],function(){return"{% if (!ctx.label.hidden && ctx.label.labelPosition !== 'bottom') { %}\n  {{ ctx.labelMarkup }}\n{% } %}\n\n{% if (ctx.label.hidden && ctx.label.className && ctx.component.validate.required) { %}\n  <label class=\"{{ctx.label.className}}\"></label>\n{% } %}\n\n{{ctx.element}}\n\n{% if (!ctx.label.hidden && ctx.label.labelPosition === 'bottom') { %}\n  {{ ctx.labelMarkup }}\n{% } %}\n{% if (ctx.component.description) { %}\n  <div class=\"form-text text-muted\">{{ctx.t(ctx.component.description)}}</div>\n{% } %}\n"}),e("skylark-formio/templates/bootstrap/field/align.ejs",[],function(){return'<div class="field-wrapper\n  {{ctx.isRightPosition ? \'field-wrapper--reverse\' : \'\'}}">\n  {% if (!ctx.label.hidden) { %}\n    <div class="field-label\n      {{ctx.isRightAlign ? \'field-label--right\' : \'\'}}"\n      style="{{ctx.labelStyles}}">\n    {{ ctx.labelMarkup }}\n    </div>\n  {% } %}\n\n  {% if (ctx.label.hidden && ctx.label.className && ctx.component.validate.required) { %}\n    <div class="field-label\n      {{ctx.isRightAlign ? \'field-label--right\' : \'\'}}"\n      style="{{ctx.labelStyles}}">\n      <label class="{{ctx.label.className}}"></label>\n    </div>\n  {% } %}\n\n  <div class="filed-content" style="{{ctx.contentStyles}}">\n    {{ctx.element}}\n  </div>\n</div>\n\n{% if (ctx.component.description) { %}\n  <div class="form-text text-muted">{{ctx.t(ctx.component.description)}}</div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/field/index",["./form.ejs","./align.ejs"],function(e,t){"use strict";return{form:e,align:t}}),e("skylark-formio/templates/bootstrap/fieldset/form.ejs",[],function(){return'<fieldset>\n  {% if (ctx.component.legend) { %}\n  <legend ref="header" class="{{ctx.component.collapsible ? \'formio-clickable\' : \'\'}}">\n    {{ctx.t(ctx.component.legend)}}\n    {% if (ctx.component.tooltip) { %}\n      <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n    {% } %}\n  </legend>\n  {% } %}\n  {% if (!ctx.collapsed) { %}\n  <div class="fieldset-body" ref="{{ctx.nestedKey}}">\n    {{ctx.children}}\n  </div>\n  {% } %}\n</fieldset>\n'}),e("skylark-formio/templates/bootstrap/fieldset/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/file/form.ejs",[],function(){return'{% if (!ctx.self.imageUpload) { %}\n  <ul class="list-group list-group-striped">\n    <li class="list-group-item list-group-header hidden-xs hidden-sm">\n      <div class="row">\n        {% if (!ctx.disabled) { %}\n          <div class="col-md-1"></div>\n        {% } %}\n        <div class="col-md-{% if (ctx.self.hasTypes) { %}7{% } else { %}9{% } %}"><strong>{{ctx.t(\'File Name\')}}</strong></div>\n        <div class="col-md-2"><strong>{{ctx.t(\'Size\')}}</strong></div>\n        {% if (ctx.self.hasTypes) { %}\n          <div class="col-md-2"><strong>{{ctx.t(\'Type\')}}</strong></div>\n        {% } %}\n      </div>\n    </li>\n    {% ctx.files.forEach(function(file) { %}\n      <li class="list-group-item">\n        <div class="row">\n          {% if (!ctx.disabled) { %}\n            <div class="col-md-1"><i class="{{ctx.iconClass(\'remove\')}}" ref="removeLink"></i></div>\n          {% } %}\n          <div class="col-md-{% if (ctx.self.hasTypes) { %}7{% } else { %}9{% } %}">\n            {% if (ctx.component.uploadOnly) { %}\n              {{file.originalName || file.name}}\n            {% } else { %}\n              <a href="{{file.url || \'#\'}}" target="_blank" ref="fileLink">{{file.originalName || file.name}}</a>\n            {% } %}\n          </div>\n          <div class="col-md-2">{{ctx.fileSize(file.size)}}</div>\n          {% if (ctx.self.hasTypes && !ctx.disabled) { %}\n            <div class="col-md-2">\n              <select class="file-type" ref="fileType">\n                {% ctx.component.fileTypes.map(function(type) { %}\n                  <option class="test" value="{{ type.value }}" {% if (type.label === file.fileType) { %}selected="selected"{% } %}>{{ type.label }}</option>\n                {% }); %}\n              </select>\n            </div>\n          {% } %}\n          {% if (ctx.self.hasTypes && ctx.disabled) { %}\n          <div class="col-md-2">{{file.fileType}}</div>\n          {% } %}\n        </div>\n      </li>\n    {% }) %}\n  </ul>\n{% } else { %}\n  <div>\n    {% ctx.files.forEach(function(file) { %}\n      <div>\n        <span>\n          <img ref="fileImage" src="" alt="{{file.originalName || file.name}}" style="width:{{ctx.component.imageSize}}px">\n          {% if (!ctx.disabled) { %}\n            <i class="{{ctx.iconClass(\'remove\')}}" ref="removeLink"></i>\n          {% } %}\n        </span>\n      </div>\n    {% }) %}\n  </div>\n{% } %}\n{% if (!ctx.disabled && (ctx.component.multiple || !ctx.files.length)) { %}\n  {% if (ctx.self.useWebViewCamera) { %}\n    <div class="fileSelector">\n      <button class="btn btn-primary" ref="galleryButton"><i class="fa fa-book"></i> {{ctx.t(\'Gallery\')}}</button>\n      <button class="btn btn-primary" ref="cameraButton"><i class="fa fa-camera"></i> {{ctx.t(\'Camera\')}}</button>\n    </div>\n  {% } else if (!ctx.self.cameraMode) { %}\n    <div class="fileSelector" ref="fileDrop">\n      <i class="{{ctx.iconClass(\'cloud-upload\')}}"></i> {{ctx.t(\'Drop files to attach,\')}}\n        {% if (ctx.self.imageUpload) { %}\n          <a href="#" ref="toggleCameraMode"><i class="fa fa-camera"></i> {{ctx.t(\'Use Camera,\')}}</a>\n        {% } %}\n        {{ctx.t(\'or\')}} <a href="#" ref="fileBrowse" class="browse">{{ctx.t(\'browse\')}}</a>\n    </div>\n  {% } else { %}\n    <div>\n      <video class="video" autoplay="true" ref="videoPlayer"></video>\n    </div>\n    <button class="btn btn-primary" ref="takePictureButton"><i class="fa fa-camera"></i> {{ctx.t(\'Take Picture\')}}</button>\n    <button class="btn btn-primary" ref="toggleCameraMode">{{ctx.t(\'Switch to file upload\')}}</button>\n  {% } %}\n{% } %}\n{% ctx.statuses.forEach(function(status) { %}\n  <div class="file {{ctx.statuses.status === \'error\' ? \' has-error\' : \'\'}}">\n    <div class="row">\n      <div class="fileName col-form-label col-sm-10">{{status.originalName}} <i class="{{ctx.iconClass(\'remove\')}}" ref="fileStatusRemove"></i></div>\n      <div class="fileSize col-form-label col-sm-2 text-right">{{ctx.fileSize(status.size)}}</div>\n    </div>\n    <div class="row">\n      <div class="col-sm-12">\n        {% if (status.status === \'progress\') { %}\n          <div class="progress">\n            <div class="progress-bar" role="progressbar" aria-valuenow="{{status.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{status.progress}}%">\n              <span class="sr-only">{{status.progress}}% {{ctx.t(\'Complete\')}}</span>\n            </div>\n          </div>\n        {% } else { %}\n          <div class="bg-{{status.status}}">{{ctx.t(status.message)}}</div>\n        {% } %}\n      </div>\n    </div>\n  </div>\n{% }) %}\n{% if (!ctx.component.storage || ctx.support.hasWarning) { %}\n  <div class="alert alert-warning">\n    {% if (!ctx.component.storage) { %}\n      <p>{{ctx.t(\'No storage has been set for this field. File uploads are disabled until storage is set up.\')}}</p>\n    {% } %}\n    {% if (!ctx.support.filereader) { %}\n      <p>{{ctx.t(\'File API & FileReader API not supported.\')}}</p>\n    {% } %}\n    {% if (!ctx.support.formdata) { %}\n      <p>{{ctx.t("XHR2\'s FormData is not supported.")}}</p>\n    {% } %}\n    {% if (!ctx.support.progress) { %}\n      <p>{{ctx.t("XHR2\'s upload progress isn\'t supported.")}}</p>\n    {% } %}\n  </div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/file/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/html/form.ejs",[],function(){return'<{{ctx.tag}} class="{{ ctx.component.className }}" ref="html"\n  {% ctx.attrs.forEach(function(attr) { %}\n    {{attr.attr}}="{{attr.value}}"\n  {% }) %}\n>{{ctx.content}}{% if (!ctx.singleTags || ctx.singleTags.indexOf(ctx.tag) === -1) { %}</{{ctx.tag}}>{% } %}\n'}),e("skylark-formio/templates/bootstrap/html/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/icon/form.ejs",[],function(){return'<i ref="{{ctx.ref}}" class="{{ctx.className}}" style="{{ctx.styles}}">{{ctx.content}}</i>\n'}),e("skylark-formio/templates/bootstrap/icon/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/iconClass",[],function(){"use strict";return(e,t,n)=>{if("fa"===e)switch(t){case"save":t="download";break;case"zoom-in":t="search-plus";break;case"zoom-out":t="search-minus";break;case"question-sign":t="question-circle";break;case"remove-circle":t="times-circle-o";break;case"new-window":t="window-restore";break;case"move":t="arrows";break;case"time":t="clock-o"}return n?`${e} ${e}-${t} ${e}-spin`:`${e} ${e}-${t}`}}),e("skylark-formio/templates/bootstrap/input/form.ejs",[],function(){return'{% if (ctx.component.prefix || ctx.component.suffix) { %}\n<div class="input-group">\n{% } %}\n{% if (ctx.component.prefix) { %}\n<div class="input-group-prepend" ref="prefix">\n  <span class="input-group-text">\n    {{ctx.component.prefix}}\n  </span>\n</div>\n{% } %}\n<{{ctx.input.type}}\n  ref="{{ctx.input.ref ? ctx.input.ref : \'input\'}}"\n  {% for (var attr in ctx.input.attr) { %}\n  {{attr}}="{{ctx.input.attr[attr]}}"\n  {% } %}\n>{{ctx.input.content}}</{{ctx.input.type}}>\n{% if (ctx.component.showCharCount) { %}\n<span class="text-muted pull-right" ref="charcount"></span>\n{% } %}\n{% if (ctx.component.showWordCount) { %}\n<span class="text-muted pull-right" ref="wordcount"></span>\n{% } %}\n{% if (ctx.component.suffix) { %}\n<div class="input-group-append" ref="suffix">\n  <span class="input-group-text">\n    {{ctx.component.suffix}}\n  </span>\n</div>\n{% } %}\n{% if (ctx.component.prefix || ctx.component.suffix) { %}\n</div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/input/html.ejs",[],function(){return'<div ref="value">{% if (ctx.value) { %}{{ctx.value}}{% } else { %}-{% } %}</div>\n'}),e("skylark-formio/templates/bootstrap/input/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/label/form.ejs",[],function(){return'<label class="col-form-label {{ctx.label.className}}">\n  {{ ctx.t(ctx.component.label) }}\n  {% if (ctx.component.tooltip) { %}\n    <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n  {% } %}\n</label>\n'}),e("skylark-formio/templates/bootstrap/label/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/loader/form.ejs",[],function(){return'<div class="formio-loader">\n  <div class="loader-wrapper">\n    <div class="loader text-center"></div>\n  </div> \n</div>\n'}),e("skylark-formio/templates/bootstrap/loader/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/loading/form.ejs",[],function(){return"Loading...\n"}),e("skylark-formio/templates/bootstrap/loading/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/map/form.ejs",[],function(){return'<div id="{{ctx.mapId}}" style="min-height: 300px; height: calc(100vh - 600px);" ref="gmapElement"></div>\n'}),e("skylark-formio/templates/bootstrap/map/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/message/form.ejs",[],function(){return'<div class="form-text {{ctx.level}}">{{ctx.message}}</div>\n'}),e("skylark-formio/templates/bootstrap/message/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/multipleMasksInput/form.ejs",[],function(){return'<div\n  class="input-group formio-multiple-mask-container"\n  ref="{{ctx.input.ref ? ctx.input.ref : \'input\'}}"\n>\n  <select\n    class="form-control formio-multiple-mask-select"\n    id="{{ctx.key}}-mask"\n    ref="select">\n    {% ctx.selectOptions.forEach(function(option) { %}\n    <option value="{{option.value}}">{{option.label}}</option>\n    {% }); %}\n  </select>\n  <input\n    ref="mask"\n    {% for (var attr in ctx.input.attr) { %}\n    {{attr}}="{{ctx.input.attr[attr]}}"\n    {% } %}\n  >\n</div>\n'}),e("skylark-formio/templates/bootstrap/multipleMasksInput/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/multiValueRow/form.ejs",[],function(){return'<tr ref="row">\n  <td>\n    {{ctx.element}}\n  </td>\n  {% if (!ctx.disabled) { %}\n  <td>\n    <button type="button" class="btn btn-secondary" ref="removeRow">\n      <i class="{{ctx.iconClass(\'remove-circle\')}}"></i>\n    </button>\n  </td>\n  {% } %}\n</tr>\n'}),e("skylark-formio/templates/bootstrap/multiValueRow/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/multiValueTable/form.ejs",[],function(){return'<table class="table table-bordered">\n  <tbody>\n  {{ctx.rows}}\n  {% if (!ctx.disabled) { %}\n  <tr>\n    <td colspan="2">\n      <button class="btn btn-primary formio-button-add-another" ref="addButton"><i class="{{ctx.iconClass(\'plus\')}}"></i> {{ctx.t(ctx.addAnother)}}</button>\n    </td>\n  </tr>\n  {% } %}\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/multiValueTable/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/panel/form.ejs",[],function(){return'<div class="mb-2 card border">\n  <div class="card-header {{ctx.transform(\'class\', \'bg-\' + ctx.component.theme)}}" ref="header">\n    <span class="mb-0 card-title">\n      {% if (ctx.component.collapsible) { %}\n        <i class="formio-collapse-icon {{ctx.iconClass(ctx.collapsed ? \'plus-square-o\' : \'minus-square-o\')}} text-muted" data-title="Collapse Panel"></i>\n      {% } %}\n      {{ctx.t(ctx.component.title)}}\n      {% if (ctx.component.tooltip) { %}\n        <i ref="tooltip" class="{{ctx.iconClass(\'question-sign\')}} text-muted"></i>\n      {% } %}\n    </span>\n  </div>\n  {% if (!ctx.collapsed || ctx.builder) { %}\n  <div class="card-body" ref="{{ctx.nestedKey}}">\n    {{ctx.children}}\n  </div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/panel/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/pdf/form.ejs",[],function(){return'<div class="{{ctx.classes}}" ref="webform">\n\t<span data-noattach="true" ref="zoomIn" style="position:absolute;right:10px;top:10px;cursor:pointer;" class="btn btn-default btn-secondary no-disable">\n\t\t<i class="{{ ctx.iconClass(\'zoom-in\') }}"></i>\n\t</span>\n\t<span data-noattach="true" ref="zoomOut" style="position:absolute;right:10px;top:60px;cursor:pointer;" class="btn btn-default btn-secondary no-disable">\n\t\t<i class="{{ ctx.iconClass(\'zoom-out\') }}"></i>\n\t</span>\n  <div data-noattach="true" ref="iframeContainer"></div>\n  <button type="button" class="btn btn-primary" ref="submitButton">{{ctx.t(\'Submit\')}}</button>\n</div>\n'}),e("skylark-formio/templates/bootstrap/pdf/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/pdfBuilder/form.ejs",[],function(){return'<div class="formio builder row formbuilder">\n  <div class="col-xs-4 col-sm-3 col-md-2 formcomponents">\n    {{ctx.sidebar}}\n  </div>\n  <div class="col-xs-8 col-sm-9 col-md-10 formarea" ref="form">\n\t  <div class="formio-drop-zone" ref="iframeDropzone"></div>\n    {{ctx.form}}\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/pdfBuilder/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/pdfBuilderUpload/form.ejs",[],function(){return'<div class="pdf-upload formio-component-file">\n  <h3 class="label">{{ctx.t(\'Upload a PDF File\')}}</h3>\n  <input type="file" style="opacity: 0; position: absolute;" tabindex="-1" accept=".pdf" ref="hiddenFileInputElement">\n  <div class="fileSelector" ref="fileDrop">\n    <i class="{{ctx.iconClass(\'cloud-upload\')}}"></i>{{ctx.t(\'Drop pdf to start, or\')}} <a href="#" ref="fileBrowse" class="browse">{{ctx.t(\'browse\')}}</a>\n  </div>\n  <div class="alert alert-danger" ref="uploadError">\n\n  </div>\n</div>\n\n'}),e("skylark-formio/templates/bootstrap/pdfBuilderUpload/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/radio/form.ejs",[],function(){return'<div class="form-radio radio">\n  {% ctx.values.forEach(function(item) { %}\n  <div class="form-check{{ctx.inline ? \'-inline\' : \'\'}}" ref="wrapper">\n    <label class="form-check-label label-position-{{ ctx.component.optionsLabelPosition }}" for="{{ctx.id}}{{ctx.row}}-{{item.value}}">\n      {% if (ctx.component.optionsLabelPosition === \'left\' || ctx.component.optionsLabelPosition === \'top\') { %}\n      <span>{{ctx.t(item.label)}}</span>\n      {% } %}\n      <{{ctx.input.type}}\n        ref="input"\n        {% for (var attr in ctx.input.attr) { %}\n        {{attr}}="{{ctx.input.attr[attr]}}"\n        {% } %}\n        value="{{item.value}}"\n        {% if (ctx.value && (ctx.value === item.value || (typeof ctx.value === \'object\' && ctx.value.hasOwnProperty(item.value) && ctx.value[item.value]))) { %}\n          checked=true\n        {% } %}\n        {% if (item.disabled) { %}\n          disabled=true\n        {% } %}\n        id="{{ctx.id}}{{ctx.row}}-{{item.value}}"\n      >\n      {% if (!ctx.component.optionsLabelPosition || ctx.component.optionsLabelPosition === \'right\' || ctx.component.optionsLabelPosition === \'bottom\') { %}\n      <span>{{ctx.t(item.label)}}</span>\n      {% } %}\n    </label>\n  </div>\n  {% }) %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/radio/html.ejs",[],function(){return"<div ref=\"value\">\n  {% var filtered = ctx.values.filter(function(item) {return ctx.value === item.value || (typeof ctx.value === 'object' && ctx.value.hasOwnProperty(item.value) && ctx.value[item.value])}).map(function(item) { return ctx.t(item.label)}).join(', ') %}\n  {{ filtered }}\n  </div>\n"}),e("skylark-formio/templates/bootstrap/radio/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/resourceAdd/form.ejs",[],function(){return'<table class="table table-bordered">\n  <tbody>\n    <tr>\n      <td>\n        {{ctx.element}}\n      </td>\n    </tr>\n    <tr>\n      <td colspan="2">\n        <button class="btn btn-primary formio-button-add-resource" ref="addResource">\n          <i class="{{ctx.iconClass(\'plus\')}}"></i>\n          {{ctx.t(ctx.component.addResourceLabel || \'Add Resource\')}}\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/resourceAdd/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/select/form.ejs",[],function(){return'<select\n  ref="{{ctx.input.ref ? ctx.input.ref : \'selectContainer\'}}"\n  {{ ctx.input.multiple ? \'multiple\' : \'\' }}\n  {% for (var attr in ctx.input.attr) { %}\n  {{attr}}="{{ctx.input.attr[attr]}}"\n  {% } %}\n>{{ctx.selectOptions}}</select>\n<input type="text"\n       class="formio-select-autocomplete-input"\n       ref="autocompleteInput"\n       {% if (ctx.input.attr.autocomplete) { %}\n       autocomplete="{{ctx.input.attr.autocomplete}}"\n       {% } %}\n       tabindex="-1"\n/>\n'}),e("skylark-formio/templates/bootstrap/select/html.ejs",[],function(){return'<div ref="value">{% if (ctx.value) { %}{{ ctx.self.itemValueForHTMLMode(ctx.value) }}{% } else { %}-{% } %}</div>\n'}),e("skylark-formio/templates/bootstrap/select/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/selectOption/form.ejs",[],function(){return'<option {{ ctx.selected ? \'selected="selected"\' : \'\' }}\n  value="{{ctx.useId ? ctx.id : ctx.option.value}}"\n  {% for (var attr in ctx.attrs) { %}\n  {{attr}}="{{ctx.attrs[attr]}}"\n  {% } %}\n  >\n  {{ctx.t(ctx.option.label)}}\n</option>\n'}),e("skylark-formio/templates/bootstrap/selectOption/html.ejs",[],function(){return"{% if (ctx.selected) { %}{{ctx.t(ctx.option.label)}}{% } %}\n"}),e("skylark-formio/templates/bootstrap/selectOption/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/signature/form.ejs",[],function(){return'{{ctx.element}}\n<div\n  class="signature-pad-body"\n  style="width: {{ctx.component.width}};height: {{ctx.component.height}};padding:0;margin:0;"\n  tabindex="{{ctx.component.tabindex || 0}}"\n  ref="padBody"\n>\n  <a class="btn btn-sm btn-light signature-pad-refresh" ref="refresh">\n    <i class="{{ctx.iconClass(\'refresh\')}}"></i>\n  </a>\n  <canvas class="signature-pad-canvas" height="{{ctx.component.height}}" ref="canvas"></canvas>\n  {% if (ctx.required) { %}\n  <span class="form-control-feedback field-required-inline text-danger">\n    <i class="{{ctx.iconClass(\'asterisk\')}}"></i>\n  </span>\n  {% } %}\n  <img style="width: 100%;display: none;" ref="signatureImage">\n</div>\n{% if (ctx.component.footer) { %}\n  <div class="signature-pad-footer">\n    {{ctx.t(ctx.component.footer)}}\n  </div>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/signature/html.ejs",[],function(){return'<img style="width: 100%;" ref="signatureImage">\n'}),e("skylark-formio/templates/bootstrap/signature/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/survey/form.ejs",[],function(){return'<table class="table table-striped table-bordered">\n  <thead>\n    <tr>\n      <th></th>\n      {% ctx.component.values.forEach(function(value) { %}\n      <th style="text-align: center;">{{ctx.t(value.label)}}</th>\n      {% }) %}\n    </tr>\n  </thead>\n  <tbody>\n    {% ctx.component.questions.forEach(function(question) { %}\n    <tr>\n      <td>{{ctx.t(question.label)}}</td>\n      {% ctx.component.values.forEach(function(value) { %}\n      <td style="text-align: center;">\n        <input type="radio" name="{{ ctx.self.getInputName(question) }}" value="{{value.value}}" id="{{ctx.key}}-{{question.value}}-{{value.value}}" ref="input">\n      </td>\n      {% }) %}\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/survey/html.ejs",[],function(){return'<table class="table table-striped table-bordered">\n  <tbody>\n    {% ctx.component.questions.forEach(function(question) { %}\n    <tr>\n      <th>{{ctx.t(question.label)}}</th>\n      <td>\n      {% ctx.component.values.forEach(function(item) { %}\n        {% if (ctx.value && ctx.value.hasOwnProperty(question.value) && ctx.value[question.value] === item.value) { %}\n          {{ctx.t(item.label)}}\n        {% } %}\n      {% }) %}\n      </td>\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n'}),e("skylark-formio/templates/bootstrap/survey/index",["./form.ejs","./html.ejs"],function(e,t){"use strict";return{form:e,html:t}}),e("skylark-formio/templates/bootstrap/tab/flat.ejs",[],function(){return'{% ctx.component.components.forEach(function(tab, index) { %}\n  <div class="mb-2 card border">\n    <div class="card-header bg-default">\n      <h4 class="mb-0 card-title">{{ ctx.t(tab.label) }}</h4>\n    </div>\n    <div class="card-body">\n      {{ ctx.tabComponents[index] }}\n    </div>\n  </div>\n{% }) %}\n'}),e("skylark-formio/templates/bootstrap/tab/form.ejs",[],function(){return'<div class="card">\n  <div class="card-header">\n    <ul class="nav nav-tabs card-header-tabs">\n      {% ctx.component.components.forEach(function(tab, index) { %}\n      <li class="nav-item{{ ctx.currentTab === index ? \' active\' : \'\'}}" role="presentation" ref="{{ctx.tabLikey}}">\n        <a class="nav-link{{ ctx.currentTab === index ? \' active\' : \'\'}}" href="#{{tab.key}}" ref="{{ctx.tabLinkKey}}">{{ctx.t(tab.label)}}</a>\n      </li>\n      {% }) %}\n    </ul>\n  </div>\n  {% ctx.component.components.forEach(function(tab, index) { %}\n  <div\n    role="tabpanel"\n    class="card-body tab-pane{{ ctx.currentTab === index ? \' active\' : \'\'}}"\n    style="display: {{ctx.currentTab === index ? \'block\' : \'none\'}}"\n    ref="{{ctx.tabKey}}"\n  >\n    {{ctx.tabComponents[index]}}\n  </div>\n  {% }) %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/tab/index",["./flat.ejs","./form.ejs"],function(e,t){"use strict";return{flat:e,form:t}}),e("skylark-formio/templates/bootstrap/table/form.ejs",[],function(){return"<table class=\"table\n    {{ ctx.component.striped ? 'table-striped' : ''}}\n    {{ ctx.component.bordered ? 'table-bordered' : ''}}\n    {{ ctx.component.hover ? 'table-hover' : ''}}\n    {{ ctx.component.condensed ? 'table-sm' : ''}}\n  \">\n  {% if (ctx.component.header && ctx.component.header.length > 0) { %}\n  <thead>\n    <tr>\n      {% ctx.component.header.forEach(function(header) { %}\n      <th>{{ctx.t(header)}}</th>\n      {% }) %}\n    </tr>\n  </thead>\n  {% } %}\n  <tbody>\n    {% ctx.tableComponents.forEach(function(row, rowIndex) { %}\n    <tr ref=\"row-{{ctx.id}}\">\n      {% row.forEach(function(column, colIndex) { %}\n      <td ref=\"{{ctx.tableKey}}-{{rowIndex}}\"{% if (ctx.cellClassName) { %} class=\"{{ctx.cellClassName}}\"{% } %}>{{column}}</td>\n      {% }) %}\n    </tr>\n    {% }) %}\n  </tbody>\n</table>\n"}),e("skylark-formio/templates/bootstrap/table/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/tree/form.ejs",[],function(){return'{% if (ctx.node.isRoot) { %}\n  <div ref="root" class="list-group-item">\n{% } else { %}\n  <li ref="node" class="list-group-item col-sm-12 tree__level tree__level_{{ ctx.odd ? \'odd\' : \'even\' }}">\n{% } %}\n  {% if (ctx.content) { %}\n    <div ref="content" class="tree__node-content">\n      {{ ctx.content }}\n    </div>\n  {% } %}\n  {% if (ctx.childNodes && ctx.childNodes.length) { %}\n    <ul ref="childNodes" class="tree__node-children list-group row">\n      {{ ctx.childNodes.join(\'\') }}\n    </ul>\n  {% } %}\n{% if (ctx.node.isRoot) { %}\n  </div>\n{% } else { %}\n  </li>\n{% } %}\n'}),e("skylark-formio/templates/bootstrap/tree/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/tree/partials/edit.ejs",[],function(){return'<div class="node-edit">\n  <div ref="nodeEdit">{{ ctx.children }}</div>\n  {% if (!ctx.readOnly) { %}\n    <div class="node-actions">\n      <button ref="saveNode" class="btn btn-primary saveNode">{{ ctx.t(\'Save\') }}</button>\n      <button ref="cancelNode" class="btn btn-danger cancelNode">{{ ctx.t(\'Cancel\') }}</button>\n    </div>\n  {% } %}\n</div>\n'}),e("skylark-formio/templates/bootstrap/tree/partials/view.ejs",[],function(){return'<div class="row">\n  {% ctx.values.forEach(function(value) { %}\n    <div class="col-sm-2">\n      {{ value }}\n    </div>\n  {% }) %}\n  <div class="col-sm-3">\n    <div class="btn-group pull-right">\n      {% if (ctx.node.hasChildren) { %}\n        <button ref="toggleNode" class="btn btn-default btn-sm toggleNode">{{ ctx.t(ctx.node.collapsed ? \'Expand\' : \'Collapse\') }}</button>\n      {% } %}\n      {% if (!ctx.readOnly) { %}\n        <button ref="addChild" class="btn btn-default btn-sm addChild">{{ ctx.t(\'Add\') }}</button>\n        <button ref="editNode" class="btn btn-default btn-sm editNode">{{ ctx.t(\'Edit\') }}</button>\n        <button ref="removeNode" class="btn btn-danger btn-sm removeNode">{{ ctx.t(\'Delete\') }}</button>\n        {% if (ctx.node.revertAvailable) { %}\n          <button ref="revertNode" class="btn btn-danger btn-sm revertNode">{{ ctx.t(\'Revert\') }}</button>\n        {% } %}\n      {% } %}\n    </div>\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/tree/partials/index",["./edit.ejs","./view.ejs"],function(e,t){"use strict";return{treeView:{form:t},treeEdit:{form:e}}}),e("skylark-formio/templates/bootstrap/webform/form.ejs",[],function(){return'<div class="{{ctx.classes}}" ref="webform" novalidate>{{ctx.children}}</div>\n'}),e("skylark-formio/templates/bootstrap/webform/builder.ejs",[],function(){return'<div class="text-muted text-center p-2">{{ ctx.t(ctx.component.title) }}</div>\n'}),e("skylark-formio/templates/bootstrap/webform/index",["./form.ejs","./builder.ejs"],function(e,t){"use strict";return{form:e,builder:t}}),e("skylark-formio/templates/bootstrap/well/form.ejs",[],function(){return'<div class="card card-body bg-light">\n  <div ref="{{ctx.nestedKey}}">\n    {{ctx.children}}\n  </div>\n</div>\n'}),e("skylark-formio/templates/bootstrap/well/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/wizard/form.ejs",[],function(){return'<div class="{{ctx.className}}">\n  <div style="position: relative;">\n    {{ ctx.wizardHeader }}\n    <div class="wizard-page" ref="{{ctx.wizardKey}}">\n      {{ctx.components}}\n    </div>\n    {{ ctx.wizardNav }}\n  </div>\n</div>'}),e("skylark-formio/templates/bootstrap/wizard/builder.ejs",[],function(){return'<div class="text-muted text-center p-2">{{ ctx.t(ctx.component.title) }}</div>\n'}),e("skylark-formio/templates/bootstrap/wizard/index",["./form.ejs","./builder.ejs"],function(e,t){"use strict";return{form:e,builder:t}}),e("skylark-formio/templates/bootstrap/wizardHeader/form.ejs",[],function(){return'<nav aria-label="navigation" id="{{ ctx.wizardKey }}-header">\n  <ul class="pagination">\n    {% ctx.panels.forEach(function(panel, index) { %}\n    <li class="page-item{{ctx.currentPage === index ? \' active\' : \'\'}}" style="">\n      <span class="page-link" ref="{{ctx.wizardKey}}-link">{{panel.title}}</span>\n    </li>\n    {% }) %}\n  </ul>\n</nav>\n'}),e("skylark-formio/templates/bootstrap/wizardHeader/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/wizardNav/form.ejs",[],function(){return'<ul class="list-inline" id="{{ ctx.wizardKey }}-nav">\n  {% if (ctx.buttons.cancel) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-secondary btn-wizard-nav-cancel" ref="{{ctx.wizardKey}}-cancel">{{ctx.t(\'cancel\')}}</button>\n  </li>\n  {% } %}\n  {% if (ctx.buttons.previous) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-previous" ref="{{ctx.wizardKey}}-previous">{{ctx.t(\'previous\')}}</button>\n  </li>\n  {% } %}\n  {% if (ctx.buttons.next) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-next" ref="{{ctx.wizardKey}}-next">{{ctx.t(\'next\')}}</button>\n  </li>\n  {% } %}\n  {% if (ctx.buttons.submit) { %}\n  <li class="list-inline-item">\n    <button class="btn btn-primary btn-wizard-nav-submit" ref="{{ctx.wizardKey}}-submit">{{ctx.t(\'submit\')}}</button>\n  </li>\n  {% } %}\n</ul>\n'}),e("skylark-formio/templates/bootstrap/wizardNav/index",["./form.ejs"],function(e){"use strict";return{form:e}}),e("skylark-formio/templates/bootstrap/cssClasses",[],function(){"use strict";return{"border-default":"","formio-tab-panel-active":"active","formio-tab-link-active":"active","formio-tab-link-container-active":"active"}}),e("skylark-formio/templates/bootstrap/index",["./address/index","./builder/index","./builderComponent/index","./builderComponents/index","./builderEditForm/index","./builderPlaceholder/index","./builderSidebar/index","./builderSidebarGroup/index","./builderWizard/index","./button/index","./checkbox/index","./columns/index","./component/index","./componentModal/index","./components/index","./container/index","./datagrid/index","./day/index","./dialog/index","./editgrid/index","./field/index","./fieldset/index","./file/index","./html/index","./icon/index","./iconClass","./input/index","./label/index","./loader/index","./loading/index","./map/index","./message/index","./multipleMasksInput/index","./multiValueRow/index","./multiValueTable/index","./panel/index","./pdf/index","./pdfBuilder/index","./pdfBuilderUpload/index","./radio/index","./resourceAdd/index","./select/index","./selectOption/index","./signature/index","./survey/index","./tab/index","./table/index","./tree/index","./tree/partials/index","./webform/index","./well/index","./wizard/index","./wizardHeader/index","./wizardNav/index","./cssClasses"],function(e,t,n,i,o,s,r,a,l,c,d,u,h,p,m,f,g,y,b,v,k,w,x,C,S,E,A,T,D,M,V,_,R,P,F,O,L,I,N,j,U,z,B,$,q,H,W,K,Y,G,J,Z,X,Q,ee){"use strict";return{transform(e,t){if(!t)return t;switch(e){case"class":return this.cssClasses.hasOwnProperty(t.toString())?this.cssClasses[t.toString()]:t}return t},defaultIconset:"fa",iconClass:E,cssClasses:ee,address:e,builder:t,builderComponent:n,builderComponents:i,builderEditForm:o,builderPlaceholder:s,builderSidebar:r,builderSidebarGroup:a,builderWizard:l,button:c,checkbox:d,columns:u,component:h,componentModal:p,components:m,container:f,datagrid:g,day:y,dialog:b,editgrid:v,field:k,fieldset:w,file:x,html:C,icon:S,input:A,label:T,loader:D,loading:M,map:V,message:_,multipleMasksInput:R,multiValueRow:P,multiValueTable:F,panel:O,pdf:L,pdfBuilder:I,pdfBuilderUpload:N,radio:j,resourceAdd:U,select:z,selectOption:B,signature:$,survey:q,tab:H,table:W,tree:K,...Y,webform:G,well:J,wizard:Z,wizardHeader:X,wizardNav:Q}}),e("skylark-formio/templates/index",["./bootstrap/index"],function(e,t,n){"use strict";return{bootstrap:e}}),e("skylark-formio/templates/Templates",["./index","skylark-lodash"],function(e,t){"use strict";return class n{static get templates(){return n._templates||(n._templates=e),n._templates}static addTemplate(e,t){n.templates[e]=t}static extendTemplate(e,i){n.templates[e]=t.merge({},n.templates[e],i)}static setTemplate(e,t){n.addTemplate(e,t)}static set current(e){const i=n.current;n._current=t.merge({},i,e)}static get current(){return n._current?n._current:n.defaultTemplates}static get defaultTemplates(){return n.templates.bootstrap}static set framework(e){n.templates.hasOwnProperty(e)&&(n._framework=e,n._current=n.templates[e])}static get framework(){return n._framework}}}),e("skylark-formio/vendors/vanilla-text-mask/adjustCaretPosition",[],function(){const e=[],t="";return function({previousConformedValue:n=t,previousPlaceholder:i=t,currentCaretPosition:o=0,conformedValue:s,rawValue:r,placeholderChar:a,placeholder:l,indexesOfPipedChars:c=e,caretTrapIndexes:d=e}){if(0===o||!r.length)return 0;const u=r.length,h=n.length,p=l.length,m=s.length,f=u-h,g=f>0;if(f>1&&!g&&0!==h)return o;let y,b,v=0;if(!g||n!==s&&s!==l){const e=s.toLowerCase(),n=r.toLowerCase(),d=n.substr(0,o).split(t),u=d.filter(t=>-1!==e.indexOf(t));b=u[u.length-1];const h=i.substr(0,u.length).split(t).filter(e=>e!==a).length,p=l.substr(0,u.length).split(t).filter(e=>e!==a).length,f=p!==h,k=void 0!==i[u.length-1]&&void 0!==l[u.length-2]&&i[u.length-1]!==a&&i[u.length-1]!==l[u.length-1]&&i[u.length-1]===l[u.length-2];!g&&(f||k)&&h>0&&l.indexOf(b)>-1&&void 0!==r[o]&&(y=!0,b=r[o]);const w=c.map(t=>e[t]),x=w.filter(e=>e===b).length,C=u.filter(e=>e===b).length,S=l.substr(0,l.indexOf(a)).split(t).filter((e,t)=>e===b&&r[t]!==e).length,E=S+C+x+(y?1:0);let A=0;for(let t=0;t<m;t++){const n=e[t];if(v=t+1,n===b&&A++,A>=E)break}}else v=o-f;if(g){let e=v;for(let t=v;t<=p;t++)if(l[t]===a&&(e=t),l[t]===a||-1!==d.indexOf(t)||t===p)return e}else if(y){for(let e=v-1;e>=0;e--)if(s[e]===b||-1!==d.indexOf(e)||0===e)return e}else for(let e=v;e>=0;e--)if(l[e-1]===a||-1!==d.indexOf(e)||0===e)return e}}),e("skylark-formio/vendors/vanilla-text-mask/createTextMaskInputElement",["./utilities","./constants","./adjustCaretPosition","./conformToMask"],function(e,t,n,i){const{convertMaskToPlaceholder:o,isArray:s,processCaretTraps:r,isString:a}=e,{strFunction:l}=t,c=t.placeholderChar,d="",u="none",h="object",p="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(e){const t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update(s,{inputElement:f,mask:g,guide:y,pipe:b,placeholderChar:v=c,keepCharPositions:k=!1,showMask:w=!1}=e){if(void 0===s&&(s=f.value),s===t.previousConformedValue)return;let x,C;if(typeof g===h&&void 0!==g.pipe&&void 0!==g.mask&&(b=g.pipe,g=g.mask),g instanceof Array&&(x=o(g,v)),!1===g)return;const S=function(e){if(a(e))return e;if(isNumber(e))return String(e);if(void 0===e||null===e)return d;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+`received was:\n\n ${JSON.stringify(e)}`)}(s),{selectionEnd:E}=f,{previousConformedValue:A,previousPlaceholder:T}=t;let D;if(typeof g===l){if(!1===(C=g(S,{currentCaretPosition:E,previousConformedValue:A,placeholderChar:v})))return;const{maskWithoutCaretTraps:e,indexes:t}=r(C);D=t,x=o(C=e,v)}else C=g;const M={previousConformedValue:A,guide:y,placeholderChar:v,pipe:b,placeholder:x,currentCaretPosition:E,keepCharPositions:k},{conformedValue:V}=i(S,C,M),_=typeof b===l;let R={};_&&(!1===(R=b(V,{rawValue:S,...M}))?R={value:A,rejected:!0}:a(R)&&(R={value:R}));const P=_?R.value:V,F=n({previousConformedValue:A,previousPlaceholder:T,conformedValue:P,placeholder:x,rawValue:S,currentCaretPosition:E,placeholderChar:v,indexesOfPipedChars:R.indexesOfPipedChars,caretTrapIndexes:D}),O=P===x&&0===F,L=w?x:d,I=O?L:P;var N,j;(t.previousConformedValue=I,t.previousPlaceholder=x,f.value!==I)&&(f.value=I,N=f,j=F,document.activeElement===N&&(p?m(()=>N.setSelectionRange(j,j,u),0):N.setSelectionRange(j,j,u)))}}}}),e("skylark-formio/vendors/vanilla-text-mask/maskInput",["./createTextMaskInputElement"],function(e){return function(t){const{inputElement:n}=t,i=e(t),o=({target:{value:e}})=>i.update(e);return n.addEventListener("input",o),i.update(n.value),{textMaskInputElement:i,destroy(){n.removeEventListener("input",o)}}}}),e("skylark-formio/Element",["./EventEmitter","./Formio","./utils/utils","skylark-i18next","skylark-lodash","skylark-moment","./vendors/vanilla-text-mask/maskInput"],function(e,t,n,i,o,s,r){"use strict";return class{constructor(t){this.options=Object.assign({language:"en",highlightErrors:!0,componentErrorClass:"formio-error-wrapper",componentWarningClass:"formio-warning-wrapper",row:"",namespace:"formio"},t||{}),this.id=n.getRandomComponentId(),this.eventHandlers=[],this.i18next=this.options.i18next||i,this.events=t&&t.events?t.events:new e({wildcard:!1,maxListeners:0}),this.defaultMask=null}on(e,t,n,i=!1){if(!this.events)return;const o=`${this.options.namespace}.${e}`;return t.id=this.id,t.internal=n,this.events[i?"once":"on"](o,t)}once(e,t,n){return this.on(e,t,n,!0)}onAny(e){if(this.events)return this.events.onAny(e)}off(e){if(!this.events)return;const t=`${this.options.namespace}.${e}`;o.each(this.events.listeners(t),e=>{e&&e.id===this.id&&this.events.off(t,e)})}emit(e,...t){this.events&&this.events.emit(`${this.options.namespace}.${e}`,...t)}addEventListener(e,t,n,i){if(e)return i||this.eventHandlers.push({id:this.id,obj:e,type:t,func:n}),"addEventListener"in e?e.addEventListener(t,n,!1):"attachEvent"in e&&e.attachEvent(`on${t}`,n),this}removeEventListener(e,t,n=null){const i=[];return this.eventHandlers.forEach((o,s)=>{o.id!==this.id||!e.removeEventListener||o.type!==t||n&&o.func!==n||(e.removeEventListener(t,o.func),i.push(s))}),i.length&&o.pullAt(this.eventHandlers,i),this}removeEventListeners(){this.eventHandlers.forEach(e=>{this.id===e.id&&e.type&&e.obj&&e.obj.removeEventListener&&e.obj.removeEventListener(e.type,e.func)}),this.eventHandlers=[]}removeAllEvents(e){o.each(this.events._events,(t,n)=>{o.each(t,t=>{t&&this.id===t.id&&(e||t.internal)&&this.events.off(n,t)})})}destroy(){this.removeEventListeners(),this.removeAllEvents()}appendTo(e,t){return t.appendChild(e),this}prependTo(e,t){if(t)if(t.firstChild)try{t.insertBefore(e,t.firstChild)}catch(n){console.warn(n),t.appendChild(e)}else t.appendChild(e);return this}removeChildFrom(e,t){if(t&&t.contains(e))try{t.removeChild(e)}catch(e){console.warn(e)}return this}ce(e,t,n=null){const i=document.createElement(e);return t&&this.attr(i,t),this.appendChild(i,n),i}appendChild(e,t){return Array.isArray(t)?t.forEach(t=>this.appendChild(e,t)):t instanceof HTMLElement||t instanceof Text?e.appendChild(t):t&&e.appendChild(this.text(t.toString())),this}maskPlaceholder(e){return e.map(e=>e instanceof RegExp?"_":e).join("")}setInputMask(e,t,i){if(e&&t){const o=n.getInputMask(t);this.defaultMask=o;try{e.mask&&e.mask.destroy(),e.mask=r({inputElement:e,mask:o})}catch(e){console.warn(e)}o.numeric&&e.setAttribute("pattern","\\d*"),i&&e.setAttribute("placeholder",this.maskPlaceholder(o))}}t(e,t){(t=t||{}).nsSeparator="::",t.keySeparator=".|.",t.pluralSeparator="._.",t.contextSeparator="._.";const n=this.i18next.t(e,t);return n||e}text(e){return document.createTextNode(this.t(e))}attr(e,t){e&&o.each(t,(t,n)=>{void 0!==t&&(0===n.indexOf("on")?this.addEventListener(e,n.substr(2).toLowerCase(),t):e.setAttribute(n,t))})}hasClass(e,t){return!!e&&(t=` ${t} `,` ${e.className} `.replace(/[\n\t\r]/g," ").indexOf(t)>-1)}addClass(e,t){if(!e)return this;const n=e.getAttribute("class");return n.includes(t)||e.setAttribute("class",`${n} ${t}`),this}removeClass(e,t){if(!e||!t)return this;let n=e.getAttribute("class");return n&&(n=n.replace(new RegExp(` ${t}`,"g"),""),e.setAttribute("class",n)),this}empty(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}evalContext(e){return Object.assign({_:o,utils:n,util:n,user:t.getUser(),moment:s,instance:this,self:this,token:t.getToken({decode:!0}),config:this.root&&this.root.form&&this.root.form.config?this.root.form.config:{}},e,o.get(this.root,"options.evalContext",{}))}interpolate(e,t){return n.interpolate(e,this.evalContext(t))}evaluate(e,t,i,o){return n.evaluate(e,this.evalContext(t),i,o)}hook(){const e=arguments[0];if(this.options&&this.options.hooks&&this.options.hooks[e])return this.options.hooks[e].apply(this,Array.prototype.slice.call(arguments,1));{const e="function"==typeof arguments[arguments.length-1]?arguments[arguments.length-1]:null;return e?e(null,arguments[1]):arguments[1]}}}}),e("skylark-formio/components/_classes/componentModal/ComponentModal",[],function(){"use strict";return class{static render(e,t,n){const i=e.renderTemplate("component",t,n);return e.renderTemplate("componentModal",{...t,children:i})}constructor(e,t){this.component=e,this.modal=t,this.currentValue=this.component.dataValue,this.dataLoaded=!1,this.init()}get refs(){return this.component.refs}init(){this.loadRefs()}setValue(e){this.dataLoaded||(this.currentValue=e,this.dataLoaded=!0,this.updateView())}setOpenModalElement(e){this.openModalTemplate=e,this.component.setContent(this.refs.openModalWrapper,e),this.loadRefs(),this.setEventListeners()}loadRefs(){this.component.loadRefs(this.modal,{modalOverlay:"single",modalContents:"single",modalClose:"single",openModalWrapper:"single",openModal:"single",modalSave:"single",modalWrapper:"single"})}setEventListeners(){this.component.addEventListener(this.refs.openModal,"click",this.openModalHandler.bind(this)),this.component.addEventListener(this.refs.modalOverlay,"click",this.closeModalHandler.bind(this)),this.component.addEventListener(this.refs.modalClose,"click",this.closeModalHandler.bind(this)),this.component.addEventListener(this.refs.modalSave,"click",this.saveModalValueHandler.bind(this))}setOpenEventListener(){this.component.loadRefs(this.modal,{openModal:"single"}),this.component.addEventListener(this.refs.openModal,"click",this.openModalHandler.bind(this))}openModalHandler(e){e.preventDefault(),this.refs.modalWrapper.classList.remove("component-rendering-hidden")}updateView(){const e=this.currentValue===this.component.defaultValue?this.openModalTemplate:this.component.getModalPreviewTemplate();this.component.setContent(this.refs.openModalWrapper,e),this.setOpenEventListener()}closeModal(){this.refs.modalWrapper.classList.add("component-rendering-hidden"),this.updateView()}closeModalHandler(e){e.preventDefault(),this.component.setValue(this.currentValue),this.closeModal()}saveModalValueHandler(e){e.preventDefault(),this.currentValue=this.component.dataValue,this.closeModal()}}}),e("skylark-formio/components/_classes/component/Component",["../../../vendors/vanilla-text-mask/conformToMask","../../../vendors/getify/npo","../../../vendors/tooltip-js/Tooltip","skylark-lodash","../../../vendors/ismobilejs/isMobile","../../../Formio","../../../utils/utils","../../../validator/Validator","../../../templates/Templates","../../../utils/utils","../../../Element","../componentModal/ComponentModal"],function(e,t,n,i,o,s,r,a,l,c,d,u){"use strict";const h="https://cdn.form.io/quill/1.3.7";return class p extends d{static schema(...e){return i.merge({input:!0,key:"",placeholder:"",prefix:"",customClass:"",suffix:"",multiple:!1,defaultValue:null,protected:!1,unique:!1,persistent:!0,hidden:!1,clearOnHide:!0,refreshOn:"",redrawOn:"",tableView:!1,modalEdit:!1,label:"",labelPosition:"top",description:"",errorLabel:"",tooltip:"",hideLabel:!1,tabindex:"",disabled:!1,autofocus:!1,dbIndex:!1,customDefaultValue:"",calculateValue:"",widget:null,attributes:{},validateOn:"change",validate:{required:!1,custom:"",customPrivate:!1,strictDateValidation:!1,multiple:!1,unique:!1},conditional:{show:null,when:null,eq:""},overlay:{style:"",left:"",top:"",width:"",height:""},allowCalculateOverride:!1,encrypted:!1,showCharCount:!1,showWordCount:!1,properties:{},allowMultipleMasks:!1},...e)}static tableView(e,t){}constructor(e,t,n){super(Object.assign({renderMode:"form",attachMode:"full"},t||{})),this._hasCondition=null,this.refs={},e&&this.options.components&&this.options.components[e.type]&&i.merge(e,this.options.components[e.type]),this.validator=a,this.path="",this.component=this.mergeSchema(e||{}),this.originalComponent=c.fastCloneDeep(this.component),this.attached=!1,this.rendered=!1,this._data=n||{},this.component.id=this.id,this.error="",this.tooltip="",this.row=this.options.row,this._disabled=!!c.boolValue(this.component.disabled)&&this.component.disabled,this.root=this.options.root,this.pristine=!0,this.parent=this.options.parent,this.options.name=this.options.name||"data",this.validators=["required","minLength","maxLength","minWords","maxWords","custom","pattern","json","mask"],this._path="",this._parentVisible=!this.options.hasOwnProperty("parentVisible")||this.options.parentVisible,this._visible=this._parentVisible&&this.conditionallyVisible(null,n),this._parentDisabled=!1;let o=null,s=[];const r=i.debounce((...e)=>(this.root&&(this.root.changing=!1),s=[],!e[1]&&o&&(e[1]=o),i.isEmpty(e[0])&&o&&(e[0]=o.flags),o=null,this.onChange(...e)),100);this.triggerChange=((...e)=>(e[1]&&(o=e[1]),this.root&&(this.root.changing=!0),e.length&&(s=e),r(...s))),this.triggerRedraw=i.debounce(this.redraw.bind(this),100),this.tooltips=[],this.invalid=!1,this.component&&(this.type=this.component.type,this.allowData&&this.key&&(this.options.name+=`[${this.key}]`,!this.visible&&this.component.clearOnHide||(this.hasValue()?this.dataValue=this.dataValue:this.dataValue=this.defaultValue)),this.info=this.elementInfo()),this.hook("component"),this.options.skipInit||this.init()}get data(){return this._data}set data(e){this._data=e}mergeSchema(e={}){return i.defaultsDeep(e,this.defaultSchema)}get ready(){return t.resolve(this)}get labelInfo(){const e={};return e.hidden=this.labelIsHidden(),e.className="",e.labelPosition=this.component.labelPosition,e.tooltipClass=`${this.iconClass("question-sign")} text-muted`,this.hasInput&&this.component.validate&&c.boolValue(this.component.validate.required)&&(e.className+=" field-required"),e.hidden&&(e.className+=" control-label--hidden"),this.info.attr.id&&(e.for=this.info.attr.id),e}init(){this.disabled=this.shouldDisabled}destroy(){super.destroy(),this.detach()}get shouldDisabled(){return this.options.readOnly||this.component.disabled||this.options.hasOwnProperty("disabled")&&this.options.disabled[this.key]}get isInputComponent(){return!this.component.hasOwnProperty("input")||this.component.input}get allowData(){return this.hasInput}get hasInput(){return this.isInputComponent||this.refs.input&&this.refs.input.length}get defaultSchema(){return p.schema()}get key(){return i.get(this.component,"key","")}set parentVisible(e){this._parentVisible!==e&&(this._parentVisible=e,this.clearOnHide(),this.redraw())}get parentVisible(){return this._parentVisible}set parentDisabled(e){this._parentDisabled!==e&&(this._parentDisabled=e,this.clearOnHide(),this.redraw())}get parentDisabled(){return this._parentDisabled}set visible(e){this._visible!==e&&(this._visible=e,this.clearOnHide(),this.redraw())}get visible(){return!(!this.builderMode&&!this.options.showHiddenFields)||(!this.options.hide||!this.options.hide[this.component.key])&&(!(!this.options.show||!this.options.show[this.component.key])||this._visible&&this._parentVisible)}get currentForm(){return this._currentForm}set currentForm(e){this._currentForm=e}get fullMode(){return"full"===this.options.attachMode}get builderMode(){return"builder"===this.options.attachMode}get calculatedPath(){if(this._path)return this._path;if(this._path=this.key,!this.root)return this._path;let e=this.parent;for(;e&&e.id!==this.root.id;)(["datagrid","container","editgrid"].includes(e.type)||e.tree)&&(this._path=`${e.key}.${this._path}`),e=e.parent;return this._path}get labelPosition(){return this.component.labelPosition}get labelWidth(){return this.component.labelWidth||30}get labelMargin(){return this.component.labelMargin||3}get isAdvancedLabel(){return["left-left","left-right","right-left","right-right"].includes(this.labelPosition)}get labelPositions(){return this.labelPosition.split("-")}rightDirection(e){return"right"===e}getLabelInfo(){const e=this.rightDirection(this.labelPositions[0]),t=this.rightDirection(this.labelPositions[1]),n=`\n      flex: ${this.labelWidth};\n      ${e?"margin-left":"margin-right"}:${this.labelMargin}%;\n    `,i=`\n      flex: ${100-this.labelWidth-this.labelMargin};\n    `;return{isRightPosition:e,isRightAlign:t,labelStyles:n,contentStyles:i}}getModifiedSchema(e,t,n){const o={};return t?(i.each(e,(e,s)=>{if(!i.isArray(e)&&i.isObject(e)&&t.hasOwnProperty(s)){const n=this.getModifiedSchema(e,t[s],!0);i.isEmpty(n)||(o[s]=n)}else i.isArray(e)?0!==e.length&&(o[s]=e):(!n&&"type"===s||!n&&"key"===s||!n&&"label"===s||!n&&"input"===s||!n&&"tableView"===s||""!==e&&!t.hasOwnProperty(s)||""!==e&&e!==t[s])&&(o[s]=e)}),o):e}get schema(){return c.fastCloneDeep(this.getModifiedSchema(i.omit(this.component,"id"),this.defaultSchema))}t(e,t){if(!e)return"";(t=t||{}).data=this.rootValue,t.row=this.data,t.component=this.component,t.nsSeparator="::",t.keySeparator=".|.",t.pluralSeparator="._.",t.contextSeparator="._.";const n=this.i18next.t(e,t);return n||e}labelIsHidden(){return!this.component.label||!this.inDataGrid&&this.component.hideLabel||this.inDataGrid&&!this.component.dataGridLabel||this.options.inputsOnly}get transform(){return l.current.hasOwnProperty("transform")?l.current.transform.bind(l.current):(e,t)=>t}getTemplate(e,t){t=Array.isArray(t)?t:[t],e=Array.isArray(e)?e:[e],t.includes("form")||t.push("form");let n=null;if(this.options.templates&&(n=this.checkTemplate(this.options.templates,e,t)))return n;const i=this.options.template?l.templates[this.options.template]:l.current;if(n=this.checkTemplate(i,e,t))return n;const o=e[e.length-1],s=l.defaultTemplates[o];if(!s)return`Unknown template: ${o}`;const r=this.checkTemplateMode(s,t);return r||s.form}checkTemplate(e,t,n){for(const i of t){const t=e[i];if(t){const e=this.checkTemplateMode(t,n);if(e)return e}}return null}checkTemplateMode(e,t){for(const n of t){const t=e[n];if(t)return t}return null}renderTemplate(e,t={},n){const i=n||this.options.renderMode||"form";t.component=this.component,t.self=this,t.options=this.options,t.readOnly=this.options.readOnly,t.iconClass=this.iconClass.bind(this),t.t=this.t.bind(this),t.transform=this.transform,t.id=t.id||this.id,t.key=t.key||this.key,t.value=t.value||this.dataValue,t.disabled=this.disabled,t.builder=this.builderMode,t.render=((...e)=>(console.warn("Form.io 'render' template function is deprecated.\n      If you need to render template (template A) inside of another template (template B),\n      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B"),this.renderTemplate(...e))),t.label=this.labelInfo,t.tooltip=this.interpolate(this.component.tooltip||"").replace(/(?:\r\n|\r|\n)/g,"<br />");const o=[`${e}-${this.component.type}-${this.key}`,`${e}-${this.component.type}`,`${e}-${this.key}`,`${e}`];return this.hook(`render${e.charAt(0).toUpperCase()+e.substring(1,e.length)}`,this.interpolate(this.getTemplate(o,i),t),t,i)}sanitize(e){return r.sanitize(e,this.options)}renderString(e,t){return e?this.interpolate(e,t):""}performInputMapping(e){return e}getBrowserLanguage(){const e=window.navigator,t=["language","browserLanguage","systemLanguage","userLanguage"];let n;if(Array.isArray(e.languages))for(let t=0;t<e.languages.length;t++)if((n=e.languages[t])&&n.length)return n.split(";")[0];for(let i=0;i<t.length;i++)if((n=e[t[i]])&&n.length)return n.split(";")[0];return null}beforePage(){return t.resolve(!0)}beforeNext(){return this.beforePage(!0)}beforeSubmit(){return t.resolve(!0)}get submissionTimezone(){return this.options.submissionTimezone=this.options.submissionTimezone||i.get(this.root,"options.submissionTimezone"),this.options.submissionTimezone}loadRefs(e,t){for(const n in t)"single"===t[n]?this.refs[n]=e.querySelector(`[ref="${n}"]`):this.refs[n]=e.querySelectorAll(`[ref="${n}"]`)}setOpenModalElement(){const e=`\n      <label class="control-label">${this.component.label}</label><br>\n      <button lang='en' class='btn btn-light btn-md open-modal-button' ref='openModal'>Click to set value</button>\n    `;this.componentModal.setOpenModalElement(e)}getModalPreviewTemplate(){return`\n      <label class="control-label">${this.component.label}</label><br>\n      <button lang='en' class='btn btn-light btn-md open-modal-button' ref='openModal'>${this.getValueAsString(this.dataValue)}</button>`}build(e){return e=e||this.element,this.empty(e),this.setContent(e,this.render()),this.attach(e)}render(e=`Unknown component: ${this.component.type}`,t=!1){const n=this.visible;return this.rendered=!0,!this.builderMode&&this.component.modalEdit?u.render(this,{visible:n,id:this.id,classes:this.className,styles:this.customStyle,children:e},t):this.renderTemplate("component",{visible:n,id:this.id,classes:this.className,styles:this.customStyle,children:e},t)}attach(e){!this.builderMode&&this.component.modalEdit&&(this.componentModal=new u(this,e),this.setOpenModalElement()),this.attached=!0,this.element=e,e.component=this,this.element.id&&(this.id=this.element.id),this.loadRefs(e,{messageContainer:"single",tooltip:"multiple"}),this.refs.tooltip.forEach((e,t)=>{const i=this.interpolate(e.getAttribute("data-title")||this.t(this.component.tooltip)).replace(/(?:\r\n|\r|\n)/g,"<br />");this.tooltips[t]=new n(e,{trigger:"hover click focus",placement:"right",html:!0,title:i,template:'\n          <div class="tooltip" style="opacity: 1;" role="tooltip">\n            <div class="tooltip-arrow"></div>\n            <div class="tooltip-inner"></div>\n          </div>'})}),this.attachLogic(),this.autofocus(),this.hook("attachComponent",e,this);const i=this.component.type;return i&&this.hook(`attach${i.charAt(0).toUpperCase()+i.substring(1,i.length)}`,e,this),t.resolve()}addShortcut(e,t){e&&this.root&&this.root!==this&&(t||(t=this.component.shortcut),this.root.addShortcut(e,t))}removeShortcut(e,t){e&&this.root!==this&&(t||(t=this.component.shortcut),this.root.removeShortcut(e,t))}detach(){this.refs={},this.removeEventListeners(),this.detachLogic(),this.tooltip&&this.tooltip.dispose()}checkRefresh(e,t){const n=i.get(t,"instance.calculatedPath",!1);n&&this.calculatedPath===n||("data"===e?this.refresh(this.data):n&&n===e&&t&&t.instance&&this.inContext(t.instance)&&this.refresh(t.value))}checkRefreshOn(e){const t=this.component.refreshOn||this.component.redrawOn;t&&(Array.isArray(t)?t.forEach(t=>{this.checkRefresh(t,e)}):this.checkRefresh(t,e))}refresh(e){this.hasOwnProperty("refreshOnValue")?this.refreshOnChanged=!i.isEqual(e,this.refreshOnValue):this.refreshOnChanged=!0,this.refreshOnValue=c.fastCloneDeep(e),this.refreshOnChanged&&(this.component.clearOnRefresh&&this.setValue(null),this.triggerRedraw())}inContext(e){if(e.data===this.data)return!0;let t=this.parent;for(;t;){if(t.data===e.data)return!0;t=t.parent}return!1}get viewOnly(){return this.options.readOnly&&this.options.viewAsHtml}createViewOnlyElement(){return this.element=this.ce("dl",{id:this.id}),this.element&&(this.element.component=this),this.element}get defaultViewOnlyValue(){return"-"}getWidgetValueAsString(e){const t=!this.refs.input||!this.refs.input[0]||!this.refs.input[0].widget;if(!e||t)return e;if(Array.isArray(e)){const t=[];return e.forEach((e,n)=>{const i=this.refs.input[n]&&this.refs.input[n].widge;i&&t.push(i.getValueAsString(e))}),t}const n=this.refs.input[0].widget;return n.getValueAsString(e)}getValueAsString(e){return e?(e=this.getWidgetValueAsString(e),Array.isArray(e)?e.join(", "):i.isPlainObject(e)?JSON.stringify(e):null===e||void 0===e?"":e.toString()):""}getView(e){return this.component.protected?"--- PROTECTED ---":this.getValueAsString(e)}updateItems(...e){this.restoreValue(),this.onChange(...e)}itemValue(e,t=!1){if(i.isObject(e)){if(this.valueProperty)return i.get(e,this.valueProperty);if(t)return e.value}return e}itemValueForHTMLMode(e){if(Array.isArray(e)){const t=e.map(e=>Array.isArray(e)?this.itemValueForHTMLMode(e):this.itemValue(e));return t.join(", ")}return this.itemValue(e)}createModal(e,t){const n=this.ce("div",t||{});this.setContent(n,this.renderTemplate("dialog")),n.refs={},this.loadRefs.call(n,n,{dialogOverlay:"single",dialogContents:"single",dialogClose:"single"}),n.refs.dialogContents.appendChild(e),document.body.appendChild(n),document.body.classList.add("modal-open"),n.close=(()=>{document.body.classList.remove("modal-open"),n.dispatchEvent(new CustomEvent("close"))}),this.addEventListener(n,"close",()=>this.removeChildFrom(n,document.body));const i=e=>{e.preventDefault(),n.close()};return this.addEventListener(n.refs.dialogOverlay,"click",i),this.addEventListener(n.refs.dialogClose,"click",i),n}get className(){let e=this.hasInput?"form-group has-feedback ":"";return e+=`formio-component formio-component-${this.component.type} `,this.key&&(e+=`formio-component-${this.key} `),this.component.multiple&&(e+="formio-component-multiple "),this.component.customClass&&(e+=this.component.customClass),this.hasInput&&this.component.validate&&c.boolValue(this.component.validate.required)&&(e+=" required"),this.labelIsHidden()&&(e+=" formio-component-label-hidden"),this.visible||(e+=" formio-hidden"),e}get customStyle(){let e="";return i.each(this.component.style,(t,n)=>{""!==t&&(e+=`${n}:${t};`)}),e}get isMobile(){return o()}getElement(){return this.element}evalContext(e){return super.evalContext(Object.assign({component:this.component,row:this.data,rowIndex:this.rowIndex,data:this.rootValue,iconClass:this.iconClass.bind(this),submission:this.root?this.root._submission:{},form:this.root?this.root._form:{}},e))}setPristine(e){this.pristine=e}removeValue(e){this.splice(e),this.redraw(),this.restoreValue(),this.triggerRootChange()}iconClass(e,t){const n=this.options.iconset||l.current.defaultIconset||"fa";return l.current.hasOwnProperty("iconClass")?l.current.iconClass(n,e,t):"fa"===this.options.iconset?l.defaultTemplates.iconClass(n,e,t):e}get name(){return this.t(this.component.label||this.component.placeholder||this.key)}get errorLabel(){return this.t(this.component.errorLabel||this.component.label||this.component.placeholder||this.key)}errorMessage(e){return this.component.errors&&this.component.errors[e]?this.component.errors[e]:e}setContent(e,t){return e instanceof HTMLElement&&(e.innerHTML=this.sanitize(t),!0)}redraw(){if(!this.element||!this.element.parentNode)return t.resolve();this.clear();const e=this.element.parentNode,n=Array.prototype.indexOf.call(e.children,this.element);return this.element.outerHTML=this.sanitize(this.render()),this.element=e.children[n],this.attach(this.element)}rebuild(){return this.destroy(),this.init(),this.redraw()}removeEventListeners(){super.removeEventListeners(),this.tooltips.forEach(e=>e.dispose()),this.tooltips=[],this.refs.input=[]}hasClass(e,t){if(e)return super.hasClass(e,this.transform("class",t))}addClass(e,t){if(e)return super.addClass(e,this.transform("class",t))}removeClass(e,t){if(e)return super.removeClass(e,this.transform("class",t))}hasCondition(){return null!==this._hasCondition?this._hasCondition:(this._hasCondition=r.hasCondition(this.component),this._hasCondition)}conditionallyVisible(e,t){return e=e||this.rootValue,t=t||this.data,this.builderMode||!this.hasCondition()?!this.component.hidden:(e=e||(this.root?this.root.data:{}),this.checkCondition(t,e))}checkCondition(e,t){return r.checkCondition(this.component,e||this.data,t||this.rootValue,this.root?this.root._form:{},this)}checkComponentConditions(e,t,n){e=e||this.rootValue,t=t||{},n=n||this.data,!this.builderMode&&this.fieldLogic(e,n)&&this.redraw();const i=this.conditionallyVisible(e,n);return this.visible!==i&&(this.visible=i),i}checkConditions(e,t,n){return e=e||this.rootValue,t=t||{},n=n||this.data,this.checkComponentConditions(e,t,n)}get logic(){return this.component.logic||[]}fieldLogic(e,t){e=e||this.rootValue,t=t||this.data;const n=this.logic;if(0===n.length)return;const o=c.fastCloneDeep(this.originalComponent);let s=n.reduce((n,i)=>{const s=r.checkTrigger(o,i.trigger,t,e,this.root?this.root._form:{},this);return!!s&&this.applyActions(o,i.actions,s,t,e)||n},!1);return i.isEqual(this.component,o)||(this.component=o,this.disabled=this.shouldDisabled,s=!0),s}isIE(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);const n=e.indexOf("Trident/");if(n>0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)}applyActions(e,t,n,o,s){return s=s||this.rootValue,o=o||this.data,t.reduce((t,a)=>{switch(a.type){case"property":{r.setActionProperty(e,a,n,o,s,this);const l=a.property.value;i.isEqual(i.get(this.component,l),i.get(e,l))||(t=!0);break}case"value":{const r=this.getValue(),l=this.evaluate(a.value,{value:i.clone(r),data:s,row:o,component:e,result:n},"value");i.isEqual(r,l)||(this.setValue(l),this.viewOnly&&(this.dataValue=l),t=!0);break}case"mergeComponentSchema":{const r=this.evaluate(a.schemaDefinition,{value:i.clone(this.getValue()),data:s,row:o,component:e,result:n},"schema");i.assign(e,r),i.isEqual(this.component,e)||(t=!0);break}}return t},!1)}addInputError(e,t,n){this.addMessages(e),this.setErrorClasses(n,t,!!e)}removeInputError(e){this.setErrorClasses(e,!0,!1)}addMessages(e){e&&("string"==typeof e&&(e={messages:e,level:"error"}),Array.isArray(e)||(e=[e]),this.refs.messageContainer&&this.setContent(this.refs.messageContainer,e.map(e=>this.renderTemplate("message",e)).join("")))}setErrorClasses(e,t,n,i){this.clearErrorClasses(),e.forEach(e=>this.removeClass(this.performInputMapping(e),"is-invalid")),n&&(e.forEach(e=>this.addClass(this.performInputMapping(e),"is-invalid")),t&&this.options.highlightErrors?this.addClass(this.element,this.options.componentErrorClass):this.addClass(this.element,"has-error")),i&&this.addClass(this.element,"has-message")}clearOnHide(){this.rootPristine||!1===this.component.clearOnHide||this.options.readOnly||this.options.showHiddenFields||(this.visible?this.hasValue()||this.setValue(this.defaultValue,{noUpdateEvent:!0}):this.deleteValue())}triggerRootChange(...e){this.options.onChange?this.options.onChange(...e):this.root&&this.root.triggerChange(...e)}onChange(e,t){(e=e||{}).modified&&(this.pristine=!1,this.addClass(this.getElement(),"formio-modified")),"blur"!==this.component.validateOn||this.errors.length||(e.noValidate=!0),this.component.onChange&&this.evaluate(this.component.onChange,{flags:e});const n={instance:this,component:this.component,value:this.dataValue,flags:e};this.emit("componentChange",n);let i=!1;return e.modified&&(i=!0,delete e.modified),t||this.triggerRootChange(e,n,i),n}get wysiwygDefault(){return{quill:{theme:"snow",placeholder:this.t(this.component.placeholder),modules:{toolbar:[[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],["bold","italic","underline","strike",{script:"sub"},{script:"super"},"clean"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{align:[]}],["blockquote","code-block"],["link","image","video","formula","source"]]}},ace:{theme:"ace/theme/xcode",maxLines:12,minLines:12,tabSize:2,mode:"javascript",placeholder:this.t(this.component.placeholder)},ckeditor:{image:{toolbar:["imageTextAlternative","|","imageStyle:full","imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight"],styles:["full","alignLeft","alignCenter","alignRight"]}},tiny:{theme:"silver"},default:{}}}addCKE(e,n,o){return(n=i.isEmpty(n)?{}:n).base64Upload=!0,n.mediaEmbed={previewsInData:!0},n=i.merge(this.wysiwygDefault.ckeditor,i.get(this.options,"editors.ckeditor.settings",{}),n),s.requireLibrary("ckeditor","ClassicEditor",i.get(this.options,"editors.ckeditor.src","https://cdn.form.io/ckeditor/16.0.0/ckeditor.js"),!0).then(()=>e.parentNode?ClassicEditor.create(e,n).then(e=>(e.model.document.on("change",()=>o(e.data.get())),e)):t.reject())}addQuill(e,n,o){return n=i.isEmpty(n)?this.wysiwygDefault.quill:n,n=i.merge(this.wysiwygDefault.quill,i.get(this.options,"editors.quill.settings",{}),n),s.requireLibrary(`quill-css-${n.theme}`,"Quill",[{type:"styles",src:`${h}/quill.${n.theme}.css`}],!0),s.requireLibrary("quill","Quill",i.get(this.options,"editors.quill.src",`${h}/quill.min.js`),!0).then(()=>{if(!e.parentNode)return t.reject();this.quill=new Quill(e,n);const i=document.createElement("textarea");i.setAttribute("class","quill-source-code"),this.quill.addContainer("ql-custom").appendChild(i);const s=e.parentNode.querySelector(".ql-source");s&&this.addEventListener(s,"click",e=>{e.preventDefault(),"inherit"===i.style.display&&this.quill.setContents(this.quill.clipboard.convert(i.value)),i.style.display="none"===i.style.display?"inherit":"none"}),this.addEventListener(e,"click",()=>this.quill.focus());const r=document.querySelectorAll(".ql-formats > button");for(let e=0;e<r.length;e++)r[e].setAttribute("tabindex","-1");return this.quill.on("text-change",()=>{i.value=this.quill.root.innerHTML,o(i)}),this.quill})}addAce(e,t,n){return t=i.merge(this.wysiwygDefault.ace,i.get(this.options,"editors.ace.settings",{}),t||{}),s.requireLibrary("ace","ace",i.get(this.options,"editors.ace.src","https://cdn.form.io/ace/1.4.8/ace.js"),!0).then(i=>((i=i.edit(e)).removeAllListeners("change"),i.setOptions(t),i.getSession().setMode(`ace/mode/${t.mode}`),i.on("change",()=>n(i.getValue())),i))}addTiny(e,t,n){return s.requireLibrary("tinymce","tinymce","https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js".replace("no-api-key",t.tinyApiKey),!0).then(i=>i.init({...t,target:e,init_instance_callback:e=>{e.on("Change",()=>n(e.getContent()))}}))}get tree(){return this.component.tree||!1}get emptyValue(){return null}hasValue(e){return i.has(e||this.data,this.key)}get rootValue(){return this.root?this.root.data:this.data}get rootPristine(){return i.get(this,"root.pristine",!1)}get dataValue(){if(!this.key||!this.visible&&this.component.clearOnHide&&!this.rootPristine)return this.emptyValue;if(!this.hasValue()){const e=this.component.multiple?[]:this.emptyValue;return this.rootPristine||(this.dataValue=e),e}return i.get(this._data,this.key)}set dataValue(e){return this.allowData&&this.key&&(this.visible||!this.component.clearOnHide||this.rootPristine)?(null!==e&&void 0!==e&&(e=this.hook("setDataValue",e,this.key,this._data)),null===e||void 0===e?(this.unset(),e):(i.set(this._data,this.key,e),e)):e}splice(e){if(this.hasValue()){const t=this.dataValue||[];i.isArray(t)&&t.hasOwnProperty(e)&&(t.splice(e,1),this.dataValue=t,this.triggerChange())}}unset(){i.unset(this._data,this.key)}deleteValue(){this.setValue(null,{noUpdateEvent:!0,noDefault:!0}),this.unset()}get defaultValue(){let t=this.emptyValue;return this.component.defaultValue&&(t=this.component.defaultValue),this.component.customDefaultValue&&!this.options.preview&&(t=this.evaluate(this.component.customDefaultValue,{value:""},"value")),this.defaultMask&&("string"==typeof t?(t=e(t,this.defaultMask).conformedValue,r.matchInputMask(t,this.defaultMask)||(t="")):t=""),i.cloneDeep(t)}getValue(){if(!this.hasInput||this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;const e=[];for(const t in this.refs.input)if(this.refs.input.hasOwnProperty(t)){if(!this.component.multiple)return this.getValueAt(t);e.push(this.getValueAt(t))}return 0!==e.length||this.component.multiple?e:""}getValueAt(e){const t=this.performInputMapping(this.refs.input[e]);return t?t.value:void 0}setValue(e,t={}){const n=this.updateValue(e,t);if(this.componentModal&&t&&t.fromSubmission&&this.componentModal.setValue(e),e=this.dataValue,!this.hasInput)return n;const i=Array.isArray(e);i&&Array.isArray(this.defaultValue)&&this.refs.hasOwnProperty("input")&&this.refs.input&&this.refs.input.length!==e.length&&this.redraw();for(const n in this.refs.input)this.refs.input.hasOwnProperty(n)&&this.setValueAt(n,i?e[n]:e,t);return n}setValueAt(e,t,n={}){n.noDefault||null!==t&&void 0!==t||this.component.multiple||(t=this.defaultValue);const i=this.performInputMapping(this.refs.input[e]);i.mask?i.mask.textMaskInputElement.update(t):i.widget&&i.widget.setValue?i.widget.setValue(t):i.value=t}get hasSetValue(){return this.hasValue()&&!this.isEmpty(this.dataValue)}restoreValue(){if(this.hasSetValue)this.setValue(this.dataValue,{noUpdateEvent:!0});else if(this.defaultValue){const e=this.component.multiple&&!this.dataValue.length?[]:this.defaultValue;this.setValue(e,{noUpdateEvent:!0})}}normalizeValue(e){return this.component.multiple&&!Array.isArray(e)&&(e=e?[e]:[]),e}updateComponentValue(e,t={}){let n=t.resetValue||void 0!==e&&null!==e?e:this.getValue();const i=void 0!==(n=this.normalizeValue(n,t))&&this.hasChanged(n,this.dataValue);return i&&(this.dataValue=n,this.updateOnChange(t,i)),i}updateValue(...e){return this.updateComponentValue(...e)}getIcon(e,t,n,i="icon"){return this.renderTemplate("icon",{className:this.iconClass(e),ref:i,styles:n,content:t})}resetValue(){this.setValue(this.emptyValue,{noUpdateEvent:!0,noValidate:!0,resetValue:!0}),this.unset()}hasChanged(e,t){return(void 0!==e&&null!==e||void 0!==t&&null!==t&&!this.isEmpty(t))&&(void 0!==e&&null!==e&&!this.hasValue()||!i.isEqual(e,t))}updateOnChange(e={},t=!1){return!(e.noUpdateEvent||!t)&&(this.triggerChange(e),!0)}convertNumberOrBoolToString(e){return"number"==typeof e||"boolean"==typeof e?e.toString():e}calculateComponentValue(e,t,n){if(!this.component.calculateValue||(!this.visible||this.component.hidden)&&this.component.clearOnHide&&!this.rootPristine)return!1;const o=this.component.allowCalculateOverride;let s=!1;const r=this.dataValue;if(void 0===this.calculatedValue&&(s=!0,this.calculatedValue=null),o&&this.calculatedValue&&!i.isEqual(r,this.convertNumberOrBoolToString(this.calculatedValue)))return!1;const a=this.evaluate(this.component.calculateValue,{value:r,data:e,row:n||this.data},"value");if(o&&s&&!this.isEmpty(r)&&!i.isEqual(r,this.convertNumberOrBoolToString(a)))return this.calculatedValue=a,!0;const l=this.setValue(a,t);return this.calculatedValue=this.dataValue,l}calculateValue(e,t,n){return e=e||this.rootValue,t=t||{},n=n||this.data,this.calculateComponentValue(e,t,n)}get label(){return this.component.label}set label(e){this.component.label=e,this.labelElement&&(this.labelElement.innerText=e)}getRoot(){return this.root}invalidMessage(e,t,n,o){return n||this.checkCondition(o,e)?this.invalid?this.invalid:!this.hasInput||!t&&this.pristine?"":i.map(a.checkComponent(this,e),"message").join("\n\n"):""}isValid(e,t){return!this.invalidMessage(e,t)}setComponentValidity(e,t){const n=!!e.filter(e=>"error"===e.level).length;return!e.length||!t&&this.pristine?this.setCustomValidity(""):this.setCustomValidity(e,t),!n}checkComponentValidity(e,n,i,o=!1){if(e=e||this.rootValue,i=i||this.data,this.shouldSkipValidation(e,n,i))return this.setCustomValidity(""),!o||t.resolve(!0);const s=a.checkComponent(this,e,i,!0,o);return o?s.then(e=>this.setComponentValidity(e,n)):this.setComponentValidity(s,n)}checkValidity(e,t,n){return e=e||this.rootValue,n=n||this.data,this.checkComponentValidity(e,t,n)}checkAsyncValidity(e,n,i){return t.resolve(this.checkComponentValidity(e,n,i,!0))}checkData(e,t,n){if(e=e||this.rootValue,t=t||{},n=n||this.data,this.checkRefreshOn(t.changed),t.noCheck)return!0;if(this.calculateComponentValue(e,t,n),this.checkComponentConditions(e,t,n),t.noValidate)return!0;let i=!this.builderMode&&!this.options.preview&&!this.isEmpty(this.defaultValue)&&this.isEqual(this.defaultValue,this.dataValue);return(this.options.alwaysDirty||t.dirty)&&(i=!0),t.fromSubmission&&this.hasValue(e)&&(i=!0),this.checkComponentValidity(e,i,n)}get validationValue(){return this.dataValue}isEmpty(e=this.dataValue){const t=!(!i.isArray(e)||1!==e.length)&&i.isEqual(e[0],this.emptyValue);return null==e||0===e.length||i.isEqual(e,this.emptyValue)||t}isEqual(e,t=this.dataValue){return this.isEmpty(e)&&this.isEmpty(t)||i.isEqual(e,t)}validateMultiple(){return!0}get errors(){return this.error?[this.error]:[]}clearErrorClasses(){this.removeClass(this.element,this.options.componentErrorClass),this.removeClass(this.element,"alert alert-danger"),this.removeClass(this.element,"has-error"),this.removeClass(this.element,"has-message")}setCustomValidity(e,t,n){"string"==typeof e&&e&&(e={level:"error",message:e}),Array.isArray(e)||(e=e?[e]:[]);const i=!!e.filter(e=>"error"===e.level).length;e.length?(this.refs.messageContainer&&this.empty(this.refs.messageContainer),this.error={component:this.component,message:e[0].message,messages:e,external:!!n},this.emit("componentError",this.error),this.addMessages(e,t,this.refs.input),this.refs.input&&this.setErrorClasses(this.refs.input,t,i,!!e.length)):this.error&&this.error.external===!!n&&(this.refs.messageContainer&&this.empty(this.refs.messageContainer),this.error=null,this.refs.input&&this.setErrorClasses(this.refs.input,t,i,!!e.length),this.clearErrorClasses())}isValueHidden(){return!(!this.root||!this.root.hasOwnProperty("editing"))&&(!(!this.root||!this.root.editing)&&(this.component.protected||!this.component.persistent||"client-only"===this.component.persistent))}shouldSkipValidation(e,t,n){const i=[()=>this.shouldDisabled,()=>this.isValueHidden(),()=>!this.visible,()=>!this.checkCondition(n,e)];return i.some(e=>e())}whenReady(){return console.warn("The whenReady() method has been deprecated. Please use the dataReady property instead."),this.dataReady}get dataReady(){return t.resolve()}asString(e){return e=e||this.getValue(),(Array.isArray(e)?e:[e]).map(i.toString).join(", ")}get disabled(){return this._disabled||this.parentDisabled}set disabled(e){this._disabled=e}setDisabled(e,t){e&&(e.disabled=t,t?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"))}setLoading(e,t){e&&e.loading!==t&&(e.loading=t,!e.loader&&t&&(e.loader=this.ce("i",{class:`${this.iconClass("refresh",!0)} button-icon-right`})),e.loader&&(t?this.appendTo(e.loader,e):this.removeChildFrom(e.loader,e)))}selectOptions(e,t,n,o){i.each(n,t=>{const n={value:t.value};void 0!==o&&t.value===o&&(n.selected="selected");const i=this.ce("option",n);i.appendChild(this.text(t.label)),e.appendChild(i)})}setSelectValue(e,t){const n=e.querySelectorAll("option");i.each(n,e=>{e.value===t?e.setAttribute("selected","selected"):e.removeAttribute("selected")}),e.onchange&&e.onchange(),e.onselect&&e.onselect()}clear(){this.detach(),this.empty(this.getElement())}append(e){this.appendTo(e,this.element)}prepend(e){this.prependTo(e,this.element)}removeChild(e){this.removeChildFrom(e,this.element)}detachLogic(){this.logic.forEach(e=>{if("event"===e.trigger.type){const t=this.interpolate(e.trigger.event);this.off(t)}})}attachLogic(){this.builderMode||this.logic.forEach(e=>{if("event"===e.trigger.type){const t=this.interpolate(e.trigger.event);this.on(t,(...t)=>{const n=c.fastCloneDeep(this.originalComponent);this.applyActions(n,e.actions,t)&&(i.isEqual(this.component,n)||(this.component=n),this.redraw())},!0)}})}elementInfo(){const e={name:this.options.name,type:this.component.inputType||"text",class:"form-control",lang:this.options.language};return this.component.placeholder&&(e.placeholder=this.t(this.component.placeholder)),this.component.tabindex&&(e.tabindex=this.component.tabindex),this.disabled&&(e.disabled="disabled"),i.defaults(e,this.component.attributes),{type:"input",component:this.component,changeEvent:"change",attr:e}}autofocus(){this.component.autofocus&&!this.builderMode&&this.on("render",()=>this.focus(),!0)}focus(){this.refs.input&&this.refs.input[0]&&this.refs.input[0].focus()}}}),e("skylark-formio/components/_classes/field/Field",["../component/Component"],function(e){"use strict";return class extends e{render(e){return this.noField?super.render(e):this.isAdvancedLabel?super.render(this.renderTemplate("field",{...this.getLabelInfo(),labelMarkup:this.renderTemplate("label"),element:e},"align")):super.render(this.renderTemplate("field",{labelMarkup:this.renderTemplate("label"),element:e}))}}}),e("skylark-formio/components/Components",["./_classes/component/Component","skylark-lodash"],function(e,t){"use strict";class n{static get components(){return n._components||(n._components={}),n._components}static setComponents(e){e.base&&(e.base.tableView=function(e,t){const i=n.create(t.component,t.options||{},t.data||{},!0);return i.getView(e)}),t.assign(n.components,e)}static addComponent(e,t){return n.setComponent(e,t)}static setComponent(e,t){n.components[e]=t}static create(t,i,o){let s=null;return s=t.type&&n.components.hasOwnProperty(t.type)?new n.components[t.type](t,i,o):Array.isArray(t.components)?new n.NestedComponent(t,i,o):new e(t,i,o)}}return n}),e("skylark-formio/components/_classes/nested/NestedComponent",["skylark-lodash","../field/Field","../../Components","../../../vendors/getify/npo"],function(e,t,n,i){"use strict";class o extends t{static schema(...e){return t.schema({tree:!1},...e)}constructor(e,t,n){super(e,t,n),this.type="components",this._collapsed=!!this.component.collapsed}get defaultSchema(){return o.schema()}get schema(){const t=super.schema,n=e.uniqBy(this.getComponents(),"component.key");return t.components=e.map(n,"schema"),t}get collapsed(){return this._collapsed}set collapsed(e){this._collapsed=e,this.redraw()}set visible(e){super.visible=e;const t=this.visible,n=this.options.show&&this.options.show[this.component.key],i=this.options.hide&&this.options.hide[this.component.key];this.components.forEach(e=>{const o=e.conditionallyVisible();n||o?e.visible=!0:!i&&t&&o||(e.visible=!1),e.visible||(e.error=""),e.parentVisible=t})}get visible(){return super.visible}set parentVisible(e){super.parentVisible=e,this.components.forEach(e=>{e.parentVisible=this.visible})}get parentVisible(){return super.parentVisible}get disabled(){return super.disabled}set disabled(e){super.disabled=e,this.components.forEach(t=>t.parentDisabled=e)}set parentDisabled(e){super.parentDisabled=e,this.components.forEach(e=>{e.parentDisabled=this.disabled})}get parentDisabled(){return super.parentDisabled}get ready(){return i.all(this.getComponents().map(e=>e.ready))}get currentForm(){return super.currentForm}set currentForm(e){super.currentForm=e,this.getComponents().forEach(t=>{t.currentForm=e})}get rowIndex(){return this._rowIndex}set rowIndex(e){this._rowIndex=e,this.eachComponent(t=>{t.rowIndex=e})}componentContext(){return this._data}get data(){return this._data}set data(e){this._data=e,this.eachComponent(e=>{e.data=this.componentContext(e)})}getComponents(){return this.components||[]}everyComponent(t){const n=this.getComponents();e.each(n,(e,i)=>!1!==t(e,n,i)&&(("function"!=typeof e.everyComponent||!1!==e.everyComponent(t))&&void 0))}hasComponent(e){let t=!1;return this.everyComponent(n=>{if(n===e)return t=!0,!1}),t}flattenComponents(){const e={};return this.everyComponent(t=>{e[t.component.flattenAs||t.key]=t}),e}eachComponent(t){e.each(this.getComponents(),(e,n)=>{if(!1===t(e,n))return!1})}getComponent(t,n){t=Array.isArray(t)?t:[t];const[i,...o]=t;let s=null;return e.isString(i)?(this.everyComponent((e,t)=>{if(e.component.key===i)return s=e,o.length>0&&"getComponent"in e?s=e.getComponent(o,n):n&&n(e,t),!1}),s):s}getComponentById(e,t){let n=null;return this.everyComponent((i,o)=>{if(i.id===e)return n=i,t&&t(i,o),!1}),n}createComponent(t,i,o,s){if(!t)return;i=i||this.options,o=o||this.data,i.parent=this,i.parentVisible=this.visible,i.root=this.root||this,i.skipInit=!0;const r=n.create(t,i,o,!0);if(t.key){let e=this;for(;e&&!e.allowData&&e.parent;)e=e.parent;r.path=e.path?`${e.path}.`:"",r.path+=t.key}if(r.init(),t.internal)return r;if(s){const t=e.findIndex(this.components,{id:s.id});-1!==t?this.components.splice(t,0,r):this.components.push(r)}else this.components.push(r);return r}getContainer(){return this.element}get componentComponents(){return this.component.components||[]}get nestedKey(){return`nested-${this.key}`}get templateName(){return"container"}init(){return this.components=this.components||[],this.addComponents(),super.init()}addComponents(e,t){if(e=e||this.data,(t=t||this.options).components)this.components=t.components;else{const t=this.hook("addComponents",this.componentComponents,this)||[];t.forEach(t=>this.addComponent(t,e))}}addComponent(e,t,n,i){t=t||this.data,e=this.hook("addComponent",e,t,n,i);const o=this.createComponent(e,this.options,t,n||null);return o}render(e){return super.render(e||this.renderTemplate(this.templateName,{children:this.renderComponents(),nestedKey:this.nestedKey,collapsed:this.collapsed}))}renderComponents(e){const t=(e=e||this.getComponents()).map(e=>e.render());return this.renderTemplate("components",{children:t,components:e})}attach(e){const t=super.attach(e);this.loadRefs(e,{header:"single",collapsed:this.collapsed,[this.nestedKey]:"single"});let n=i.resolve();return this.refs[this.nestedKey]&&(n=this.attachComponents(this.refs[this.nestedKey])),this.component.collapsible&&this.refs.header&&this.addEventListener(this.refs.header,"click",()=>{this.collapsed=!this.collapsed}),i.all([t,n])}attachComponents(e,t,n){if(t=t||this.components,n=n||this.component.components,!(e=this.hook("attachComponents",e,t,n,this)))return new i(()=>{});let o=0;const s=[];return Array.prototype.slice.call(e.children).forEach(e=>{!e.getAttribute("data-noattach")&&t[o]&&(s.push(t[o].attach(e)),o++)}),i.all(s)}removeComponent(t,n){n=n||this.components,t.destroy(),e.remove(n,{id:t.id})}removeComponentByKey(e,t){const n=this.getComponent(e,(e,n)=>{this.removeComponent(e,n),t&&t(e,n)});if(!n)return t&&t(null),null}removeComponentById(e,t){const n=this.getComponentById(e,(e,n)=>{this.removeComponent(e,n),t&&t(e,n)});if(!n)return t&&t(null),null}updateValue(e,t={}){return this.components.reduce((e,n)=>n.updateValue(null,t)||e,super.updateValue(e,t))}shouldSkipValidation(e,t,n){return!this.component.input||super.shouldSkipValidation(e,t,n)}checkData(e,t,n,i){return!!this.builderMode||(e=e||this.rootValue,t=t||{},n=n||this.data,(i=i||this.getComponents()).reduce((i,o)=>o.checkData(e,t,n)&&i,super.checkData(e,t,n)))}checkConditions(e,t,n){return this.getComponents().forEach(i=>i.checkConditions(e,t,n)),super.checkConditions(e,t,n)}clearOnHide(e){super.clearOnHide(e),this.component.clearOnHide&&(this.allowData&&!this.hasValue()&&(this.dataValue=this.defaultValue),this.hasValue()&&this.restoreComponentsContext()),this.getComponents().forEach(t=>t.clearOnHide(e))}restoreComponentsContext(){this.getComponents().forEach(e=>e.data=this.dataValue)}beforePage(e){return i.all(this.getComponents().map(t=>t.beforePage(e)))}beforeSubmit(){return i.all(this.getComponents().map(e=>e.beforeSubmit()))}calculateValue(e,t,n){return!!this.conditionallyVisible()&&this.getComponents().reduce((i,o)=>o.calculateValue(e,t,n)||i,super.calculateValue(e,t,n))}isLastPage(){return this.pages.length-1===this.page}isValid(e,t){return this.getComponents().reduce((n,i)=>i.isValid(e,t)&&n,super.isValid(e,t))}checkValidity(e,t,n){return this.checkCondition(n,e)?this.getComponents().reduce((i,o)=>o.checkValidity(e,t,n)&&i,super.checkValidity(e,t,n)):(this.setCustomValidity(""),!0)}checkAsyncValidity(e,t,n){const o=[super.checkAsyncValidity(e,t,n)];return this.eachComponent(i=>o.push(i.checkAsyncValidity(e,t,n))),i.all(o).then(e=>e.reduce((e,t)=>e&&t,!0))}setPristine(e){super.setPristine(e),this.getComponents().forEach(t=>t.setPristine(e))}detach(){this.components.forEach(e=>{e.detach()}),super.detach()}destroy(){this.destroyComponents(),super.destroy()}destroyComponents(){const e=this.getComponents().slice();e.forEach(e=>this.removeComponent(e,this.components)),this.components=[]}get errors(){const e=this.error?[this.error]:[];return this.getComponents().reduce((e,t)=>e.concat(t.errors||[]),e)}getValue(){return this.data}resetValue(){this.getComponents().forEach(e=>e.resetValue()),this.unset(),this.setPristine(!0)}get dataReady(){return i.all(this.getComponents().map(e=>e.dataReady))}setNestedValue(t,n,i={}){return t._data=this.componentContext(t),"button"!==t.type&&("components"===t.type?t.setValue(n,i):n&&t.hasValue(n)?t.setValue(e.get(n,t.key),i):!this.rootPristine||t.visible?(i.noValidate=!i.dirty,i.resetValue=!0,t.setValue(t.defaultValue,i)):void 0)}setValue(e,t={}){return!!e&&this.getComponents().reduce((n,i)=>this.setNestedValue(i,e,t,n)||n,!1)}}return n.NestedComponent=o,o}),e("skylark-formio/components/_classes/nesteddata/NestedDataComponent",["../component/Component","../nested/NestedComponent","skylark-lodash"],function(e,t,n){"use strict";return class extends t{hasChanged(e,t){return void 0!==e&&null!==e&&!this.hasValue()||!n.isEqual(e,t)}get allowData(){return!0}getValueAsString(){return"[Complex Data]"}getValue(){return this.dataValue}updateValue(t,n={}){return e.prototype.updateValue.call(this,t,n)}}}),e("skylark-formio/components/container/Container",["skylark-lodash","../_classes/component/Component","../_classes/nesteddata/NestedDataComponent"],function(e,t,n){"use strict";return class i extends n{static schema(...e){return n.schema({label:"Container",type:"container",key:"container",clearOnHide:!0,input:!0,tree:!0,hideLabel:!0,components:[]},...e)}static get builderInfo(){return{title:"Container",icon:"folder-open",group:"data",documentation:"http://help.form.io/userguide/#container",weight:10,schema:i.schema()}}constructor(...e){super(...e),this.type="container"}addComponents(e,t){return super.addComponents(this.dataValue,t)}get defaultSchema(){return i.schema()}get emptyValue(){return{}}get templateName(){return"container"}componentContext(){return this.dataValue}setValue(t,n={}){let i=!1;const o=this.hasValue();return o&&e.isEmpty(this.dataValue)&&(n.noValidate=!0),t&&e.isObject(t)&&o||(i=!0,this.dataValue=this.defaultValue),i=super.setValue(t,n)||i,this.updateOnChange(n,i),i}checkData(e,n,i,o){return e=e||this.rootValue,n=n||{},i=i||this.data,(o=o||this.getComponents()).reduce((t,i)=>i.checkData(e,n,this.dataValue)&&t,t.prototype.checkData.call(this,e,n,i))}}}),e("skylark-formio/components/address/Address",["../../vendors/kraaden/autocomplete","skylark-lodash","../../Formio","../../providers/address/GoogleAddressProvider","../_classes/field/Field","../_classes/nested/NestedComponent","../container/Container"],function(e,t,n,i,o,s,r){"use strict";const a={Autocomplete:"autocomplete",Manual:"manual"},l="show = _.get(instance, 'parent.manualMode', false);";return class c extends r{static schema(...e){return r.schema({type:"address",label:"Address",key:"address",switchToManualModeLabel:"Can't find address? Switch to manual mode.",provider:"",providerOptions:{},manualModeViewString:"",hideLabel:!1,disableClearIcon:!1,enableManualMode:!1,components:[{label:"Address 1",tableView:!1,key:"address1",type:"textfield",input:!0,customConditional:l},{label:"Address 2",tableView:!1,key:"address2",type:"textfield",input:!0,customConditional:l},{label:"City",tableView:!1,key:"city",type:"textfield",input:!0,customConditional:l},{label:"State",tableView:!1,key:"state",type:"textfield",input:!0,customConditional:l},{label:"Country",tableView:!1,key:"country",type:"textfield",input:!0,customConditional:l},{label:"Zip Code",tableView:!1,key:"zip",type:"textfield",input:!0,customConditional:l}]},...e)}static get builderInfo(){return{title:"Address",group:"advanced",icon:"home",documentation:"http://help.form.io/userguide/#address",weight:35,schema:c.schema()}}mergeSchema(e={}){let{defaultSchema:n}=this;return e.components&&(n=t.omit(n,"components")),t.defaultsDeep(e,n)}init(){if(this.components=this.components||[],(this.builderMode||this.manualModeEnabled)&&s.prototype.addComponents.call(this,this.manualMode?this.address:{}),o.prototype.init.call(this),!this.builderMode)if(this.component.provider){const{provider:e,providerOptions:t}=this.component;this.provider=this.initializeProvider(e,t)}else if(this.component.map){this.component.provider=i.name,this.component.providerOptions=this.component.providerOptions||{};const{map:e,provider:n,providerOptions:o}=this.component,{key:s,region:r}=e;s&&t.set(o,"params.key",s),r&&t.set(o,"params.region",r),this.provider=this.initializeProvider(n,o)}}initializeProvider(e,t={}){const i=n.Providers.getProvider("address",e);return new i(t)}get emptyValue(){return this.manualModeEnabled?{mode:a.Autocomplete,address:{}}:{}}get mode(){return this.manualModeEnabled?this.dataValue?this.dataValue.mode:this.dataValue:a.Autocomplete}set mode(e){this.manualModeEnabled&&(this.dataValue.mode=e)}get autocompleteMode(){return this.mode===a.Autocomplete}get manualMode(){return this.mode===a.Manual}get manualModeEnabled(){return Boolean(this.component.enableManualMode)}restoreComponentsContext(){this.getComponents().forEach(e=>{e.data=this.address,e.setValue(e.dataValue,{noUpdateEvent:!0})})}get address(){return this.manualModeEnabled&&this.dataValue?this.dataValue.address:this.dataValue}set address(e){this.manualModeEnabled?this.dataValue.address=e:this.dataValue=e}get defaultSchema(){return c.schema()}isValueInLegacyFormat(e){return e&&!e.mode}normalizeValue(e){return this.manualModeEnabled&&this.isValueInLegacyFormat(e)?{mode:a.Autocomplete,address:e}:e}setValue(e,t={}){const n=o.prototype.setValue.call(this,e,t);return this.manualMode&&this.restoreComponentsContext(),n&&this.redraw(),n}static get modeSwitcherRef(){return"modeSwitcher"}static get removeValueIconRef(){return"removeValueIcon"}static get searchInputRef(){return"searchInput"}get modeSwitcher(){return this.refs&&this.refs[c.modeSwitcherRef]||null}get removeValueIcon(){return this.refs&&this.refs[c.removeValueIconRef]||null}get searchInput(){return this.refs&&this.refs[c.searchInputRef]||null}get searchInputAttributes(){const e={name:this.options.name,type:"text",class:"form-control",lang:this.options.language,tabindex:this.component.tabindex||0};return this.component.placeholder&&(e.placeholder=this.t(this.component.placeholder)),this.disabled&&(e.disabled="disabled"),t.defaults(e,this.component.attributes),e}get templateName(){return"address"}render(){return super.render(this.renderTemplate(this.templateName,{children:this.builderMode||this.manualModeEnabled?this.renderComponents():"",nestedKey:this.nestedKey,inputAttributes:this.searchInputAttributes,ref:{modeSwitcher:c.modeSwitcherRef,removeValueIcon:c.removeValueIconRef,searchInput:c.searchInputRef},displayValue:this.getDisplayValue(),mode:{autocomplete:this.autocompleteMode,manual:this.manualMode}}))}attach(t){const n=(this.builderMode||this.manualMode?super.attach:o.prototype.attach).call(this,t);if(!this.builderMode&&!this.provider&&this.component.provider){const{provider:e,providerOptions:t}=this.component;this.provider=this.initializeProvider(e,t)}if(this.loadRefs(t,{[c.modeSwitcherRef]:"single",[c.removeValueIconRef]:"single",[c.searchInputRef]:"single"}),!this.builderMode&&this.searchInput&&this.provider&&(e({input:this.searchInput,debounceWaitMs:300,fetch:(e,t)=>{const n=e;this.provider.search(n).then(t)},render:e=>{const t=this.ce("div");return t.textContent=this.getDisplayValue(e),t},onSelect:e=>{this.address=e,this.triggerChange({modified:!0}),this.searchInput&&(this.searchInput.value=this.getDisplayValue()),this.updateRemoveIcon()}}),this.addEventListener(this.searchInput,"blur",()=>{this.searchInput&&this.searchInput.value&&(this.searchInput.value=this.getDisplayValue())}),this.addEventListener(this.searchInput,"keyup",()=>{this.searchInput&&(this.searchInput.value||this.clearAddress())})),this.modeSwitcher&&this.addEventListener(this.modeSwitcher,"change",()=>{this.modeSwitcher&&(this.dataValue=this.emptyValue,this.mode=this.modeSwitcher.checked?a.Manual:a.Autocomplete,this.builderMode||(this.manualMode&&this.restoreComponentsContext(),this.triggerChange({modified:!0})),this.redraw())}),!this.builderMode&&this.removeValueIcon){this.updateRemoveIcon();const e=()=>{this.clearAddress(),this.focus()};this.addEventListener(this.removeValueIcon,"click",e),this.addEventListener(this.removeValueIcon,"keydown",({key:t})=>{"Enter"===t&&e()})}return n}addChildComponent(e){e.customConditional=l}redraw(){const e=this.modeSwitcher&&document.activeElement===this.modeSwitcher;return super.redraw().then(t=>(e&&this.modeSwitcher&&this.modeSwitcher.focus(),t))}clearAddress(){this.isEmpty()||this.triggerChange(),this.dataValue=this.emptyValue,this.searchInput&&(this.searchInput.value=""),this.updateRemoveIcon()}getDisplayValue(e=this.address){return this.provider&&!this.manualMode?this.provider.getDisplayValue(e):""}validateMultiple(){return!1}updateRemoveIcon(){this.removeValueIcon&&(this.isEmpty()||this.disabled?this.addClass(this.removeValueIcon,"address-autocomplete-remove-value-icon--hidden"):this.removeClass(this.removeValueIcon,"address-autocomplete-remove-value-icon--hidden"))}getValueAsString(e){if(!e)return"";const n=this.normalizeValue(e),{address:i,mode:o}=this.manualModeEnabled?n:{address:n,mode:a.Autocomplete},s=o===a.Manual;return this.provider&&!s?this.getDisplayValue(i):s?this.component.manualModeViewString?this.interpolate(this.component.manualModeViewString,{address:i,data:this.data,component:this.component}):this.getComponents().filter(e=>e.hasValue(i)).map(e=>[e,t.get(i,e.key)]).filter(([e,t])=>!e.isEmpty(t)).map(([e,t])=>e.getValueAsString(t)).join(", "):super.getValueAsString(i)}focus(){this.searchInput&&this.searchInput.focus()}}}),e("skylark-formio/components/_classes/multivalue/Multivalue",["../field/Field","skylark-lodash"],function(e,t){"use strict";return class extends e{get dataValue(){const e=super.dataValue;return!e&&this.component.multiple?[]:e}set dataValue(e){super.dataValue=e}get defaultValue(){let e=super.defaultValue;return this.component.multiple&&(e=t.isArray(e)?e.length?e:[super.emptyValue]:[e]),e}get addAnother(){return this.t(this.component.addAnother||" Add Another")}useWrapper(){return this.component.hasOwnProperty("multiple")&&this.component.multiple}render(){if(!this.useWrapper())return super.render(`<div ref="element">${this.renderElement(this.dataValue)}</div>`);let e=this.dataValue;return Array.isArray(e)||(e=e?[e]:[]),super.render(this.renderTemplate("multiValueTable",{rows:e.map(this.renderRow.bind(this)).join(""),disabled:this.disabled,addAnother:this.addAnother}))}renderElement(){return""}renderRow(e,t){return this.renderTemplate("multiValueRow",{index:t,disabled:this.disabled,element:`${this.renderElement(e,t)}`})}attach(e){const t=super.attach(e);if(this.loadRefs(e,{addButton:"multiple",input:"multiple",removeRow:"multiple",mask:"multiple",select:"multiple"}),this.refs.input.forEach(this.attachElement.bind(this)),this.component.multiple)return this.refs.removeRow.forEach((e,t)=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.removeValue(t)})}),this.refs.addButton.forEach(e=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.addValue()})}),t}detach(){this.refs.input&&this.refs.input.length&&this.refs.input.forEach(e=>{e.mask&&e.mask.destroy(),e.widget&&e.widget.destroy()}),this.refs.mask&&this.refs.mask.length&&this.refs.mask.forEach(e=>{e.mask&&e.mask.destroy()}),super.detach()}attachElement(e,n){this.addEventListener(e,this.inputInfo.changeEvent,()=>{const i=t.get(this.component,"case","mixed");if("mixed"!==i){const{selectionStart:t,selectionEnd:n}=e;"uppercase"===i&&e.value&&(e.value=e.value.toUpperCase()),"lowercase"===i&&e.value&&(e.value=e.value.toLowerCase()),e.selectionStart&&e.selectionEnd&&(e.selectionStart=t,e.selectionEnd=n)}if(!e.mask)return this.updateValue(null,{modified:"hidden"!==this.component.type},n);setTimeout(()=>this.updateValue(null,{modified:"hidden"!==this.component.type},n),1)}),this.attachMultiMask(n)||this.setInputMask(e)}onSelectMaskHandler(e){this.updateMask(e.target.maskInput,this.getMaskPattern(e.target.value))}getMaskPattern(e){if(this.multiMasks||(this.multiMasks={}),this.multiMasks[e])return this.multiMasks[e];const t=this.component.inputMasks.find(t=>t.label===e);return this.multiMasks[e]=t?t.mask:this.component.inputMasks[0].mask,this.multiMasks[e]}attachMultiMask(e){if(!(this.isMultipleMasksField&&this.component.inputMasks.length&&this.refs.input.length))return!1;const t=this.refs.select[e];return t.onchange=this.onSelectMaskHandler.bind(this),t.maskInput=this.refs.mask[e],this.setInputMask(t.maskInput,this.component.inputMasks[0].mask),!0}updateMask(e,t){t&&(this.setInputMask(e,t,!this.component.placeholder),this.updateValue())}addNewValue(e){void 0===e&&(e=this.component.defaultValue?this.component.defaultValue:this.emptyValue,Array.isArray(e)&&0===e.length&&(e=this.emptyValue));let t=this.dataValue||[];Array.isArray(t)||(t=[t]),Array.isArray(e)?t=t.concat(e):t.push(e),this.dataValue=t}addValue(){this.addNewValue(),this.redraw(),this.checkConditions(),this.isEmpty(this.dataValue)||this.restoreValue(),this.root&&this.root.onChange()}}}),e("skylark-formio/widgets/InputWidget",["skylark-lodash","../Element","../vendors/getify/npo"],function(e,t,n){"use strict";return class extends t{static get defaultSettings(){return{type:"input"}}constructor(t,n){super(t),this.namespace="formio.widget",this.component=n||{},this.settings=e.merge({},this.defaultSettings,t||{})}attach(e){return this._input=e,n.resolve()}get defaultSettings(){return{}}set disabled(e){e?this._input.setAttribute("disabled","disabled"):this._input.removeAttribute("disabled")}get input(){return this._input}getValue(){return this._input.value}getValueAsString(e){return e}validationValue(e){return e}addPrefix(){return null}addSuffix(){return null}setValue(e){this._input.value=e}}}),e("skylark-formio/vendors/flatpickr/flatpickr",[],function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},i={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},o=function(e){return("0"+e).slice(-2)},s=function(e){return!0===e?1:0};function r(e,t,n){var i;return void 0===n&&(n=!1),function(){var o=this,s=arguments;null!==i&&clearTimeout(i),i=window.setTimeout(function(){i=null,n||e.apply(o,s)},t),n&&!i&&e.apply(o,s)}}var a=function(e){return e instanceof Array?e:[e]};function l(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function c(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function u(e,t){var n=c("div","numInputWrapper"),i=c("input","numInput "+e),o=c("span","arrowUp"),s=c("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(var r in t)i.setAttribute(r,t[r]);return n.appendChild(i),n.appendChild(o),n.appendChild(s),n}var h=function(){},p=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},m={D:h,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*s(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:h,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:h,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},f={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},g={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[g.w(e,t,n)]},F:function(e,t,n){return p(g.n(e,t,n)-1,!1,t)},G:function(e,t,n){return o(g.h(e,t,n))},H:function(e){return o(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[s(e.getHours()>11)]},M:function(e,t){return p(e.getMonth(),!0,t)},S:function(e){return o(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return o(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return o(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return o(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},y=function(e){var t=e.config,o=void 0===t?n:t,s=e.l10n,r=void 0===s?i:s;return function(e,t,n){var i=n||r;return void 0!==o.formatDate?o.formatDate(e,t,i):t.split("").map(function(t,n,s){return g[t]&&"\\"!==s[n-1]?g[t](e,i,o):"\\"!==t?t:""}).join("")}},b=function(e){var t=e.config,o=void 0===t?n:t,s=e.l10n,r=void 0===s?i:s;return function(e,t,i,s){if(0===e||e){var a,l=s||r,c=e;if(e instanceof Date)a=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)a=new Date(e);else if("string"==typeof e){var d=t||(o||n).dateFormat,u=String(e).trim();if("today"===u)a=new Date,i=!0;else if(/Z$/.test(u)||/GMT$/.test(u))a=new Date(e);else if(o&&o.parseDate)a=o.parseDate(e,d);else{a=o&&o.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var h=void 0,p=[],g=0,y=0,b="";g<d.length;g++){var v=d[g],k="\\"===v,w="\\"===d[g-1]||k;if(f[v]&&!w){b+=f[v];var x=new RegExp(b).exec(e);x&&(h=!0)&&p["Y"!==v?"push":"unshift"]({fn:m[v],val:x[++y]})}else k||(b+=".");p.forEach(function(e){var t=e.fn,n=e.val;return a=t(a,n,l)||a})}a=h?a:void 0}}if(a instanceof Date&&!isNaN(a.getTime()))return!0===i&&a.setHours(0,0,0,0),a;o.errorHandler(new Error("Invalid date provided: "+c))}}};function v(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var k=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},w={DAY:864e5};"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var i=function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},o=0,s=t;o<s.length;o++){var r=s[o];i(r)}return e});var x=300;function C(n,h){var m={config:e({},E.defaultConfig),l10n:i};function g(e){return e.bind(m)}function C(){var e=m.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==m.calendarContainer&&(m.calendarContainer.style.visibility="hidden",m.calendarContainer.style.display="block"),void 0!==m.daysContainer){var t=(m.days.offsetWidth+1)*e.showMonths;m.daysContainer.style.width=t+"px",m.calendarContainer.style.width=t+(void 0!==m.weekWrapper?m.weekWrapper.offsetWidth:0)+"px",m.calendarContainer.style.removeProperty("visibility"),m.calendarContainer.style.removeProperty("display")}})}function S(e){0===m.selectedDates.length&&oe(),void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==m.amPM&&e.target===m.amPM&&(m.amPM.textContent=m.l10n.amPM[s(m.amPM.textContent===m.l10n.amPM[0])]);var i=parseFloat(n.getAttribute("min")),r=parseFloat(n.getAttribute("max")),a=parseFloat(n.getAttribute("step")),l=parseInt(n.value,10),c=e.delta||(t?38===e.which?1:-1:0),d=l+a*c;if(void 0!==n.value&&2===n.value.length){var u=n===m.hourElement,h=n===m.minuteElement;d<i?(d=r+d+s(!u)+(s(u)&&s(!m.amPM)),h&&I(void 0,-1,m.hourElement)):d>r&&(d=n===m.hourElement?d-r-s(!m.amPM):i,h&&I(void 0,1,m.hourElement)),m.amPM&&u&&(1===a?d+l===23:Math.abs(d-l)>a)&&(m.amPM.textContent=m.l10n.amPM[s(m.amPM.textContent===m.l10n.amPM[0])]),n.value=o(d)}}(e);var t=m._input.value;A(),ve(),m._input.value!==t&&m._debouncedChange()}function A(){if(void 0!==m.hourElement&&void 0!==m.minuteElement){var e,t,n=(parseInt(m.hourElement.value.slice(-2),10)||0)%24,i=(parseInt(m.minuteElement.value,10)||0)%60,o=void 0!==m.secondElement?(parseInt(m.secondElement.value,10)||0)%60:0;void 0!==m.amPM&&(e=n,t=m.amPM.textContent,n=e%12+12*s(t===m.l10n.amPM[1]));var r=void 0!==m.config.minTime||m.config.minDate&&m.minDateHasTime&&m.latestSelectedDateObj&&0===v(m.latestSelectedDateObj,m.config.minDate,!0),a=void 0!==m.config.maxTime||m.config.maxDate&&m.maxDateHasTime&&m.latestSelectedDateObj&&0===v(m.latestSelectedDateObj,m.config.maxDate,!0);if(a){var l=void 0!==m.config.maxTime?m.config.maxTime:m.config.maxDate;(n=Math.min(n,l.getHours()))===l.getHours()&&(i=Math.min(i,l.getMinutes())),i===l.getMinutes()&&(o=Math.min(o,l.getSeconds()))}if(r){var c=void 0!==m.config.minTime?m.config.minTime:m.config.minDate;(n=Math.max(n,c.getHours()))===c.getHours()&&(i=Math.max(i,c.getMinutes())),i===c.getMinutes()&&(o=Math.max(o,c.getSeconds()))}M(n,i,o)}}function T(e){var t=e||m.latestSelectedDateObj;t&&M(t.getHours(),t.getMinutes(),t.getSeconds())}function D(){var e=m.config.defaultHour,t=m.config.defaultMinute,n=m.config.defaultSeconds;if(void 0!==m.config.minDate){var i=m.config.minDate.getHours(),o=m.config.minDate.getMinutes();(e=Math.max(e,i))===i&&(t=Math.max(o,t)),e===i&&t===o&&(n=m.config.minDate.getSeconds())}if(void 0!==m.config.maxDate){var s=m.config.maxDate.getHours(),r=m.config.maxDate.getMinutes();(e=Math.min(e,s))===s&&(t=Math.min(r,t)),e===s&&t===r&&(n=m.config.maxDate.getSeconds())}M(e,t,n)}function M(e,t,n){void 0!==m.latestSelectedDateObj&&m.latestSelectedDateObj.setHours(e%24,t,n||0,0),m.hourElement&&m.minuteElement&&!m.isMobile&&(m.hourElement.value=o(m.config.time_24hr?e:(12+e)%12+12*s(e%12==0)),m.minuteElement.value=o(t),void 0!==m.amPM&&(m.amPM.textContent=m.l10n.amPM[s(e>=12)]),void 0!==m.secondElement&&(m.secondElement.value=o(n)))}function V(e){var t=parseInt(e.target.value)+(e.delta||0);(t/1e3>1||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&X(t)}function _(e,t,n,i){return t instanceof Array?t.forEach(function(t){return _(e,t,n,i)}):e instanceof Array?e.forEach(function(e){return _(e,t,n,i)}):(e.addEventListener(t,n,i),void m._handlers.push({element:e,event:t,handler:n,options:i}))}function R(e){return function(t){1===t.which&&e(t)}}function P(){me("onChange")}function F(){if(m.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(m.element.querySelectorAll("[data-"+e+"]"),function(t){return _(t,"click",m[e])})}),m.isMobile)!function(){var e=m.config.enableTime?m.config.noCalendar?"time":"datetime-local":"date";m.mobileInput=c("input",m.input.className+" flatpickr-mobile"),m.mobileInput.step=m.input.getAttribute("step")||"any",m.mobileInput.tabIndex=1,m.mobileInput.type=e,m.mobileInput.disabled=m.input.disabled,m.mobileInput.required=m.input.required,m.mobileInput.placeholder=m.input.placeholder,m.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",m.selectedDates.length>0&&(m.mobileInput.defaultValue=m.mobileInput.value=m.formatDate(m.selectedDates[0],m.mobileFormatStr));m.config.minDate&&(m.mobileInput.min=m.formatDate(m.config.minDate,"Y-m-d"));m.config.maxDate&&(m.mobileInput.max=m.formatDate(m.config.maxDate,"Y-m-d"));m.input.type="hidden",void 0!==m.altInput&&(m.altInput.type="hidden");try{m.input.parentNode&&m.input.parentNode.insertBefore(m.mobileInput,m.input.nextSibling)}catch(e){}_(m.mobileInput,"change",function(e){m.setDate(e.target.value,!1,m.mobileFormatStr),me("onChange"),me("onClose")})}();else{var e=r(ie,50);if(m._debouncedChange=r(P,x),m.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&_(m.daysContainer,"mouseover",function(e){"range"===m.config.mode&&ne(e.target)}),_(window.document.body,"keydown",te),m.config.static||_(m._input,"keydown",te),m.config.inline||m.config.static||_(window,"resize",e),void 0!==window.ontouchstart?_(window.document,"click",Z):_(window.document,"mousedown",R(Z)),_(window.document,"focus",Z,{capture:!0}),!0===m.config.clickOpens&&(_(m._input,"focus",m.open),_(m._input,"mousedown",R(m.open))),void 0!==m.daysContainer&&(_(m.monthNav,"mousedown",R(ke)),_(m.monthNav,["keyup","increment"],V),_(m.daysContainer,"mousedown",R(de))),void 0!==m.timeContainer&&void 0!==m.minuteElement&&void 0!==m.hourElement){_(m.timeContainer,["increment"],S),_(m.timeContainer,"blur",S,{capture:!0}),_(m.timeContainer,"mousedown",R(L)),_([m.hourElement,m.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==m.secondElement&&_(m.secondElement,"focus",function(){return m.secondElement&&m.secondElement.select()}),void 0!==m.amPM&&_(m.amPM,"mousedown",R(function(e){S(e),P()}))}}}function O(e){var t=void 0!==e?m.parseDate(e):m.latestSelectedDateObj||(m.config.minDate&&m.config.minDate>m.now?m.config.minDate:m.config.maxDate&&m.config.maxDate<m.now?m.config.maxDate:m.now);try{void 0!==t&&(m.currentYear=t.getFullYear(),m.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,m.config.errorHandler(e)}m.redraw()}function L(e){~e.target.className.indexOf("arrow")&&I(e,e.target.classList.contains("arrowUp")?1:-1)}function I(e,t,n){var i=e&&e.target,o=n||i&&i.parentNode&&i.parentNode.firstChild,s=fe("increment");s.delta=t,o&&o.dispatchEvent(s)}function N(){var e=window.document.createDocumentFragment();if(m.calendarContainer=c("div","flatpickr-calendar"),m.calendarContainer.tabIndex=-1,!m.config.noCalendar){if(e.appendChild((m.monthNav=c("div","flatpickr-months"),m.yearElements=[],m.monthElements=[],m.prevMonthNav=c("span","flatpickr-prev-month"),m.prevMonthNav.innerHTML=m.config.prevArrow,m.nextMonthNav=c("span","flatpickr-next-month"),m.nextMonthNav.innerHTML=m.config.nextArrow,W(),Object.defineProperty(m,"_hidePrevMonthArrow",{get:function(){return m.__hidePrevMonthArrow},set:function(e){m.__hidePrevMonthArrow!==e&&(l(m.prevMonthNav,"disabled",e),m.__hidePrevMonthArrow=e)}}),Object.defineProperty(m,"_hideNextMonthArrow",{get:function(){return m.__hideNextMonthArrow},set:function(e){m.__hideNextMonthArrow!==e&&(l(m.nextMonthNav,"disabled",e),m.__hideNextMonthArrow=e)}}),m.currentYearElement=m.yearElements[0],ye(),m.monthNav)),m.innerContainer=c("div","flatpickr-innerContainer"),m.config.weekNumbers){var t=function(){m.calendarContainer.classList.add("hasWeeks");var e=c("div","flatpickr-weekwrapper");e.appendChild(c("span","flatpickr-weekday",m.l10n.weekAbbreviation));var t=c("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),n=t.weekWrapper,i=t.weekNumbers;m.innerContainer.appendChild(n),m.weekNumbers=i,m.weekWrapper=n}m.rContainer=c("div","flatpickr-rContainer"),m.rContainer.appendChild(K()),m.daysContainer||(m.daysContainer=c("div","flatpickr-days"),m.daysContainer.tabIndex=-1),q(),m.rContainer.appendChild(m.daysContainer),m.innerContainer.appendChild(m.rContainer),e.appendChild(m.innerContainer)}m.config.enableTime&&e.appendChild(function(){m.calendarContainer.classList.add("hasTime"),m.config.noCalendar&&m.calendarContainer.classList.add("noCalendar");m.timeContainer=c("div","flatpickr-time"),m.timeContainer.tabIndex=-1;var e=c("span","flatpickr-time-separator",":"),t=u("flatpickr-hour");m.hourElement=t.getElementsByTagName("input")[0];var n=u("flatpickr-minute");m.minuteElement=n.getElementsByTagName("input")[0],m.hourElement.tabIndex=m.minuteElement.tabIndex=-1,m.hourElement.value=o(m.latestSelectedDateObj?m.latestSelectedDateObj.getHours():m.config.time_24hr?m.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(m.config.defaultHour)),m.minuteElement.value=o(m.latestSelectedDateObj?m.latestSelectedDateObj.getMinutes():m.config.defaultMinute),m.hourElement.setAttribute("step",m.config.hourIncrement.toString()),m.minuteElement.setAttribute("step",m.config.minuteIncrement.toString()),m.hourElement.setAttribute("min",m.config.time_24hr?"0":"1"),m.hourElement.setAttribute("max",m.config.time_24hr?"23":"12"),m.minuteElement.setAttribute("min","0"),m.minuteElement.setAttribute("max","59"),m.timeContainer.appendChild(t),m.timeContainer.appendChild(e),m.timeContainer.appendChild(n),m.config.time_24hr&&m.timeContainer.classList.add("time24hr");if(m.config.enableSeconds){m.timeContainer.classList.add("hasSeconds");var i=u("flatpickr-second");m.secondElement=i.getElementsByTagName("input")[0],m.secondElement.value=o(m.latestSelectedDateObj?m.latestSelectedDateObj.getSeconds():m.config.defaultSeconds),m.secondElement.setAttribute("step",m.minuteElement.getAttribute("step")),m.secondElement.setAttribute("min","0"),m.secondElement.setAttribute("max","59"),m.timeContainer.appendChild(c("span","flatpickr-time-separator",":")),m.timeContainer.appendChild(i)}m.config.time_24hr||(m.amPM=c("span","flatpickr-am-pm",m.l10n.amPM[s((m.latestSelectedDateObj?m.hourElement.value:m.config.defaultHour)>11)]),m.amPM.title=m.l10n.toggleTitle,m.amPM.tabIndex=-1,m.timeContainer.appendChild(m.amPM));return m.timeContainer}()),l(m.calendarContainer,"rangeMode","range"===m.config.mode),l(m.calendarContainer,"animate",!0===m.config.animate),l(m.calendarContainer,"multiMonth",m.config.showMonths>1),m.calendarContainer.appendChild(e);var r=void 0!==m.config.appendTo&&void 0!==m.config.appendTo.nodeType;if((m.config.inline||m.config.static)&&(m.calendarContainer.classList.add(m.config.inline?"inline":"static"),m.config.inline&&(!r&&m.element.parentNode?m.element.parentNode.insertBefore(m.calendarContainer,m._input.nextSibling):void 0!==m.config.appendTo&&m.config.appendTo.appendChild(m.calendarContainer)),m.config.static)){var a=c("div","flatpickr-wrapper");m.element.parentNode&&m.element.parentNode.insertBefore(a,m.element),a.appendChild(m.element),m.altInput&&a.appendChild(m.altInput),a.appendChild(m.calendarContainer)}m.config.static||m.config.inline||(void 0!==m.config.appendTo?m.config.appendTo:window.document.body).appendChild(m.calendarContainer)}function j(e,t,n,i){var o=Q(t,!0),s=c("span","flatpickr-day "+e,t.getDate().toString());return s.dateObj=t,s.$i=i,s.setAttribute("aria-label",m.formatDate(t,m.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===v(t,m.now)&&(m.todayDateElem=s,s.classList.add("today"),s.setAttribute("aria-current","date")),o?(s.tabIndex=-1,ge(t)&&(s.classList.add("selected"),m.selectedDateElem=s,"range"===m.config.mode&&(l(s,"startRange",m.selectedDates[0]&&0===v(t,m.selectedDates[0],!0)),l(s,"endRange",m.selectedDates[1]&&0===v(t,m.selectedDates[1],!0)),"nextMonthDay"===e&&s.classList.add("inRange")))):s.classList.add("disabled"),"range"===m.config.mode&&function(e){return!("range"!==m.config.mode||m.selectedDates.length<2)&&v(e,m.selectedDates[0])>=0&&v(e,m.selectedDates[1])<=0}(t)&&!ge(t)&&s.classList.add("inRange"),m.weekNumbers&&1===m.config.showMonths&&"prevMonthDay"!==e&&n%7==1&&m.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+m.config.getWeek(t)+"</span>"),me("onDayCreate",s),s}function U(e){e.focus(),"range"===m.config.mode&&ne(e)}function z(e){for(var t=e>0?0:m.config.showMonths-1,n=e>0?m.config.showMonths:-1,i=t;i!=n;i+=e)for(var o=m.daysContainer.children[i],s=e>0?0:o.children.length-1,r=e>0?o.children.length:-1,a=s;a!=r;a+=e){var l=o.children[a];if(-1===l.className.indexOf("hidden")&&Q(l.dateObj))return l}}function B(e,t){var n=ee(document.activeElement||document.body),i=void 0!==e?e:n?document.activeElement:void 0!==m.selectedDateElem&&ee(m.selectedDateElem)?m.selectedDateElem:void 0!==m.todayDateElem&&ee(m.todayDateElem)?m.todayDateElem:z(t>0?1:-1);return void 0===i?m._input.focus():n?void function(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():m.currentMonth,i=t>0?m.config.showMonths:-1,o=t>0?1:-1,s=n-m.currentMonth;s!=i;s+=o)for(var r=m.daysContainer.children[s],a=n-m.currentMonth===s?e.$i+t:t<0?r.children.length-1:0,l=r.children.length,c=a;c>=0&&c<l&&c!=(t>0?l:-1);c+=o){var d=r.children[c];if(-1===d.className.indexOf("hidden")&&Q(d.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return U(d)}m.changeMonth(o),B(z(o),0)}(i,t):U(i)}function $(e,t){for(var n=(new Date(e,t,1).getDay()-m.l10n.firstDayOfWeek+7)%7,i=m.utils.getDaysInMonth((t-1+12)%12),o=m.utils.getDaysInMonth(t),s=window.document.createDocumentFragment(),r=m.config.showMonths>1,a=r?"prevMonthDay hidden":"prevMonthDay",l=r?"nextMonthDay hidden":"nextMonthDay",d=i+1-n,u=0;d<=i;d++,u++)s.appendChild(j(a,new Date(e,t-1,d),d,u));for(d=1;d<=o;d++,u++)s.appendChild(j("",new Date(e,t,d),d,u));for(var h=o+1;h<=42-n&&(1===m.config.showMonths||u%7!=0);h++,u++)s.appendChild(j(l,new Date(e,t+1,h%o),h,u));var p=c("div","dayContainer");return p.appendChild(s),p}function q(){if(void 0!==m.daysContainer){d(m.daysContainer),m.weekNumbers&&d(m.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<m.config.showMonths;t++){var n=new Date(m.currentYear,m.currentMonth,1);n.setMonth(m.currentMonth+t),e.appendChild($(n.getFullYear(),n.getMonth()))}m.daysContainer.appendChild(e),m.days=m.daysContainer.firstChild,"range"===m.config.mode&&1===m.selectedDates.length&&ne()}}function H(){var e=c("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=c("span","cur-month"),i=u("cur-year",{tabindex:"-1"}),o=i.getElementsByTagName("input")[0];o.setAttribute("aria-label",m.l10n.yearAriaLabel),m.config.minDate&&o.setAttribute("min",m.config.minDate.getFullYear().toString()),m.config.maxDate&&(o.setAttribute("max",m.config.maxDate.getFullYear().toString()),o.disabled=!!m.config.minDate&&m.config.minDate.getFullYear()===m.config.maxDate.getFullYear());var s=c("div","flatpickr-current-month");return s.appendChild(n),s.appendChild(i),t.appendChild(s),e.appendChild(t),{container:e,yearElement:o,monthElement:n}}function W(){d(m.monthNav),m.monthNav.appendChild(m.prevMonthNav),m.config.showMonths&&(m.yearElements=[],m.monthElements=[]);for(var e=m.config.showMonths;e--;){var t=H();m.yearElements.push(t.yearElement),m.monthElements.push(t.monthElement),m.monthNav.appendChild(t.container)}m.monthNav.appendChild(m.nextMonthNav)}function K(){m.weekdayContainer?d(m.weekdayContainer):m.weekdayContainer=c("div","flatpickr-weekdays");for(var e=m.config.showMonths;e--;){var t=c("div","flatpickr-weekdaycontainer");m.weekdayContainer.appendChild(t)}return Y(),m.weekdayContainer}function Y(){var e=m.l10n.firstDayOfWeek,t=m.l10n.weekdays.shorthand.slice();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=m.config.showMonths;n--;)m.weekdayContainer.children[n].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function G(e,t){void 0===t&&(t=!0);var n=t?e:e-m.currentMonth;n<0&&!0===m._hidePrevMonthArrow||n>0&&!0===m._hideNextMonthArrow||(m.currentMonth+=n,(m.currentMonth<0||m.currentMonth>11)&&(m.currentYear+=m.currentMonth>11?1:-1,m.currentMonth=(m.currentMonth+12)%12,me("onYearChange")),q(),me("onMonthChange"),ye())}function J(e){return!(!m.config.appendTo||!m.config.appendTo.contains(e))||m.calendarContainer.contains(e)}function Z(e){if(m.isOpen&&!m.config.inline){var t=function(e){if("function"==typeof e.composedPath){var t=e.composedPath();return t[0]}return e.target}(e),n=J(t),i=t===m.input||t===m.altInput||m.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(m.input)||~e.path.indexOf(m.altInput)),o="blur"===e.type?i&&e.relatedTarget&&!J(e.relatedTarget):!i&&!n&&!J(e.relatedTarget),s=!m.config.ignoredFocusElements.some(function(e){return e.contains(t)});o&&s&&(m.close(),"range"===m.config.mode&&1===m.selectedDates.length&&(m.clear(!1),m.redraw()))}}function X(e){if(!(!e||m.config.minDate&&e<m.config.minDate.getFullYear()||m.config.maxDate&&e>m.config.maxDate.getFullYear())){var t=e,n=m.currentYear!==t;m.currentYear=t||m.currentYear,m.config.maxDate&&m.currentYear===m.config.maxDate.getFullYear()?m.currentMonth=Math.min(m.config.maxDate.getMonth(),m.currentMonth):m.config.minDate&&m.currentYear===m.config.minDate.getFullYear()&&(m.currentMonth=Math.max(m.config.minDate.getMonth(),m.currentMonth)),n&&(m.redraw(),me("onYearChange"))}}function Q(e,t){void 0===t&&(t=!0);var n=m.parseDate(e,void 0,t);if(m.config.minDate&&n&&v(n,m.config.minDate,void 0!==t?t:!m.minDateHasTime)<0||m.config.maxDate&&n&&v(n,m.config.maxDate,void 0!==t?t:!m.maxDateHasTime)>0)return!1;if(0===m.config.enable.length&&0===m.config.disable.length)return!0;if(void 0===n)return!1;for(var i=m.config.enable.length>0,o=i?m.config.enable:m.config.disable,s=0,r=void 0;s<o.length;s++){if("function"==typeof(r=o[s])&&r(n))return i;if(r instanceof Date&&void 0!==n&&r.getTime()===n.getTime())return i;if("string"==typeof r&&void 0!==n){var a=m.parseDate(r,void 0,!0);return a&&a.getTime()===n.getTime()?i:!i}if("object"==typeof r&&void 0!==n&&r.from&&r.to&&n.getTime()>=r.from.getTime()&&n.getTime()<=r.to.getTime())return i}return!i}function ee(e){return void 0!==m.daysContainer&&(-1===e.className.indexOf("hidden")&&m.daysContainer.contains(e))}function te(e){var t=e.target===m._input,n=m.config.allowInput,i=m.isOpen&&(!n||!t),o=m.config.inline&&t&&!n;if(13===e.keyCode&&t){if(n)return m.setDate(m._input.value,!0,e.target===m.altInput?m.config.altFormat:m.config.dateFormat),e.target.blur();m.open()}else if(J(e.target)||i||o){var s=!!m.timeContainer&&m.timeContainer.contains(e.target);switch(e.keyCode){case 13:s?(S(),ce()):de(e);break;case 27:e.preventDefault(),ce();break;case 8:case 46:t&&!m.config.allowInput&&(e.preventDefault(),m.clear());break;case 37:case 39:if(s)m.hourElement&&m.hourElement.focus();else if(e.preventDefault(),void 0!==m.daysContainer&&(!1===n||document.activeElement&&ee(document.activeElement))){var r=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),G(r),B(z(1),0)):B(void 0,r)}break;case 38:case 40:e.preventDefault();var a=40===e.keyCode?1:-1;m.daysContainer&&void 0!==e.target.$i||e.target===m.input?e.ctrlKey?(e.stopPropagation(),X(m.currentYear-a),B(z(1),0)):s||B(void 0,7*a):m.config.enableTime&&(!s&&m.hourElement&&m.hourElement.focus(),S(e),m._debouncedChange());break;case 9:if(s){var l=[m.hourElement,m.minuteElement,m.secondElement,m.amPM].filter(function(e){return e}),c=l.indexOf(e.target);if(-1!==c){var d=l[c+(e.shiftKey?-1:1)];void 0!==d?(e.preventDefault(),d.focus()):e.shiftKey&&(e.preventDefault(),m._input.focus())}}}}if(void 0!==m.amPM&&e.target===m.amPM)switch(e.key){case m.l10n.amPM[0].charAt(0):case m.l10n.amPM[0].charAt(0).toLowerCase():m.amPM.textContent=m.l10n.amPM[0],A(),ve();break;case m.l10n.amPM[1].charAt(0):case m.l10n.amPM[1].charAt(0).toLowerCase():m.amPM.textContent=m.l10n.amPM[1],A(),ve()}me("onKeyDown",e)}function ne(e){if(1===m.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled"))){for(var t=e?e.dateObj.getTime():m.days.firstElementChild.dateObj.getTime(),n=m.parseDate(m.selectedDates[0],void 0,!0).getTime(),i=Math.min(t,m.selectedDates[0].getTime()),o=Math.max(t,m.selectedDates[0].getTime()),s=m.daysContainer.lastChild.lastChild.dateObj.getTime(),r=!1,a=0,l=0,c=i;c<s;c+=w.DAY)Q(new Date(c),!0)||(r=r||c>i&&c<o,c<n&&(!a||c>a)?a=c:c>n&&(!l||c<l)&&(l=c));for(var d=0;d<m.config.showMonths;d++)for(var u=m.daysContainer.children[d],h=m.daysContainer.children[d-1],p=function(i,o){var s=u.children[i],c=s.dateObj,p=c.getTime(),f=a>0&&p<a||l>0&&p>l;return f?(s.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){s.classList.remove(e)}),"continue"):r&&!f?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){s.classList.remove(e)}),void(void 0!==e&&(e.classList.add(t<m.selectedDates[0].getTime()?"startRange":"endRange"),!u.contains(e)&&d>0&&h&&h.lastChild.dateObj.getTime()>=p||(n<t&&p===n?s.classList.add("startRange"):n>t&&p===n&&s.classList.add("endRange"),p>=a&&(0===l||p<=l)&&k(p,n,t)&&s.classList.add("inRange")))))},f=0,g=u.children.length;f<g;f++)p(f,g)}}function ie(){!m.isOpen||m.config.static||m.config.inline||ae()}function oe(){m.setDate(void 0!==m.config.minDate?new Date(m.config.minDate.getTime()):new Date,!1),D(),ve()}function se(e){return function(t){var n=m.config["_"+e+"Date"]=m.parseDate(t,m.config.dateFormat),i=m.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(m["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),m.selectedDates&&(m.selectedDates=m.selectedDates.filter(function(e){return Q(e)}),m.selectedDates.length||"min"!==e||T(n),ve()),m.daysContainer&&(le(),void 0!==n?m.currentYearElement[e]=n.getFullYear().toString():m.currentYearElement.removeAttribute(e),m.currentYearElement.disabled=!!i&&void 0!==n&&i.getFullYear()===n.getFullYear())}}function re(){"object"!=typeof m.config.locale&&void 0===E.l10ns[m.config.locale]&&m.config.errorHandler(new Error("flatpickr: invalid locale "+m.config.locale)),m.l10n=e({},E.l10ns.default,"object"==typeof m.config.locale?m.config.locale:"default"!==m.config.locale?E.l10ns[m.config.locale]:void 0),f.K="("+m.l10n.amPM[0]+"|"+m.l10n.amPM[1]+"|"+m.l10n.amPM[0].toLowerCase()+"|"+m.l10n.amPM[1].toLowerCase()+")",m.formatDate=y(m),m.parseDate=b({config:m.config,l10n:m.l10n})}function ae(e){if(void 0!==m.calendarContainer){me("onPreCalendarPosition");var t=e||m._positionElement,n=Array.prototype.reduce.call(m.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=m.calendarContainer.offsetWidth,o=m.config.position.split(" "),s=o[0],r=o.length>1?o[1]:null,a=t.getBoundingClientRect(),c=window.innerHeight-a.bottom,d="above"===s||"below"!==s&&c<n&&a.top>n,u=window.pageYOffset+a.top+(d?-n-2:t.offsetHeight+2);if(l(m.calendarContainer,"arrowTop",!d),l(m.calendarContainer,"arrowBottom",d),!m.config.inline){var h=window.pageXOffset+a.left-(null!=r&&"center"===r?(i-a.width)/2:0),p=window.document.body.offsetWidth-a.right,f=h+i>window.document.body.offsetWidth,g=p+i>window.document.body.offsetWidth;if(l(m.calendarContainer,"rightMost",f),!m.config.static)if(m.calendarContainer.style.top=u+"px",f)if(g){var y=document.styleSheets[0];if(void 0===y)return;var b=window.document.body.offsetWidth,v=Math.max(0,b/2-i/2),k=y.cssRules.length,w="{left:"+a.left+"px;right:auto;}";l(m.calendarContainer,"rightMost",!1),l(m.calendarContainer,"centerMost",!0),y.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+w,k),m.calendarContainer.style.left=v+"px",m.calendarContainer.style.right="auto"}else m.calendarContainer.style.left="auto",m.calendarContainer.style.right=p+"px";else m.calendarContainer.style.left=h+"px",m.calendarContainer.style.right="auto"}}}function le(){m.config.noCalendar||m.isMobile||(ye(),q())}function ce(){m._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(m.close,0):m.close()}function de(e){e.preventDefault(),e.stopPropagation();var t=function e(t,n){if(n(t))return t;if(t.parentNode)return e(t.parentNode,n);return}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")});if(void 0!==t){var n=t,i=m.latestSelectedDateObj=new Date(n.dateObj.getTime()),o=(i.getMonth()<m.currentMonth||i.getMonth()>m.currentMonth+m.config.showMonths-1)&&"range"!==m.config.mode;if(m.selectedDateElem=n,"single"===m.config.mode)m.selectedDates=[i];else if("multiple"===m.config.mode){var s=ge(i);s?m.selectedDates.splice(parseInt(s),1):m.selectedDates.push(i)}else"range"===m.config.mode&&(2===m.selectedDates.length&&m.clear(!1,!1),m.latestSelectedDateObj=i,m.selectedDates.push(i),0!==v(i,m.selectedDates[0],!0)&&m.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(A(),o){var r=m.currentYear!==i.getFullYear();m.currentYear=i.getFullYear(),m.currentMonth=i.getMonth(),r&&me("onYearChange"),me("onMonthChange")}if(ye(),q(),ve(),m.config.enableTime&&setTimeout(function(){return m.showTimeInput=!0},50),o||"range"===m.config.mode||1!==m.config.showMonths?void 0!==m.selectedDateElem&&void 0===m.hourElement&&m.selectedDateElem&&m.selectedDateElem.focus():U(n),void 0!==m.hourElement&&void 0!==m.hourElement&&m.hourElement.focus(),m.config.closeOnSelect){var a="single"===m.config.mode&&!m.config.enableTime,l="range"===m.config.mode&&2===m.selectedDates.length&&!m.config.enableTime;(a||l)&&ce()}P()}}m.parseDate=b({config:m.config,l10n:m.l10n}),m._handlers=[],m._bind=_,m._setHoursFromDate=T,m._positionCalendar=ae,m.changeMonth=G,m.changeYear=X,m.clear=function(e,t){void 0===e&&(e=!0);void 0===t&&(t=!0);m.input.value="",void 0!==m.altInput&&(m.altInput.value="");void 0!==m.mobileInput&&(m.mobileInput.value="");m.selectedDates=[],m.latestSelectedDateObj=void 0,!0===t&&(m.currentYear=m._initialDate.getFullYear(),m.currentMonth=m._initialDate.getMonth());m.showTimeInput=!1,!0===m.config.enableTime&&D();m.redraw(),e&&me("onChange")},m.close=function(){m.isOpen=!1,m.isMobile||(void 0!==m.calendarContainer&&m.calendarContainer.classList.remove("open"),void 0!==m._input&&m._input.classList.remove("active"));me("onClose")},m._createElement=c,m.destroy=function(){void 0!==m.config&&me("onDestroy");for(var e=m._handlers.length;e--;){var t=m._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(m._handlers=[],m.mobileInput)m.mobileInput.parentNode&&m.mobileInput.parentNode.removeChild(m.mobileInput),m.mobileInput=void 0;else if(m.calendarContainer&&m.calendarContainer.parentNode)if(m.config.static&&m.calendarContainer.parentNode){var n=m.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else m.calendarContainer.parentNode.removeChild(m.calendarContainer);m.altInput&&(m.input.type="text",m.altInput.parentNode&&m.altInput.parentNode.removeChild(m.altInput),delete m.altInput);m.input&&(m.input.type=m.input._type,m.input.classList.remove("flatpickr-input"),m.input.removeAttribute("readonly"),m.input.value="");["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete m[e]}catch(e){}})},m.isEnabled=Q,m.jumpToDate=O,m.open=function(e,t){void 0===t&&(t=m._positionElement);if(!0===m.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==m.mobileInput&&(m.mobileInput.focus(),m.mobileInput.click()),void me("onOpen");if(m._input.disabled||m.config.inline)return;var n=m.isOpen;m.isOpen=!0,n||(m.calendarContainer.classList.add("open"),m._input.classList.add("active"),me("onOpen"),ae(t));!0===m.config.enableTime&&!0===m.config.noCalendar&&(0===m.selectedDates.length&&oe(),!1!==m.config.allowInput||void 0!==e&&m.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return m.hourElement.select()},50))},m.redraw=le,m.set=function(e,n){null!==e&&"object"==typeof e?Object.assign(m.config,e):(m.config[e]=n,void 0!==ue[e]?ue[e].forEach(function(e){return e()}):t.indexOf(e)>-1&&(m.config[e]=a(n)));m.redraw(),ve(!1)},m.setDate=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=m.config.dateFormat);if(0!==e&&!e||e instanceof Array&&0===e.length)return m.clear(t);he(e,n),m.showTimeInput=m.selectedDates.length>0,m.latestSelectedDateObj=m.selectedDates[0],m.redraw(),O(),T(),ve(t),t&&me("onChange")},m.toggle=function(e){if(!0===m.isOpen)return m.close();m.open(e)};var ue={locale:[re,Y],showMonths:[W,C,K]};function he(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return m.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[m.parseDate(e,t)];else if("string"==typeof e)switch(m.config.mode){case"single":case"time":n=[m.parseDate(e,t)];break;case"multiple":n=e.split(m.config.conjunction).map(function(e){return m.parseDate(e,t)});break;case"range":n=e.split(m.l10n.rangeSeparator).map(function(e){return m.parseDate(e,t)})}else m.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));m.selectedDates=n.filter(function(e){return e instanceof Date&&Q(e,!1)}),"range"===m.config.mode&&m.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function pe(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?m.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:m.parseDate(e.from,void 0),to:m.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function me(e,t){if(void 0!==m.config){var n=m.config[e];if(void 0!==n&&n.length>0)for(var i=0;n[i]&&i<n.length;i++)n[i](m.selectedDates,m.input.value,m,t);"onChange"===e&&(m.input.dispatchEvent(fe("change")),m.input.dispatchEvent(fe("input")))}}function fe(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function ge(e){for(var t=0;t<m.selectedDates.length;t++)if(0===v(m.selectedDates[t],e))return""+t;return!1}function ye(){m.config.noCalendar||m.isMobile||!m.monthNav||(m.yearElements.forEach(function(e,t){var n=new Date(m.currentYear,m.currentMonth,1);n.setMonth(m.currentMonth+t),m.monthElements[t].textContent=p(n.getMonth(),m.config.shorthandCurrentMonth,m.l10n)+" ",e.value=n.getFullYear().toString()}),m._hidePrevMonthArrow=void 0!==m.config.minDate&&(m.currentYear===m.config.minDate.getFullYear()?m.currentMonth<=m.config.minDate.getMonth():m.currentYear<m.config.minDate.getFullYear()),m._hideNextMonthArrow=void 0!==m.config.maxDate&&(m.currentYear===m.config.maxDate.getFullYear()?m.currentMonth+1>m.config.maxDate.getMonth():m.currentYear>m.config.maxDate.getFullYear()))}function be(e){return m.selectedDates.map(function(t){return m.formatDate(t,e)}).filter(function(e,t,n){return"range"!==m.config.mode||m.config.enableTime||n.indexOf(e)===t}).join("range"!==m.config.mode?m.config.conjunction:m.l10n.rangeSeparator)}function ve(e){if(void 0===e&&(e=!0),0===m.selectedDates.length)return m.clear(e);void 0!==m.mobileInput&&m.mobileFormatStr&&(m.mobileInput.value=void 0!==m.latestSelectedDateObj?m.formatDate(m.latestSelectedDateObj,m.mobileFormatStr):""),m.input.value=be(m.config.dateFormat),void 0!==m.altInput&&(m.altInput.value=be(m.config.altFormat)),!1!==e&&me("onValueUpdate")}function ke(e){e.preventDefault();var t=m.prevMonthNav.contains(e.target),n=m.nextMonthNav.contains(e.target);t||n?G(t?-1:1):m.yearElements.indexOf(e.target)>=0?e.target.select():e.target.classList.contains("arrowUp")?m.changeYear(m.currentYear+1):e.target.classList.contains("arrowDown")&&m.changeYear(m.currentYear-1)}return function(){m.element=m.input=n,m.isOpen=!1,function(){var i=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],o=e({},h,JSON.parse(JSON.stringify(n.dataset||{}))),s={};m.config.parseDate=o.parseDate,m.config.formatDate=o.formatDate,Object.defineProperty(m.config,"enable",{get:function(){return m.config._enable},set:function(e){m.config._enable=pe(e)}}),Object.defineProperty(m.config,"disable",{get:function(){return m.config._disable},set:function(e){m.config._disable=pe(e)}});var r="time"===o.mode;o.dateFormat||!o.enableTime&&!r||(s.dateFormat=o.noCalendar||r?"H:i"+(o.enableSeconds?":S":""):E.defaultConfig.dateFormat+" H:i"+(o.enableSeconds?":S":"")),o.altInput&&(o.enableTime||r)&&!o.altFormat&&(s.altFormat=o.noCalendar||r?"h:i"+(o.enableSeconds?":S K":" K"):E.defaultConfig.altFormat+" h:i"+(o.enableSeconds?":S":"")+" K"),Object.defineProperty(m.config,"minDate",{get:function(){return m.config._minDate},set:se("min")}),Object.defineProperty(m.config,"maxDate",{get:function(){return m.config._maxDate},set:se("max")});var l=function(e){return function(t){m.config["min"===e?"_minTime":"_maxTime"]=m.parseDate(t,"H:i")}};Object.defineProperty(m.config,"minTime",{get:function(){return m.config._minTime},set:l("min")}),Object.defineProperty(m.config,"maxTime",{get:function(){return m.config._maxTime},set:l("max")}),"time"===o.mode&&(m.config.noCalendar=!0,m.config.enableTime=!0),Object.assign(m.config,s,o);for(var c=0;c<i.length;c++)m.config[i[c]]=!0===m.config[i[c]]||"true"===m.config[i[c]];t.filter(function(e){return void 0!==m.config[e]}).forEach(function(e){m.config[e]=a(m.config[e]||[]).map(g)}),m.isMobile=!m.config.disableMobile&&!m.config.inline&&"single"===m.config.mode&&!m.config.disable.length&&!m.config.enable.length&&!m.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var c=0;c<m.config.plugins.length;c++){var d=m.config.plugins[c](m)||{};for(var u in d)t.indexOf(u)>-1?m.config[u]=a(d[u]).map(g).concat(m.config[u]):void 0===o[u]&&(m.config[u]=d[u])}me("onParseConfig")}(),re(),m.input=m.config.wrap?n.querySelector("[data-input]"):n,m.input?(m.input._type=m.input.type,m.input.type="text",m.input.classList.add("flatpickr-input"),m._input=m.input,m.config.altInput&&(m.altInput=c(m.input.nodeName,m.input.className+" "+m.config.altInputClass),m._input=m.altInput,m.altInput.placeholder=m.input.placeholder,m.altInput.disabled=m.input.disabled,m.altInput.required=m.input.required,m.altInput.tabIndex=m.input.tabIndex,m.altInput.type="text",m.input.setAttribute("type","hidden"),!m.config.static&&m.input.parentNode&&m.input.parentNode.insertBefore(m.altInput,m.input.nextSibling)),m.config.allowInput||m._input.setAttribute("readonly","readonly"),m._positionElement=m.config.positionElement||m._input):m.config.errorHandler(new Error("Invalid input element specified")),function(){m.selectedDates=[],m.now=m.parseDate(m.config.now)||new Date;var e=m.config.defaultDate||("INPUT"!==m.input.nodeName&&"TEXTAREA"!==m.input.nodeName||!m.input.placeholder||m.input.value!==m.input.placeholder?m.input.value:null);e&&he(e,m.config.dateFormat),m._initialDate=m.selectedDates.length>0?m.selectedDates[0]:m.config.minDate&&m.config.minDate.getTime()>m.now.getTime()?m.config.minDate:m.config.maxDate&&m.config.maxDate.getTime()<m.now.getTime()?m.config.maxDate:m.now,m.currentYear=m._initialDate.getFullYear(),m.currentMonth=m._initialDate.getMonth(),m.selectedDates.length>0&&(m.latestSelectedDateObj=m.selectedDates[0]),void 0!==m.config.minTime&&(m.config.minTime=m.parseDate(m.config.minTime,"H:i")),void 0!==m.config.maxTime&&(m.config.maxTime=m.parseDate(m.config.maxTime,"H:i")),m.minDateHasTime=!!m.config.minDate&&(m.config.minDate.getHours()>0||m.config.minDate.getMinutes()>0||m.config.minDate.getSeconds()>0),m.maxDateHasTime=!!m.config.maxDate&&(m.config.maxDate.getHours()>0||m.config.maxDate.getMinutes()>0||m.config.maxDate.getSeconds()>0),Object.defineProperty(m,"showTimeInput",{get:function(){return m._showTimeInput},set:function(e){m._showTimeInput=e,m.calendarContainer&&l(m.calendarContainer,"showTimeInput",e),m.isOpen&&ae()}})}(),m.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=m.currentMonth),void 0===t&&(t=m.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:m.l10n.daysInMonth[e]}},m.isMobile||N();F(),(m.selectedDates.length||m.config.noCalendar)&&(m.config.enableTime&&T(m.config.noCalendar?m.latestSelectedDateObj||m.config.minDate:void 0),ve(!1));C(),m.showTimeInput=m.selectedDates.length>0||m.config.noCalendar;var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!m.isMobile&&i&&ae();me("onReady")}(),m}function S(e,t){for(var n=Array.prototype.slice.call(e).filter(function(e){return e instanceof HTMLElement}),i=[],o=0;o<n.length;o++){var s=n[o];try{if(null!==s.getAttribute("data-fp-omit"))continue;void 0!==s._flatpickr&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=C(s,t||{}),i.push(s._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return S(this,e)},HTMLElement.prototype.flatpickr=function(e){return S([this],e)});var E=function(e,t){return"string"==typeof e?S(window.document.querySelectorAll(e),t):e instanceof Node?S([e],t):S(e,t)};return E.defaultConfig=n,E.l10ns={en:e({},i),default:e({},i)},E.localize=function(t){E.l10ns.default=e({},E.l10ns.default,t)},E.setDefaults=function(t){E.defaultConfig=e({},E.defaultConfig,t)},E.parseDate=b({}),E.formatDate=y({}),E.compareDates=v,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return S(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=E),E}),e("skylark-formio/widgets/CalendarWidget",["../vendors/flatpickr/flatpickr","./InputWidget","../utils/utils","skylark-moment","skylark-lodash"],function(e,t,n,i,o){"use strict";return class s extends t{static get defaultSettings(){return{type:"calendar",altInput:!0,allowInput:!0,clickOpens:!0,enableDate:!0,enableTime:!0,mode:"single",noCalendar:!1,format:"yyyy-MM-dd hh:mm a",dateFormat:"yyyy-MM-ddTHH:mm:ssZ",useLocaleSettings:!1,language:"us-en",hourIncrement:1,minuteIncrement:5,time_24hr:!1,saveAs:"date",displayInTimezone:"",timezone:"",disable:[],minDate:"",maxDate:""}}constructor(e,t){super(e,t),this.settings.noCalendar&&(this.settings.format=this.settings.format.replace(/yyyy-MM-dd /g,"")),this.settings.enableTime?this.settings.time_24hr&&(this.settings.format=this.settings.format.replace(/hh:mm a$/g,"HH:mm")):this.settings.format=this.settings.format.replace(/ hh:mm a$/g,"")}loadZones(){const e=this.timezone;return!(n.zonesLoaded()||!n.shouldLoadZones(e))&&(n.loadZones(e).then(()=>this.emit("redraw")),!0)}attach(t){const i=super.attach(t);t&&!t.getAttribute("placeholder")&&t.setAttribute("placeholder",this.settings.format);const o=n.getLocaleDateFormatInfo(this.settings.language);return this.defaultFormat={date:o.dayFirst?"d/m/Y ":"m/d/Y ",time:"G:i K"},this.closedOn=0,this.valueFormat=this.settings.dateFormat||"yyyy-MM-ddTHH:mm:ssZ",this.valueMomentFormat=n.convertFormatToMoment(this.valueFormat),this.settings.minDate=n.getDateSetting(this.settings.minDate),this.settings.disable=this.disabledDates,this.settings.disableWeekends&&this.settings.disable.push(this.disableWeekends),this.settings.disableWeekdays&&this.settings.disable.push(this.disableWeekdays),this.settings.disableFunction&&this.settings.disable.push(this.disableFunction),this.settings.maxDate=n.getDateSetting(this.settings.maxDate),this.settings.altFormat=n.convertFormatToFlatpickr(this.settings.format),this.settings.dateFormat=n.convertFormatToFlatpickr(this.settings.dateFormat),this.settings.onChange=(()=>this.emit("update")),this.settings.onClose=(()=>{this.closedOn=Date.now(),this.calendar&&this.emit("blur")}),this.settings.formatDate=((t,i)=>this.settings.readOnly&&i===this.settings.altFormat?"text"===this.settings.saveAs||this.formatDate()?e.formatDate(t,i):n.formatOffset(e.undefined.bind(e),t,i,this.timezone):e.formatDate(t,i)),this._input&&(this.calendar=new e(this._input,this.settings),this.setInputMask(this.calendar._input,n.convertFormatToMask(this.settings.format)),this.addEventListener(this.calendar._input,"blur",()=>this.calendar.setDate(this.calendar._input.value,!0,this.settings.altFormat))),i}get disableWeekends(){return function(e){return 0===e.getDay()||6===e.getDay()}}get disableWeekdays(){return e=>!this.disableWeekends(e)}get disableFunction(){return e=>this.evaluate(`return ${this.settings.disableFunction}`,{date:e})}get timezone(){return this.settings.timezone?this.settings.timezone:"submission"===this.settings.displayInTimezone&&this.settings.submissionTimezone?this.settings.submissionTimezone:"utc"===this.settings.displayInTimezone?"UTC":n.currentTimezone()}get defaultSettings(){return s.defaultSettings}addSuffix(e){return this.addEventListener(e,"click",()=>{this.calendar&&!this.calendar.isOpen&&Date.now()-this.closedOn>200&&this.calendar.open()}),e}set disabled(e){super.disabled=e,this.calendar&&(e?this.calendar._input.setAttribute("disabled","disabled"):this.calendar._input.removeAttribute("disabled"),this.calendar.close(),this.calendar.redraw())}get input(){return this.calendar?this.calendar.altInput:null}get disabledDates(){if(this.settings.disabledDates){const e=this.settings.disabledDates.split(",");return e.map(e=>{const t=/\d{4}-\d{2}-\d{2}/g,n=e.match(t);if(n.length)return 1===n.length?e.match(t)[0]:{from:e.match(t)[0],to:e.match(t)[1]}})}return[]}get localeFormat(){let e="";return this.settings.enableDate&&(e+=this.defaultFormat.date),this.settings.enableTime&&(e+=this.defaultFormat.time),e}get dateTimeFormat(){return this.settings.useLocaleSettings?this.localeFormat:n.convertFormatToFlatpickr(this.dateFormat)}get dateFormat(){return o.get(this.settings,"format","yyyy-MM-dd hh:mm a")}getDateValue(e,t){return i(e).format(n.convertFormatToMoment(t))}getValue(){if(!this.calendar)return super.getValue();const e=this.calendar.selectedDates;return e&&e.length?e[0]instanceof Date?this.getDateValue(e[0],this.valueFormat):"Invalid Date":super.getValue()}setValue(e){if(!this.calendar)return super.setValue(e);e?"text"!==this.settings.saveAs&&this.settings.readOnly&&!this.loadZones()?this.calendar.setDate(n.momentDate(e,this.valueFormat,this.timezone).toDate(),!1):this.calendar.setDate(i(e,this.valueMomentFormat).toDate(),!1):this.calendar.clear(!1)}getValueAsString(e,t){return t=t||this.dateFormat,"text"===this.settings.saveAs?this.getDateValue(e,t):n.formatDate(e,t,this.timezone)}validationValue(e){return"string"==typeof e?new Date(e):e.map(e=>new Date(e))}destroy(){super.destroy(),this.calendar&&this.calendar.destroy()}}}),e("skylark-formio/widgets/index",["./InputWidget","./CalendarWidget"],function(e,t){"use strict";return{input:e,calendar:t}}),e("skylark-formio/components/_classes/input/Input",["../multivalue/Multivalue","../../../utils/utils","../../../widgets/index","skylark-lodash"],function(e,t,n,i){"use strict";return class extends e{constructor(e,t,n){super(e,t,n),this.triggerUpdateValueAt=i.debounce(this.updateValueAt.bind(this),100)}static schema(...t){return e.schema({widget:{type:"input"}},...t)}get inputInfo(){const e={name:this.options.name,type:this.component.inputType||"text",class:"form-control",lang:this.options.language};return this.component.placeholder&&(e.placeholder=this.t(this.component.placeholder)),this.component.tabindex&&(e.tabindex=this.component.tabindex),this.disabled&&(e.disabled="disabled"),i.defaults(e,this.component.attributes),{id:this.key,type:"input",changeEvent:"input",content:"",attr:e}}get maskOptions(){return i.map(this.component.inputMasks,e=>({label:e.label,value:e.label}))}get isMultipleMasksField(){return this.component.allowMultipleMasks&&!!this.component.inputMasks&&!!this.component.inputMasks.length}getMaskByName(e){const t=i.find(this.component.inputMasks,t=>t.label===e);return t?t.mask:void 0}setInputMask(e,t){return super.setInputMask(e,t||this.component.inputMask,!this.component.placeholder)}getMaskOptions(){return this.component.inputMasks.map(e=>({label:e.label,value:e.label}))}get remainingWords(){const e=i.parseInt(i.get(this.component,"validate.maxWords"),10),t=i.words(this.dataValue).length;return e-t}renderElement(e,t){e&&"string"==typeof e&&(e=e.replace(/"/g,"&quot;"));const n=this.inputInfo;if(n.attr=n.attr||{},n.attr.value=this.getValueAsString(this.formatValue(this.parseValue(e))),this.isMultipleMasksField&&(n.attr.class+=" formio-multiple-mask-input"),this.component.widget&&"calendar"===this.component.widget.type){const e=this.renderTemplate("icon",{ref:"icon",className:this.iconClass(this.component.enableDate||this.component.widget.enableDate?"calendar":"time"),styles:"",content:""}).trim();this.component.prefix!==e&&(this.component.suffix=e)}return this.isMultipleMasksField?this.renderTemplate("multipleMasksInput",{input:n,value:e,index:t,selectOptions:this.getMaskOptions()||[]}):this.renderTemplate("input",{input:n,value:this.formatValue(this.parseValue(e)),index:t})}setCounter(e,t,n,i){if(i){const o=i-n;o>0?this.removeClass(t,"text-danger"):this.addClass(t,"text-danger"),this.setContent(t,this.t(`{{ remaining }} ${e} remaining.`,{remaining:o}))}else this.setContent(t,this.t(`{{ count }} ${e}`,{count:n}))}updateValueAt(e,t,n){if(t=t||{},i.get(this.component,"showWordCount",!1)&&this.refs.wordcount&&this.refs.wordcount[n]){const t=i.parseInt(i.get(this.component,"validate.maxWords",0),10);this.setCounter("words",this.refs.wordcount[n],i.words(e).length,t)}if(i.get(this.component,"showCharCount",!1)&&this.refs.charcount&&this.refs.charcount[n]){const t=i.parseInt(i.get(this.component,"validate.maxLength",0),10);this.setCounter("characters",this.refs.charcount[n],e.length,t)}}getValueAt(e){const t=this.performInputMapping(this.refs.input[e]);return t&&t.widget?t.widget.getValue():t?t.value:void 0}updateValue(e,t,n){t=t||{};const i=super.updateValue(e,t);return this.triggerUpdateValueAt(this.dataValue,t,n),i}parseValue(e){return e}formatValue(e){return e}attach(e){return this.loadRefs(e,{charcount:"multiple",wordcount:"multiple",prefix:"multiple",suffix:"multiple"}),super.attach(e)}getWidget(e){return e=e||0,this.refs.input&&this.refs.input[e]?this.refs.input[e].widget:null}getValueAsString(e){return super.getValueAsString(this.getWidgetValueAsString(e))}attachElement(e,t){super.attachElement(e,t),e.widget&&e.widget.destroy(),e.widget=this.createWidget(t),e.widget&&(e.widget.attach(e),this.refs.prefix&&this.refs.prefix[t]&&e.widget.addPrefix(this.refs.prefix[t]),this.refs.suffix&&this.refs.suffix[t]&&e.widget.addSuffix(this.refs.suffix[t])),this.addFocusBlurEvents(e),this.options.submitOnEnter&&this.addEventListener(e,"keypress",e=>{const t=e.keyCode||e.which;13===t&&(e.preventDefault(),e.stopPropagation(),this.emit("submitButton"))})}createWidget(e){if(!this.component.widget)return null;const t="string"==typeof this.component.widget?{type:this.component.widget}:this.component.widget;if(!n.hasOwnProperty(t.type))return null;const i=new n[t.type](t,this.component);return i.on("update",()=>this.updateValue(i.getValue(),{modified:!0},e),!0),i.on("redraw",()=>this.redraw(),!0),i}detach(){if(super.detach(),this.refs&&this.refs.input)for(let e=0;e<=this.refs.input.length;e++){const t=this.getWidget(e);t&&t.destroy()}}addFocusBlurEvents(e){this.addEventListener(e,"focus",()=>{this.root.focusedComponent!==this?(this.root.pendingBlur&&this.root.pendingBlur(),this.root.focusedComponent=this,this.emit("focus",this)):this.root.focusedComponent===this&&this.root.pendingBlur&&(this.root.pendingBlur.cancel(),this.root.pendingBlur=null)}),this.addEventListener(e,"blur",()=>{this.root.pendingBlur=t.delay(()=>{this.emit("blur",this),"blur"===this.component.validateOn&&this.root.triggerChange({},{instance:this,component:this.component,value:this.dataValue,flags:{}}),this.root.focusedComponent=null,this.root.pendingBlur=null})})}}}),e("skylark-formio/components/button/Button",["skylark-lodash","../_classes/field/Field","../_classes/input/Input","../../utils/utils"],function(e,t,n,i){"use strict";return class o extends t{static schema(...e){return n.schema({type:"button",label:"Submit",key:"submit",size:"md",leftIcon:"",rightIcon:"",block:!1,action:"submit",persistent:!1,disableOnInvalid:!1,theme:"primary",dataGridLabel:!0},...e)}static get builderInfo(){return{title:"Button",group:"basic",icon:"stop",documentation:"http://help.form.io/userguide/#button",weight:110,schema:o.schema()}}get defaultSchema(){return o.schema()}get inputInfo(){const e=super.elementInfo();return e.type="button",e.attr.type=["submit","saveState"].includes(this.component.action)?"submit":"button",this.component.theme=this.component.theme||"default",e.attr.class=`btn btn-${this.component.theme}`,this.component.size&&(e.attr.class+=` btn-${this.component.size}`),this.component.block&&(e.attr.class+=" btn-block"),this.component.customClass&&(e.attr.class+=` ${this.component.customClass}`),e.content=this.t(this.component.label),e}get labelInfo(){return{hidden:!0}}set loading(e){this.setLoading(this.refs.button,e)}createLabel(){}createInput(e){return this.refs.button=super.createInput(e),this.refs.button}get emptyValue(){return!1}getValue(){return this.dataValue}get clicked(){return this.dataValue}get defaultValue(){return!1}get className(){let e=super.className;return e+=" form-group"}render(){return(this.viewOnly||this.options.hideButtons)&&(this._visible=!1),super.render(this.renderTemplate("button",{component:this.component,input:this.inputInfo}))}attachButton(){this.addShortcut(this.refs.button);let e=null,t=null;if("submit"===this.component.action&&(this.on("submitButton",()=>{this.disabled=!0},!0),this.on("submitDone",()=>{this.loading=!1,this.disabled=!1,this.addClass(this.refs.button,"btn-success submit-success"),this.removeClass(this.refs.button,"btn-danger submit-fail"),this.addClass(this.refs.buttonMessageContainer,"has-success"),this.removeClass(this.refs.buttonMessageContainer,"has-error"),this.setContent(this.refs.buttonMessage,this.t("complete"))},!0),this.on("submitError",()=>{this.loading=!1,this.disabled=!1,this.removeClass(this.refs.button,"btn-success submit-success"),this.addClass(this.refs.button,"btn-danger submit-fail"),this.removeClass(this.refs.buttonMessageContainer,"has-success"),this.addClass(this.refs.buttonMessageContainer,"has-error"),this.setContent(this.refs.buttonMessage,this.t(this.errorMessage("error")))},!0),e=((e,t)=>{this.removeClass(this.refs.button,"btn-success submit-success"),this.removeClass(this.refs.button,"btn-danger submit-fail"),t&&this.hasError&&(this.hasError=!1,this.setContent(this.refs.buttonMessage,""),this.removeClass(this.refs.buttonMessageContainer,"has-success"),this.removeClass(this.refs.buttonMessageContainer,"has-error"))}),t=(()=>{this.hasError=!0,this.removeClass(this.refs.button,"btn-success submit-success"),this.addClass(this.refs.button,"btn-danger submit-fail"),this.removeClass(this.refs.buttonMessageContainer,"has-success"),this.addClass(this.refs.buttonMessageContainer,"has-error"),this.setContent(this.refs.buttonMessage,this.t(this.errorMessage("error")))})),"url"===this.component.action&&(this.on("requestButton",()=>{this.disabled=!0},!0),this.on("requestDone",()=>{this.loading=!1,this.disabled=!1},!0)),this.on("change",(t,n)=>{const i=n&&n.noValidate?!this.root||this.root.checkValidity(this.root.data):t.isValid;this.loading=!1,this.disabled=this.shouldDisabled||this.component.disableOnInvalid&&!i,this.setDisabled(this.refs.button,this.disabled),e&&e(t,i)},!0),this.on("error",()=>{this.loading=!1,this.disabled=!1,t&&t()},!0),this.addEventListener(this.refs.button,"click",this.onClick.bind(this)),this.disabled=this.shouldDisabled,"oauth"===this.component.action&&this.component.oauth&&this.component.oauth.authURI){const e=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const t=new RegExp(`[\\?&]${e}=([^&#]*)`).exec(location.search);if(!t)return t;return decodeURIComponent(t[1].replace(/\+/g," "))}("iss");e&&0===this.component.oauth.authURI.indexOf(e)&&this.openOauth()}}attach(e){this.loadRefs(e,{button:"single",buttonMessageContainer:"single",buttonMessage:"single"});const t=super.attach(e);return this.attachButton(),t}detach(e){e&&this.refs.button&&this.removeShortcut(this.refs.button)}onClick(t){if(this.triggerReCaptcha(),!this.disabled&&"builder"!==this.options.attachMode)switch(this.dataValue=!0,"submit"!==this.component.action&&this.component.showValidations&&this.emit("checkValidity",this.data),this.component.action){case"saveState":case"submit":t.preventDefault(),t.stopPropagation(),this.loading=!0,this.emit("submitButton",{state:this.component.state||"submitted",component:this.component,instance:this});break;case"event":this.emit(this.interpolate(this.component.event),this.data),this.events.emit(this.interpolate(this.component.event),this.data),this.emit("customEvent",{type:this.interpolate(this.component.event),component:this.component,data:this.data,event:t});break;case"custom":{const t=this.getRoot(),n=i.flattenComponents(t.component.components,!0),o={};e.each(n,(e,n)=>{const i=t.getComponent(n);i&&(o[n]=i)}),this.evaluate(this.component.custom,{form:t,flattened:n,components:o});break}case"url":this.loading=!0,this.emit("requestButton",{component:this.component,instance:this}),this.emit("requestUrl",{url:this.interpolate(this.component.url),headers:this.component.headers});break;case"reset":this.emit("resetForm");break;case"delete":this.emit("deleteSubmission");break;case"oauth":if(this.root===this)return void console.warn("You must add the OAuth button to a form for it to function properly");if(!this.component.oauth){this.root.setAlert("danger","You must assign this button to an OAuth action before it will work.");break}if(this.component.oauth.error){this.root.setAlert("danger",`The Following Error Has Occured${this.component.oauth.error}`);break}this.openOauth(this.component.oauth)}}openOauth(){if(!this.root.formio)return void console.warn("You must attach a Form API url to your form in order to use OAuth buttons.");const e=this.component.oauth;let t={response_type:"code",client_id:e.clientId,redirect_uri:window.location.origin||`${window.location.protocol}//${window.location.host}`,state:e.state,scope:e.scope};e.display&&(t.display=e.display),t=Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&");const n=`${e.authURI}?${t}`,i=window.open(n,e.provider,"width=1020,height=618"),o=setInterval(()=>{try{const t=i.location.host,n=window.location.host;if(i&&!i.closed&&t===n&&i.location.search){i.close();const t=i.location.search.substr(1).split("&").reduce((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e},{});if(t.error)return alert(t.error_description||t.error),void this.root.setAlert("danger",t.error_description||t.error);if(e.state!==t.state)return void this.root.setAlert("danger","OAuth state does not match. Please try logging in again.");const n={data:{},oauth:{}};n.oauth[e.provider]=t,n.oauth[e.provider].redirectURI=window.location.origin||`${window.location.protocol}//${window.location.host}`,this.root.formio.saveSubmission(n).then(e=>{this.root.onSubmit(e,!0)}).catch(e=>{this.root.onSubmissionError(e)})}}catch(e){"SecurityError"!==e.name&&this.root.setAlert("danger",e.message||e)}i&&!i.closed&&void 0!==i.closed||clearInterval(o)},100)}focus(){this.refs.button&&this.refs.button.focus()}triggerReCaptcha(){if(!this.root)return;const e=this.root.components.find(e=>"recaptcha"===e.component.type&&"buttonClick"===e.component.eventType&&e.component.buttonKey===this.component.key);e&&e.verify(`${this.component.key}Click`)}}}),e("skylark-formio/components/checkbox/Checkbox",["../_classes/field/Field"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"checkbox",inputType:"checkbox",label:"Checkbox",key:"checkbox",dataGridLabel:!0,labelPosition:"right",value:"",name:""},...t)}static get builderInfo(){return{title:"Checkbox",group:"basic",icon:"check-square",documentation:"http://help.form.io/userguide/#checkbox",weight:50,schema:t.schema()}}get defaultSchema(){return t.schema()}get defaultValue(){return this.component.name?"":"true"===(this.component.defaultValue||!1).toString()}get labelClass(){let e="";return this.isInputComponent&&!this.options.inputsOnly&&this.component.validate&&this.component.validate.required&&(e+=" field-required"),`${e}`}get hasSetValue(){return this.hasValue()}get inputInfo(){const e=super.elementInfo();return e.type="input",e.changeEvent="click",e.attr.type=this.component.inputType||"checkbox",e.attr.class="form-check-input",this.component.name&&(e.attr.name=`data[${this.component.name}]`),e.attr.value=this.component.value?this.component.value:0,e.label=this.t(this.component.label),e.labelClass=this.labelClass,e}get labelInfo(){return{hidden:!0}}render(){return super.render(this.renderTemplate("checkbox",{input:this.inputInfo,checked:this.dataValue,tooltip:this.interpolate(this.t(this.component.tooltip)||"").replace(/(?:\r\n|\r|\n)/g,"<br />")}))}attach(e){return this.loadRefs(e,{input:"multiple"}),this.input=this.refs.input[0],this.refs.input&&(this.addEventListener(this.input,this.inputInfo.changeEvent,()=>this.updateValue(null,{modified:!0})),this.addShortcut(this.input)),super.attach(e)}detach(e){e&&this.input&&this.removeShortcut(this.input)}get emptyValue(){return!1}isEmpty(e=this.dataValue){return super.isEmpty(e)||!1===e}get key(){return this.component.name?this.component.name:super.key}getValueAt(e){return this.component.name?this.refs.input[e].checked?this.component.value:"":!!this.refs.input[e].checked}getValue(){const e=super.getValue();return this.component.name?e?this.setCheckedState(e):this.setCheckedState(this.dataValue):""===e?this.dataValue:!!e}setCheckedState(e){if(this.input)return this.component.name?(this.input.value=e===this.component.value?this.component.value:0,this.input.checked=e===this.component.value?1:0):"on"===e?(this.input.value=1,this.input.checked=1):"off"===e?(this.input.value=0,this.input.checked=0):e?(this.input.value=1,this.input.checked=1):(this.input.value=0,this.input.checked=0),this.input.checked?this.input.setAttribute("checked",!0):this.input.removeAttribute("checked"),e}setValue(e,t={}){return(void 0!==this.setCheckedState(e)||!(this.input||void 0===e||!this.visible&&this.component.clearOnHide))&&this.updateValue(e,t)}getValueAsString(e){return e?"Yes":"No"}}}),e("skylark-formio/components/columns/Columns",["skylark-lodash","../_classes/nested/NestedComponent"],function(e,t){"use strict";return class n extends t{static schema(...e){return t.schema({label:"Columns",key:"columns",type:"columns",columns:[{components:[],width:6,offset:0,push:0,pull:0,size:"md"},{components:[],width:6,offset:0,push:0,pull:0,size:"md"}],clearOnHide:!1,input:!1,tableView:!1,persistent:!1,autoAdjust:!1,hideOnChildrenHidden:!1},...e)}static get builderInfo(){return{title:"Columns",icon:"columns",group:"layout",documentation:"http://help.form.io/userguide/#columns",weight:10,schema:n.schema()}}constructor(e,t,n){super(e,t,n),this.rows=[]}get schema(){const t=e.omit(super.schema,["components"]);return t.columns.map((n,i)=>{n.components.map((n,o)=>{const s=e.clone(n);s.internal=!0;const r=this.createComponent(s);delete r.component.internal,t.columns[i].components[o]=r.schema})}),t}get defaultSchema(){return n.schema()}get className(){return`row ${super.className}`}get columnKey(){return`column-${this.id}`}init(){super.init(),this.columns=[],e.each(this.component.columns,(t,n)=>{this.columns[n]=[],t.size||(t.size="md"),Array.isArray(t.components)||(t.components=[]),e.each(t.components,e=>{e.hideOnChildrenHidden=this.component.hideOnChildrenHidden;const t=this.createComponent(e);t.column=n,this.columns[n].push(t)})}),this.rows=this.groupByRow()}labelIsHidden(){return!0}render(){return super.render(this.renderTemplate("columns",{columnKey:this.columnKey,columnComponents:this.columns.map(e=>this.renderComponents(e))}))}attach(e){this.loadRefs(e,{[this.columnKey]:"multiple"});const t=super.attach(e);return this.refs[this.columnKey].forEach((e,t)=>this.attachComponents(e,this.columns[t],this.component.columns[t].components)),t}get gridSize(){return 12}justifyRow(t){const n=e.filter(t,"visible"),i=t.length,o=n.length;if(i>0&&o>0){const t=Math.floor(this.gridSize/o),i=t*o,s=this.gridSize-i;e.each(n,e=>{e.component.width=t}),e.last(n).component.width+=s,e.each(n,e=>{e.element&&e.element.setAttribute("class",e.className)})}}groupByRow(){const t=e=>e.component.width,n=e.reduce(this.components,(n,i)=>{const o=[...n.stack,i];return e.sumBy(o,t)<=this.gridSize?(n.stack=o,n):(n.rows=[...n.rows,n.stack],n.stack=[i],n)},{stack:[],rows:[]});return e.concat(n.rows,[n.stack])}justify(){e.each(this.columns,this.justifyRow.bind(this))}checkComponentConditions(e,t,n){if(this.component.autoAdjust){const i=super.checkComponentConditions(e,t,n);return this.justify(),i}return super.checkComponentConditions(e,t,n)}detach(e){super.detach(e)}destroy(){super.destroy(),this.columns=[]}}}),e("skylark-formio/components/content/Content",["../_classes/component/Component","skylark-lodash"],function(e,t){"use strict";return class n extends e{static schema(...t){return e.schema({label:"Content",type:"content",key:"content",input:!1,html:""},...t)}static get builderInfo(){return{title:"Content",group:"layout",icon:"html5",preview:!1,documentation:"http://help.form.io/userguide/#content-component",weight:5,schema:n.schema()}}get defaultSchema(){return n.schema()}get content(){if(this.builderMode)return this.component.html;const e=t.get(this.root,"submission",{});return this.component.html?this.interpolate(this.component.html,{metadata:e.metadata||{},submission:e,data:this.rootValue,row:this.data}):""}render(){return super.render(this.renderTemplate("html",{tag:"div",attrs:[],content:this.content}))}attach(e){return this.loadRefs(e,{html:"single"}),this.component.refreshOnChange&&this.on("change",()=>{this.refs.html&&this.setContent(this.refs.html,this.content)},!0),super.attach(e)}get emptyValue(){return""}}}),e("skylark-formio/vendors/text-mask-addons/createAutoCorrectedDatePipe",[],function(){const e=[31,31,29,31,30,31,30,31,31,30,31,30,31],t=["yyyy","yy","mm","dd","HH","MM","SS"];return function(n="mm dd yyyy",{minYear:i=1,maxYear:o=9999}={}){const s=n.split(/[^dmyHMS]+/).sort((e,n)=>t.indexOf(e)-t.indexOf(n));return function(t){const r=[],a={dd:31,mm:12,yy:99,yyyy:o,HH:23,MM:59,SS:59},l={dd:1,mm:1,yy:0,yyyy:i,HH:0,MM:0,SS:0},c=t.split("");s.forEach(e=>{const t=n.indexOf(e),i=parseInt(a[e].toString().substr(0,1),10);parseInt(c[t],10)>i&&(c[t+1]=c[t],c[t]=0,r.push(t))});let d=0;const u=s.some(s=>{const r=n.indexOf(s),c=s.length,u=t.substr(r,c).replace(/\D/g,""),h=parseInt(u,10);"mm"===s&&(d=h||0);const p="dd"===s?e[d]:a[s];if("yyyy"===s&&(1!==i||9999!==o)){const e=parseInt(a[s].toString().substring(0,u.length),10),t=parseInt(l[s].toString().substring(0,u.length),10);return h<t||h>e}return h>p||u.length===c&&h<l[s]});return!u&&{value:c.join(""),indexesOfPipedChars:r}}}}),e("skylark-formio/vendors/text-mask-addons/createNumberMask",[],function(){const e="$",t="",n=",",i=".",o="-",s=/-/,r=/\D+/g,a="number",l=/\d/,c="[]";function d(e){return e.split(t).map(e=>l.test(e)?l:e)}return function({prefix:u=e,suffix:h=t,includeThousandsSeparator:p=!0,thousandsSeparatorSymbol:m=n,allowDecimal:f=!1,decimalSymbol:g=i,decimalLimit:y=2,requireDecimal:b=!1,allowNegative:v=!1,allowLeadingZeroes:k=!1,integerLimit:w=null}={}){const x=u&&u.length||0,C=h&&h.length||0,S=m&&m.length||0;function E(e=t){const n=e.length;if(e===t||e[0]===u[0]&&1===n)return u.split(t).concat([l]).concat(h.split(t));if(e===g&&f)return u.split(t).concat(["0",g,l]).concat(h.split(t));const i=e[0]===o&&v;i&&(e=e.toString().substr(1));const E=e.lastIndexOf(g),A=-1!==E;let T,D,M;if(e.slice(-1*C)===h&&(e=e.slice(0,-1*C)),A&&(f||b)?(T=e.slice(e.slice(0,x)===u?x:0,E),D=d((D=e.slice(E+1,n)).replace(r,t))):T=e.slice(0,x)===u?e.slice(x):e,w&&typeof w===a){const e="."===m?"[.]":`${m}`,t=(T.match(new RegExp(e,"g"))||[]).length;T=T.slice(0,w+t*S)}return T=T.replace(r,t),k||(T=T.replace(/^0+(0$|[^0])/,"$1")),T=p?function(e,t){return e.replace(/\B(?=(\d{3})+(?!\d))/g,t)}(T,m):T,M=d(T),(A&&f||!0===b)&&(e[E-1]!==g&&M.push(c),M.push(g,c),D&&(typeof y===a&&(D=D.slice(0,y)),M=M.concat(D)),!0===b&&e[E-1]===g&&M.push(l)),x>0&&(M=u.split(t).concat(M)),i&&(M.length===x&&M.push(l),M=[s].concat(M)),h.length>0&&(M=M.concat(h.split(t))),M}return E.instanceOf="createNumberMask",E}}),e("skylark-formio/vendors/text-mask-addons/emailPipe",[],function(){const e="@",t=/@/g,n="",i="@.",o=".",s="..",r=[],a=/\./g;return function(l,c){const{currentCaretPosition:d,rawValue:u,previousConformedValue:h,placeholderChar:p}=c;let m=l;const f=(m=function(i){let o=0;return i.replace(t,()=>1===++o?e:n)}(m)).indexOf(i);if(null===u.match(new RegExp(`[^@\\s.${p}]`)))return n;if(-1!==m.indexOf(s)||-1!==f&&d!==f+1||-1===u.indexOf(e)&&h!==n&&-1!==u.indexOf(o))return!1;const g=m.indexOf(e);(m.slice(g+1,m.length).match(a)||r).length>1&&m.substr(-1)===o&&d!==u.length&&(m=m.slice(0,m.length-1));return m}}),e("skylark-formio/vendors/text-mask-addons/emailMask",["./emailPipe"],function(e){const t="*",n=".",i="",o="@",s="[]",r=" ",a="g",l=/[^\s]/,c=/[^.\s]/,d=/\s/g;function u(e,t,n){const i=[];return e[t]===n?i.push(n):i.push(s,n),i.push(s),i}function h(e,t){return e.split(i).map(e=>e===r?e:t?c:l)}return function(e,s){e=e.replace(d,i);const{placeholderChar:l,currentCaretPosition:c}=s,p=e.indexOf(o),m=e.lastIndexOf(n),f=m<p?-1:m;let g=u(e,p+1,o),y=u(e,f-1,n),b=function(e,t){return-1===t?e:e.slice(0,t)}(e,p),v=function(e,s,l,c){let d=i;-1!==s&&(d=-1===l?e.slice(s+1,e.length):e.slice(s+1,l));return(d=d.replace(new RegExp(`[\\s${c}]`,a),i))===o?t:d.length<1?r:d[d.length-1]===n?d.slice(0,d.length-1):d}(e,p,f,l),k=function(e,o,s,r){let l=i;-1!==o&&(l=e.slice(o+1,e.length));return 0===(l=l.replace(new RegExp(`[\\s${s}.]`,a),i)).length?e[o-1]===n&&r!==e.length?t:i:l}(e,f,l,c);return b=h(b),v=h(v),k=h(k,!0),b.concat(g).concat(v).concat(y).concat(k)}}),e("skylark-formio/vendors/text-mask-addons/index",["./createAutoCorrectedDatePipe","./createNumberMask","./emailMask"],function(e,t,n){return{createAutoCorrectedDatePipe:e,createNumberMask:t,emailMask:n}}),e("skylark-formio/components/number/Number",["../../vendors/vanilla-text-mask/maskInput","../../vendors/vanilla-text-mask/conformToMask","skylark-lodash","../../vendors/text-mask-addons/index","../_classes/input/Input","../../utils/utils"],function(e,t,n,i,o,s){"use strict";return class r extends o{static schema(...e){return o.schema({type:"number",label:"Number",key:"number",validate:{min:"",max:"",step:"any",integer:""}},...e)}static get builderInfo(){return{title:"Number",icon:"hashtag",group:"basic",documentation:"http://help.form.io/userguide/#number",weight:30,schema:r.schema()}}constructor(...e){super(...e),this.validators=this.validators.concat(["min","max"]);const t=s.getNumberSeparators(this.options.language);this.decimalSeparator=this.options.decimalSeparator=this.options.decimalSeparator||t.decimalSeparator,this.component.delimiter?(this.options.hasOwnProperty("thousandsSeparator")&&console.warn("Property 'thousandsSeparator' is deprecated. Please use i18n to specify delimiter."),this.delimiter=this.options.thousandsSeparator||t.delimiter):this.delimiter="";const i=n.get(this.component,"requireDecimal",!1);if(this.decimalLimit=s.getNumberDecimalLimit(this.component,i?2:20),n.has(this.options,`languageOverride.${this.options.language}`)){const e=n.get(this.options,`languageOverride.${this.options.language}`);this.decimalSeparator=e.decimalSeparator,this.delimiter=e.delimiter}this.numberMask=this.createNumberMask()}createNumberMask(){return i.createNumberMask({prefix:"",suffix:"",requireDecimal:n.get(this.component,"requireDecimal",!1),thousandsSeparatorSymbol:n.get(this.component,"thousandsSeparator",this.delimiter),decimalSymbol:n.get(this.component,"decimalSymbol",this.decimalSeparator),decimalLimit:n.get(this.component,"decimalLimit",this.decimalLimit),allowNegative:n.get(this.component,"allowNegative",!0),allowDecimal:n.get(this.component,"allowDecimal",!(this.component.validate&&this.component.validate.integer))})}get defaultSchema(){return r.schema()}get defaultValue(){let e=super.defaultValue;return e||0!==this.component.defaultValue||(e=this.component.defaultValue),e}parseNumber(e){return e=e.split(this.delimiter).join("").replace(this.decimalSeparator,"."),this.component.validate&&this.component.validate.integer?parseInt(e,10):parseFloat(e)}setInputMask(t){let n="[0-9";n+=this.decimalSeparator||"",n+=this.delimiter||"",n+="]*",t.setAttribute("pattern",n),t.mask=e({inputElement:t,mask:this.numberMask})}get inputInfo(){const e=super.inputInfo;return this.component.mask?e.attr.type="password":e.attr.type="text",e.attr.inputmode="numeric",e.changeEvent="input",e}getValueAt(e){if(!this.refs.input.length||!this.refs.input[e])return null;const t=this.refs.input[e].value;return t?this.parseNumber(t):null}setValueAt(e,t,n={}){return super.setValueAt(e,this.formatValue(this.parseValue(t)),n)}parseValue(e){let t=parseFloat(e);return t=n.isNaN(t)?null:String(t).replace(".",this.decimalSeparator)}formatValue(e){return this.component.requireDecimal&&e&&!e.includes(this.decimalSeparator)?`${e}${this.decimalSeparator}${n.repeat("0",this.decimalLimit)}`:this.component.requireDecimal&&e&&e.includes(this.decimalSeparator)?`${e}${n.repeat("0",this.decimalLimit-e.split(this.decimalSeparator)[1].length)}`:e}focus(){const e=this.refs.input[0];e&&(e.focus(),e.setSelectionRange(0,e.value.length))}getMaskedValue(e){return t(null===e?"0":e.toString(),this.numberMask).conformedValue}getValueAsString(e){return e||0===e?(e=this.getWidgetValueAsString(e),Array.isArray(e)?e.map(this.getMaskedValue).join(", "):this.getMaskedValue(e)):""}addFocusBlurEvents(e){super.addFocusBlurEvents(e),this.addEventListener(e,"blur",()=>{e.value=this.getValueAsString(this.formatValue(this.parseValue(this.dataValue)))})}}}),e("skylark-formio/components/currency/Currency",["../../vendors/text-mask-addons/index","skylark-lodash","../../utils/utils","../number/Number"],function(e,t,n,i){"use strict";return class o extends i{static schema(...e){return i.schema({type:"currency",label:"Currency",key:"currency"},...e)}static get builderInfo(){return{title:"Currency",group:"advanced",icon:"usd",documentation:"http://help.form.io/userguide/#currency",weight:70,schema:o.schema()}}constructor(e,t,n){e&&!e.hasOwnProperty("delimiter")&&(e.delimiter=!0),super(e,t,n)}createNumberMask(){const i=t.get(this.component,"decimalLimit",2),o=n.getCurrencyAffixes({currency:this.component.currency,decimalLimit:i,decimalSeparator:this.decimalSeparator,lang:this.options.language});return this.prefix=this.options.prefix||o.prefix,this.suffix=this.options.suffix||o.suffix,e.createNumberMask({prefix:this.prefix,suffix:this.suffix,thousandsSeparatorSymbol:t.get(this.component,"thousandsSeparator",this.delimiter),decimalSymbol:t.get(this.component,"decimalSymbol",this.decimalSeparator),decimalLimit:i,allowNegative:t.get(this.component,"allowNegative",!0),allowDecimal:t.get(this.component,"allowDecimal",!0)})}get defaultSchema(){return o.schema()}parseNumber(e){return super.parseNumber(this.stripPrefixSuffix(e))}parseValue(e){return super.parseValue(this.stripPrefixSuffix(e))}addZerosAndFormatValue(e){if(!e&&0!==e)return;const n=t.get(this.component,"decimalLimit",2);let i,o="",s=[];if(e.includes(this.decimalSeparator)?([i,o]=e.split(this.decimalSeparator),s=[...o.split("")]):i=e,o.length<n)for(;s.length<n;)s.push("0");const r=`${i}${this.decimalSeparator}${s.join("")}`;return super.formatValue(r)}getValueAsString(e){const t=super.getValueAsString(e);return e||"0"==e?this.addZerosAndFormatValue(t):t}formatValue(e){return e&&this.disabled?this.addZerosAndFormatValue(e):super.formatValue(e)}stripPrefixSuffix(e){if("string"==typeof e)try{const t=!!this.prefix&&e.includes(this.prefix),n=!!this.suffix&&e.includes(this.suffix),i=e.includes(this.delimiter),o=e.includes(this.decimalSeparator);this.prefix&&(e=e.replace(this.prefix,"")),this.suffix&&(e=e.replace(this.suffix,"")),!t&&!n||i||o||!Number.isNaN(+e)&&e||(e="0")}catch(e){}return e}addFocusBlurEvents(e){super.addFocusBlurEvents(e),this.addEventListener(e,"blur",()=>{e.value=this.getValueAsString(this.addZerosAndFormatValue(this.parseValue(this.dataValue)))})}}}),e("skylark-formio/components/_classes/nestedarray/NestedArrayComponent",["skylark-lodash","../component/Component","../nesteddata/NestedDataComponent"],function(e,t,n){"use strict";return class extends n{componentContext(e){return this.iteratableRows[e.rowIndex].data}get iteratableRows(){throw new Error("Getter #iteratableRows() is not implemented")}get rowIndex(){return super.rowIndex}set rowIndex(e){this._rowIndex=e}checkData(e,n,i){return e=e||this.rootValue,n=n||{},i=i||this.data,this.checkRows("checkData",e,n,t.prototype.checkData.call(this,e,n,i))}checkRows(e,t,n,i){return this.iteratableRows.reduce((i,o)=>this.checkRow(e,t,n,o.data,o.components)&&i,i)}checkRow(t,n,i,o,s){return e.reduce(s,(e,s)=>s[t](n,i,o)&&e,!0)}hasAddButton(){const t=e.get(this.component,"validate.maxLength"),n=e.get(this.component,"conditionalAddButton");return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode&&!this.options.preview&&(!t||this.iteratableRows.length<t)&&(!n||this.evaluate(n,{value:this.dataValue},"show"))}}}),e("skylark-formio/components/datagrid/DataGrid",["skylark-lodash","skylark-dragula","../_classes/nestedarray/NestedArrayComponent","../../utils/utils"],function(e,t,n,i){"use strict";return class o extends n{static schema(...e){return n.schema({label:"Data Grid",key:"dataGrid",type:"datagrid",clearOnHide:!0,input:!0,tree:!0,components:[]},...e)}static get builderInfo(){return{title:"Data Grid",icon:"th",group:"data",documentation:"http://help.form.io/userguide/#datagrid",weight:30,schema:o.schema()}}constructor(...e){super(...e),this.type="datagrid"}init(){this.components=this.components||[],this.rows=[],this.createRows(!0),this.visibleColumns={},this.checkColumns()}get dataValue(){const e=super.dataValue;return e&&Array.isArray(e)?e:this.emptyValue}set dataValue(e){super.dataValue=e}get defaultSchema(){return o.schema()}get emptyValue(){return[{}]}get addAnotherPosition(){return e.get(this.component,"addAnotherPosition","bottom")}get minLength(){return this.hasRowGroups()?e.sum(this.getGroupSizes()):e.get(this.component,"validate.minLength",0)}get defaultValue(){const e=super.defaultValue;let t;for(let n=(t=Array.isArray(e)?e:e&&"object"==typeof e?[e]:this.emptyValue).length;n<this.minLength;n++)t.push({});return t}set disabled(t){super.disabled=t,e.each(this.refs[`${this.datagridKey}-addRow`],e=>{e.disabled=t}),e.each(this.refs[`${this.datagridKey}-removeRow`],e=>{e.disabled=t})}get disabled(){return super.disabled}get datagridKey(){return`datagrid-${this.key}`}get allowReorder(){return!this.options.readOnly&&e.get(this.component,"reorder",!1)}get iteratableRows(){return this.rows.map((e,t)=>({components:e,data:this.dataValue[t]}))}getRowChunks(t,n){const[,i]=t.reduce(([e,t],n)=>{const i=e+n;return[i,[...t,[e,i]]]},[0,[]]);return i.map(t=>e.slice(n,...t))}getGroups(){const t=e.get(this.component,"rowGroups",[]),n=e.map(t,"numberOfRows").slice(0,-1),i=n.reduce((e,t)=>{const n=e[e.length-1];return e.concat(n+t)},[0]);return t.reduce((e,t,n)=>({...e,[i[n]]:t}),{})}getGroupSizes(){return e.map(e.get(this.component,"rowGroups",[]),"numberOfRows")}hasRowGroups(){return e.get(this,"component.enableRowGroups",!1)&&!this.builderMode}totalRowsNumber(t){return e.sum(e.map(t,"numberOfRows"))}setStaticValue(t){this.dataValue=e.range(t).map(()=>({}))}hasExtraColumn(){return this.hasRemoveButtons()||this.canAddColumn}hasRemoveButtons(){return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode&&this.dataValue.length>e.get(this.component,"validate.minLength",0)}hasTopSubmit(){return this.hasAddButton()&&["top","both"].includes(this.addAnotherPosition)}hasBottomSubmit(){return this.hasAddButton()&&["bottom","both"].includes(this.addAnotherPosition)}get canAddColumn(){return this.builderMode}render(){const t=this.getColumns();return super.render(this.renderTemplate("datagrid",{rows:this.getRows(),columns:t,groups:this.hasRowGroups()?this.getGroups():[],visibleColumns:this.visibleColumns,hasToggle:e.get(this,"component.groupToggle",!1),hasHeader:this.hasHeader(),hasExtraColumn:this.hasExtraColumn(),hasAddButton:this.hasAddButton(),hasRemoveButtons:this.hasRemoveButtons(),hasTopSubmit:this.hasTopSubmit(),hasBottomSubmit:this.hasBottomSubmit(),hasGroups:this.hasRowGroups(),numColumns:t.length+(this.hasExtraColumn()?1:0),datagridKey:this.datagridKey,allowReorder:this.allowReorder,builder:this.builderMode,canAddColumn:this.canAddColumn,placeholder:this.renderTemplate("builderPlaceholder",{position:this.componentComponents.length})}))}getRows(){return this.rows.map(t=>{const n={};return e.each(t,(e,t)=>{n[t]=e.render()}),n})}getColumns(){return this.component.components.filter(e=>!this.visibleColumns.hasOwnProperty(e.key)||this.visibleColumns[e.key])}hasHeader(){return this.component.components.reduce((e,t)=>e||(t.label||t.title)&&!t.hideLabel,!1)}attach(e){this.loadRefs(e,{[`${this.datagridKey}-row`]:"multiple",[`${this.datagridKey}-tbody`]:"single",[`${this.datagridKey}-addRow`]:"multiple",[`${this.datagridKey}-removeRow`]:"multiple",[`${this.datagridKey}-group-header`]:"multiple",[this.datagridKey]:"multiple"}),this.allowReorder&&(this.refs[`${this.datagridKey}-row`].forEach((e,t)=>{e.dragInfo={index:t}}),this.dragula=t([this.refs[`${this.datagridKey}-tbody`]],{moves:(e,t,n)=>n.classList.contains("formio-drag-button")}).on("drop",this.onReorder.bind(this))),this.refs[`${this.datagridKey}-addRow`].forEach(e=>{this.addEventListener(e,"click",this.addRow.bind(this))}),this.refs[`${this.datagridKey}-removeRow`].forEach((e,t)=>{this.addEventListener(e,"click",this.removeRow.bind(this,t))}),this.hasRowGroups()&&(this.refs.chunks=this.getRowChunks(this.getGroupSizes(),this.refs[`${this.datagridKey}-row`]),this.refs[`${this.datagridKey}-group-header`].forEach((e,t)=>{this.addEventListener(e,"click",()=>this.toggleGroup(e,t))}));const n=this.getColumns(),i=n.length;return this.rows.forEach((e,t)=>{let o=0;n.forEach(e=>{this.attachComponents(this.refs[this.datagridKey][t*i+o],[this.rows[t][e.key]],this.component.components),o++})}),super.attach(e)}onReorder(e,t,n,o){if(!e.dragInfo||o&&!o.dragInfo)return void console.warn("There is no Drag Info available for either dragged or sibling element");const s=e.dragInfo.index,r=o?o.dragInfo.index:this.dataValue.length,a=r>s,l=i.fastCloneDeep(this.dataValue),c=l[s];l.splice(r,0,c),l.splice(a?s:s+1,1),this.setValue(l),this.redraw()}addRow(){const e=this.rows.length;this.dataValue.length===e&&this.dataValue.push({}),this.rows[e]=this.createRowComponents(this.dataValue[e],e),this.checkConditions(),this.redraw()}removeRow(t){this.splice(t);const[n]=this.rows.splice(t,1);e.each(n,e=>this.removeComponent(e)),this.redraw()}getRowValues(){return this.dataValue}createRows(t){let n=!1;const i=this.getRowValues();return i.forEach((t,i)=>{this.rows[i]?e.each(this.rows[i],e=>e.data=t):(this.rows[i]=this.createRowComponents(t,i),n=!0)}),this.rows.splice(i.length),!t&&n&&this.redraw(),n}createRowComponents(t,n){const i={};return this.component.components.map((o,s)=>{const r=e.clone(this.options);r.name+=`[${n}]`,r.row=`${n}-${s}`;const a=this.createComponent(o,r,t);a.parentDisabled=!!this.disabled,a.path&&o.key&&(a.path=a.path.replace(new RegExp(`\\.${o.key}$`),`[${n}].${o.key}`)),a.rowIndex=n,a.inDataGrid=!0,i[o.key]=a}),i}checkValidity(e,t,n){return e=e||this.rootValue,n=n||this.data,this.checkCondition(n,e)?!!this.checkComponentValidity(e,t,n)&&this.checkRows("checkValidity",e,t,!0):(this.setCustomValidity(""),!0)}checkColumns(t,n={}){t=t||this.rootValue;let i=!1;if(!this.rows||!this.rows.length)return{rebuild:!1,show:!1};if(this.builderMode)return{rebuild:!1,show:!0};const o={},s=this.dataValue;this.rows.forEach((i,r)=>{e.each(i,(e,i)=>{e&&"function"==typeof e.checkConditions&&(o[i]=!!o[i]||e.checkConditions(t,n,s[r])&&"hidden"!==e.type)})});const r=!e.isEqual(o,this.visibleColumns);return e.each(o,e=>{i|=e}),this.visibleColumns=o,{rebuild:r,show:i}}checkComponentConditions(e,t,n){if(!super.checkComponentConditions(e,t,n))return!1;const{rebuild:i,show:o}=this.checkColumns(e,t);return i&&this.redraw(),o}setValue(t,n={}){if(!t)return this.dataValue=this.defaultValue,this.createRows(),!1;Array.isArray(t)||("object"==typeof t?t=[t]:(this.createRows(),t=[{}])),t&&!t.length&&t.push({});const i=this.hasChanged(t,this.dataValue);return this.dataValue=t,this.createRows(),this.rows.forEach((i,o)=>{t.length<=o||e.each(i,e=>{e.rowIndex=o,this.setNestedValue(e,t[o],n)})}),this.updateOnChange(n,i),i}restoreComponentsContext(){this.rows.forEach((t,n)=>e.forIn(t,e=>e.data=this.dataValue[n]))}getComponent(t,n){t=Array.isArray(t)?t:[t];const[i,...o]=t;let s=[];return e.isString(i)?(this.everyComponent((e,t)=>{if(e.component.key===i){let i=e;o.length>0&&"getComponent"in e?i=e.getComponent(o,n):n&&n(e,t),s=s.concat(i)}}),s.length>0?s:null):s}toggleGroup(t,n){t.classList.toggle("collapsed"),e.each(this.refs.chunks[n],e=>{e.classList.toggle("hidden")})}}}),e("skylark-formio/components/datamap/DataMap",["../_classes/component/Component","../datagrid/DataGrid","skylark-lodash","../../vendors/eventemitter2/EventEmitter2","../../utils/utils"],function(e,t,n,i,o){"use strict";return class s extends t{static schema(...t){return e.schema({label:"Data Map",key:"dataMap",type:"datamap",clearOnHide:!0,addAnother:"Add Another",disableAddingRemovingRows:!1,keyBeforeValue:!0,valueComponent:{type:"textfield",key:"value",label:"Value",input:!0},input:!0,validate:{maxLength:0,minLength:0}},...t)}static get builderInfo(){return{title:"Data Map",icon:"th-list",group:"data",documentation:"http://help.form.io/userguide/#datamap",weight:20,schema:s.schema()}}get schema(){const e=super.schema;return this.components&&this.components.length>0&&(e.valueComponent=this.components[this.components.length-1].schema),n.omit(e,"components")}constructor(e,t,n){super(e,t,n),this.type="datamap"}init(){this.components=[],this.rows=[],this.createRows(),this.visibleColumns={key:!0,[this.valueKey]:!0},this.component.valueComponent.hideLabel=!0}get defaultSchema(){return s.schema()}get emptyValue(){return{}}get dataValue(){return!this.key||!this.visible&&this.component.clearOnHide?this.emptyValue:(this.hasValue()||(this.dataValue=this.emptyValue),n.get(this.data,this.key))}set dataValue(e){super.dataValue=e}get defaultValue(){const e=super.defaultValue;return Array.isArray(e)?e[0]:this.emptyValue}get keySchema(){return{type:"textfield",input:!0,hideLabel:!0,label:this.component.keyLabel||"Key",key:"__key"}}get valueKey(){return this.component.valueComponent.key}getRowValues(){const e=this.dataValue;return this.builderMode?[e]:n.isEmpty(e)?[]:Object.keys(e).map(()=>e)}hasHeader(){return!0}hasRemoveButtons(){return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode}getColumns(){const e=Object.assign({},this.keySchema),t=Object.assign({},this.component.valueComponent);return e.hideLabel=!1,t.hideLabel=!1,this.component.keyBeforeValue?[e,t]:[t,e]}getRowKey(e){const t=Object.keys(this.dataValue);return t[e]||(t[e]=o.uniqueKey(this.dataValue,"key")),t[e]}createRowComponents(e,t){let s=this.getRowKey(t);const r=n.clone(this.options);r.events=new i({wildcard:!1,maxListeners:0}),r.name+=`[${t}]`,r.row=`${t}`;const a={};a.__key=this.createComponent(this.keySchema,r,{__key:s}),a.__key.on("componentChange",e=>{const t=this.dataValue,n=o.uniqueKey(t,e.value);t[n]=t[s],delete t[s],a[this.valueKey].component.key=n,s=n});const l=n.clone(this.component.valueComponent);return l.key=s,a[this.valueKey]=this.createComponent(l,this.options,this.dataValue),a}get canAddColumn(){return!1}addChildComponent(e){this.component.valueComponent=e}saveChildComponent(e){this.component.valueComponent=e}removeChildComponent(){const e=s.schema();this.component.valueComponent=e.valueComponent}addRow(){const e=this.rows.length;this.rows[e]=this.createRowComponents(this.dataValue,e),this.redraw(),this.triggerChange()}removeRow(e){const t=Object.keys(this.dataValue);t[e]&&delete this.dataValue[t[e]],this.rows.splice(e,1),this.redraw(),this.triggerChange()}setValue(e,t={}){const n=this.hasChanged(e,this.dataValue);return this.dataValue=e,this.createRows(),this.updateOnChange(t,n),n}checkColumns(){return{rebuild:!1,show:!0}}}}),e("skylark-formio/utils/index",["./utils"],function(e){"use strict";return"object"==typeof global&&(global.FormioUtils=e),e}),e("skylark-formio/components/datetime/DateTime",["skylark-lodash","skylark-moment","../_classes/input/Input","../../utils/index","../../widgets/index"],function(e,t,n,i,o){"use strict";return class s extends n{static schema(...e){return n.schema({type:"datetime",label:"Date / Time",key:"dateTime",format:"yyyy-MM-dd hh:mm a",useLocaleSettings:!1,allowInput:!0,enableDate:!0,enableTime:!0,defaultValue:"",defaultDate:"",displayInTimezone:"viewer",timezone:"",datepickerMode:"day",datePicker:{showWeeks:!0,startingDay:0,initDate:"",minMode:"day",maxMode:"year",yearRows:4,yearColumns:5,minDate:null,maxDate:null},timePicker:{hourStep:1,minuteStep:1,showMeridian:!0,readonlyInput:!1,mousewheel:!0,arrowkeys:!0},customOptions:{}},...e)}static get builderInfo(){return{title:"Date / Time",group:"advanced",icon:"calendar",documentation:"http://help.form.io/userguide/#datetime",weight:40,schema:s.schema()}}constructor(t,n,i){super(t,n,i);const o=this.component.timezone||this.options.timezone,s=!e.get(this.component,"timePicker.showMeridian",!0);this.component.enableDate||(this.component.format=this.component.format.replace(/yyyy-MM-dd /g,"")),this.component.enableTime?this.component.format=s?this.component.format.replace(/hh:mm a$/g,"HH:mm"):this.component.format.replace(/HH:mm$/g,"hh:mm a"):this.component.format=this.component.format.replace(/ hh:mm a$/g,"");let r=this.component.customOptions||{};if("string"==typeof r)try{r=JSON.parse(r)}catch(e){console.warn(e.message),r={}}this.component.widget={type:"calendar",timezone:o,displayInTimezone:e.get(this.component,"displayInTimezone","viewer"),submissionTimezone:this.submissionTimezone,language:this.options.language,useLocaleSettings:e.get(this.component,"useLocaleSettings",!1),allowInput:e.get(this.component,"allowInput",!0),mode:this.component.multiple?"multiple":"single",enableTime:e.get(this.component,"enableTime",!0),noCalendar:!e.get(this.component,"enableDate",!0),format:this.component.format,hourIncrement:e.get(this.component,"timePicker.hourStep",1),minuteIncrement:e.get(this.component,"timePicker.minuteStep",5),time_24hr:s,readOnly:this.options.readOnly,minDate:e.get(this.component,"datePicker.minDate"),disabledDates:e.get(this.component,"datePicker.disable"),disableWeekends:e.get(this.component,"datePicker.disableWeekends"),disableWeekdays:e.get(this.component,"datePicker.disableWeekdays"),disableFunction:e.get(this.component,"datePicker.disableFunction"),maxDate:e.get(this.component,"datePicker.maxDate"),...r},this.validators.push("date")}performInputMapping(e){return e.widget&&e.widget.settings&&(e.widget.settings.submissionTimezone=this.submissionTimezone),e}get widget(){const e=this.component.widget?new o[this.component.widget.type](this.component.widget,this.component):null;return e}get defaultSchema(){return s.schema()}get defaultValue(){let e=super.defaultValue;return!e&&this.component.defaultDate&&(e=(e=i.getDateSetting(this.component.defaultDate))?e.toISOString():""),e}get emptyValue(){return""}isEmpty(e=this.dataValue){return!(!e||"Invalid Date"!==e.toString())||super.isEmpty(e)}formatValue(e){const n=t.utc(e).toISOString();return"Invalid date"===n?e:n}isEqual(e,n=this.dataValue){const o=i.convertFormatToMoment(this.component.format);return this.isEmpty(e)&&this.isEmpty(n)||t.utc(e).format(o)===t.utc(n).format(o)}createWrapper(){return!1}checkValidity(e,t,n){return this.refs.input&&this.refs.input.forEach(e=>{e.widget&&e.widget.enteredDate&&(t=!0)}),super.checkValidity(e,t,n)}focus(){if(this.refs.input&&this.refs.input[0]){const e=this.refs.input[0].nextSibling;e&&e.focus()}}}}),e("skylark-formio/components/day/Day",["skylark-lodash","../_classes/field/Field","../../utils/utils"],function(e,t,n){"use strict";return class i extends t{static schema(...e){return t.schema({type:"day",label:"Day",key:"day",fields:{day:{type:"number",placeholder:"",required:!1},month:{type:"select",placeholder:"",required:!1},year:{type:"number",placeholder:"",required:!1}},dayFirst:!1},...e)}static get builderInfo(){return{title:"Day",group:"advanced",icon:"calendar",documentation:"http://help.form.io/userguide/#day",weight:50,schema:i.schema()}}get emptyValue(){return"00/00/0000"}get valueMask(){return/^\d{2}\/\d{2}\/\d{4}$/}get dayRequired(){return this.showDay&&e.get(this.component,"fields.day.required",!1)}get showDay(){return!e.get(this.component,"fields.day.hide",!1)}get monthRequired(){return this.showMonth&&e.get(this.component,"fields.month.required",!1)}get showMonth(){return!e.get(this.component,"fields.month.hide",!1)}get yearRequired(){return this.showYear&&e.get(this.component,"fields.year.required",!1)}get showYear(){return!e.get(this.component,"fields.year.hide",!1)}get defaultSchema(){return i.schema()}get inputInfo(){const e=super.elementInfo();return e.type="input",e.attr.type="hidden",e.changeEvent="input",e}inputDefinition(t){let n,i;return"day"===t&&(n=1,i=31),"month"===t&&(n=1,i=12),"year"===t&&(n=e.get(this.component,"fields.year.minYear",1900)||1900,i=e.get(this.component,"fields.year.maxYear",2030)||1900),{type:"input",ref:t,attr:{id:`${this.component.key}-${t}`,class:`form-control ${this.transform("class",`formio-day-component-${t}`)}`,type:"select"===this.component.fields[t].type?"select":"number",placeholder:this.component.fields[t].placeholder,step:1,min:n,max:i}}}selectDefinition(e){return{multiple:!1,ref:e,widget:"html5",attr:{id:`${this.component.key}-${e}`,class:"form-control",name:e,lang:this.options.language}}}get days(){if(this._days)return this._days;this._days=[{value:"",label:e.get(this.component,"fields.day.placeholder","")}];for(let e=1;e<=31;e++)this._days.push({value:e,label:e.toString()});return this._days}get months(){return this._months?this._months:(this._months=[{value:"",label:e.get(this.component,"fields.month.placeholder")||(this.hideInputLabels?this.t("Month"):"")},{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],this._months)}get years(){if(this._years)return this._years;this._years=[{value:"",label:e.get(this.component,"fields.year.placeholder","")}];const t=e.get(this.component,"fields.year.minYear",1900)||1900,n=e.get(this.component,"fields.year.maxYear",2030)||2030;for(let e=t;e<=n;e++)this._years.push({value:e,label:e.toString()});return this._years}setErrorClasses(e,t,n){super.setErrorClasses(e,t,n),super.setErrorClasses([this.refs.day,this.refs.month,this.refs.year],t,n)}removeInputError(e){super.removeInputError([this.refs.day,this.refs.month,this.refs.year]),super.removeInputError(e)}init(){super.init(),this.validators=this.validators.concat(["day","maxDate","minDate","minYear","maxYear"]);const e=this.component.fields.year.minYear,t=this.component.fields.year.maxYear;this.component.maxYear=t,this.component.minYear=e;const i=n.getLocaleDateFormatInfo(this.options.language);this.dayFirst=this.component.useLocaleSettings?i.dayFirst:this.component.dayFirst}render(){return super.render(this.renderTemplate("day",{dayFirst:this.dayFirst,showDay:this.showDay,showMonth:this.showMonth,showYear:this.showYear,day:this.renderField("day"),month:this.renderField("month"),year:this.renderField("year")}))}renderField(e){return"select"===this.component.fields[e].type?this.renderTemplate("select",{input:this.selectDefinition(e),selectOptions:this[`${e}s`].reduce((e,t)=>e+this.renderTemplate("selectOption",{option:t,selected:!1,attrs:{}}),"")}):this.renderTemplate("input",{input:this.inputDefinition(e)})}attach(e){this.loadRefs(e,{day:"single",month:"single",year:"single",input:"multiple"});const t=super.attach(e);return this.shouldDisabled?(this.setDisabled(this.refs.day,!0),this.setDisabled(this.refs.month,!0),this.setDisabled(this.refs.year,!0),this.refs.input&&this.refs.input.forEach(e=>this.setDisabled(e,!0))):(this.addEventListener(this.refs.day,"input",()=>this.updateValue(null,{modified:!0})),this.addEventListener(this.refs.month,"input",()=>{const e=this.refs.year?parseInt(new Date(this.refs.year.value,this.refs.month.value,0).getDate(),10):"",t=this.getFieldValue("day");!this.component.fields.day.hide&&e&&(this.refs.day.max=e),e&&t>e&&(this.refs.day.value=this.refs.day.max),this.updateValue(null,{modified:!0})}),this.addEventListener(this.refs.year,"input",()=>this.updateValue(null,{modified:!0})),this.addEventListener(this.refs.input,this.info.changeEvent,()=>this.updateValue(null,{modified:!0}))),this.setValue(this.dataValue),t}validateRequired(e,t){const{day:i,month:o,year:s}=this.parts;return!(this.dayRequired&&!i)&&(!(this.monthRequired&&!o)&&(!(this.yearRequired&&!s)&&(!n.boolValue(e)||!this.isEmpty(t))))}set disabled(e){super.disabled=e,this.refs.year&&this.refs.month&&this.refs.day&&(e?(this.refs.year.setAttribute("disabled","disabled"),this.refs.month.setAttribute("disabled","disabled"),this.refs.day.setAttribute("disabled","disabled")):(this.refs.year.removeAttribute("disabled"),this.refs.month.removeAttribute("disabled"),this.refs.day.removeAttribute("disabled")))}normalizeValue(e){if(!e||this.valueMask.test(e))return e;const t=[],n=e.split("/"),i=(e,i)=>t.push(e?n.shift():i);return this.dayFirst&&i(this.showDay,"00"),i(this.showMonth,"00"),this.dayFirst||i(this.showDay,"00"),i(this.showYear,"0000"),t.join("/")}setValueAt(e,t){if(!t||"Invalid date"===t)return null;const n=t.split("/");let i;this.component.dayFirst&&(i=n.shift());const o=n.shift();this.component.dayFirst||(i=n.shift());const s=n.shift();this.refs.day&&this.showDay&&(this.refs.day.value="00"===i?"":parseInt(i,10)),this.refs.month&&this.showMonth&&(this.refs.month.value="00"===o?"":parseInt(o,10)),this.refs.year&&this.showYear&&(this.refs.year.value="0000"===s?"":parseInt(s,10))}getFieldValue(t){const n=this.dataValue?this.dataValue.split("/"):[];let i=0;switch(t){case"month":i=n[this.dayFirst?1:0];break;case"day":i=n[this.dayFirst?0:1];break;case"year":i=n[2]}return i=parseInt(i,10),!e.isNaN(i)&&e.isNumber(i)?i:0}get parts(){return{day:this.getFieldValue("day"),month:this.getFieldValue("month"),year:this.getFieldValue("year")}}get format(){let e="";return this.component.dayFirst&&this.showDay&&(e+="D/"),this.showMonth&&(e+="M/"),!this.component.dayFirst&&this.showDay&&(e+="D/"),this.showYear?e+="YYYY":e.length?e.substring(0,e.length-1):e}getDate(t){let n,i,o,s=[];const[r,a,l]=this.component.dayFirst?[0,1,2]:[1,0,2],c=t||this.component.defaultValue;let d;return c&&(s=c.split("/").map(e=>parseInt(e,10))),this.showDay&&this.refs.day&&(n=parseInt(this.refs.day.value,10)),(void 0===n||e.isNaN(n))&&(n=s[r]&&!e.isNaN(s[r])?s[r]:0),this.showMonth&&this.refs.month&&(i=parseInt(this.refs.month.value,10)),(void 0===i||e.isNaN(i))&&(i=s[a]&&!e.isNaN(s[a])?s[a]:0),this.showYear&&this.refs.year&&(o=parseInt(this.refs.year.value)),(void 0===o||e.isNaN(o))&&(o=s[l]&&!e.isNaN(s[l])?s[l]:0),n||i||o?(n=this.showDay?n.toString().padStart(2,0):"",i=this.showMonth?i.toString().padStart(2,0):"",o=this.showYear?o.toString().padStart(4,0):"",d=this.component.dayFirst?`${n}${this.showDay&&this.showMonth||this.showDay&&this.showYear?"/":""}${i}${this.showMonth&&this.showYear?"/":""}${o}`:`${i}${this.showDay&&this.showMonth||this.showMonth&&this.showYear?"/":""}${n}${this.showDay&&this.showYear?"/":""}${o}`):null}get date(){return this.getDate()}normalizeMinMaxDates(){return[this.component.minDate,this.component.maxDate].map(e=>e?e.split("-").reverse().join("/"):e)}get validationValue(){return[this.component.minDate,this.component.maxDate]=this.dayFirst?this.normalizeMinMaxDates():[this.component.minDate,this.component.maxDate],this.dataValue}getValue(){const e=super.getValue();return e||this.dataValue}getValueAt(e){const t=this.date;return t?(this.refs.input[e].value=t,this.refs.input[e].value):(this.refs.input[e].value="",null)}getValueAsString(e){return this.getDate(e)||""}focus(){this.dayFirst&&this.showDay||!this.dayFirst&&!this.showMonth&&this.showDay?this.refs.day.focus():this.dayFirst&&!this.showDay&&this.showMonth||!this.dayFirst&&this.showMonth?this.refs.month.focus():this.showDay||this.showDay||!this.showYear||this.refs.year.focus()}isPartialDay(e){if(!e)return!1;const[t,n,i]=this.component.dayFirst?[0,1,2]:[1,0,2],o=e.split("/");return"00"===o[t]||"00"===o[n]||"0000"===o[i]}}}),e("skylark-formio/components/editgrid/templates/row.ejs",[],function(){return'<div class="row">\n  {% ctx.util.eachComponent(ctx.components, function(component) { %}\n    {% if (!component.hasOwnProperty(\'tableView\') || component.tableView) { %}\n      <div class="col-sm-2">\n        {{ ctx.getView(component, ctx.row[component.key]) }}\n      </div>\n    {% } %}\n  {% }) %}\n  {% if (!ctx.self.options.readOnly) { %}\n    <div class="col-sm-2">\n      <div class="btn-group pull-right">\n        <button class="btn btn-default btn-light btn-sm editRow"><i class="{{ ctx.iconClass(\'edit\') }}"></i></button>\n        <button class="btn btn-danger btn-sm removeRow"><i class="{{ ctx.iconClass(\'trash\') }}"></i></button>\n      </div>\n    </div>\n  {% } %}\n</div>'}),e("skylark-formio/components/editgrid/templates/header.ejs",[],function(){return'<div class="row">\n  {% ctx.util.eachComponent(ctx.components, function(component) { %}\n    {% if (!component.hasOwnProperty(\'tableView\') || component.tableView) { %}\n      <div class="col-sm-2">{{ component.label }}</div>\n    {% } %}\n  {% }) %}\n</div>'}),e("skylark-formio/components/editgrid/templates/index",["./row.ejs","./header.ejs"],function(e,t){"use strict";return{row:e,header:t}}),e("skylark-formio/components/editgrid/EditGrid",["skylark-lodash","../_classes/nestedarray/NestedArrayComponent","../_classes/component/Component","../../utils/utils","./templates/index"],function(e,t,n,i,o){"use strict";var s=e.isEqual;const r={New:"new",Editing:"editing",Saved:"saved",Removed:"removed"};return class n extends t{static schema(...e){return t.schema({type:"editgrid",label:"Edit Grid",key:"editGrid",clearOnHide:!0,input:!0,tree:!0,removeRow:"Cancel",defaultOpen:!1,openWhenEmpty:!1,components:[],inlineEdit:!1,templates:{header:n.defaultHeaderTemplate,row:n.defaultRowTemplate,footer:""}},...e)}static get builderInfo(){return{title:"Edit Grid",icon:"tasks",group:"data",documentation:"http://help.form.io/userguide/#editgrid",weight:30,schema:n.schema()}}static get defaultHeaderTemplate(){return'<div class="row">\n  {% util.eachComponent(components, function(component) { %}\n    <div class="col-sm-2">{{ component.label }}</div>\n  {% }) %}\n</div>'}static get defaultRowTemplate(){return'<div class="row">\n  {% util.eachComponent(components, function(component) { %}\n    <div class="col-sm-2">\n      {{ getView(component, row[component.key]) }}\n    </div>\n  {% }) %}\n  {% if (!instance.options.readOnly && !instance.originalComponent.disabled) { %}\n    <div class="col-sm-2">\n      <div class="btn-group pull-right">\n        <button class="btn btn-default btn-light btn-sm editRow"><i class="{{ iconClass(\'edit\') }}"></i></button>\n        {% if (!instance.hasRemoveButtons || instance.hasRemoveButtons()) { %}\n          <button class="btn btn-danger btn-sm removeRow"><i class="{{ iconClass(\'trash\') }}"></i></button>\n        {% } %}\n      </div>\n    </div>\n  {% } %}\n</div>'}get defaultSchema(){return n.schema()}get emptyValue(){return[]}get editgridKey(){return`editgrid-${this.key}`}get rowRef(){return`${this.editgridKey}-row`}get rowElements(){return this.refs[this.rowRef]}get addRowRef(){return`${this.editgridKey}-addRow`}get addRowElements(){return this.refs[this.addRowRef]}get saveRowRef(){return`${this.editgridKey}-saveRow`}get saveRowElements(){return this.refs[this.saveRowRef]}get cancelRowRef(){return`${this.editgridKey}-cancelRow`}get cancelRowElements(){return this.refs[this.cancelRowRef]}get inlineEditMode(){return this.component.inlineEdit}get saveEditMode(){return!this.inlineEditMode}get minLength(){return e.get(this.component,"validate.minLength",0)}get data(){return this._data}set data(e){this._data=e;const t=this.dataValue;(this.editRows||[]).forEach((e,n)=>{const i=t[n];e.data=i,e.components.forEach(e=>{e.data=i})})}get iteratableRows(){return this.editRows}constructor(...e){super(...e),this.type="editgrid"}hasRemoveButtons(){return!this.component.disableAddingRemovingRows&&!this.options.readOnly&&!this.disabled&&this.fullMode&&this.dataValue.length>e.get(this.component,"validate.minLength",0)}init(){if(this.builderMode)return this.editRows=[],super.init();this.components=this.components||[];const e=this.dataValue||[],t=!e.length&&this.component.openWhenEmpty;if(t){const e={};this.editRows=[{components:this.createRowComponents(e,0),data:e,state:r.New,backup:null,error:null}],this.inlineEditMode&&this.dataValue.push(e)}else this.editRows=e.map((e,t)=>({components:this.createRowComponents(e,t),data:e,state:r.Saved,backup:null,error:null}));this.checkData()}isOpen(e){return[r.New,r.Editing].includes(e.state)}render(t){if(this.builderMode)return super.render();const n=this.dataValue||[],s=i.Evaluator.noeval?o.header:e.get(this.component,"templates.header");return super.render(t||this.renderTemplate("editgrid",{ref:{row:this.rowRef,addRow:this.addRowRef,saveRow:this.saveRowRef,cancelRow:this.cancelRowRef},header:this.renderString(s,{components:this.component.components,value:n}),footer:this.renderString(e.get(this.component,"templates.footer"),{components:this.component.components,value:n}),rows:this.editRows.map(this.renderRow.bind(this)),openRows:this.editRows.map(e=>this.isOpen(e)),errors:this.editRows.map(e=>e.error),hasAddButton:this.hasAddButton(),hasRemoveButtons:this.hasRemoveButtons()}))}attach(e){if(this.builderMode)return super.attach(e);this.loadRefs(e,{[this.addRowRef]:"multiple",[this.saveRowRef]:"multiple",[this.cancelRowRef]:"multiple",[this.rowRef]:"multiple"}),this.addRowElements.forEach(e=>{this.addEventListener(e,"click",()=>this.addRow())});let t=0;return this.rowElements.forEach((e,n)=>{const i=this.editRows[n];this.isOpen(i)?(this.attachComponents(e,i.components),this.addEventListener(this.saveRowElements[t],"click",()=>this.saveRow(n)),this.addEventListener(this.cancelRowElements[t],"click",()=>this.cancelRow(n)),t++):[{className:"removeRow",event:"click",action:()=>this.removeRow(n)},{className:"editRow",event:"click",action:()=>this.editRow(n)}].forEach(({className:t,event:n,action:i})=>{const o=e.getElementsByClassName(t);Array.prototype.forEach.call(o,e=>{this.addEventListener(e,n,i)})})}),t?this.addClass(this.refs.component,`formio-component-${this.component.type}-row-open`):this.removeClass(this.refs.component,`formio-component-${this.component.type}-row-open`),super.attach(e)}clearOnHide(e){if(super.clearOnHide(e),this.component.clearOnHide&&!this.visible){if(!this.editRows)return;this.removeAllRows()}}renderRow(t,s){const r=this.dataValue||[];if(this.isOpen(t))return this.renderComponents(t.components);{const t=this.flattenComponents(s),a=i.Evaluator.noeval?o.row:e.get(this.component,"templates.row",n.defaultRowTemplate);return this.renderString(a,{row:r[s]||{},data:this.data,rowIndex:s,components:this.component.components,flattenedComponents:t,getView:(n,i)=>{const o=t[n.key];let s=o?o.getView(i):"";return o&&o.widget&&"--- PROTECTED ---"!==s&&(s=e.isArray(s)?s.map(e=>o.widget.getValueAsString(e)):o.widget.getValueAsString(s)),s}})}}everyComponent(t,n){const i=this.getComponents(n);e.each(i,(e,n)=>!1!==t(e,i,n)&&(("function"!=typeof e.everyComponent||!1!==e.everyComponent(t))&&void 0))}flattenComponents(e){const t={};return this.everyComponent(e=>{t[e.component.flattenAs||e.key]=e},e),t}getComponents(t){return this.editRows=this.editRows||[],this.builderMode?super.getComponents():e.isNumber(t)?this.editRows[t].components||[]:this.editRows.reduce((e,t)=>e.concat(t.components||[]),[])}destroyComponents(e){if(this.builderMode)return super.destroyComponents();const t=this.getComponents(e).slice();t.forEach(e=>e.destroy())}addRow(){if(this.options.readOnly)return;const e={},t=this.editRows.length,n={components:this.createRowComponents(e,t),data:e,state:r.New,backup:null,error:null};return this.editRows.push(n),this.inlineEditMode&&(this.dataValue.push(e),this.triggerChange()),this.emit("editGridAddRow",{component:this.component,row:n}),this.checkRow("checkData",null,{},n.data,n.components),this.component.modal?this.addRowModal(t):this.redraw(),n}addRowModal(e){const t=this.ce("div"),n=this.editRows[e],{components:i}=n;t.innerHTML=this.renderComponents(i);const o=this.component.modal?this.createModal(t):void 0;o.refs.dialogContents.appendChild(this.ce("button",{class:"btn btn-primary",onClick:()=>{this.validateRow(n,!0)&&(o.close(),this.saveRow(e))}},this.component.saveRow||"Save")),this.attachComponents(t,i)}editRow(e){const t=this.editRows[e];t.state=r.Editing;const n=i.fastCloneDeep(t.data);this.inlineEditMode?t.backup=n:(t.backup=t.data,t.data=n,this.restoreRowContext(t)),this.component.modal?this.addRowModal(e):this.redraw()}clearErrors(e){const t=this.editRows[e];t&&Array.isArray(t.components)&&t.components.forEach(e=>{e.setPristine(!0),e.setCustomValidity("")})}cancelRow(e){if(this.options.readOnly)return;const t=this.editRows[e];switch(t.state){case r.New:t.state=r.Removed,this.clearErrors(e),this.destroyComponents(e),this.inlineEditMode&&this.splice(e),this.editRows.splice(e,1);break;case r.Editing:t.state=r.Saved,this.inlineEditMode&&(this.dataValue[e]=t.backup),t.data=t.backup,t.backup=null,this.restoreRowContext(t),this.clearErrors(e)}this.checkValidity(null,!0),this.redraw()}saveRow(e){if(this.options.readOnly)return;const t=this.editRows[e];if(!this.validateRow(t,!0))return!1;if(this.saveEditMode){const n=this.dataValue||[];switch(t.state){case r.New:{const i=n.length;n.push(t.data),e!==i&&(this.editRows.splice(e,1),this.editRows.splice(i,0,t));break}case r.Editing:n[e]=t.data}}return t.state=r.Saved,t.backup=null,this.updateValue(),this.triggerChange(),this.checkValidity(null,!0),this.redraw(),!0}updateComponentsRowIndex(e,t){e.forEach((e,n)=>{e.rowIndex=t,e.row=`${t}-${n}`})}updateRowsComponents(e){this.editRows.slice(e).forEach((e,t)=>{this.updateComponentsRowIndex(e.components,t)})}removeRow(e){if(this.options.readOnly)return;const t=this.editRows[e];t.state=r.Removed,this.destroyComponents(e),this.splice(e),this.editRows.splice(e,1),this.updateRowsComponents(e),this.updateValue(),this.triggerChange(),this.checkValidity(null,!0),this.checkData(),this.redraw()}removeAllRows(){if(this.options.readOnly)return;const e=this.editRows||[],t=e.length-1;for(let e=t;e>=0;e--)this.removeRow(e)}createRowComponents(t,n){return this.component.components.map((i,o)=>{const s=e.clone(i),r=e.clone(this.options);r.name+=`[${n}]`,r.row=`${n}-${o}`,r.onChange=((e,t,i)=>{const o=this.editRows[n];this.inlineEditMode?this.triggerRootChange(e,t,i):o&&this.checkRow("checkData",null,{changed:t},o.data,o.components)});const a=this.createComponent(e.assign({},s,{row:r.row}),r,t);return a.rowIndex=n,a.path&&s.key&&(a.path=a.path.replace(new RegExp(`\\.${s.key}$`),`[${n}].${s.key}`)),a})}validateRow(e,t){let n=!0;return(e.state===r.Editing||t)&&e.components.forEach(i=>{i.setPristine(!t),n&=i.checkValidity(null,t,e.data)}),this.component.validate&&this.component.validate.row&&("true"!==(n=this.evaluate(this.component.validate.row,{valid:n,row:e.data},"valid",!0)).toString()?(e.error=n,n=!1):e.error=null,null===n&&(n=`Invalid row validation for ${this.key}`)),!!n}checkValidity(e,t,n){return e=e||this.rootValue,n=n||this.data,this.checkCondition(n,e)?this.checkComponentValidity(e,t,n):(this.setCustomValidity(""),!0)}checkComponentValidity(e,t,n){if(!super.checkComponentValidity(e,t,n))return!1;let i=!0,o=!1;if(this.editRows.forEach(e=>{const n=this.validateRow(e,t);i&=n,o|=t&&this.isOpen(e)}),!i)return this.setCustomValidity("Please correct rows before proceeding.",t),!1;if(o&&this.saveEditMode)return this.setCustomValidity("Please save all rows before proceeding.",t),!1;const s=this.invalid||this.invalidMessage(e,t);return this.setCustomValidity(s,t),!0}get defaultValue(){const t=super.defaultValue,n=Array.isArray(t)?t:[];return e.times(this.minLength-n.length,()=>n.push({})),n}setValue(e,t={}){if(s(this.defaultValue,e))return!1;if(!e)return this.dataValue=this.defaultValue,!1;if(!Array.isArray(e)){if("object"!=typeof e)return!1;e=[e]}const n=this.hasChanged(e,this.dataValue);return this.dataValue=e,this.dataValue.forEach((e,n)=>{let i=this.editRows[n];i?(i.data=e,this.restoreRowContext(i,t),i.state=r.Saved,i.backup=null,i.error=null):(i=this.editRows[n]={components:this.createRowComponents(e,n),data:e,state:r.Saved,backup:null,error:null},this.checkRow("checkData",null,{},i.data,i.components))}),this.updateOnChange(t,n),n&&this.redraw(),n}restoreRowContext(e,t={}){e.components.forEach(n=>{n.data=e.data,this.setNestedValue(n,e.data,t)})}}}),e("skylark-formio/components/textfield/TextField",["../_classes/input/Input","../../vendors/vanilla-text-mask/conformToMask","../../utils/utils"],function(e,t,n){"use strict";return class i extends e{static schema(...t){return e.schema({label:"Text Field",key:"textField",type:"textfield",mask:!1,inputType:"text",inputFormat:"plain",inputMask:"",tableView:!0,validate:{minLength:"",maxLength:"",pattern:""}},...t)}static get builderInfo(){return{title:"Text Field",icon:"terminal",group:"basic",documentation:"http://help.form.io/userguide/#textfield",weight:0,schema:i.schema()}}get defaultSchema(){return i.schema()}get inputInfo(){const e=super.inputInfo;return e.type="input",this.component.hasOwnProperty("spellcheck")&&(e.attr.spellcheck=this.component.spellcheck),this.component.mask?e.attr.type="password":e.attr.type="password"===this.component.inputType?"password":"text",e.changeEvent="input",e}get emptyValue(){return""}maskValue(e,t={}){if(e&&"object"==typeof e||(e={value:e,maskName:this.component.inputMasks[0].label}),!e.value){const n=t.noDefault?this.emptyValue:this.defaultValue;e.value=Array.isArray(n)?n[0]:n}return e}normalizeValue(e,t={}){return this.isMultipleMasksField?Array.isArray(e)?super.normalizeValue(e.map(e=>this.maskValue(e,t))):super.normalizeValue(this.maskValue(e,t)):super.normalizeValue(e)}setValueAt(e,i,o={}){if(!this.isMultipleMasksField)return super.setValueAt(e,i,o);const s=(i=this.maskValue(i,o)).value||"",r=this.refs.mask?this.refs.mask[e]:null,a=this.refs.select?this.refs.select[e]:null,l=this.getMaskPattern(i.maskName);if(!(r&&a&&l))return super.setValueAt(e,s,o);r.value=t(s,n.getInputMask(l)).conformedValue,a.value=i.maskName}getValueAt(e){if(!this.isMultipleMasksField)return super.getValueAt(e);const t=this.refs.mask?this.refs.mask[e]:null,n=this.refs.select?this.refs.select[e]:null;return{value:t?t.value:void 0,maskName:n?n.value:void 0}}isEmpty(e=this.dataValue){return this.isMultipleMasksField?super.isEmpty(e)||(this.component.multiple?0===e.length:!e.maskName||!e.value):super.isEmpty((e||"").toString().trim())}}}),e("skylark-formio/components/email/Email",["../textfield/TextField"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"email",label:"Email",key:"email",inputType:"email",kickbox:{enabled:!1}},...t)}static get builderInfo(){return{title:"Email",group:"advanced",icon:"at",documentation:"http://help.form.io/userguide/#email",weight:10,schema:t.schema()}}init(){super.init(),this.validators.push("email")}get defaultSchema(){return t.schema()}get inputInfo(){const e=super.inputInfo;return e.attr.type=this.component.mask?"password":"email",e}}}),e("skylark-formio/components/fieldset/Fieldset",["../_classes/nested/NestedComponent"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({label:"Field Set",key:"fieldSet",type:"fieldset",legend:"",components:[],input:!1,persistent:!1},...t)}static get builderInfo(){return{title:"Field Set",icon:"th-large",group:"layout",documentation:"http://help.form.io/userguide/#fieldset",weight:20,schema:t.schema()}}get defaultSchema(){return t.schema()}get className(){return`form-group ${super.className}`}get templateName(){return"fieldset"}constructor(...e){super(...e),this.noField=!0}}}),e("skylark-formio/vendors/downloadjs/download",[],function(){return function e(t,n,i){var o,s,r=window,a="application/octet-stream",l=i||a,c=t,d=!n&&!i&&c,u=document.createElement("a"),h=function(e){return String(e)},p=r.Blob||r.MozBlob||r.WebKitBlob||h,m=n||"download";if(p=p.call?p.bind(r):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),d&&d.length<2048&&(m=d.split("/").pop().split("?")[0],u.href=d,-1!==u.href.indexOf(d))){var f=new XMLHttpRequest;return f.open("GET",d,!0),f.responseType="blob",f.onload=function(t){e(t.target.response,m,a)},setTimeout(function(){f.send()},0),f}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&p!==h))return navigator.msSaveBlob?navigator.msSaveBlob(v(c),m):k(c);c=v(c),l=c.type||a}else if(/([\x80-\xff])/.test(c)){for(var g=0,y=new Uint8Array(c.length),b=y.length;g<b;++g)y[g]=c.charCodeAt(g);c=new p([y],{type:l})}function v(e){for(var t=e.split(/[:;,]/),n=t[1],i="base64"==t[2]?atob:decodeURIComponent,o=i(t.pop()),s=o.length,r=0,a=new Uint8Array(s);r<s;++r)a[r]=o.charCodeAt(r);return new p([a],{type:n})}function k(e,t){if("download"in u)return u.href=e,u.setAttribute("download",m),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){r.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),n.src=e,setTimeout(function(){document.body.removeChild(n)},333)}if(o=c instanceof p?c:new p([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(o,m);if(r.URL)k(r.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===h)try{return k("data:"+l+";base64,"+r.btoa(o))}catch(e){return k("data:"+l+","+encodeURIComponent(o))}(s=new FileReader).onload=function(e){k(this.result)},s.readAsDataURL(o)}return!0}}),e("skylark-formio/components/file/File",["../_classes/field/Field","../../utils/utils","../../vendors/downloadjs/download","skylark-lodash","../../Formio","../../vendors/getify/npo"],function(e,t,n,i,o,s){"use strict";let r=navigator.camera||void 0;return HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=this;setTimeout(function(){for(var o=atob(i.toDataURL(t,n).split(",")[1]),s=o.length,r=new Uint8Array(s),a=0;a<s;a++)r[a]=o.charCodeAt(a);e(new Blob([r],{type:t||"image/png"}))})}}),class a extends e{static schema(...t){return e.schema({type:"file",label:"Upload",key:"file",image:!1,privateDownload:!1,imageSize:"200",filePattern:"*",fileMinSize:"0KB",fileMaxSize:"1GB",uploadOnly:!1},...t)}static get builderInfo(){return{title:"File",group:"premium",icon:"file",documentation:"http://help.form.io/userguide/#file",weight:100,schema:a.schema()}}init(){super.init(),r=navigator.camera||void 0;const e="undefined"!=typeof FileReader,t=Boolean(window.FormData),n=!!window.XMLHttpRequest&&"upload"in new XMLHttpRequest;this.support={filereader:e,formdata:t,hasWarning:!e||!t||!n,progress:n},this.filesReady=new s((e,t)=>{this.filesReadyResolve=e,this.filesReadyReject=t}),this.cameraMode=!1,this.statuses=[]}get dataReady(){return this.filesReady}get defaultSchema(){return a.schema()}loadImage(e){return this.fileService.downloadFile(e).then(e=>e.url)}get emptyValue(){return[]}getValueAsString(e){return i.isArray(e)?i.map(e,"originalName").join(", "):i.get(e,"originalName","")}getValue(){return this.dataValue}get defaultValue(){const e=super.defaultValue;return Array.isArray(e)?e:[]}get hasTypes(){return this.component.fileTypes&&Array.isArray(this.component.fileTypes)&&0!==this.component.fileTypes.length&&(""!==this.component.fileTypes[0].label||""!==this.component.fileTypes[0].value)}get fileService(){if(this.options.fileService)return this.options.fileService;if(this.options.formio)return this.options.formio;if(this.root&&this.root.formio)return this.root.formio;const e=new o;return this.root&&this.root._form&&this.root._form._id&&(e.formUrl=`${e.projectUrl}/form/${this.root._form._id}`),e}render(){return super.render(this.renderTemplate("file",{fileSize:this.fileSize,files:this.dataValue||[],statuses:this.statuses,disabled:this.disabled,support:this.support}))}getVideoStream(e){return navigator.mediaDevices.getUserMedia({video:{width:{min:640,ideal:1920},height:{min:360,ideal:1080},aspectRatio:{ideal:16/9},...e},audio:!1})}stopVideoStream(e){e.getVideoTracks().forEach(e=>e.stop())}getFrame(e){return new s(t=>{const n=document.createElement("canvas");n.height=e.videoHeight,n.width=e.videoWidth;const i=n.getContext("2d");i.drawImage(e,0,0),n.toBlob(t)})}startVideo(){this.getVideoStream().then(e=>{this.videoStream=e;const{videoPlayer:t}=this.refs;if(!t)return console.warn("Video player not found in template."),this.cameraMode=!1,void this.redraw();t.srcObject=e;const n=parseInt(this.component.webcamSize)||320;t.setAttribute("width",n),t.play()}).catch(e=>{console.error(e),this.cameraMode=!1,this.redraw()})}stopVideo(){this.videoStream&&(this.stopVideoStream(this.videoStream),this.videoStream=null)}takePicture(){const{videoPlayer:e}=this.refs;if(!e)return console.warn("Video player not found in template."),this.cameraMode=!1,void this.redraw();this.getFrame(e).then(e=>{e.name=`photo-${Date.now()}.png`,this.upload([e]),this.cameraMode=!1,this.redraw()})}browseFiles(e={}){return new s(t=>{const n=this.ce("input",{type:"file",style:"height: 0; width: 0; visibility: hidden;",tabindex:"-1",...e});document.body.appendChild(n),n.addEventListener("change",()=>{t(n.files),document.body.removeChild(n)},!0),"function"==typeof n.trigger?n.trigger("click"):n.click()})}set cameraMode(e){this._cameraMode=e,e?this.startVideo():this.stopVideo()}get cameraMode(){return this._cameraMode}get useWebViewCamera(){return this.imageUpload&&r}get imageUpload(){return Boolean(this.component.image)}get browseOptions(){const e={};return this.component.multiple&&(e.multiple=!0),this.imageUpload&&(e.accept="image/*"),e}deleteFile(e){if(e&&"url"===this.component.storage){const t=this.fileService;if(t&&"function"==typeof t.deleteFile)t.deleteFile(e);else{const t=this.options.formio||this.root&&this.root.formio;t&&t.makeRequest("",e.url,"delete")}}}attach(e){this.loadRefs(e,{fileDrop:"single",fileBrowse:"single",galleryButton:"single",cameraButton:"single",takePictureButton:"single",toggleCameraMode:"single",videoPlayer:"single",fileLink:"multiple",removeLink:"multiple",fileStatusRemove:"multiple",fileImage:"multiple",fileType:"multiple"}),this.refs.input=[];const t=super.attach(e);if(this.refs.fileDrop){const e=this;this.addEventListener(this.refs.fileDrop,"dragover",function(e){this.className="fileSelector fileDragOver",e.preventDefault()}),this.addEventListener(this.refs.fileDrop,"dragleave",function(e){this.className="fileSelector",e.preventDefault()}),this.addEventListener(this.refs.fileDrop,"drop",function(t){return this.className="fileSelector",t.preventDefault(),e.upload(t.dataTransfer.files),!1})}this.refs.fileBrowse&&this.addEventListener(this.refs.fileBrowse,"click",e=>{e.preventDefault(),this.browseFiles(this.browseOptions).then(e=>{this.upload(e)})}),this.refs.fileLink.forEach((e,t)=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.getFile(this.dataValue[t])})}),this.refs.removeLink.forEach((e,t)=>{this.addEventListener(e,"click",e=>{const n=this.dataValue[t];this.deleteFile(n),e.preventDefault(),this.splice(t),this.redraw()})}),this.refs.fileStatusRemove.forEach((e,t)=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.statuses.splice(t,1),this.redraw()})}),this.refs.galleryButton&&r&&this.addEventListener(this.refs.galleryButton,"click",e=>{e.preventDefault(),r.getPicture(e=>{window.resolveLocalFileSystemURL(e,e=>{e.file(e=>{this.upload([e])})})},e=>{console.error(e)},{sourceType:r.PictureSourceType.PHOTOLIBRARY})}),this.refs.cameraButton&&r&&this.addEventListener(this.refs.cameraButton,"click",e=>{e.preventDefault(),r.getPicture(e=>{window.resolveLocalFileSystemURL(e,e=>{e.file(e=>{this.upload([e])})})},e=>{console.error(e)},{sourceType:r.PictureSourceType.CAMERA,encodingType:r.EncodingType.PNG,mediaType:r.MediaType.PICTURE,saveToPhotoAlbum:!0,correctOrientation:!1})}),this.refs.takePictureButton&&this.addEventListener(this.refs.takePictureButton,"click",e=>{e.preventDefault(),this.takePicture()}),this.refs.toggleCameraMode&&this.addEventListener(this.refs.toggleCameraMode,"click",e=>{e.preventDefault(),this.cameraMode=!this.cameraMode,this.redraw()}),this.refs.fileType.forEach((e,t)=>{this.dataValue[t].fileType=this.component.fileTypes[0].label,this.addEventListener(e,"change",e=>{e.preventDefault();const n=this.component.fileTypes.find(t=>t.value===e.target.value);this.dataValue[t].fileType=n.label})});const n=this.fileService;if(n){const e=[];this.refs.fileImage.forEach((t,n)=>{e.push(this.loadImage(this.dataValue[n]).then(e=>t.src=e))}),e.length&&s.all(e).then(()=>{this.filesReadyResolve()}).catch(()=>this.filesReadyReject())}return t}fileSize(e,t,n,i,o){return`${(t=Math,n=t.log,i=1024,o=n(e)/n(i)|0,e/t.pow(i,o)).toFixed(2)} ${o?`${"kMGTPEZY"[--o]}B`:"Bytes"}`}globStringToRegex(e){let t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{const i=e.split(",");if(i.length>1)for(let e=0;e<i.length;e++){const o=this.globStringToRegex(i[e]);o.regexp?(t+=`(${o.regexp})`,e<i.length-1&&(t+="|")):n=n.concat(o.excludes)}else e.startsWith("!")?n.push(`^((?!${this.globStringToRegex(e.substring(1)).regexp}).)*$`):(e.startsWith(".")&&(e=`*${e}`),t=(t=`^${e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")}$`).replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}translateScalars(e){if("string"==typeof e){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2)*1024);if(e.search(/gb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2)*1024*1024);if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e}validatePattern(e,t){if(!t)return!0;const n=this.globStringToRegex(t);let o=!0;if(n.regexp&&n.regexp.length){const t=new RegExp(n.regexp,"i");o=!i.isNil(e.type)&&t.test(e.type)||!i.isNil(e.name)&&t.test(e.name)}return o=n.excludes.reduce((t,n)=>{const o=new RegExp(n,"i");return t&&(i.isNil(e.type)||!o.test(e.type))&&(i.isNil(e.name)||!o.test(e.name))},o)}validateMinSize(e,t){return e.size+.1>=this.translateScalars(t)}validateMaxSize(e,t){return e.size-.1<=this.translateScalars(t)}upload(e){this.component.multiple||(e=Array.prototype.slice.call(e,0,1)),this.component.storage&&e&&e.length&&Array.prototype.forEach.call(e,e=>{const n=t.uniqueName(e.name,this.component.fileNameTemplate,this.evalContext()),i={originalName:e.name,name:n,size:e.size,status:"info",message:this.t("Starting upload")};this.component.filePattern&&!this.validatePattern(e,this.component.filePattern)&&(i.status="error",i.message=this.t("File is the wrong type; it must be {{ pattern }}",{pattern:this.component.filePattern})),this.component.fileMinSize&&!this.validateMinSize(e,this.component.fileMinSize)&&(i.status="error",i.message=this.t("File is too small; it must be at least {{ size }}",{size:this.component.fileMinSize})),this.component.fileMaxSize&&!this.validateMaxSize(e,this.component.fileMaxSize)&&(i.status="error",i.message=this.t("File is too big; it must be at most {{ size }}",{size:this.component.fileMaxSize}));const o=this.interpolate(this.component.dir||""),{fileService:s}=this;if(s||(i.status="error",i.message=this.t("File Service not provided.")),this.statuses.push(i),this.redraw(),"error"!==i.status){this.component.privateDownload&&(e.private=!0);const{storage:t,options:r={}}=this.component,a=this.interpolate(this.component.url),l=this.component.fileKey||"file";s.uploadFile(t,e,n,o,e=>{i.status="progress",i.progress=parseInt(100*e.loaded/e.total),delete i.message,this.redraw()},a,r,l).then(t=>{const n=this.statuses.indexOf(i);-1!==n&&this.statuses.splice(n,1),t.originalName=e.name,this.hasValue()||(this.dataValue=[]),this.dataValue.push(t),this.redraw(),this.triggerChange()}).catch(e=>{i.status="error",i.message=e,delete i.progress,this.redraw()})}})}getFile(e){const{options:t={}}=this.component,{fileService:i}=this;if(!i)return alert("File Service not provided");this.component.privateDownload&&(e.private=!0),i.downloadFile(e,t).then(e=>{e&&(["base64","indexeddb"].includes(e.storage)?n(e.url,e.originalName||e.name,e.type):window.open(e.url,"_blank"))}).catch(e=>{alert(e)})}focus(){this.refs.fileBrowse&&this.refs.fileBrowse.focus()}}}),e("skylark-formio/i18n",[],function(){"use strict";return{lng:"en",resources:{en:{translation:{complete:"Submission Complete",error:"Please fix the following errors before submitting.",submitError:"Please check the form and correct all errors before submitting.",required:"{{field}} is required",unique:"{{field}} must be unique",array:"{{field}} must be an array",array_nonempty:"{{field}} must be a non-empty array",nonarray:"{{field}} must not be an array",select:"{{field}} contains an invalid selection",pattern:"{{field}} does not match the pattern {{pattern}}",minLength:"{{field}} must have at least {{length}} characters.",maxLength:"{{field}} must have no more than {{length}} characters.",minWords:"{{field}} must have at least {{length}} words.",maxWords:"{{field}} must have no more than {{length}} words.",min:"{{field}} cannot be less than {{min}}.",max:"{{field}} cannot be greater than {{max}}.",maxDate:"{{field}} should not contain date after {{- maxDate}}",minDate:"{{field}} should not contain date before {{- minDate}}",maxYear:"{{field}} should not contain year greater than {{maxYear}}",minYear:"{{field}} should not contain year less than {{minYear}}",invalid_email:"{{field}} must be a valid email.",invalid_url:"{{field}} must be a valid url.",invalid_regex:"{{field}} does not match the pattern {{regex}}.",invalid_date:"{{field}} is not a valid date.",invalid_day:"{{field}} is not a valid day.",mask:"{{field}} does not match the mask.",stripe:"{{stripe}}",month:"Month",day:"Day",year:"Year",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",next:"Next",previous:"Previous",cancel:"Cancel",submit:"Submit Form"}}}}}),e("skylark-formio/Webform",["skylark-lodash","skylark-moment","./EventEmitter","skylark-i18next","./Formio","./vendors/getify/npo","./components/Components","./components/_classes/nesteddata/NestedDataComponent","./utils/utils","./utils/formUtils","./i18n"],function(e,t,n,i,o,s,r,a,l,c,d){"use strict";o.forms={},o.registerComponent=r.setComponent;class u extends a{constructor(){let t,r;arguments[0]instanceof HTMLElement||arguments[1]?(t=arguments[0],r=arguments[1]):r=arguments[0],super(null,function(t){(t=e.defaults(t,{submitOnEnter:!1,iconset:(s=t&&t.icons?t.icons:o.icons,"fontawesome"===s?"fa":s||""),i18next:i,saveDraft:!1,alwaysDirty:!1,saveDraftThrottle:5e3})).events||(t.events=new n({wildcard:!1,maxListeners:0}));var s;return t}(r)),this.element=t,o.forms[this.id]=this,this.options.baseUrl&&o.setBaseUrl(this.options.baseUrl),r&&r.i18n&&!r.i18nReady&&(r.i18n.resources?d=r.i18n:e.each(r.i18n,(t,n)=>{"options"===n?e.merge(d,t):d.resources[n]?e.assign(d.resources[n].translation,t):d.resources[n]={translation:t}}),r.i18n=d,r.i18nReady=!0),r&&r.i18n?this.options.i18n=r.i18n:this.options.i18n=d,this.options.language&&(this.options.i18n.lng=this.options.language),this.type="form",this._src="",this._loading=!1,this._form={},this.draftEnabled=!1,this.savingDraft=!0,this.options.saveDraftThrottle?this.triggerSaveDraft=e.throttle(this.saveDraft.bind(this),this.options.saveDraftThrottle):this.triggerSaveDraft=this.saveDraft.bind(this),this.customErrors=[],this.nosubmit=!1,this.submitted=!1,this.submitting=!1,this.formio=null,this.loader=null,this.alert=null,this.onSubmission=null,this.submissionSet=!1,this.formReady=new s((e,t)=>{this.formReadyResolve=e,this.formReadyReject=t}),this.submissionReady=new s((e,t)=>{this.submissionReadyResolve=e,this.submissionReadyReject=t}),this.shortcuts=[],this.localize().then(()=>{this.language=this.options.language}),this.options.saveDraft&&o.events&&o.events.on("formio.user",e=>{this.formReady.then(()=>{this.submissionSet||this.restoreDraft(e._id)})}),this.component.clearOnHide=!1,this.root=this}set language(e){return new s((t,n)=>{if(this.options.language=e,i.language===e)return t();try{i.changeLanguage(e,e=>{if(e)return n(e);this.redraw(),this.emit("languageChanged"),t()})}catch(e){return n(e)}})}addLanguage(e,t,n=!1){i.addResourceBundle(e,"translation",t,!0,!0),n&&(this.language=e)}localize(){return i.initialized?s.resolve(i):(i.initialized=!0,new s((e,t)=>{try{i.init(this.options.i18n,n=>{if(this.options.language=i.language.split(";")[0],n)return t(n);e(i)})}catch(e){return t(e)}}))}keyboardCatchableElement(e){return"TEXTAREA"!==e.nodeName&&("INPUT"!==e.nodeName||-1===["text","email","password"].indexOf(e.type))}executeShortcuts(t){const{target:n}=t;if(!this.keyboardCatchableElement(n))return;const i=t.ctrlKey||t.metaKey,o=t.keyCode;let s="";65<=o&&o<=90?s=String.fromCharCode(o):13===o?s="Enter":27===o&&(s="Esc"),e.each(this.shortcuts,e=>{e.ctrl&&!i||e.shortcut===s&&(e.element.click(),t.preventDefault())})}addShortcut(t,n){if(n&&/^([A-Z]|Enter|Esc)$/i.test(n))if("Enter"===(n=e.capitalize(n))||"Esc"===n){if("BUTTON"!==t.tagName)return;this.shortcuts.push({shortcut:n,element:t})}else this.shortcuts.push({ctrl:!0,shortcut:n,element:t})}removeShortcut(t,n){n&&/^([A-Z]|Enter|Esc)$/i.test(n)&&e.remove(this.shortcuts,{shortcut:n,element:t})}get src(){return this._src}loadSubmission(){return this.loadingSubmission=!0,this.formio.submissionId?this.onSubmission=this.formio.loadSubmission().then(e=>this.setSubmission(e),e=>this.submissionReadyReject(e)).catch(e=>this.submissionReadyReject(e)):this.submissionReadyResolve(),this.submissionReady}setSrc(e,t){return this.setUrl(e,t)?(this.nosubmit=!1,this.formio.loadForm({params:{live:1}}).then(e=>{const t=this.setForm(e);return this.loadSubmission(),t}).catch(e=>{console.warn(e),this.formReadyReject(e)})):s.resolve()}set src(e){this.setSrc(e)}get url(){return this._src}setUrl(e,t){return!(!e||"string"!=typeof e||e===this._src)&&(this._src=e,this.nosubmit=!0,this.formio=this.options.formio=new o(e,t),"form"===this.type&&(this.options.src=e),!0)}set url(e){this.setUrl(e)}get ready(){return this.formReady.then(()=>super.ready.then(()=>!this.loadingSubmission||this.submissionReady))}get loading(){return this._loading}set loading(e){if(this._loading!==e){if(this._loading=e,!this.loader&&e){this.loader=this.ce("div",{class:"loader-wrapper"});const e=this.ce("div",{class:"loader text-center"});this.loader.appendChild(e)}if(this.loader)try{e?this.prependTo(this.loader,this.wrapper):this.removeChildFrom(this.loader,this.wrapper)}catch(e){}}}setForm(e){if(this._form=e,e&&e.settings&&e.settings.components&&(this.options.components=e.settings.components),e&&e.module){let t=null;if("string"==typeof e.module)try{t=this.evaluate(`return ${e.module}`)}catch(e){console.warn(e)}else t=e.module;t&&(o.use(t),t.options&&t.options.form&&(this.options=Object.assign(this.options,t.options.form)))}this.initialized=!1;const t=this.rebuild()||s.resolve();return t.then(()=>(this.emit("formLoad",e),this.triggerRecaptcha(),setTimeout(()=>{this.onChange(),this.formReadyResolve()},0),this.formReady))}get form(){return this._form||(this._form={components:[]}),this._form}set form(e){this.setForm(e)}get submission(){return this.getValue()}set submission(e){this.setSubmission(e)}setSubmission(e,t={}){return t={...t,fromSubmission:!0},this.onSubmission=this.formReady.then(()=>(this.submissionSet=!0,this.triggerChange(t),this.setValue(e,t),this.submissionReadyResolve(e)),e=>this.submissionReadyReject(e)).catch(e=>this.submissionReadyReject(e))}saveDraft(){if(!this.draftEnabled)return;if(!this.formio)return void console.warn("Cannot save draft because there is no formio instance.");if(!o.getUser())return void console.warn("Cannot save draft unless a user is authenticated.");const t=this.submission;t.state="draft",this.savingDraft||(this.savingDraft=!0,this.formio.saveSubmission(t).then(n=>{const i=e.merge(n,t);this.emit("saveDraft",n),t._id?this.savingDraft=!1:this.setSubmission(i).then(()=>{this.savingDraft=!1})}))}restoreDraft(e){this.formio?(this.savingDraft=!0,this.formio.loadSubmissions({params:{state:"draft",owner:e}}).then(e=>{if(e.length>0&&!this.options.skipDraftRestore){const t=l.fastCloneDeep(e[0]);return this.setSubmission(t).then(()=>{this.draftEnabled=!0,this.savingDraft=!1,this.emit("restoreDraft",t)})}this.draftEnabled=!0,this.savingDraft=!1,this.emit("restoreDraft",null)})):console.warn("Cannot restore draft because there is no formio instance.")}get schema(){const t=l.fastCloneDeep(e.omit(this._form,["components"]));return t.components=[],this.eachComponent(e=>t.components.push(e.schema)),t}mergeData(t,n){e.mergeWith(t,n,(e,t)=>{if(Array.isArray(e)&&Array.isArray(t)&&e.length!==t.length)return t})}setValue(e,t={}){e&&e.data||(e={data:{}}),this._submission.metadata=e.metadata||{},this.editing=!!e._id,!this.options.submissionTimezone&&e.metadata&&e.metadata.timezone&&(this.options.submissionTimezone=e.metadata.timezone);const n=super.setValue(e.data,t);return t.sanitize||this.mergeData(this.data,e.data),e.data=this.data,this._submission=e,n}getValue(){if(this._submission.data||(this._submission.data={}),this.viewOnly)return this._submission;const e=this._submission;return e.data=this.data,this._submission}init(){return this._submission=this._submission||{data:{}},this.components&&this.components.length&&(this.destroyComponents(),this.components=[]),this.component?this.component.components=this.form?this.form.components:[]:this.component=this.form,this.component.type="form",this.component.input=!1,this.addComponents(),this.on("submitButton",e=>{this.submit(!1,e).catch(e=>!1!==e&&console.log(e))},!0),this.on("checkValidity",e=>this.checkValidity(e,!0,e),!0),this.on("requestUrl",e=>this.submitUrl(e.url,e.headers),!0),this.on("resetForm",()=>this.resetValue(),!0),this.on("deleteSubmission",()=>this.deleteSubmission(),!0),this.on("refreshData",()=>this.updateValue(),!0),this.executeFormController(),this.formReady}executeFormController(){if(!this.form||!this.form.controller||(!this.visible||this.component.hidden)&&this.component.clearOnHide&&!this.rootPristine)return!1;this.formReady.then(()=>{this.evaluate(this.form.controller,{components:this.components})})}destroy(){return this.off("submitButton"),this.off("checkValidity"),this.off("requestUrl"),this.off("resetForm"),this.off("deleteSubmission"),this.off("refreshData"),super.destroy()}build(e){return e||this.element?this.ready.then(()=>{e=e||this.element,super.build(e)}):this.ready}getClassName(){return"formio-form"}render(){return super.render(this.renderTemplate("webform",{classes:this.getClassName(),children:this.renderComponents()}),this.builderMode?"builder":"form",!0)}redraw(){return this.element?(this.clear(),this.setContent(this.element,this.render()),this.attach(this.element)):s.resolve()}attach(e){this.element=e,this.loadRefs(e,{webform:"single"});const t=this.attachComponents(this.refs.webform);return this.addEventListener(this.element,"keydown",this.executeShortcuts),this.currentForm=this,t.then(()=>(this.emit("render"),this.setValue(this._submission,{noUpdateEvent:!0})))}hasRequiredFields(){let e=!1;return c.eachComponent(this.form.components,t=>{if(t.validate.required)return e=!0,!0},!0),e}resetValue(){e.each(this.getComponents(),e=>e.resetValue()),this.setPristine(!0)}setAlert(e,t){if(e||!this.submitted)if(this.options.noAlerts)t||this.emit("error",!1);else{if(this.alert)try{this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(e=>{this.removeEventListener(e,"click"),this.removeEventListener(e,"keypress")}),this.removeChild(this.alert),this.alert=null}catch(e){}t&&(this.alert=this.ce("div",{id:`error-list-${this.id}`,class:`alert alert-${e}`,role:"alert"}),t instanceof HTMLElement?this.appendTo(t,this.alert):this.setContent(this.alert,t)),this.alert&&(this.loadRefs(this.alert,{errorRef:"multiple"}),this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(e=>{this.addEventListener(e,"click",e=>{const t=e.currentTarget.dataset.componentKey;this.focusOnComponent(t)}),this.addEventListener(e,"keypress",e=>{if(13===e.keyCode){const t=e.currentTarget.dataset.componentKey;this.focusOnComponent(t)}})}),this.prepend(this.alert))}else this.alert&&(this.refs.errorRef&&this.refs.errorRef.length&&this.refs.errorRef.forEach(e=>{this.removeEventListener(e,"click"),this.removeEventListener(e,"keypress")}),this.removeChild(this.alert),this.alert=null)}focusOnComponent(e){if(e){const t=this.getComponent(e);t&&t.focus()}}showErrors(t,n){this.loading=!1;let i=this.errors;if(t?Array.isArray(t)?i=i.concat(t):i.push(t):i=super.errors,!(i=i.concat(this.customErrors)).length)return void this.setAlert(!1);i.forEach(t=>{const{components:n=[]}=t;t.component&&n.push(t.component),t.path&&n.push(t.path),n.forEach(n=>{const i=this.getComponent(n,e.identity),o=e.compact(Array.isArray(i)?i:[i]);o.forEach(e=>e.setCustomValidity(t.message,!0))})});const o=document.createDocumentFragment(),s=this.ce("p");this.setContent(s,this.t("error"));const r=this.ce("ul");return i.forEach(t=>{if(t){const n=e=>{const n={ref:"errorRef",tabIndex:0,"aria-label":`${e}. Click to navigate to the field with following error.`},i=this.ce("li",n);this.setContent(i,e),t.component&&t.component.key&&(i.dataset.componentKey=t.component.key),this.appendTo(i,r)};if(t.messages&&t.messages.length)t.messages.forEach(({message:e})=>n(`${this.t(t.component.label)}. ${e}`));else if(t){const i=e.isObject(t)?t.message||"":t;n(i)}}}),s.appendChild(r),o.appendChild(s),this.setAlert("danger",o),n&&this.emit("error",i),i}onSubmit(e,t){return this.loading=!1,this.submitting=!1,this.setPristine(!0),this.setValue(l.fastCloneDeep(e),{noValidate:!0,noCheck:!0}),this.setAlert("success",`<p>${this.t("complete")}</p>`),this.emit("submit",e),t&&this.emit("submitDone",e),e}onSubmissionError(e){return e&&("string"==typeof e&&(e={message:e}),"details"in e&&(e=e.details)),this.submitting=!1,this.setPristine(!1),this.emit("submitError",e),e&&e.silent?(this.emit("change",{isValid:!0}),!1):this.showErrors(e,!0)}onChange(t,n,i){t=t||{};let o=!1;n&&n.component&&(this.customErrors=this.customErrors.filter(e=>e.component&&e.component!==n.component.key)),super.onChange(t,!0);const s=e.clone(this.submission);t.changed=s.changed=n,i&&this.pristine&&(this.pristine=!1),s.isValid=this.checkData(s.data,t),this.loading=!1,this.submitted&&this.showErrors(),i&&this.options.saveDraft&&this.triggerSaveDraft(),t&&t.noEmit||(this.emit("change",s,t),o=!0),o&&!this.initialized&&(this.emit("initialized"),this.initialized=!0)}checkData(t,n={}){const i=super.checkData(t,n);return(e.isEmpty(n)||n.noValidate)&&this.submitted&&this.showErrors(),i}deleteSubmission(){return this.formio.deleteSubmission().then(()=>{this.emit("submissionDeleted",this.submission),this.resetValue()})}cancel(e){const t=this.hook("beforeCancel",!0);return!(!t||!e&&!confirm("Are you sure you want to cancel?"))&&(this.resetValue(),!0)}submitForm(n={}){return new s((i,s)=>{if(this.options.readOnly)return i({submission:this.submission,saved:!1});const r=l.fastCloneDeep(this.submission||{});r.metadata=r.metadata||{},e.defaults(r.metadata,{timezone:e.get(this,"_submission.metadata.timezone",l.currentTimezone()),offset:parseInt(e.get(this,"_submission.metadata.offset",t().utcOffset()),10),referrer:document.referrer,browserName:navigator.appName,userAgent:navigator.userAgent,pathName:window.location.pathname,onLine:navigator.onLine}),r.state=n.state||"submitted";const a="draft"===r.state;this.hook("beforeSubmit",{...r,component:n.component},t=>t?s(t):a||r.data?a||this.checkValidity(r.data,!0,r.data)?(this.everyComponent(t=>{const{persistent:n}=t.component;"client-only"===n&&e.unset(r.data,t.path)}),void this.hook("customValidation",{...r,component:n.component},e=>{if(e)return"string"==typeof e&&(e={message:e}),e=Array.isArray(e)?e:[e],this.customErrors=e,s();if(this.loading=!0,this._form&&this._form.action){const e=r.data._id&&this._form.action.includes(r.data._id)?"PUT":"POST";return o.makeStaticRequest(this._form.action,e,r,this.formio?this.formio.options:{}).then(e=>i({submission:e,saved:!0})).catch(s)}const t=this.formio;if(this.nosubmit||!t)return i({submission:r,saved:!1});const n=t.actionUrl?"saveAction":"saveSubmission";t[n](r).then(e=>i({submission:e,saved:!0})).catch(s)})):s():s("Invalid Submission"))})}executeSubmit(e){return this.submitted=!0,this.submitting=!0,this.submitForm(e).then(({submission:e,saved:t})=>this.onSubmit(e,t)).catch(e=>s.reject(this.onSubmissionError(e)))}submit(e,t){return e?this.executeSubmit(t):this.beforeSubmit(t).then(()=>this.executeSubmit(t))}submitUrl(e,t){if(!e)return console.warn("Missing URL argument");const n=this.submission||{},i=e,s={method:"POST",headers:{}};if(t&&t.length>0&&t.map(e=>{""!==e.header&&""!==e.value&&(s.headers[e.header]=this.interpolate(e.value,n))}),!i||!s)return this.emit("error","You should add a URL to this button."),this.setAlert("warning","You should add a URL to this button."),console.warn("You should add a URL to this button.");try{o.makeStaticRequest(i,s.method,n,{headers:s.headers}).then(()=>{this.emit("requestDone"),this.setAlert("success","<p> Success </p>")})}catch(e){this.showErrors(`${e.statusText} ${e.status}`),this.emit("error",`${e.statusText} ${e.status}`),console.error(`${e.statusText} ${e.status}`)}}triggerRecaptcha(){if(!this||!this.components)return;const e=this.components.find(e=>"recaptcha"===e.component.type&&"formLoad"===e.component.eventType);e&&e.verify(`${this.form.name?this.form.name:"form"}Load`)}set nosubmit(e){this._nosubmit=!!e,this.emit("nosubmit",this._nosubmit)}get nosubmit(){return this._nosubmit||!1}}return u.setBaseUrl=o.setBaseUrl,u.setApiUrl=o.setApiUrl,u.setAppUrl=o.setAppUrl,u}),e("skylark-formio/PDF",["./vendors/getify/npo","./Formio","./Webform","./utils/utils"],function(e,t,n,i){"use strict";return window.addEventListener("message",e=>{let n=null;try{n=JSON.parse(e.data)}catch(e){n=null}n&&n.name&&n.formId&&t.forms.hasOwnProperty(n.formId)&&t.forms[n.formId].emit(`iframe-${n.name}`,n.data)}),class extends n{constructor(e,t){super(e,t),this.components=[]}init(){super.init(),this.on("iframe-submission",e=>this.setValue(e,{fromIframe:!0}),!0),this.on("iframe-change",e=>this.setValue(e,{fromIframe:!0}),!0),this.on("iframe-getIframePositions",()=>{const e=document.querySelector("iframe").getBoundingClientRect();this.postMessage({name:"iframePositions",data:{iframe:{top:e.top},scrollY:window.scrollY||window.pageYOffset}})}),this.on("iframe-ready",()=>this.iframeReadyResolve(),!0)}render(){return this.renderTemplate("pdf",{classes:"formio-form-pdf",children:this.renderComponents()})}redraw(){return super.redraw()}attach(t){return super.attach(t).then(()=>{this.loadRefs(t,{submitButton:"single",zoomIn:"single",zoomOut:"single",iframeContainer:"single"}),this.iframeReady=new e((e,t)=>{this.iframeReadyResolve=e,this.iframeReadyReject=t}),this.iframeElement=this.ce("iframe",{src:this.getSrc(),id:`iframe-${this.id}`,seamless:!0,class:"formio-iframe"}),this.iframeElement.formioContainer=this.component.components,this.iframeElement.formioComponent=this,this.empty(this.refs.iframeContainer),this.appendChild(this.refs.iframeContainer,this.iframeElement),this.postMessage({name:"form",data:this.form});const n=this.components.find(e=>e.element===this.refs.submitButton);this.refs.submitButton.classList.toggle("hidden",!n.visible),this.addEventListener(this.refs.submitButton,"click",()=>(this.postMessage({name:"getErrors"}),this.submit())),this.addEventListener(this.refs.zoomIn,"click",e=>{e.preventDefault(),this.postMessage({name:"zoomIn"})}),this.addEventListener(this.refs.zoomOut,"click",e=>{e.preventDefault(),this.postMessage({name:"zoomOut"})});const o=i.fastCloneDeep(this.form);this.formio&&(o.projectUrl=this.formio.projectUrl,o.url=this.formio.formUrl,o.base=this.formio.base,this.postMessage({name:"token",data:this.formio.getToken()})),this.emit("attach")})}getSubmission(){return new e(e=>{this.once("iframe-submission",e),this.postMessage({name:"getSubmission"})})}submitForm(e={}){return this.getSubmission().then(()=>super.submitForm(e))}getSrc(){if(!this._form||!this._form.settings||!this._form.settings.pdf)return"";let e=`${this._form.settings.pdf.src}.html`;const t=[`id=${this.id}`];return this.options.readOnly&&t.push("readonly=1"),this.options.zoom&&t.push(`zoom=${this.options.zoom}`),this.builderMode&&t.push("builder=1"),t.length&&(e+=`?${t.join("&")}`),e}setForm(e){return super.setForm(e).then(()=>{this.formio&&(e.projectUrl=this.formio.projectUrl,e.url=this.formio.formUrl,e.base=this.formio.base,this.postMessage({name:"token",data:this.formio.getToken()})),this.postMessage({name:"form",data:e})})}setValue(e,t={}){const n=super.setValue(e,t);return t&&t.fromIframe||this.once("iframe-ready",()=>{this.postMessage({name:"submission",data:e})}),n}setSubmission(e){return e.readOnly=!!this.options.readOnly,super.setSubmission(e).then(()=>{this.formio&&this.formio.getDownloadUrl().then(e=>{e&&(this.downloadButton||(this.options.primaryProject&&(e+=`&project=${this.options.primaryProject}`),this.downloadButton=this.ce("a",{href:e,target:"_blank",style:"position:absolute;right:10px;top:110px;cursor:pointer;"},this.ce("img",{src:require("./pdf.image"),style:"width:3em;"})),this.element.insertBefore(this.downloadButton,this.iframe)))})})}postMessage(e){this.iframeReady&&(e.type||(e.type="iframe-data"),this.iframeReady.then(()=>{this.iframeElement&&this.iframeElement.contentWindow&&this.iframeElement.contentWindow.postMessage(JSON.stringify(e),"*")}))}focusOnComponent(e){this.postMessage({name:"focusErroredField",data:e})}clear(){}showErrors(e,t){const n=document.getElementById("submit-error");if(!n){const e=this.ce("p",{class:"help-block"});this.setContent(e,this.t("submitError")),e.addEventListener("click",()=>{window.scrollTo(0,0)});const t=this.ce("div",{id:"submit-error",class:"has-error"});this.appendTo(e,t),this.appendTo(t,this.element)}!this.errors.length&&n&&n.remove(),this.errors.length&&this.focusOnComponent(this.errors[0].component.key),this.errors.length&&this.focusOnComponent(this.errors[0].component.key),super.showErrors(e,t)}}}),e("skylark-formio/Wizard",["./vendors/getify/npo","skylark-lodash","./Webform","./Formio","./utils/utils"],function(e,t,n,i,o){"use strict";class s extends n{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],super(e,t),this.pages=[],this.prefixComps=[],this.suffixComps=[],this.components=[],this.originalComponents=[],this.page=0,this.currentNextPage=0,this._seenPages=[0]}isLastPage(){const e=this.getNextPage();return t.isNumber(e)?0<e&&e>=this.pages.length:t.isNull(e)}getPages(e={}){const{all:n=!1}=e,i=this.pages.filter(n?t.identity:(e,t)=>this._seenPages.includes(t));return i}getComponents(){return this.submitting?this.getPages({all:this.isLastPage()}):super.getComponents()}resetValue(){this.getPages({all:!0}).forEach(e=>e.resetValue()),this.setPristine(!0)}init(){this.options.buttonSettings=t.defaults(this.options.buttonSettings,{showPrevious:!0,showNext:!0,showSubmit:!0,showCancel:!this.options.readOnly}),this.options.breadcrumbSettings=t.defaults(this.options.breadcrumbSettings,{clickable:!0}),this.page=0;const e=super.init();return this.setComponentSchema(),e}get wizardKey(){return`wizard-${this.id}`}get form(){return this.wizard}set form(e){super.form=e}get buttons(){const e={};return[{name:"cancel",method:"cancel"},{name:"previous",method:"prevPage"},{name:"next",method:"nextPage"},{name:"submit",method:"submit"}].forEach(t=>{this.hasButton(t.name)&&(e[t.name]=t)}),e}get renderContext(){return{wizardKey:this.wizardKey,isBreadcrumbClickable:this.isBreadcrumbClickable(),panels:this.pages.map(e=>e.component),buttons:this.buttons,currentPage:this.page}}render(){const e=this.renderContext;return this.renderTemplate("wizard",{...e,className:super.getClassName(),wizardHeader:this.renderTemplate("wizardHeader",e),wizardNav:this.renderTemplate("wizardNav",e),components:this.renderComponents([...this.prefixComps,...this.currentPage.components,...this.suffixComps])},this.builderMode?"builder":"form")}redrawNavigation(){if(this.element){let e=this.element.querySelector(`#${this.wizardKey}-nav`);e&&(this.detachNav(),e.outerHTML=this.renderTemplate("wizardNav",this.renderContext),e=this.element.querySelector(`#${this.wizardKey}-nav`),this.loadRefs(e,{[`${this.wizardKey}-cancel`]:"single",[`${this.wizardKey}-previous`]:"single",[`${this.wizardKey}-next`]:"single",[`${this.wizardKey}-submit`]:"single"}),this.attachNav())}}redrawHeader(){if(this.element){let e=this.element.querySelector(`#${this.wizardKey}-header`);e&&(this.detachHeader(),e.outerHTML=this.renderTemplate("wizardHeader",this.renderContext),e=this.element.querySelector(`#${this.wizardKey}-header`),this.loadRefs(e,{[`${this.wizardKey}-link`]:"multiple"}),this.attachHeader())}}attach(e){this.element=e,this.loadRefs(e,{[this.wizardKey]:"single",[`${this.wizardKey}-cancel`]:"single",[`${this.wizardKey}-previous`]:"single",[`${this.wizardKey}-next`]:"single",[`${this.wizardKey}-submit`]:"single",[`${this.wizardKey}-link`]:"multiple"});const t=this.attachComponents(this.refs[this.wizardKey],[...this.prefixComps,...this.currentPage.components,...this.suffixComps]);return this.attachNav(),this.attachHeader(),t.then(()=>this.emit("render"))}isBreadcrumbClickable(){return t.get(this.options,"breadcrumbSettings.clickable",!0)}attachNav(){t.each(this.buttons,e=>{const t=this.refs[`${this.wizardKey}-${e.name}`];this.addEventListener(t,"click",n=>{n.preventDefault(),t.setAttribute("disabled","disabled"),this.setLoading(t,!0),this[e.method]().then(()=>{t.removeAttribute("disabled"),this.setLoading(t,!1)}).catch(()=>{t.removeAttribute("disabled"),this.setLoading(t,!1)})})})}attachHeader(){this.isBreadcrumbClickable()&&this.refs[`${this.wizardKey}-link`].forEach((e,t)=>{this.addEventListener(e,"click",e=>(this.emit("wizardNavigationClicked",this.pages[t]),e.preventDefault(),this.setPage(t).then(()=>{this.emit("wizardPageSelected",this.pages[t],t)})))})}detachNav(){t.each(this.buttons,e=>{this.removeEventListener(this.refs[`${this.wizardKey}-${e.name}`],"click")})}detachHeader(){this.refs[`${this.wizardKey}-link`].forEach(e=>{this.removeEventListener(e,"click")})}establishPages(){this.pages=[],this.prefixComps=[],this.suffixComps=[];const e=[],n={},i=t.clone(this.options);return this.components&&this.components.length&&this.components.map(e=>{"panel"===e.component.type&&(n[e.component.key||e.component.title]=e)}),this.originalComponents&&this.originalComponents.forEach(t=>{if("panel"===t.type){t.key||(t.key=t.title);let s=n[t.key];const r=o.checkCondition(t,this.data,this.data,this.component,this);r&&(e.push(t),s&&this.pages.push(s)),!s&&r?(s=this.createComponent(t,i),this.pages.push(s),s.eachComponent(e=>{e.page=this.pages.length-1})):s&&!r&&this.removeComponent(s)}else"button"!==t.type&&(this.pages.length?this.suffixComps.push(this.createComponent(t,i)):this.prefixComps.push(this.createComponent(t,i)))}),e}addComponents(){this.establishPages()}setPage(t){return t===this.page?e.resolve():!this.wizard.full&&t>=0&&t<this.pages.length?(this.page=t,this.pageFieldLogic(t),this.getNextPage(),this._seenPages.includes(t)||(this._seenPages=this._seenPages.concat(t)),this.redraw().then(()=>{this.options.readOnly||this.checkValidity(this.submission.data,!1,this.submission.data,!0)}),e.resolve()):this.wizard.full||!this.pages.length?(this.redraw(),e.resolve()):e.reject("Page not found")}pageFieldLogic(e){this.component=this.pages[e].component,this.originalComponent=o.fastCloneDeep(this.component),this.fieldLogic(this.data),this.disabled=this.shouldDisabled}get currentPage(){return this.pages&&this.pages.length>=this.page?this.pages[this.page]:{components:[]}}getNextPage(){const e=this.submission.data,t=this.pages[this.page].component;if(t){const n=this.pages.length>this.page+1?this.page+1:-1;if(t.nextPage){const i=this.evaluate(t.nextPage,{next:n,data:e,page:n,form:t},"next");if(null===i)return this.currentNextPage=null,null;const o=parseInt(i,10);return!isNaN(parseInt(o,10))&&isFinite(o)?(this.currentNextPage=o,o):(this.currentNextPage=this.getPageIndexByKey(i),this.currentNextPage)}return this.currentNextPage=n,n}return this.currentNextPage=null,null}getPreviousPage(){return this.page-1}beforeSubmit(){return e.all(this.getPages().map(e=>(e.options.beforeSubmit=!0,e.beforeSubmit())))}beforePage(t){return new e((e,n)=>{this.hook(t?"beforeNext":"beforePrev",this.currentPage,this.submission,i=>{i&&(this.showErrors(i,!0),n(i));const o=this.currentPage;o?o.beforePage(t).then(e).catch(n):e()})})}nextPage(){return this.options.readOnly?this.setPage(this.getNextPage()).then(()=>{this.emit("nextPage",{page:this.page,submission:this.submission})}):this.checkValidity(this.submission.data,!0,this.submission.data,!0)?(this.checkData(this.submission.data),this.beforePage(!0).then(()=>this.setPage(this.getNextPage()).then(()=>{this.emit("nextPage",{page:this.page,submission:this.submission})}))):(this.currentPage.components.forEach(e=>e.setPristine(!1)),e.reject(this.showErrors([],!0)))}prevPage(){return this.beforePage().then(()=>this.setPage(this.getPreviousPage()).then(()=>{this.emit("prevPage",{page:this.page,submission:this.submission})}))}cancel(t){return super.cancel(t)?(this.setPristine(!0),this.setPage(0).then(()=>(this.redraw(),this.page))):e.resolve()}getPageIndexByKey(e){let t=this.page;return this.pages.forEach((n,i)=>{if(n.component.key===e)return t=i,!1}),t}get schema(){return this.wizard}setComponentSchema(){const e={};if(this.originalComponents=[],this.component.components.map(n=>{"panel"===n.type&&(n.key=o.uniqueKey(e,n.key||"panel"),e[n.key]=!0),this.originalComponents.push(t.clone(n))}),!Object.keys(e).length){const e={type:"panel",title:"Page 1",label:"Page 1",key:"page1",components:this.component.components};this.component.components=[e],this.originalComponents.push(t.clone(e))}}setForm(e){if(e)return this.wizard=e,this.component.components=e.components||[],this.setComponentSchema(),super.setForm(e)}setValue(e,t={}){const n=super.setValue(e,t);return this.pageFieldLogic(this.page),n}isClickable(e,n){return this.page!==n&&o.firstNonNil([t.get(e,"breadcrumbClickable"),this.options.breadcrumbSettings.clickable])}hasButton(e,n){const i=this.currentPage;if("previous"===e){const e=o.firstNonNil([t.get(i,"buttonSettings.previous"),this.options.buttonSettings.showPrevious]);return this.getPreviousPage()>-1&&e}if(n=void 0===n?this.getNextPage():n,"next"===e){const e=o.firstNonNil([t.get(i,"buttonSettings.next"),this.options.buttonSettings.showNext]);return null!==n&&-1!==n&&e}if("cancel"===e)return o.firstNonNil([t.get(i,"buttonSettings.cancel"),this.options.buttonSettings.showCancel]);if("submit"===e){const e=o.firstNonNil([t.get(i,"buttonSettings.submit"),this.options.buttonSettings.showSubmit]);return e&&!this.options.readOnly&&(null===n||this.page===this.pages.length-1)}return!0}pageId(e){return e.key?`${e.key}-${e.title}`:e.components&&e.components.length>0?this.pageId(e.components[0]):e.title}onChange(e,n,i){super.onChange(e,n,i),this.alert&&!this.submitted&&(this.checkValidity(this.submission.data,!1,this.submission.data,!0),this.showErrors([],!0));const o=this.pages.map(e=>e.component.key),s=this.establishPages().map(e=>e.key),r=this.currentNextPage;t.isEqual(s,o)||this.redrawHeader(),r!==this.getNextPage()&&this.redrawNavigation()}checkValidity(e,t,n,i){if(!this.checkCondition(n,e))return this.setCustomValidity(""),!0;const o=!i||this.isLastPage()?this.getComponents():this.currentPage.components;return o.reduce((i,o)=>o.checkValidity(e,t,n)&&i,!0)}get errors(){return this.isLastPage()?super.errors:this.currentPage.errors}focusOnComponent(e){let t=0;const[n]=this.pages.filter((n,i)=>!!n.getComponent(e)&&(t=i,!0));return n&&n!==this.currentPage?this.setPage(t).then(()=>{this.checkValidity(this.submission.data,!0,this.submission.data),this.showErrors(),super.focusOnComponent(e)}):super.focusOnComponent(e)}}return s.setBaseUrl=i.setBaseUrl,s.setApiUrl=i.setApiUrl,s.setAppUrl=i.setAppUrl,s}),e("skylark-formio/displays/Displays",["skylark-lodash","../PDF","../Webform","../Wizard"],function(e,t,n,i){"use strict";return class t{static addDisplay(e,n){t.displays[e]=n}static addDisplays(n){t.displays=e.merge(t.displays,n)}static getDisplay(e){return t.displays[e]}static getDisplays(){return t.displays}}}),e("skylark-formio/displays/index",["./Displays"],function(e){"use strict";return e}),e("skylark-formio/Form",["./Element","./Formio","./displays/index","./templates/index","./utils/utils","./vendors/getify/npo"],function(e,t,n,i,o,s){"use strict";class r extends e{constructor(...e){let n=e[0]instanceof HTMLElement?e[2]:e[1];t.options&&t.options.form&&(n=Object.assign(n,t.options.form)),super(n),this.ready=new s((e,t)=>{this.readyResolve=e,this.readyReject=t}),this.instance=null,e[0]instanceof HTMLElement?(this.element=e[0],this.options=e[2]||{},this.options.events=this.events,this.setForm(e[1]).then(()=>this.readyResolve(this.instance)).catch(this.readyReject)):e[0]?(this.element=null,this.options=e[1]||{},this.options.events=this.events,this.setForm(e[0]).then(()=>this.readyResolve(this.instance)).catch(this.readyReject)):(this.element=null,this.options={},this.options.events=this.events),this.display=""}create(e){return this.options&&(this.options.flatten||"flat"===this.options.renderMode)&&(e="form"),this.display=e,n.displays[e]?new n.displays[e](this.element,this.options):new n.displays.webform(this.element,this.options)}set form(e){return this.setForm(e)}errorForm(e){return{components:[{label:"HTML",tag:"div",className:"error error-message alert alert-danger ui red message",attrs:[{attr:"role",value:"alert"}],key:"errorMessage",type:"htmlelement",input:!1,content:"string"==typeof e?e:e.message}]}}setForm(e){let n;if("string"==typeof(e=e||this.form)){const i=new t(e);let o;n=this.getSubmission(i).catch(e=>{o=e}).then(t=>i.loadForm().catch(e=>{o=e}).then(n=>{if(o&&(n=this.errorForm(o)),this.instance=this.instance||this.create(n.display),this.instance.url=e,this.instance.nosubmit=!1,this._form=this.instance.form=n,t&&(this.instance.submission=t),o)throw o;return this.instance}))}else this.instance=this.instance||this.create(e.display),this._form=this.instance.form=e,n=this.instance.ready;return n.then(()=>(this.element=this.instance.element,this.instance))}getSubmission(e){return e.submissionId?e.loadSubmission():s.resolve()}get form(){return this._form}setDisplay(e){return this.display===e&&this.instance?s.resolve(this.instance):(this.form.display=e,this.instance.destroy(),this.instance=this.create(e),this.setForm(this.form))}empty(){if(this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}static embed(e){return new s(t=>{e&&e.src||t();const n=this.id||`formio-${Math.random().toString(36).substring(7)}`,i=e.class||"formio-form-wrapper";let o=e.styles?`<link rel="stylesheet" href="${e.styles}">`:"";o+=`<div id="${n}" class="${i}"></div>`,document.write(o);let s=0;const a=setInterval(()=>{s++;const i=document.getElementById(n);(i||s>10)&&(t(new r(i,e.src).ready),clearInterval(a))},10)})}sanitize(e){return o.sanitize(e,this.options)}setContent(e,t){return e instanceof HTMLElement&&(e.innerHTML=this.sanitize(t),!0)}build(){if(!this.instance)return s.reject("Form not ready. Use form.ready promise");if(!this.element)return s.reject("No DOM element for form.");const e=this.options&&this.options.template?this.options.template:"bootstrap",t=i[e].loader||i.bootstrap.loader;return this.setContent(this.element,t.form),this.render().then(e=>(this.setContent(this.element,e),this.attach(this.element).then(()=>this.instance))).then(e=>(this.emit("build",e),e))}render(){return this.instance?s.resolve(this.instance.render()).then(e=>(this.emit("render",e),e)):s.reject("Form not ready. Use form.ready promise")}attach(e){return this.instance?(this.element=e,this.instance.attach(this.element).then(e=>(this.emit("attach",e),e))):s.reject("Form not ready. Use form.ready promise")}}return t.embedForm=(e=>r.embed(e)),t.createForm=((...e)=>new r(...e).ready),t.Form=r}),e("skylark-formio/components/form/Form",["skylark-lodash","../_classes/component/Component","../../vendors/eventemitter2/EventEmitter2","../../vendors/getify/npo","../../utils/utils","../../Formio","../../Form"],function(e,t,n,i,o,s,r){"use strict";return class a extends t{static schema(...e){return t.schema({label:"Form",type:"form",key:"form",src:"",reference:!0,form:"",path:"",tableView:!0},...e)}static get builderInfo(){return{title:"Nested Form",icon:"wpforms",group:"premium",documentation:"http://help.form.io/userguide/#form",weight:110,schema:a.schema()}}init(){if(super.init(),this.formObj={display:this.component.display,settings:this.component.settings,components:this.component.components},this.subForm=null,this.formSrc="",this.component.src&&(this.formSrc=this.component.src),this.component.src||this.options.formio||!this.component.form&&!this.component.path||(this.component.project?(this.formSrc=s.getBaseUrl(),o.isMongoId(this.component.project)&&(this.formSrc+="/project"),this.formSrc+=`/${this.component.project}`,this.options.project=this.formSrc):(this.formSrc=s.getProjectUrl(),this.options.project=this.formSrc),this.component.form?this.formSrc+=`/form/${this.component.form}`:this.component.path&&(this.formSrc+=`/${this.component.path}`)),!this.formSrc&&this.options.formio){const e=this.options.formio.formsUrl;if(this.component.path){const t=e.split("/");t.pop(),this.formSrc=`${t.join("/")}/${this.component.path}`}this.component.form&&(this.formSrc=`${e}/${this.component.form}`)}(this.component.revision||0===this.component.revision)&&(this.formSrc+=`/v/${this.component.revision}`)}get dataReady(){return this.subFormReady||i.resolve()}get defaultValue(){return this.subForm?super.defaultValue:null}get defaultSchema(){return a.schema()}get emptyValue(){return{data:{}}}get ready(){return this.subFormReady||i.resolve()}getSubOptions(t={}){return this.options?(this.options.base&&(t.base=this.options.base),this.options.project&&(t.project=this.options.project),this.options.readOnly&&(t.readOnly=this.options.readOnly),this.options.breadcrumbSettings&&(t.breadcrumbSettings=this.options.breadcrumbSettings),this.options.buttonSettings&&(t.buttonSettings=e.clone(this.options.buttonSettings)),this.options.viewAsHtml&&(t.viewAsHtml=this.options.viewAsHtml),this.options.language&&(t.language=this.options.language),this.options.template&&(t.template=this.options.template),this.options.templates&&(t.templates=this.options.templates),this.options.renderMode&&(t.renderMode=this.options.renderMode),this.options.attachMode&&(t.attachMode=this.options.attachMode),this.options.iconset&&(t.iconset=this.options.iconset),t.events=this.createEmitter(),e.set(t,"buttonSettings.showSubmit",!1),t):t}render(){if(this.builderMode)return super.render(this.component.label||"Nested form");const e=this.subForm?this.subForm.render():this.renderTemplate("loading");return super.render(e)}asString(e){return this.getValueAsString(e)}getValueAsString(e){return e?!e.data&&e._id?e._id:e.data&&Object.keys(e.data).length?"[Complex Data]":"No data provided":"No data provided"}attach(e){return this.builderMode?super.attach(e):super.attach(e).then(()=>this.createSubForm()).then(()=>{this.empty(e),this.options.builder?this.setContent(e,this.ce("div",{class:"text-muted text-center p-2"},this.text(this.formObj.title))):(this.setContent(e,this.render()),this.subForm&&this.subForm.attach(e))})}detach(){this.subForm&&this.subForm.detach(),super.detach()}get currentForm(){return this._currentForm}set currentForm(e){this._currentForm=e,this.subForm&&this.subForm.getComponents().forEach(e=>{e.currentForm=this})}destroy(){this.subForm&&(this.subForm.destroy(),this.subForm=null,this.subFormReady=null),super.destroy()}redraw(){return this.subForm&&(this.subForm.form=this.formObj),super.redraw()}everyComponent(...e){this.subForm&&this.subForm.everyComponent(...e)}createSubForm(){return this.subFormReady=this.loadSubForm().then(e=>{if(e)return o.eachComponent(e.components,e=>{"button"!==e.type||"submit"!==e.action&&e.action||(e.hidden=!0)}),this.subForm&&this.subForm.destroy(),new r(e,this.getSubOptions()).ready.then(e=>(this.subForm=e,this.subForm.currentForm=this,this.subForm.parent=this,this.subForm.parentVisible=this.visible,this.subForm.on("change",()=>{this.subForm&&(this.dataValue=this.subForm.getValue(),this.triggerChange({noEmit:!0}))}),this.subForm.url=this.formSrc,this.subForm.nosubmit=!0,this.subForm.root=this.root,this.restoreValue(),this.subForm))}),this.subFormReady}loadSubForm(){return this.builderMode||this.isHidden()?i.resolve():this.formObj&&this.formObj.components&&Array.isArray(this.formObj.components)&&this.formObj.components.length?(this.root&&this.root.form&&this.root.form.config&&!this.formObj.config&&(this.formObj.config=this.root.form.config),i.resolve(this.formObj)):this.formSrc?new s(this.formSrc).loadForm({params:{live:1}}).then(e=>(this.formObj=e,e)):i.resolve()}checkComponentValidity(e,t,n){return this.subForm?this.subForm.checkValidity(this.dataValue.data,t):super.checkComponentValidity(e,t,n)}checkComponentConditions(e,t,n){const i=super.checkComponentConditions(e,t,n);return i&&this.subForm&&this.subForm.hasCondition()?this.subForm.checkConditions(this.dataValue.data):i}calculateValue(e,t,n){return this.subForm?this.subForm.calculateValue(this.dataValue.data,t):super.calculateValue(e,t,n)}setPristine(e){super.setPristine(e),this.subForm&&this.subForm.setPristine(e)}get shouldSubmit(){return this.subFormReady&&(!this.component.hasOwnProperty("reference")||this.component.reference)&&!this.isHidden()}getSubFormData(){return"pdf"===e.get(this.subForm,"form.display")?this.subForm.getSubmission():i.resolve(this.dataValue)}submitSubForm(e){if(this.shouldSubmit){const t=this.subFormReady||this.createSubForm();return t.then(()=>this.subForm?(this.subForm.nosubmit=!1,this.subForm.submitForm().then(e=>(this.subForm.loading=!1,this.dataValue=e.submission,this.dataValue)).catch(t=>e?(this.subForm.onSubmissionError(t),i.reject(t)):{})):this.dataValue)}return this.getSubFormData()}beforePage(e){return this.submitSubForm(!0).then(()=>super.beforePage(e))}beforeSubmit(){const e=this.dataValue;return e&&e._id&&e.form?(this.dataValue=e,i.resolve(this.dataValue)):this.submitSubForm(!1).then(()=>this.dataValue).then(()=>super.beforeSubmit())}isHidden(){return!this.visible||!super.checkConditions(this.rootValue)}setValue(t,n={}){const i=super.setValue(t,n);if(this.subForm)if(t&&t._id&&this.subForm.formio&&e.isEmpty(t.data)){const e=`${this.subForm.formio.formsUrl}/${t.form}/submission/${t._id}`;this.subForm.setUrl(e,this.options),this.subForm.loadSubmission()}else this.subForm.setValue(t,n);return i}getValue(){return this.subForm?this.subForm.getValue():this.dataValue}get errors(){let e=super.errors;return this.subForm&&(e=e.concat(this.subForm.errors)),e}updateSubFormVisibility(){this.subForm&&(this.subForm.parentVisible=this.visible)}get visible(){return super.visible}set visible(e){super.visible=e,this.updateSubFormVisibility()}get parentVisible(){return super.parentVisible}set parentVisible(e){super.parentVisible=e,this.updateSubFormVisibility()}isInternalEvent(e){switch(e){case"focus":case"blur":case"componentChange":case"componentError":case"error":case"formLoad":case"languageChanged":case"render":case"checkValidity":case"initialized":case"submit":case"submitButton":case"nosubmit":case"updateComponent":case"submitDone":case"submissionDeleted":case"requestDone":case"nextPage":case"prevPage":case"wizardNavigationClicked":case"updateWizardNav":case"restoreDraft":case"saveDraft":case"saveComponent":case"pdfUploaded":return!0;default:return!1}}createEmitter(){const e=new n({wildcard:!1,maxListeners:0}),t=e.emit,i=this;return e.emit=function(e,...n){const o=e.replace(`${i.options.namespace}.`,"");t.call(this,e,...n),i.isInternalEvent(o)||i.emit(o,...n)},e}deleteValue(){super.setValue(null,{noUpdateEvent:!0,noDefault:!0}),this.unset()}}}),e("skylark-formio/components/hidden/Hidden",["../_classes/input/Input"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"hidden",tableView:!1,inputType:"hidden"},...t)}static get builderInfo(){return{title:"Hidden",group:"data",icon:"user-secret",weight:0,documentation:"http://help.form.io/userguide/#hidden",schema:t.schema()}}get defaultSchema(){return t.schema()}get inputInfo(){const e=super.elementInfo();return e.type="input",e.attr.type="hidden",e.changeEvent="change",e}validateMultiple(){return!1}labelIsHidden(){return!0}get emptyValue(){return""}setValue(e,t={}){return this.updateValue(e,t)}getValue(){return this.dataValue}}}),e("skylark-formio/components/html/HTML",["../_classes/component/Component","skylark-lodash"],function(e,t){"use strict";return class n extends e{static schema(...t){return e.schema({label:"HTML",type:"htmlelement",tag:"p",attrs:[],content:"",input:!1,persistent:!1},...t)}static get builderInfo(){return{title:"HTML Element",group:"layout",icon:"code",weight:0,documentation:"http://help.form.io/userguide/#html-element-component",schema:n.schema()}}get defaultSchema(){return n.schema()}get content(){if(this.builderMode)return this.component.content;const e=t.get(this.root,"submission",{});return this.component.content?this.interpolate(this.component.content,{metadata:e.metadata||{},submission:e,data:this.rootValue,row:this.data}):""}get singleTags(){return["br","img","hr"]}checkRefreshOn(e){super.checkRefreshOn(e),!this.builderMode&&this.component.refreshOnChange&&this.element&&this.conditionallyVisible(this.data,this.row)&&this.setContent(this.element,this.renderContent())}renderContent(){const e=t.get(this.root,"submission",{});return this.renderTemplate("html",{component:this.component,tag:this.component.tag,attrs:(this.component.attrs||[]).map(t=>({attr:t.attr,value:this.interpolate(t.value,{metadata:e.metadata||{},submission:e,data:this.rootValue,row:this.data})})),content:this.content,singleTags:this.singleTags})}render(){return super.render(this.renderContent())}attach(e){return this.loadRefs(e,{html:"single"}),super.attach(e)}}}),e("skylark-formio/components/panel/Panel",["../_classes/nested/NestedComponent"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({label:"Panel",type:"panel",key:"panel",title:"Panel",theme:"default",breadcrumb:"default",components:[],clearOnHide:!1,input:!1,tableView:!1,persistent:!1},...t)}static get builderInfo(){return{title:"Panel",icon:"list-alt",group:"layout",documentation:"http://help.form.io/userguide/#panels",weight:30,schema:t.schema()}}get defaultSchema(){return t.schema()}checkValidity(e,t,n){return this.checkCondition(n,e)?this.getComponents().reduce((i,o)=>(!o.checkValidity(e,t,n)&&this.collapsed&&(this.collapsed=!1),o.checkValidity(e,t,n)&&i),super.checkValidity(e,t,n)):(this.setCustomValidity(""),!0)}get templateName(){return"panel"}constructor(...e){super(...e),this.noField=!0}}}),e("skylark-formio/components/password/Password",["../textfield/TextField","skylark-lodash"],function(e,t){"use strict";return class n extends e{static schema(...t){return e.schema({type:"password",label:"Password",key:"password",protected:!0,tableView:!1},...t)}static get builderInfo(){return{title:"Password",icon:"asterisk",group:"basic",documentation:"http://help.form.io/userguide/#password",weight:40,schema:n.schema()}}get defaultSchema(){return t.omit(n.schema(),["protected","tableView"])}get inputInfo(){const e=super.inputInfo;return e.attr.type="password",e}}}),e("skylark-formio/components/phonenumber/PhoneNumber",["../textfield/TextField"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"phoneNumber",label:"Phone Number",key:"phoneNumber",inputType:"tel",inputMask:"(999) 999-9999"},...t)}static get builderInfo(){return{title:"Phone Number",group:"advanced",icon:"phone-square",weight:30,documentation:"http://help.form.io/userguide/#phonenumber",schema:t.schema()}}get defaultSchema(){return t.schema()}}}),e("skylark-formio/components/radio/Radio",["skylark-lodash","../_classes/field/Field"],function(e,t){"use strict";return class n extends t{static schema(...e){return t.schema({type:"radio",inputType:"radio",label:"Radio",key:"radio",values:[{label:"",value:""}],fieldSet:!1},...e)}static get builderInfo(){return{title:"Radio",group:"basic",icon:"dot-circle-o",weight:80,documentation:"http://help.form.io/userguide/#radio",schema:n.schema()}}constructor(e,t,n){super(e,t,n),this.previousValue=this.dataValue||null}get defaultSchema(){return n.schema()}get inputInfo(){const e=super.elementInfo();return e.type="input",e.changeEvent="click",e.attr.class="form-check-input",e.attr.name=e.attr.name+=`[${this.id}]`,e}get emptyValue(){return""}get isRadio(){return"radio"===this.component.inputType}render(){return super.render(this.renderTemplate("radio",{input:this.inputInfo,inline:this.component.inline,values:this.component.values,value:this.dataValue,row:this.row}))}attach(e){return this.loadRefs(e,{input:"multiple",wrapper:"multiple"}),this.refs.input.forEach((e,t)=>{this.addEventListener(e,this.inputInfo.changeEvent,()=>this.updateValue(null,{modified:!0})),this.addShortcut(e,this.component.values[t].shortcut),this.isRadio&&(e.checked=this.dataValue===e.value,this.addEventListener(e,"keyup",t=>{" "===t.key&&this.dataValue===e.value&&(t.preventDefault(),this.updateValue(null,{modified:!0}))}))}),super.attach(e)}detach(e){e&&this.refs.input&&this.refs.input.forEach((e,t)=>{this.removeShortcut(e,this.component.values[t].shortcut)})}getValue(){if(this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;let e=this.dataValue;return this.refs.input.forEach(t=>{t.checked&&(e=t.value)}),e}getValueAsString(t){if(!t)return"";if(!e.isString(t))return e.toString(t);const n=e.find(this.component.values,e=>e.value===t);return e.get(n,"label","")}setValueAt(e,t){if(this.refs.input&&this.refs.input[e]&&null!==t&&void 0!==t){const n=this.refs.input[e].value;this.refs.input[e].checked=n===t.toString()}}updateValue(e,t){const n=super.updateValue(e,t);if(n&&this.refs.wrapper){const e=this.dataValue,t="radio-selected";this.refs.wrapper.forEach((n,i)=>{const o=this.refs.input[i];o&&o.value.toString()===e.toString()?this.addClass(n,t):this.removeClass(n,t)})}if(!t||!t.modified||!this.isRadio)return n;this.currentValue=this.dataValue;const i=!(t&&t.noUpdateEvent)&&this.previousValue===this.currentValue;return i&&(this.resetValue(),this.triggerChange()),this.previousValue=this.dataValue,n}normalizeValue(e){const t=this.component.dataType||"auto";switch(t){case"auto":!isNaN(parseFloat(e))&&isFinite(e)&&(e=+e),"true"===e&&(e=!0),"false"===e&&(e=!1);break;case"number":e=+e;break;case"string":e="object"==typeof e?JSON.stringify(e):e.toString();break;case"boolean":e=!(!e||"false"===e.toString())}return super.normalizeValue(e)}}}),e("skylark-formio/components/recaptcha/ReCaptcha",["../_classes/component/Component","../../Formio","skylark-lodash","../../vendors/getify/npo"],function(e,t,n,i){"use strict";var o=n.get;return class n extends e{static schema(...t){return e.schema({type:"recaptcha",key:"recaptcha",label:"reCAPTCHA"},...t)}static get builderInfo(){return{title:"reCAPTCHA",group:"premium",icon:"refresh",documentation:"http://help.form.io/userguide/#recaptcha",weight:40,schema:n.schema()}}render(){return this.builderMode?super.render("reCAPTCHA"):super.render("",!0)}createInput(){if(this.builderMode)this.append(this.text(this.name));else{const e=o(this.root.form,"settings.recaptcha.siteKey");if(e){const n=`https://www.google.com/recaptcha/api.js?render=${e}`;this.recaptchaApiReady=t.requireLibrary("googleRecaptcha","grecaptcha",n,!0)}else console.warn("There is no Site Key specified in settings in form JSON")}}createLabel(){}verify(e){const n=o(this.root.form,"settings.recaptcha.siteKey");if(n){if(!this.recaptchaApiReady){const e=`https://www.google.com/recaptcha/api.js?render=${o(this.root.form,"settings.recaptcha.siteKey")}`;this.recaptchaApiReady=t.requireLibrary("googleRecaptcha","grecaptcha",e,!0)}this.recaptchaApiReady&&(this.recaptchaVerifiedPromise=new i((t,i)=>{this.recaptchaApiReady.then(()=>{grecaptcha.ready(()=>{grecaptcha.execute(n,{action:e}).then(e=>this.sendVerificationRequest(e)).then(e=>(this.setValue(e),t(e)))})}).catch(()=>i())}))}else console.warn("There is no Site Key specified in settings in form JSON")}beforeSubmit(){return this.recaptchaVerifiedPromise?this.recaptchaVerifiedPromise.then(()=>super.beforeSubmit()):super.beforeSubmit()}sendVerificationRequest(e){return t.makeStaticRequest(`${t.projectUrl}/recaptcha?recaptchaToken=${e}`)}setValue(e){const t=this.hasChanged(e,this.dataValue);return this.dataValue=e,t}getValue(){return this.dataValue}}}),e("skylark-formio/components/select/Select",["skylark-lodash","../../Formio","../_classes/field/Field","../../Form","../../vendors/getify/npo"],function(e,t,n,i,o){"use strict";return class s extends n{static schema(...e){return n.schema({type:"select",label:"Select",key:"select",data:{values:[],json:"",url:"",resource:"",custom:""},clearOnRefresh:!1,limit:100,dataSrc:"values",valueProperty:"",lazyLoad:!0,filter:"",searchEnabled:!0,searchField:"",minSearch:0,readOnlyValue:!1,authenticate:!1,template:"<span>{{ item.label }}</span>",selectFields:"",searchThreshold:.3,tableView:!0,fuseOptions:{include:"score",threshold:.3},customOptions:{}},...e)}static get builderInfo(){return{title:"Select",group:"basic",icon:"th-list",weight:70,documentation:"http://help.form.io/userguide/#select",schema:s.schema()}}init(){super.init(),this.validators=this.validators.concat(["select"]);let t=[];const n=e.debounce((...e)=>(t=[],this.updateItems.apply(this,e)),100);this.triggerUpdate=((...e)=>(e.length&&(t=e),n(...t))),this.selectOptions=[],this.isInfiniteScrollProvided&&(this.isFromSearch=!1,this.searchServerCount=null,this.defaultServerCount=null,this.isScrollLoading=!1,this.searchDownloadedResources=[],this.defaultDownloadedResources=[]),this.activated=!1,this.itemsLoaded=new o(e=>{this.itemsLoadedResolve=e})}get dataReady(){return this.itemsLoaded}get defaultSchema(){return s.schema()}get emptyValue(){return this.valueProperty?"":{}}get valueProperty(){return this.component.valueProperty?this.component.valueProperty:"values"===this.component.dataSrc?"value":""}get inputInfo(){const e=super.elementInfo();return e.type="select",e.changeEvent="change",e}get isSelectResource(){return"resource"===this.component.dataSrc}get isSelectURL(){return"url"===this.component.dataSrc}get isInfiniteScrollProvided(){return this.isSelectResource||this.isSelectURL}get shouldDisabled(){return super.shouldDisabled||this.parentDisabled}itemTemplate(e){if(!e)return"";if(this.options.readOnly&&this.component.readOnlyValue)return this.itemValue(e);if(e&&!this.component.template){const t=e.label||e;return"string"==typeof t?this.t(t):t}if("string"==typeof e)return this.t(e);const t=this.component.template?this.interpolate(this.component.template,{item:e}):e.label;if(t){const e=t.replace(/<\/?[^>]+(>|$)/g,"");return t.replace(e,this.t(e))}return JSON.stringify(e)}addOption(t,n,i={},o){const s={value:e.isObject(t)?t:e.isNull(t)?this.emptyValue:String(this.normalizeSingleValue(t)),label:n};if(t&&this.selectOptions.push(s),this.refs.selectContainer&&"html5"===this.component.widget){const n=document.createElement("div");n.innerHTML=this.sanitize(this.renderTemplate("selectOption",{selected:e.isEqual(this.dataValue,s.value),option:s,attrs:i,id:o,useId:""===this.valueProperty&&e.isObject(t)&&o})).trim(),s.element=n.firstChild,this.refs.selectContainer.appendChild(s.element)}}addValueOptions(e){if(e=e||[],!this.selectOptions.length){if(this.choices){const t=Array.isArray(this.dataValue)?this.dataValue:[this.dataValue];return this.addCurrentChoices(t,e)}this.component.multiple||this.addPlaceholder()}return!1}disableInfiniteScroll(){this.downloadedResources&&(this.downloadedResources.serverCount=this.downloadedResources.length,this.serverCount=this.downloadedResources.length)}setItems(t,n){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){console.warn(e.message),t=[]}if(this.component.onSetItems&&"function"==typeof this.component.onSetItems){const e=this.component.onSetItems(this,t);e&&(t=e)}let i;if(!this.choices&&this.refs.selectContainer&&(this.loading,this.empty(this.refs.selectContainer)),this.component.selectValues&&(t=e.get(t,this.component.selectValues,t)||[]),this.isInfiniteScrollProvided){i=!!this.isSelectURL&&e.isEqual(t,this.downloadedResources);const n=this.component.limit>t.length,o=i&&this.downloadedResources&&this.downloadedResources.length===t.length;n?this.disableInfiniteScroll():o?this.selectOptions=[]:this.serverCount=t.serverCount}if(this.isScrollLoading&&t?(i||(this.downloadedResources=this.downloadedResources?this.downloadedResources.concat(t):t),this.downloadedResources.serverCount=t.serverCount||this.downloadedResources.serverCount):(this.downloadedResources=t||[],this.selectOptions=[]),n||this.addValueOptions(t),"html5"!==this.component.widget||this.component.placeholder||this.addOption(null,""),e.each(t,(e,t)=>{this.addOption(this.itemValue(e),this.itemTemplate(e),{},String(t))}),this.choices?this.choices.setChoices(this.selectOptions,"value","label",!0):this.loading,this.isScrollLoading=!1,this.loading=!1,this.dataValue)this.setValue(this.dataValue,{noUpdateEvent:!0});else{const e=this.multiple?this.defaultValue||[]:this.defaultValue;e&&this.setValue(e)}this.itemsLoadedResolve()}loadItems(n,i,o,s,r,a){s=s||{};const l=parseInt(this.component.minSearch,10);if(this.component.searchField&&l>0&&(!i||i.length<l))return this.setItems([]);"GET"===(r=r||"GET").toUpperCase()&&(a=null);const c=this.component.limit||100,d=this.isScrollLoading?this.selectOptions.length:0,u="url"===this.component.dataSrc?{}:{limit:c,skip:d};n=this.interpolate(n,{formioBase:t.getBaseUrl(),search:i,limit:c,skip:d,page:Math.abs(Math.floor(d/c))}),this.component.searchField&&i&&(Array.isArray(i)?u[`${this.component.searchField}`]=i.join(","):u[`${this.component.searchField}`]=i),this.component.selectFields&&(u.select=this.component.selectFields),this.component.sort&&(u.sort=this.component.sort),e.isEmpty(u)||(n+=(n.includes("?")?"&":"?")+t.serialize(u,e=>this.interpolate(e))),this.component.filter&&(n+=(n.includes("?")?"&":"?")+this.interpolate(this.component.filter)),s.header=o,this.loading=!0,t.makeRequest(this.options.formio,"select",n,r,a,s).then(e=>{this.loading=!1,this.setItems(e,!!i)}).catch(e=>{this.isInfiniteScrollProvided&&(this.setItems([]),this.disableInfiniteScroll()),this.isScrollLoading=!1,this.loading=!1,this.itemsLoadedResolve(),this.emit("componentError",{component:this.component,message:e.toString()}),console.warn(`Unable to load resources for ${this.key}`)})}get requestHeaders(){const n=new t.Headers;if(this.component.data&&this.component.data.headers)try{e.each(this.component.data.headers,e=>{e.key&&n.set(e.key,this.interpolate(e.value))})}catch(e){console.warn(e.message)}return n}getCustomItems(){return this.evaluate(this.component.data.custom,{values:[]},"values")}updateCustomItems(){this.setItems(this.getCustomItems()||[])}refresh(){this.component.clearOnRefresh&&this.setValue(this.emptyValue),this.component.lazyLoad&&(this.activated=!1,this.loading=!0,this.setItems([])),this.updateItems(null,!0)}get additionalResourcesAvailable(){return e.isNil(this.serverCount)||this.serverCount>this.downloadedResources.length}get serverCount(){return this.isFromSearch?this.searchServerCount:this.defaultServerCount}set serverCount(e){this.isFromSearch?this.searchServerCount=e:this.defaultServerCount=e}get downloadedResources(){return this.isFromSearch?this.searchDownloadedResources:this.defaultDownloadedResources}set downloadedResources(e){this.isFromSearch?this.searchDownloadedResources=e:this.defaultDownloadedResources=e}updateItems(n,i){if(!this.component.data)return console.warn(`Select component ${this.key} does not have data configuration.`),void this.itemsLoadedResolve();if(this.checkConditions())switch(this.component.dataSrc){case"values":this.setItems(this.component.data.values);break;case"json":this.setItems(this.component.data.json);break;case"custom":this.updateCustomItems();break;case"resource":{if(!this.component.data.resource||!i&&!this.active)return;let e=this.options.formio?this.options.formio.formsUrl:`${t.getProjectUrl()}/form`;if(e+=`/${this.component.data.resource}/submission`,i||this.additionalResourcesAvailable)try{this.loadItems(e,n,this.requestHeaders)}catch(e){console.warn(`Unable to load resources for ${this.key}`)}else this.setItems(this.downloadedResources);break}case"url":{if(!i&&!this.active)return;let e,o,{url:s}=this.component.data;if(s.startsWith("/")){const e=s.startsWith("/project")?t.getBaseUrl():t.getProjectUrl()||t.getBaseUrl();s=e+s}this.component.data.method?(e=this.component.data.method,o="POST"===e.toUpperCase()?this.component.data.body:null):e="GET";const r=this.component.authenticate?{}:{noToken:!0};this.loadItems(s,n,this.requestHeaders,r,e,o);break}case"indexeddb":if(window.indexedDB||window.alert("Your browser doesn't support current version of indexedDB"),this.component.indexeddb&&this.component.indexeddb.database&&this.component.indexeddb.table){const t=window.indexedDB.open(this.component.indexeddb.database);t.onupgradeneeded=(e=>{if(this.component.customOptions){const t=e.target.result,n=t.createObjectStore(this.component.indexeddb.table,{keyPath:"myKey",autoIncrement:!0});n.transaction.oncomplete=(()=>{const e=t.transaction(this.component.indexeddb.table,"readwrite");this.component.customOptions.forEach(t=>{e.objectStore(this.component.indexeddb.table).put(t)})})}}),t.onerror=(()=>{window.alert(t.errorCode)}),t.onsuccess=(t=>{const n=t.target.result,i=n.transaction(this.component.indexeddb.table,"readwrite"),s=i.objectStore(this.component.indexeddb.table);new o(e=>{const t=[];s.getAll().onsuccess=(n=>{n.target.result.forEach(e=>{t.push(e)}),e(t)})}).then(t=>{e.isEmpty(this.component.indexeddb.filter)||(t=e.filter(t,this.component.indexeddb.filter)),this.setItems(t)})})}}else this.itemsLoadedResolve()}addPlaceholder(){this.component.placeholder&&this.addOption("",this.component.placeholder,{placeholder:!0})}activate(){this.active||(this.activated=!0,this.choices?this.choices.setChoices([{value:"",label:`<i class="${this.iconClass("refresh")}" style="font-size:1.3em;"></i>`,disabled:!0}],"value","label",!0):"url"!==this.component.dataSrc&&"resource"!==this.component.dataSrc||this.addOption("",this.t("loading...")),this.triggerUpdate())}get active(){return!this.component.lazyLoad||this.activated||this.options.readOnly}render(){const e=this.inputInfo;return e.attr=e.attr||{},e.multiple=this.component.multiple,super.render(this.wrapElement(this.renderTemplate("select",{input:e,selectOptions:"",index:null})))}wrapElement(e){return this.component.addResource?this.renderTemplate("resourceAdd",{element:e}):e}choicesOptions(){const t=!this.component.hasOwnProperty("searchEnabled")||this.component.searchEnabled,n=this.t(this.component.placeholder);let i=this.component.customOptions||{};if("string"==typeof i)try{i=JSON.parse(i)}catch(e){console.warn(e.message),i={}}return{removeItemButton:!this.component.disabled&&e.get(this.component,"removeItemButton",!0),itemSelectText:"",classNames:{containerOuter:"choices form-group formio-choices",containerInner:this.transform("class","form-control ui fluid selection dropdown")},addItemText:!1,placeholder:!!this.component.placeholder,placeholderValue:n,noResultsText:this.t("No results found"),noChoicesText:this.t("No choices to choose from"),searchPlaceholderValue:this.t("Type to search"),shouldSort:!1,position:this.component.dropdown||"auto",searchEnabled:t,searchChoices:!this.component.searchField,searchFields:e.get(this,"component.searchFields",["label"]),fuseOptions:Object.assign({},e.get(this,"component.fuseOptions",{}),{include:"score",threshold:e.get(this,"component.searchThreshold",.3)}),valueComparer:e.isEqual,resetScrollPosition:!1,...i}}attach(n){const o=super.attach(n);this.loadRefs(n,{selectContainer:"single",addResource:"single",autocompleteInput:"single"});const s=this.refs.autocompleteInput;s&&this.addEventListener(s,"change",e=>{this.setValue(e.target.value)});const r=this.refs.selectContainer;if(!r)return;if(this.addEventListener(r,this.inputInfo.changeEvent,()=>this.updateValue(null,{modified:!0})),"html5"===this.component.widget)return this.triggerUpdate(),this.focusableElement=r,this.addEventListener(r,"focus",()=>this.update()),void this.addEventListener(r,"keydown",e=>{const{key:t}=e;["Backspace","Delete"].includes(t)&&this.setValue(this.emptyValue)});const a=r.tabIndex;this.addPlaceholder(),r.setAttribute("dir",this.i18next.dir()),this.choices&&this.choices.destroy();const l=this.choicesOptions();return this.choices=new Choices(r,l),this.addEventListener(r,"hideDropdown",()=>{this.choices.input.element.value="",this.updateItems(null,!0)}),this.selectOptions&&this.selectOptions.length&&this.choices.setChoices(this.selectOptions,"value","label",!0),this.component.multiple?this.focusableElement=this.choices.input.element:(this.focusableElement=this.choices.containerInner.element,this.choices.containerOuter.element.setAttribute("tabIndex","-1"),l.searchEnabled&&this.addEventListener(this.choices.containerOuter.element,"focus",()=>this.focusableElement.focus())),this.isInfiniteScrollProvided&&(this.scrollList=this.choices.choiceList.element,this.onScroll=(()=>{const e=!this.isScrollLoading&&this.additionalResourcesAvailable&&this.scrollList.scrollTop+this.scrollList.clientHeight>=this.scrollList.scrollHeight;e&&(this.isScrollLoading=!0,this.choices.setChoices([{value:`${this.id}-loading`,label:"Loading...",disabled:!0}],"value","label"),this.triggerUpdate(this.choices.input.element.value))}),this.addEventListener(this.scrollList,"scroll",this.onScroll)),this.focusableElement.setAttribute("tabIndex",a),this.component.searchField&&(this.choices&&this.choices.input&&this.choices.input.element&&this.addEventListener(this.choices.input.element,"input",e=>{this.isFromSearch=!!e.target.value,e.target.value?(this.serverCount=null,this.downloadedResources=[]):this.triggerUpdate()}),this.addEventListener(r,"search",e=>this.triggerUpdate(e.detail.value)),this.addEventListener(r,"stopSearch",()=>this.triggerUpdate())),this.addEventListener(r,"showDropdown",()=>{this.dataValue&&this.triggerUpdate(),this.update()}),l.placeholderValue&&this.choices._isSelectOneElement&&(this.addPlaceholderItem(l.placeholderValue),this.addEventListener(r,"removeItem",()=>{this.addPlaceholderItem(l.placeholderValue)})),this.addValueOptions(),this.setChoicesValue(this.dataValue),this.isSelectResource&&this.refs.addResource&&this.addEventListener(this.refs.addResource,"click",n=>{n.preventDefault();const o=this.ce("div"),s=this.createModal(o),r=e.get(this.root,"formio.projectUrl",t.getBaseUrl()),a=`${r}/form/${this.component.data.resource}`;new i(o,a,{}).ready.then(e=>{e.on("submit",e=>{this.component.multiple&&(e=[...this.dataValue,e]),this.setValue(e),s.close()})})}),this.disabled=this.shouldDisabled,this.triggerUpdate(),o}addPlaceholderItem(e){const t=this.choices._store.activeItems;t.length||this.choices._addItem({value:e,label:e,choiceId:0,groupId:-1,customProperties:null,placeholder:!0,keyCode:null})}update(){"custom"===this.component.dataSrc&&this.updateCustomItems(),this.activate()}set disabled(e){super.disabled=e,this.choices&&(e?(this.setDisabled(this.choices.containerInner.element,!0),this.focusableElement.removeAttribute("tabIndex"),this.choices.disable()):(this.setDisabled(this.choices.containerInner.element,!1),this.focusableElement.setAttribute("tabIndex",this.component.tabindex||0),this.choices.enable()))}get disabled(){return super.disabled}set visible(e){e&&!this._visible!=!e&&this.triggerUpdate(),super.visible=e}get visible(){return super.visible}addCurrentChoices(t,n,i){if(!t)return!1;const o=[],s=t.reduce((t,s)=>{if(!s||e.isEmpty(s))return t;let r=!1;const a=n===this.selectOptions;return n&&n.length&&e.each(n,t=>{if(t._id&&s._id&&t._id===s._id)return r=!0,!1;const n=i?t.value:this.itemValue(t,a);return!(r|=e.isEqual(n,s))}),r?r||t:(o.push({value:this.itemValue(s),label:this.itemTemplate(s)}),!0)},!1);return o.length&&(this.choices?this.choices.setChoices(o,"value","label",!0):o.map(e=>{this.addOption(e.value,e.label)})),s}getValueAsString(e){return this.component.multiple&&Array.isArray(e)?e.map(this.asString.bind(this)).join(", "):this.asString(e)}getValue(){if(this.viewOnly||this.loading||!this.component.lazyLoad&&!this.selectOptions.length||!this.element)return this.dataValue;let t=this.emptyValue;if(this.choices)t=this.choices.getValue(!0),!this.component.multiple&&this.component.placeholder&&t===this.t(this.component.placeholder)&&(t=this.emptyValue);else if(this.refs.selectContainer){if(t=this.refs.selectContainer.value,""===this.valueProperty){if(""===t)return{};const n=this.selectOptions[t];n&&e.isObject(n.value)&&(t=n.value)}}else t=this.dataValue;return void 0!==t&&null!==t||(t=""),t}redraw(){const e=super.redraw();return this.triggerUpdate(),e}normalizeSingleValue(t){if(!t)return;const n=this.component.dataType||"auto",i="string"==typeof t?t.toLowerCase():t,o={value:i,toNumber(){try{const e=parseFloat(this.value);return!Number.isNaN(e)&&isFinite(e)?(this.value=e,this):this}catch(e){return this}},toBoolean(){try{const e="true"===this.value||"false"===this.value;return e?(this.value="true"===this.value,this):this}catch(e){return this}},toString(){try{const e="object"==typeof this.value?JSON.stringify(this.value):this.value.toString();return e?(this.value=e,this):this}catch(e){return this}},auto(){try{const t=this.toString().toNumber().toBoolean();return t&&!e.isObject(t)&&(this.value=t),this}catch(e){return this}}};switch(n){case"auto":return o.auto().value;case"number":return o.toNumber().value;case"string":return o.toString().value;case"boolean":return o.toBoolean().value}}normalizeValue(e){return this.component.multiple&&Array.isArray(e)?e.map(e=>this.normalizeSingleValue(e)):super.normalizeValue(this.normalizeSingleValue(e))}setValue(t,n={}){const i=this.dataValue,o=this.updateValue(t,n);t=this.dataValue;const s=Array.isArray(i)?i.length:i,r=Array.isArray(t)?t.length:t;if(this.component.multiple&&Array.isArray(t)?t=t.map(e=>"boolean"==typeof e||"number"==typeof e?e.toString():e):"boolean"!=typeof t&&"number"!=typeof t||(t=t.toString()),this.loading)return o;if(this.isInitApiCallNeeded(r)){this.loading=!0,this.lazyLoadInit=!0;const n=this.component.searchField||this.component.valueProperty;return this.triggerUpdate(e.get(t.data||t,n,t),!0),o}return this.addValueOptions(),this.setChoicesValue(t,s),o}isInitApiCallNeeded(e){return this.component.lazyLoad&&!this.lazyLoadInit&&!this.active&&!this.selectOptions.length&&e&&this.visible&&(this.component.searchField||this.component.valueProperty)}setChoicesValue(t,n){const i=Array.isArray(t)?t.length:t;if(n=void 0===n||n,this.choices)if(i){this.choices.removeActiveItems();const e=Array.isArray(t)?t:[t];this.addCurrentChoices(e,this.selectOptions,!0)||this.choices.setChoices(this.selectOptions,"value","label",!0),this.choices.setChoiceByValue(t)}else n&&this.choices.removeActiveItems();else if(i){const n=Array.isArray(t)?t:[t];e.each(this.selectOptions,t=>{e.each(n,n=>{if(e.isEqual(n,t.value)&&t.element)return t.element.selected=!0,t.element.setAttribute("selected","selected"),!1})})}else e.each(this.selectOptions,e=>{e.element&&(e.element.selected=!1,e.element.removeAttribute("selected"))})}deleteValue(){this.setValue("",{noUpdateEvent:!0}),this.unset()}validateMultiple(){return!1}isBooleanOrNumber(e){return"number"==typeof e||"boolean"==typeof e}asString(t){if(t=t||this.getValue(),this.isBooleanOrNumber(t)&&(t=t.toString()),Array.isArray(t)&&t.some(e=>this.isBooleanOrNumber(e))&&(t=t.map(e=>{this.isBooleanOrNumber(e)&&(e=e.toString())})),["values","custom"].includes(this.component.dataSrc)){const{items:n,valueProperty:i}="values"===this.component.dataSrc?{items:this.component.data.values,valueProperty:"value"}:{items:this.getCustomItems(),valueProperty:this.valueProperty};t=this.component.multiple&&Array.isArray(t)?e.filter(n,e=>t.includes(e.value)):i?e.find(n,[i,t]):t}if(e.isString(t))return t;if(Array.isArray(t)){const e=[];return t.forEach(t=>e.push(this.itemTemplate(t))),e.length>0?e.join("<br />"):"-"}return e.isNil(t)?"-":this.itemTemplate(t)}detach(){super.detach(),this.choices&&(this.choices.destroy(),this.choices=null)}focus(){this.focusableElement&&this.focusableElement.focus()}setErrorClasses(e,t,n){super.setErrorClasses(e,t,n),this.choices?super.setErrorClasses([this.choices.containerInner.element],t,n):super.setErrorClasses([this.refs.selectContainer],t,n)}}}),e("skylark-formio/components/resource/Resource",["../select/Select"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"resource",label:"Resource",key:"resource",dataSrc:"resource",resource:"",project:"",template:"<span>{{ item.data }}</span>"},...t)}static get builderInfo(){return{title:"Resource",group:"premium",icon:"files-o",weight:90,documentation:"http://help.form.io/userguide/#resource",schema:t.schema()}}init(){super.init(),this.component.dataSrc="resource",this.component.data={resource:this.component.resource}}get defaultSchema(){return t.schema()}}}),e("skylark-formio/components/selectboxes/SelectBoxes",["skylark-lodash","../radio/Radio"],function(e,t){"use strict";return class n extends t{static schema(...e){return t.schema({type:"selectboxes",label:"Select Boxes",key:"selectBoxes",inline:!1},...e)}static get builderInfo(){return{title:"Select Boxes",group:"basic",icon:"plus-square",weight:60,documentation:"http://help.form.io/userguide/#selectboxes",schema:n.schema()}}constructor(...e){super(...e),this.validators=this.validators.concat("minSelectedCount","maxSelectedCount")}init(){super.init(),this.component.inputType="checkbox"}get defaultSchema(){return n.schema()}get inputInfo(){const e=super.elementInfo();return e.attr.name+="[]",e.attr.type="checkbox",e.attr.class="form-check-input",e}get emptyValue(){return this.component.values.reduce((e,t)=>(e[t.value]=!1,e),{})}isEmpty(e=this.dataValue){let t=!0;for(const n in e)if(e.hasOwnProperty(n)&&e[n]){t=!1;break}return t}getValue(){if(this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;const t={};return e.each(this.refs.input,e=>{t[e.value]=!!e.checked}),t}normalizeValue(t){return"object"!=typeof(t=t||{})&&(t="string"==typeof t?{[t]:!0}:{}),Array.isArray(t)&&e.each(t,e=>{t[e]=!0}),t}setValue(t,n={}){const i=this.updateValue(t,n);return t=this.dataValue,e.each(this.refs.input,n=>{e.isUndefined(t[n.value])&&(t[n.value]=!1),n.checked=!!t[n.value]}),i}getValueAsString(t){return t?e(this.component.values||[]).filter(e=>t[e.value]).map("label").join(", "):""}checkComponentValidity(e,t,n){const i=this.component.validate.minSelectedCount,o=this.component.validate.maxSelectedCount;if((o||i)&&!this.isValid(e,t)){const e=Object.keys(this.validationValue).reduce((e,t)=>(this.validationValue[t]&&e++,e),0);if(o&&e>=o){if(this.refs.input&&this.refs.input.forEach(e=>{e.checked||(e.disabled=!0)}),o&&e>o){const e=this.component.maxSelectedCountMessage?this.component.maxSelectedCountMessage:`You can only select up to ${o} items.`;return this.setCustomValidity(e,t),!1}}else{if(i&&e<i){this.refs.input&&this.refs.input.forEach(e=>{e.disabled=!1});const e=this.component.minSelectedCountMessage?this.component.minSelectedCountMessage:`You must select at least ${i} items.`;return this.setCustomValidity(e,t),!1}this.refs.input&&this.refs.input.forEach(e=>{e.disabled=!1})}}return super.checkComponentValidity(e,t,n)}}}),e("skylark-formio/vendors/signature_pad/Point",[],function(){function e(e,t,n){this.x=e,this.y=t,this.time=n||(new Date).getTime()}return e.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},e.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},e}),e("skylark-formio/vendors/signature_pad/bezier",[],function(){function e(e,t,n,i){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=i}return e.prototype.length=function(){let e,t,n=0;for(let i=0;i<=10;i+=1){const o=i/10,s=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){const i=s-e,o=r-t;n+=Math.sqrt(i*i+o*o)}e=s,t=r}return n},e.prototype._point=function(e,t,n,i,o){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*i*(1-e)*e*e+o*e*e*e},e}),e("skylark-formio/vendors/signature_pad/throttle",[],function(){return function(e,t,n){var i,o,s,r=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:Date.now(),r=null,s=e.apply(i,o),r||(i=o=null)};return function(){var c=Date.now();a||!1!==n.leading||(a=c);var d=t-(c-a);return i=this,o=arguments,d<=0||d>t?(r&&(clearTimeout(r),r=null),a=c,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,d)),s}}}),e("skylark-formio/vendors/signature_pad/SignaturePad",["./Point","./bezier","./throttle"],function(e,t,n){function i(e,t){const o=this,s=t||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=n(i.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=i.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(o._mouseButtonDown=!0,o._strokeBegin(e))},this._handleMouseMove=function(e){o._mouseButtonDown&&o._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&o._mouseButtonDown&&(o._mouseButtonDown=!1,o._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){const t=e.changedTouches[0];o._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();const t=e.targetTouches[0];o._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){const t=e.target===o._canvas;t&&(e.preventDefault(),o._strokeEnd(e))},this.on()}return i.prototype.clear=function(){const e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},i.prototype.fromDataURL=function(e,t={}){const n=new Image,i=t.ratio||window.devicePixelRatio||1,o=t.width||this._canvas.width/i,s=t.height||this._canvas.height/i;this._reset(),n.src=e,n.onload=(()=>{this._ctx.drawImage(n,0,0,o,s)}),this._isEmpty=!1},i.prototype.toDataURL=function(e,...t){switch(e){case"image/svg+xml":return this._toSVG();default:return this._canvas.toDataURL(e,...t)}},i.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},i.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},i.prototype.isEmpty=function(){return this._isEmpty},i.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},i.prototype._strokeUpdate=function(e){const t=e.clientX,n=e.clientY,i=this._createPoint(t,n),o=this._data[this._data.length-1],s=o&&o[o.length-1],r=s&&i.distanceTo(s)<this.minDistance;if(!s||!r){const{curve:e,widths:t}=this._addPoint(i);e&&t&&this._drawCurve(e,t.start,t.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},i.prototype._strokeEnd=function(e){const t=this.points.length>2,n=this.points[0];if(!t&&n&&this._drawDot(n),n){const e=this._data[this._data.length-1],t=e[e.length-1];n.equals(t)||e.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(e)},i.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},i.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},i.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},i.prototype._createPoint=function(t,n,i){const o=this._canvas.getBoundingClientRect();return new e(t-o.left,n-o.top,i||(new Date).getTime())},i.prototype._addPoint=function(e){const n=this.points;let i;if(n.push(e),n.length>2){3===n.length&&n.unshift(n[0]);const e=(i=this._calculateCurveControlPoints(n[0],n[1],n[2])).c2,o=(i=this._calculateCurveControlPoints(n[1],n[2],n[3])).c1,s=new t(n[1],e,o,n[2]),r=this._calculateCurveWidths(s);return n.shift(),{curve:s,widths:r}}return{}},i.prototype._calculateCurveControlPoints=function(t,n,i){const o=t.x-n.x,s=t.y-n.y,r=n.x-i.x,a=n.y-i.y,l={x:(t.x+n.x)/2,y:(t.y+n.y)/2},c={x:(n.x+i.x)/2,y:(n.y+i.y)/2},d=Math.sqrt(o*o+s*s),u=Math.sqrt(r*r+a*a),h=l.x-c.x,p=l.y-c.y,m=u/(d+u),f={x:c.x+h*m,y:c.y+p*m},g=n.x-f.x,y=n.y-f.y;return{c1:new e(l.x+g,l.y+y),c2:new e(c.x+g,c.y+y)}},i.prototype._calculateCurveWidths=function(e){const t=e.startPoint,n=e.endPoint,i={start:null,end:null},o=this.velocityFilterWeight*n.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,s=this._strokeWidth(o);return i.start=this._lastWidth,i.end=s,this._lastVelocity=o,this._lastWidth=s,i},i.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},i.prototype._drawPoint=function(e,t,n){const i=this._ctx;i.moveTo(e,t),i.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},i.prototype._drawCurve=function(e,t,n){const i=this._ctx,o=n-t,s=Math.floor(e.length());i.beginPath();for(let n=0;n<s;n+=1){const i=n/s,r=i*i,a=r*i,l=1-i,c=l*l,d=c*l;let u=d*e.startPoint.x;u+=3*c*i*e.control1.x,u+=3*l*r*e.control2.x,u+=a*e.endPoint.x;let h=d*e.startPoint.y;h+=3*c*i*e.control1.y,h+=3*l*r*e.control2.y,h+=a*e.endPoint.y;const p=t+a*o;this._drawPoint(u,h,p)}i.closePath(),i.fill()},i.prototype._drawDot=function(e){const t=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()},i.prototype._fromData=function(t,n,i){for(let o=0;o<t.length;o+=1){const s=t[o];if(s.length>1)for(let t=0;t<s.length;t+=1){const i=s[t],o=new e(i.x,i.y,i.time),r=i.color;if(0===t)this.penColor=r,this._reset(),this._addPoint(o);else if(t!==s.length-1){const{curve:e,widths:t}=this._addPoint(o);e&&t&&n(e,t,r)}}else{this._reset();const e=s[0];i(e)}}},i.prototype._toSVG=function(){const e=this._data,t=this._canvas,n=Math.max(window.devicePixelRatio||1,1),i=t.width/n,o=t.height/n,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",t.width),s.setAttributeNS(null,"height",t.height),this._fromData(e,(e,t,n)=>{const i=document.createElement("path");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){const o=`M ${e.startPoint.x.toFixed(3)},${e.startPoint.y.toFixed(3)} `+`C ${e.control1.x.toFixed(3)},${e.control1.y.toFixed(3)} `+`${e.control2.x.toFixed(3)},${e.control2.y.toFixed(3)} `+`${e.endPoint.x.toFixed(3)},${e.endPoint.y.toFixed(3)}`;i.setAttribute("d",o),i.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),s.appendChild(i)}},e=>{const t=document.createElement("circle"),n="function"==typeof this.dotSize?this.dotSize():this.dotSize;t.setAttribute("r",n),t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("fill",e.color),s.appendChild(t)});const r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+` viewBox="0 0 ${i} ${o}"`+` width="${i}"`+` height="${o}"`+">";let a=s.innerHTML;if(void 0===a){const e=document.createElement("dummy"),t=s.childNodes;e.innerHTML="";for(let n=0;n<t.length;n+=1)e.appendChild(t[n].cloneNode(!0));a=e.innerHTML}const l=r+a+"</svg>";return"data:image/svg+xml;base64,"+btoa(l)},i.prototype.fromData=function(e){this.clear(),this._fromData(e,(e,t)=>this._drawCurve(e,t.start,t.end),e=>this._drawDot(e)),this._data=e},i.prototype.toData=function(){return this._data},i}),e("skylark-formio/components/signature/Signature",["../../vendors/signature_pad/SignaturePad","../_classes/input/Input","skylark-lodash"],function(e,t,n){"use strict";return class i extends t{static schema(...e){return t.schema({type:"signature",label:"Signature",key:"signature",footer:"Sign above",width:"100%",height:"150px",penColor:"black",backgroundColor:"rgb(245,245,235)",minWidth:"0.5",maxWidth:"2.5"},...e)}static get builderInfo(){return{title:"Signature",group:"advanced",icon:"pencil",weight:120,documentation:"http://help.form.io/userguide/#signature",schema:i.schema()}}init(){super.init(),this.currentWidth=0,this.scale=1,this.component.width||(this.component.width="100%"),this.component.height||(this.component.height="200px")}get emptyValue(){return""}get defaultSchema(){return i.schema()}get inputInfo(){const e=super.inputInfo;return e.type="input",e.attr.type="hidden",e}get className(){return`${super.className} signature-pad`}labelIsHidden(){return!0}setValue(e,t={}){const n=super.setValue(e,t);return e&&this.refs.signatureImage&&this.options.readOnly&&(this.refs.signatureImage.setAttribute("src",e),this.showCanvas(!1)),this.signaturePad&&(e?n&&this.triggerChange():this.signaturePad.clear()),n}showCanvas(e){e?(this.refs.canvas&&(this.refs.canvas.style.display="inherit"),this.refs.signatureImage&&(this.refs.signatureImage.style.display="none")):(this.refs.canvas&&(this.refs.canvas.style.display="none"),this.refs.signatureImage&&(this.refs.signatureImage.style.display="inherit"))}onDisabled(){this.showCanvas(!super.disabled),this.signaturePad&&(super.disabled?(this.signaturePad.off(),this.refs.refresh&&this.refs.refresh.classList.add("disabled")):(this.signaturePad.on(),this.refs.refresh&&this.refs.refresh.classList.remove("disabled")))}checkSize(e,t){if(e||this.refs.padBody.offsetWidth!==this.currentWidth){this.scale=e?t:this.scale,this.currentWidth=this.refs.padBody.offsetWidth,this.refs.canvas.width=this.currentWidth*this.scale,this.refs.canvas.height=this.refs.padBody.offsetHeight*this.scale;const n=this.refs.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.scale(1/this.scale,1/this.scale),n.fillStyle=this.signaturePad.backgroundColor,n.fillRect(0,0,this.refs.canvas.width,this.refs.canvas.height),this.signaturePad.clear(),this.dataValue&&this.signaturePad.fromDataURL(this.dataValue)}}renderElement(e,t){return this.renderTemplate("signature",{element:super.renderElement(e,t),required:n.get(this.component,"validate.required",!1)})}setOpenModalElement(){const e=`\n      <label class="control-label">${this.component.label}</label><br>\n      <button lang='en' class='btn btn-light btn-md open-modal-button' ref='openModal'>Click to Sign</button>\n    `;this.componentModal.setOpenModalElement(e)}getModalPreviewTemplate(){return`\n      <label class="control-label">${this.component.label}</label><br>\n      <img src=${this.dataValue} ref='openModal' />\n    `}attach(t){this.loadRefs(t,{canvas:"single",refresh:"single",padBody:"single",signatureImage:"single"});const i=super.attach(t);return this.onDisabled(),this.refs.refresh&&this.options.readOnly&&this.refs.refresh.classList.add("disabled"),this.refs.canvas&&(this.signaturePad=new e(this.refs.canvas,{minWidth:this.component.minWidth,maxWidth:this.component.maxWidth,penColor:this.component.penColor,backgroundColor:this.component.backgroundColor}),this.signaturePad.onEnd=(()=>this.setValue(this.signaturePad.toDataURL())),this.refs.signatureImage.setAttribute("src",this.signaturePad.toDataURL()),this.refs.padBody&&(this.refs.padBody.style.maxWidth||(this.refs.padBody.style.maxWidth="100%"),this.addEventListener(window,"resize",n.debounce(()=>this.checkSize(),100)),setTimeout(function e(){this.refs.padBody&&this.refs.padBody.offsetWidth?this.checkSize():setTimeout(e.bind(this),200)}.bind(this),200))),this.addEventListener(this.refs.refresh,"click",e=>{e.preventDefault(),this.showCanvas(!0),this.signaturePad.clear(),this.setValue(this.defaultValue)}),this.setValue(this.dataValue),i}detach(){this.signaturePad&&this.signaturePad.off(),this.signaturePad=null,this.currentWidth=0,super.detach()}getValueAsString(e){return e?"Yes":"No"}focus(){this.refs.padBody.focus()}}}),e("skylark-formio/components/survey/Survey",["skylark-lodash","../_classes/field/Field","../../utils/utils"],function(e,t,n){"use strict";return class i extends t{static schema(...e){return t.schema({type:"survey",label:"Survey",key:"survey",questions:[],values:[]},...e)}static get builderInfo(){return{title:"Survey",group:"advanced",icon:"list",weight:110,documentation:"http://help.form.io/userguide/#survey",schema:i.schema()}}get defaultSchema(){return i.schema()}render(){return super.render(this.renderTemplate("survey"))}attach(e){this.loadRefs(e,{input:"multiple"});const t=super.attach(e);return this.refs.input.forEach(e=>{this.disabled?e.setAttribute("disabled","disabled"):this.addEventListener(e,"change",()=>this.updateValue(null,{modified:!0}))}),this.setValue(this.dataValue),t}setValue(t,n={}){return!!t&&(e.each(this.component.questions,n=>{e.each(this.refs.input,e=>{e.name===this.getInputName(n)&&(e.checked=e.value===t[n.value])})}),this.updateValue(t,n))}get emptyValue(){return{}}getValue(){if(this.viewOnly||!this.refs.input||!this.refs.input.length)return this.dataValue;const t={};return e.each(this.component.questions,n=>{e.each(this.refs.input,e=>{if(e.checked&&e.name===this.getInputName(n))return t[n.value]=e.value,!1})}),t}set disabled(t){super.disabled=t,e.each(this.refs.input,e=>{e.disabled=!0})}get disabled(){return super.disabled}validateRequired(e,t){return!n.boolValue(e)||this.component.questions.reduce((e,n)=>e&&Boolean(t[n.value]),!0)}getInputName(e){return`${this.options.name}[${e.value}]`}}}),e("skylark-formio/utils/builder",["skylark-lodash","./utils"],function(e,t){"use strict";return{uniquify(e,n){let i=!1;const o={};return t.eachComponent(e,function(e){o[e.key]=!0},!0),t.eachComponent([n],e=>{if(!e.key)return;const n=t.uniqueKey(o,e.key);n!==e.key&&(e.key=n,o[n]=!0,i=!0)},!0),i},additionalShortcuts:{button:["Enter","Esc"]},getAlphaShortcuts:()=>e.range("A".charCodeAt(),"Z".charCodeAt()+1).map(e=>String.fromCharCode(e)),getAdditionalShortcuts(e){return this.additionalShortcuts[e]||[]},getBindedShortcuts(e,n){const i=[];return t.eachComponent(e,e=>{e!==n&&(e.shortcut&&i.push(e.shortcut),e.values&&e.values.forEach(e=>{e.shortcut&&i.push(e.shortcut)}))},!0),i},getAvailableShortcuts(t,n){return n?[""].concat(e.difference(this.getAlphaShortcuts().concat(this.getAdditionalShortcuts(n.type)),this.getBindedShortcuts(t.components,n))).map(e=>({label:e,value:e})):[]}}}),e("skylark-formio/components/table/Table",["skylark-lodash","../../utils/builder","../_classes/nested/NestedComponent"],function(e,t,n){"use strict";return class i extends n{static emptyTable(e,t){const n=[];for(let i=0;i<e;i++){const e=[];for(let n=0;n<t;n++)e.push({components:[]});n.push(e)}return n}static schema(...e){return n.schema({label:"Table",type:"table",input:!1,key:"table",numRows:3,numCols:3,rows:i.emptyTable(3,3),header:[],caption:"",cloneRows:!1,striped:!1,bordered:!1,hover:!1,condensed:!1,persistent:!1},...e)}static get builderInfo(){return{title:"Table",group:"layout",icon:"table",weight:40,documentation:"http://help.form.io/userguide/#table",schema:i.schema()}}get defaultSchema(){return i.schema()}get schema(){const t=e.omit(super.schema,"components");return t.rows=[],this.eachComponent(e=>{t.rows&&t.rows.length||(t.rows=i.emptyTable(this.component.numRows,this.component.numCols)),t.rows[e.tableRow]||(t.rows[e.tableRow]=[]),t.rows[e.tableRow][e.tableColumn]||(t.rows[e.tableRow][e.column]={components:[]}),t.rows[e.tableRow][e.tableColumn].components.push(e.schema)}),t.rows.length||(t.rows=i.emptyTable(this.component.numRows,this.component.numCols)),t}get className(){let e=`table-responsive ${super.className}`;return this.component.bordered||(e+=" no-top-border-table"),e}get cellClassName(){let e="";return this.component.cellAlignment&&(e=`cell-align-${this.component.cellAlignment}`),e}get tableKey(){return`table-${this.key}`}constructor(...e){super(...e),this.noField=!0}init(){super.init();for(let e=0;e<this.component.numRows;e++){this.component.rows[e]=this.component.rows[e]||[];for(let t=0;t<this.component.numCols;t++)this.component.rows[e][t]=this.component.rows[e][t]||{components:[]};this.component.rows[e]=this.component.rows[e].slice(0,this.component.numCols)}this.component.rows=this.component.rows.slice(0,this.component.numRows);const n=[];this.table=[],e.each(this.component.rows,(i,o)=>{this.table[o]=[],e.each(i,(i,s)=>{this.table[o][s]=[],this.component.cloneRows&&(i.components.length?n[s]=i:n[s]&&(i.components=e.cloneDeep(n[s].components),t.uniquify(this.root._form.components,i))),e.each(i.components,e=>{const t=this.createComponent(e);t.tableRow=o,t.tableColumn=s,this.table[o][s].push(t)})})})}render(){return super.render(this.renderTemplate("table",{cellClassName:this.cellClassName,tableKey:this.tableKey,tableComponents:this.table.map(e=>e.map(e=>this.renderComponents(e)))}))}attach(e){const t=this.table.reduce((e,t,n)=>(e[`${this.tableKey}-${n}`]="multiple",e),{});this.loadRefs(e,t);const n=super.attach(e);return this.table.forEach((e,t)=>{e.forEach((e,n)=>{this.attachComponents(this.refs[`${this.tableKey}-${t}`][n],this.table[t][n],this.component.rows[t][n].components)})}),n}destroy(e){super.destroy(e),delete this.table}}}),e("skylark-formio/components/tabs/Tabs",["skylark-lodash","../_classes/nested/NestedComponent"],function(e,t){"use strict";return class n extends t{static schema(...e){return t.schema({label:"Tabs",type:"tabs",input:!1,key:"tabs",persistent:!1,tableView:!1,components:[{label:"Tab 1",key:"tab1",components:[]}]},...e)}static get builderInfo(){return{title:"Tabs",group:"layout",icon:"folder-o",weight:50,documentation:"http://help.form.io/userguide/#tabs",schema:n.schema()}}get defaultSchema(){return n.schema()}get schema(){const t=super.schema,n=e.cloneDeep(this.component.components);return t.components=n.map((e,t)=>(e.components=this.tabs[t].map(e=>e.schema),e)),t}get tabKey(){return`tab-${this.key}`}get tabLikey(){return`tabLi-${this.key}`}get tabLinkKey(){return`tabLink-${this.key}`}constructor(...e){super(...e),this.currentTab=0,this.noField=!0}init(){this.components=[],this.tabs=[],e.each(this.component.components,(t,n)=>{this.tabs[n]=[],t.components=t.components||[],e.each(t.components,e=>{const t=this.createComponent(e);t.tab=n,this.tabs[n].push(t)})})}render(){return super.render(this.renderTemplate("tab",{tabKey:this.tabKey,tabLikey:this.tabLikey,tabLinkKey:this.tabLinkKey,currentTab:this.currentTab,tabComponents:this.tabs.map(e=>this.renderComponents(e))},this.options.flatten||this.options.pdf?"flat":null))}attach(e){this.loadRefs(e,{[this.tabLinkKey]:"multiple",[this.tabKey]:"multiple",[this.tabLikey]:"multiple"});const t=super.attach(e);return this.refs[this.tabLinkKey].forEach((e,t)=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.setTab(t)})}),this.refs[this.tabKey].forEach((e,t)=>{this.attachComponents(e,this.tabs[t],this.component.components[t].components)}),t}detach(e){super.detach(e)}setTab(t){this.tabs&&this.tabs[t]&&this.refs[this.tabKey]&&this.refs[this.tabKey][t]&&(this.currentTab=t,e.each(this.refs[this.tabKey],e=>{this.removeClass(e,"formio-tab-panel-active"),e.style.display="none"}),this.addClass(this.refs[this.tabKey][t],"formio-tab-panel-active"),this.refs[this.tabKey][t].style.display="block",e.each(this.refs[this.tabLinkKey],(e,t)=>{this.refs[this.tabLinkKey][t]&&this.removeClass(e,"formio-tab-link-active"),this.refs[this.tabLikey][t]&&this.removeClass(this.refs[this.tabLikey][t],"formio-tab-link-container-active")}),this.refs[this.tabLikey][t]&&this.addClass(this.refs[this.tabLikey][t],"formio-tab-link-container-active"),this.refs[this.tabLinkKey][t]&&this.addClass(this.refs[this.tabLinkKey][t],"formio-tab-link-active"),this.triggerChange())}}}),e("skylark-formio/components/tags/Tags",["../_classes/input/Input"],function(e,t){"use strict";return class n extends e{static schema(...t){return e.schema({type:"tags",label:"Tags",key:"tags",delimeter:",",storeas:"string",maxTags:0},...t)}static get builderInfo(){return{title:"Tags",icon:"tags",group:"advanced",documentation:"http://help.form.io/userguide/#tags",weight:30,schema:n.schema()}}init(){super.init()}get emptyValue(){return"string"===this.component.storeas?"":[]}get defaultSchema(){return n.schema()}get inputInfo(){const e=super.inputInfo;return e.type="input",e.attr.type="text",e.changeEvent="change",e}get delimiter(){return this.component.delimeter||","}attachElement(e,n){super.attachElement(e,n),e&&(e.setAttribute("dir",this.i18next.dir()),this.choices&&this.choices.destroy(),this.choices=new t(e,{delimiter:this.delimiter,editItems:!0,maxItemCount:this.component.maxTags,removeItemButton:!0,duplicateItemsAllowed:!1}),this.choices.itemList.element.tabIndex=e.tabIndex,this.addEventListener(this.choices.input.element,"blur",()=>{const e=this.choices.input.value;e&&(this.choices.setValue([e]),this.choices.clearInput(),this.choices.hideDropdown(!0),this.updateValue(null,{modified:!0}))}))}detach(){super.detach(),this.choices&&(this.choices.destroy(),this.choices=null)}normalizeValue(e){return"string"===this.component.storeas&&Array.isArray(e)?e.join(this.delimiter):"array"===this.component.storeas&&"string"==typeof e?e.split(this.delimiter).filter(e=>e):e}setValue(e,t={}){const n=super.setValue(e,t);if(this.choices){let e=this.dataValue;this.choices.removeActiveItems(),e&&("string"==typeof e&&(e=e.split(this.delimiter).filter(e=>e)),this.choices.setValue(Array.isArray(e)?e:[e]))}return n}set disabled(e){super.disabled=e,this.choices&&(e?this.choices.disable():this.choices.enable())}get disabled(){return super.disabled}focus(){this.refs.input&&this.refs.input.length&&this.refs.input[0].parentNode.lastChild.focus()}}}),e("skylark-formio/components/textarea/TextArea",["../textfield/TextField","skylark-lodash","../../vendors/getify/npo","../../utils/utils"],function(e,t,n,i){"use strict";return class o extends e{static schema(...t){return e.schema({type:"textarea",label:"Text Area",key:"textArea",rows:3,wysiwyg:!1,editor:"",inputFormat:"html",validate:{minWords:"",maxWords:""}},...t)}static get builderInfo(){return{title:"Text Area",group:"basic",icon:"font",documentation:"http://help.form.io/userguide/#textarea",weight:20,schema:o.schema()}}init(){super.init(),this.editors=[],this.editorsReady=[],this.updateSizes=[],this.options.submitOnEnter=!1}get defaultSchema(){return o.schema()}get inputInfo(){const e=super.inputInfo;return e.type=this.component.wysiwyg?"div":"textarea",this.component.rows&&(e.attr.rows=this.component.rows),e}validateMultiple(){return!this.isJsonValue}renderElement(e,t){const n=this.inputInfo;return n.attr=n.attr||{},n.content=e,this.options.readOnly||this.disabled?this.renderTemplate("well",{children:'<div ref="input"></div>',nestedKey:this.key,value:e}):this.component.editor||this.component.wysiwyg?'<div ref="input"></div>':this.renderTemplate("input",{input:n,value:e,index:t})}get autoExpand(){return this.component.autoExpand}updateEditorValue(e,n){n=this.getConvertedValue(this.removeBlanks(n));const i=this.dataValue;if(this.component.multiple&&Array.isArray(i)){const o=t.clone(i);o[e]=n,n=o}t.isEqual(n,i)||t.isEmpty(n)&&t.isEmpty(i)||this.updateValue(n,{modified:!this.autoModified}),this.autoModified=!1}attachElement(e,i){if(this.autoExpand&&(this.isPlain||this.options.readOnly||this.options.htmlView)&&"TEXTAREA"===e.nodeName&&this.addAutoExpanding(e,i),this.options.readOnly)return e;this.component.wysiwyg&&!this.component.editor&&(this.component.editor="ckeditor");let o=t.isEmpty(this.component.wysiwyg)?this.wysiwygDefault[this.component.editor]||this.wysiwygDefault.default:this.component.wysiwyg;return this.editorsReady[i]=new n(n=>{switch(this.component.editor){case"ace":o||(o={}),o.mode=this.component.as,this.addAce(e,o,e=>this.updateEditorValue(i,e)).then(e=>{this.editors[i]=e;let t=this.dataValue;return t=this.component.multiple&&Array.isArray(t)?t[i]:t,e.setValue(this.setConvertedValue(t,i)),n(e),e}).catch(e=>console.warn(e));break;case"quill":(o.hasOwnProperty("toolbarGroups")||o.hasOwnProperty("toolbar"))&&(console.warn("The WYSIWYG settings are configured for CKEditor. For this renderer, you will need to use configurations for the Quill Editor. See https://quilljs.com/docs/configuration for more information."),o=this.wysiwygDefault.quill),this.addQuill(e,o,()=>this.updateEditorValue(i,this.editors[i].root.innerHTML)).then(e=>{if(this.editors[i]=e,this.component.isUploadEnabled){const t=this;e.getModule("toolbar").addHandler("image",function(){t.imageHandler.call(t,this)})}e.root.spellcheck=this.component.spellcheck,(this.options.readOnly||this.component.disabled)&&e.disable();let t=this.dataValue;return t=this.component.multiple&&Array.isArray(t)?t[i]:t,e.setContents(e.clipboard.convert(this.setConvertedValue(t,i))),n(e),e}).catch(e=>console.warn(e));break;case"ckeditor":(o=o||{}).rows=this.component.rows,this.addCKE(e,o,e=>this.updateEditorValue(i,e)).then(e=>{this.editors[i]=e,(this.options.readOnly||this.component.disabled)&&(e.isReadOnly=!0);const o=parseInt(this.component.rows,10);if(t.isFinite(o)&&t.has(e,"ui.view.editable.editableElement")){const t=31*o+14;e.ui.view.editable.editableElement.style.height=`${t}px`}let s=this.dataValue;return s=this.component.multiple&&Array.isArray(s)?s[i]:s,e.data.set(this.setConvertedValue(s,i)),n(e),e});break;case"tiny":o||(o={}),o.mode=this.component.as||"javascript",this.addTiny(e,o,e=>this.updateEditorValue(e)).then(e=>(this.editors[i]=e,e.setContent(this.setConvertedValue(this.dataValue)),n(e),e)).catch(e=>console.warn(e));break;default:super.attachElement(e,i)}}),e}attach(e){const t=super.attach(e);return this.restoreValue(),t}imageHandler(e){let t=e.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/*"),t.classList.add("ql-image"),this.addEventListener(t,"change",()=>{const n=t.files,o=e.quill.getSelection(!0);if(!n||!n.length)return void console.warn("No files selected");e.quill.enable(!1);const{uploadStorage:s,uploadUrl:r,uploadOptions:a,uploadDir:l,fileKey:c}=this.component;let d;this.root.formio.uploadFile(s,n[0],i.uniqueName(n[0].name),l||"",null,r,a,c).then(e=>(d=e,this.root.formio.downloadFile(e))).then(n=>{e.quill.enable(!0);const i=Quill.import("delta");e.quill.updateContents((new i).retain(o.index).delete(o.length).insert({image:n.url},{alt:JSON.stringify(d)}),Quill.sources.USER),t.value=""}).catch(t=>{console.warn("Quill image upload failed"),console.warn(t),e.quill.enable(!0)})}),e.container.appendChild(t)),t.click()}get isPlain(){return!this.component.wysiwyg&&!this.component.editor}get htmlView(){return this.options.readOnly&&(this.component.editor||this.component.wysiwyg)}setValueAt(e,n,i={}){if(super.setValueAt(e,n,i),this.editorsReady[e]){const o=t=>i=>{if(this.autoModified=!0,!t.skipWysiwyg)switch(this.component.editor){case"ace":i.setValue(this.setConvertedValue(n,e));break;case"quill":this.component.isUploadEnabled?this.setAsyncConvertedValue(n).then(e=>{i.setContents(i.clipboard.convert(e))}):i.setContents(i.clipboard.convert(this.setConvertedValue(n,e)));break;case"ckeditor":i.data.set(this.setConvertedValue(n,e));break;case"tiny":i.setContent(this.setConvertedValue(n))}};this.editorsReady[e].then(o(t.clone(i)))}}setValue(e,n={}){return this.isPlain||this.options.readOnly||this.disabled?(e=this.component.multiple&&Array.isArray(e)?e.map((e,t)=>this.setConvertedValue(e,t)):this.setConvertedValue(e),super.setValue(e,n)):(n.skipWysiwyg=t.isEqual(e,this.getValue()),super.setValue(e,n))}setReadOnlyValue(e,t){t=t||0,(this.options.readOnly||this.disabled)&&this.refs.input&&this.refs.input[t]&&this.setContent(this.refs.input[t],this.interpolate(e))}get isJsonValue(){return this.component.as&&"json"===this.component.as}setConvertedValue(e,n){if(this.isJsonValue&&!t.isNil(e))try{e=JSON.stringify(e,null,2)}catch(e){console.warn(e)}return t.isString(e)||(e=""),this.setReadOnlyValue(e,n),e}setAsyncConvertedValue(e){if(this.isJsonValue&&e)try{e=JSON.stringify(e,null,2)}catch(e){console.warn(e)}t.isString(e)||(e="");const i=(new DOMParser).parseFromString(e,"text/html"),o=i.getElementsByTagName("img");return o.length?this.setImagesUrl(o).then(()=>(e=i.getElementsByTagName("body")[0].firstElementChild,(new XMLSerializer).serializeToString(e))):n.resolve(e)}setImagesUrl(e){return n.all(t.map(e,e=>{let t;try{t=JSON.parse(e.getAttribute("alt"))}catch(e){console.warn(e)}return this.root.formio.downloadFile(t).then(t=>{e.setAttribute("src",t.url)})}))}addAutoExpanding(e,n){let i=null,o=null;const s=t=>{const n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t},r=()=>{0!==e.scrollHeight&&((e,t)=>{const n=[];for(;e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&n.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;t(),n.forEach(e=>{e.node.scrollTop=e.scrollTop})})(e,()=>{e.style.height="",e.style.height=`${e.scrollHeight+i}px`})},a=t.debounce(()=>{r();const t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null);let i=e.offsetHeight;i<t&&"hidden"===n.overflowY?s("scroll"):"hidden"!==n.overflowY&&s("hidden"),r(),i=e.offsetHeight,o!==i&&(o=i,a())},200),l=window.getComputedStyle(e,null);e.style.resize="none",i=parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth)||0,window&&this.addEventListener(window,"resize",a),this.addEventListener(e,"input",a),this.on("initialized",a),this.updateSizes[n]=a,a()}removeBlanks(e){if(!e)return e;const t=function(e){return"string"!=typeof e?e:e.replace(/<p>&nbsp;<\/p>|<p><br><\/p>|<p><br>&nbsp;<\/p>/g,"").trim()};return Array.isArray(e)?e.forEach((n,i)=>{e[i]=t(n)}):e=t(e),e}onChange(e,t){const n=super.onChange(e,t);return this.updateSizes.forEach(e=>e()),n}hasChanged(e,t){return super.hasChanged(this.removeBlanks(e),this.removeBlanks(t))}isEmpty(e=this.dataValue){return super.isEmpty(this.removeBlanks(e))}get defaultValue(){let e=super.defaultValue;return"quill"!==this.component.editor||e||(e="<p><br></p>"),e}getConvertedValue(e){if(this.isJsonValue&&e)try{e=JSON.parse(e)}catch(e){}return e}detach(){this.editors.forEach(e=>{e.destroy&&e.destroy()}),this.editors=[],this.editorsReady=[],this.updateSizes.forEach(e=>this.removeEventListener(window,"resize",e)),this.updateSizes=[]}getValue(){return this.isPlain?this.getConvertedValue(super.getValue()):this.dataValue}}}),e("skylark-formio/components/time/Time",["skylark-moment","../textfield/TextField"],function(e,t){"use strict";return class n extends t{static schema(...e){return t.schema({type:"time",label:"Time",key:"time",inputType:"time",format:"HH:mm",dataFormat:"HH:mm:ss"},...e)}constructor(e,t,n){super(e,t,n),this.component.inputMask="99:99",this.component.inputType=this.component.inputType||"time",this.rawData=this.component.multiple?[]:this.emptyValue}static get builderInfo(){return{title:"Time",icon:"clock-o",group:"advanced",documentation:"http://help.form.io/userguide/#time",weight:55,schema:n.schema()}}get dataFormat(){return this.component.dataFormat||"HH:mm:ss"}get defaultSchema(){return n.schema()}get defaultValue(){let e=super.defaultValue;return this.component.multiple&&Array.isArray(e)?e=e.map(e=>e?this.getStringAsValue(e):e):e&&(e=this.getStringAsValue(e)),e}get validationValue(){return this.rawData}get inputInfo(){const e=super.inputInfo;return e.attr.type=this.component.inputType,e}get skipMaskValidation(){return!0}isNotCompleteInput(e){return e.includes("_")}removeValue(e){this.rawData=Array.isArray(this.rawData)?[...this.rawData.slice(0,e),...this.rawData.slice(e+1)]:this.emptyValue,super.removeValue(e)}resetRawData(e){e?this.setRawValue(this.emptyValue,e):this.rawData=[]}setRawValue(e,t){Array.isArray(this.rawData)?this.rawData[t]=e:this.rawData=e}getRawValue(e){return e&&Array.isArray(this.rawData)?this.rawData[e]||this.emptyValue:this.rawData}getValueAt(e){if(!this.refs.input.length||!this.refs.input[e])return this.emptyValue;const{value:t}=this.refs.input[e];return t?(this.setRawValue(t,e),this.getStringAsValue(t)):(this.resetRawData(e),this.emptyValue)}setValueAt(e,t){t&&!this.getRawValue(e)&&this.setRawValue(this.getValueAsString(t),e),this.refs.input[e].value=this.getRawValue(e)}getStringAsValue(t){return t?e(t,this.component.format).format(this.component.dataFormat):t}getValueAsString(t){return(t?e(t,this.component.dataFormat).format(this.component.format):t)||""}}}),e("skylark-formio/components/tree/Node",["skylark-lodash"],function(e){"use strict";return class t{constructor(n,{data:i={},children:o=[]}={},{checkNode:s,createComponents:r,isNew:a=!0,removeComponents:l}={}){this.parent=n,this.previousData={},this.persistentData=e.cloneDeep(i),this.new=a,this.createComponents=r,this.checkNode=s,this.removeComponents=l,this.revertAvailable=!1,this.editing=!1,this.collapsed=!1,this.components=[],this.children=[],this.resetData(),this.children=o.map(e=>new t(this,e,{checkNode:s,createComponents:r,isNew:!1,removeComponents:l}))}get value(){return this.new?null:{data:e.cloneDeep(this.persistentData),children:this.children.filter(e=>!e.new).map(e=>e.value)}}get isRoot(){return null===this.parent}get changing(){return this.new||this.editing}get hasChangingChildren(){return this.changin||this.children.some(e=>e.hasChangingChildren)}get hasData(){return!e.isEmpty(this.persistentData)}get hasChildren(){return Array.isArray(this.children)&&this.children.length>0}eachChild(e){return e(this),this.children.forEach(t=>t.eachChild(e)),this}getComponents(){return this.children.reduce((e,t)=>e.concat(t.getComponents()),this.components)}addChild(){if(this.new)return null;const e=new t(this,{},{checkNode:this.checkNode,createComponents:this.createComponents,isNew:!0,removeComponents:this.removeComponents});return this.children=this.children.concat(e),e}removeChild(e){return this.new||(this.children=this.children.filter(t=>t!==e)),this}edit(){return this.new?this:(this.editing=!0,this.resetData())}save(){return this.changing&&(this.new?this.new=!1:(this.editing=!1,this.revertAvailable=!0),this.commitData()),this}cancel(){return this.new?this.remove():this.editing&&(this.editing=!1,this.resetData()),this}remove(){return this.parent.removeChild(this),this.parent=null,this.clearComponents(),this}revert(){return this.revertAvailable?(this.data=this.previousData,this.commitData()):this}commitData(){return this.previousData=this.persistentData,this.persistentData=e.cloneDeep(this.data),this.clearComponents(),this}resetData(){return this.data=e.cloneDeep(this.persistentData),this.updateComponentsContext(),this}updateComponentsContext(){return this.changing?this.instantiateComponents():this.clearComponents(),this}instantiateComponents(){this.components=this.createComponents(this.data,this),this.checkNode(this)}clearComponents(){this.removeComponents(this.components),this.components=[]}}}),e("skylark-formio/components/tree/Tree",["skylark-lodash","../_classes/component/Component","../Components","../_classes/nested/NestedComponent","./Node","../../vendors/getify/npo"],function(e,t,n,i,o,s){"use strict";return class t extends i{static schema(...e){return i.schema({label:"Tree",key:"tree",type:"tree",clearOnHide:!0,input:!0,tree:!0,components:[]},...e)}static get builderInfo(){return{title:"Tree",icon:"indent",group:"data",weight:40,schema:t.schema()}}constructor(...e){super(...e),this.type="tree"}get emptyValue(){return{}}get viewComponents(){return this.viewComponentsInstantiated||(this.viewComponentsInstantiated=!0,this._viewComponents=this.createComponents({})),this._viewComponents}init(){if(this.builderMode)return super.init();this.components=[],this.componentOptions={...this.options,parent:this,root:this.root||this},this.setRoot(),this.viewComponentsInstantiated=!1,this._viewComponents=[]}destroy(){super.destroy(),this.builderMode||this.removeComponents(this._viewComponents)}createComponents(e,t){const i=this.componentComponents.map(t=>n.create(t,this.componentOptions,e));return t&&this.checkNode(this.data,t),i}removeComponents(e){return e.map(e=>e.destroy())}render(){return this.builderMode?super.render():super.render(this.renderTree(this.treeRoot))}renderTree(e={},t=!0){const n=e.hasChildren&&!e.collapsed?this.renderChildNodes(e.children,!t):[],i=e.changing?this.renderEdit(e):this.renderView(e);return this.renderTemplate("tree",{odd:t,childNodes:n,content:i,node:e})}renderChildNodes(e=[],t){return e.map(e=>this.renderTree(e,t))}renderEdit(e={}){return this.renderTemplate("treeEdit",{children:this.renderComponents(e.components),node:e})}renderView(e={}){return this.renderTemplate("treeView",{values:this.viewComponents.map(t=>(t.data=e.data,t.checkComponentConditions(e.data),t.getView(t.dataValue))),nodeData:e.data,node:e})}attach(e){return this.builderMode?super.attach(e):(this.loadRefs(e,{root:"single"}),s.all([super.attach(e),this.attachNode(this.refs.root,this.treeRoot)]))}attachNode(t,n){if(!t)return s.resolve();let i=s.resolve(),o=s.resolve();return n.refs=e.reduce(t.children,(e,t)=>t.hasAttribute("ref")?{...e,[t.getAttribute("ref")]:t}:e,{}),n.refs.content&&(this.attachActions(n),i=this.attachComponents(n)),n.refs.childNodes&&(o=this.attachChildren(n)),s.all([i,o])}attachActions(e){this.loadRefs.call(e,e.refs.content,{addChild:"single",cancelNode:"single",editNode:"single",removeNode:"single",revertNode:"single",saveNode:"single",toggleNode:"single"}),e.refs.addChild&&this.addEventListener(e.refs.addChild,"click",()=>{this.addChild(e)}),e.refs.cancelNode&&this.addEventListener(e.refs.cancelNode,"click",()=>{this.cancelNode(e)}),e.refs.editNode&&this.addEventListener(e.refs.editNode,"click",()=>{this.editNode(e)}),e.refs.removeNode&&this.addEventListener(e.refs.removeNode,"click",()=>{this.removeNode(e)}),e.refs.revertNode&&this.addEventListener(e.refs.revertNode,"click",()=>{this.revertNode(e)}),e.refs.saveNode&&this.addEventListener(e.refs.saveNode,"click",()=>{this.saveNode(e)}),e.refs.toggleNode&&this.addEventListener(e.refs.toggleNode,"click",()=>{this.toggleNode(e)})}attachComponents(e,...t){return this.builderMode?super.attachComponents.call(this,e,...t):(this.loadRefs.call(e,e.refs.content,{nodeEdit:"single"}),e.refs.nodeEdit?super.attachComponents(e.refs.nodeEdit,e.components):s.resolve())}attachChildren(t){const n=t.refs.childNodes.children;return s.all(e.map(n,(e,n)=>this.attachNode(e,t.children[n])))}setValue(e,t={}){const n=this.updateValue(e,t);return this.setRoot(),n}addChild(e){this.options.readOnly||e.new||this.hook("tree.addChild",{parent:e,component:this},()=>{const t=e.addChild();return this.redraw(),t})}cancelNode(e){this.options.readOnly||this.hook("tree.cancelNode",{node:e,component:this},()=>(e.isRoot?this.removeRoot():(e.cancel(),this.redraw()),e))}editNode(e){this.options.readOnly||e.new||this.hook("tree.editNode",{node:e,component:this},()=>(e.edit(),this.redraw(),e))}removeNode(e){this.options.readOnly||e.new||this.hook("tree.removeNode",{node:e,component:this},()=>(e.isRoot?this.removeRoot():(e.remove(),this.updateTree()),e))}revertNode(e){!this.options.readOnly&&e.revertAvailable&&this.hook("tree.revertNode",{node:e,component:this},()=>(e.revert(),this.updateTree(),e))}saveNode(e){this.options.readOnly||this.hook("tree.saveNode",{node:e,component:this},()=>(e.save(),this.updateTree(),e))}toggleNode(e){this.hook("tree.toggleNode",{node:e,component:this},()=>(e.collapsed=!e.collapsed,this.redraw(),e))}removeRoot(){this.options.readOnly||(this.dataValue=this.defaultValue,this.setRoot(),this.redraw())}setRoot(){const e=this.dataValue;this.treeRoot=new o(null,e,{isNew:!e.data,createComponents:this.createComponents.bind(this),checkNode:this.checkNode.bind(this,this.data),removeComponents:this.removeComponents}),this.hook("tree.setRoot",{root:this.treeRoot,component:this})}getValue(){return this.dataValue}updateTree(){this.updateValue(this.treeRoot.value),this.redraw()}checkData(e,t,n){return this.checkNode(e,this.treeRoot,t,n)}checkNode(e,t,n,i){return t.children.reduce((t,o)=>this.checkNode(e,o,n,i)&&t,super.checkData(e,n,t.data,t.components))}}}),e("skylark-formio/components/unknown/Unknown",["../_classes/component/Component"],function(e){"use strict";return class t extends e{static schema(){return{type:"custom",key:"custom",protected:!1,persistent:!0}}static get builderInfo(){return{title:"Custom",icon:"cubes",group:"premium",documentation:"https://help.form.io/userguide/form-components/#custom",weight:120,schema:t.schema()}}get defaultSchema(){return t.schema()}}}),e("skylark-formio/components/url/Url",["../textfield/TextField"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"url",label:"Url",key:"url",inputType:"url"},...t)}static get builderInfo(){return{title:"Url",group:"advanced",icon:"link",documentation:"http://help.form.io/userguide/#url",weight:20,schema:t.schema()}}constructor(e,t,n){super(e,t,n),this.validators.push("url")}get defaultSchema(){return t.schema()}elementInfo(){const e=super.elementInfo();return e.attr.type=this.component.mask?"password":"url",e}}}),e("skylark-formio/components/well/Well",["../_classes/nested/NestedComponent"],function(e){"use strict";return class t extends e{static schema(...t){return e.schema({type:"well",key:"well",input:!1,persistent:!1,components:[]},...t)}static get builderInfo(){return{title:"Well",icon:"square-o",group:"layout",documentation:"http://help.form.io/userguide/#well",weight:60,schema:t.schema()}}get defaultSchema(){return t.schema()}get className(){return`${this.component.customClass}`}get templateName(){return"well"}constructor(...e){super(...e),this.noField=!0}}}),e("skylark-formio/components/index",["./address/Address","./button/Button","./checkbox/Checkbox","./columns/Columns","./_classes/component/Component","./container/Container","./content/Content","./currency/Currency","./datagrid/DataGrid","./datamap/DataMap","./datetime/DateTime","./day/Day","./editgrid/EditGrid","./email/Email","./fieldset/Fieldset","./file/File","./form/Form","./hidden/Hidden","./_classes/input/Input","./_classes/multivalue/Multivalue","./_classes/field/Field","./html/HTML","./_classes/nested/NestedComponent","./_classes/nesteddata/NestedDataComponent","./_classes/nestedarray/NestedArrayComponent","./number/Number","./panel/Panel","./password/Password","./phonenumber/PhoneNumber","./radio/Radio","./recaptcha/ReCaptcha","./resource/Resource","./selectboxes/SelectBoxes","./select/Select","./signature/Signature","./survey/Survey","./table/Table","./tabs/Tabs","./tags/Tags","./textarea/TextArea","./textfield/TextField","./time/Time","./tree/Tree","./unknown/Unknown","./url/Url","./well/Well"],function(e,t,n,i,o,s,r,a,l,c,d,u,h,p,m,f,g,y,b,v,k,w,x,C,S,E,A,T,D,M,V,_,R,P,F,O,L,I,N,j,U,z,B,$,q,H){"use strict";return{address:e,base:o,component:o,button:t,checkbox:n,columns:i,container:s,content:r,currency:a,datagrid:l,datamap:c,datetime:d,day:u,editgrid:h,email:p,input:b,field:k,multivalue:v,fieldset:m,file:f,form:g,hidden:y,htmlelement:w,nested:x,nesteddata:C,nestedarray:S,number:E,panel:A,password:T,phoneNumber:D,radio:M,recaptcha:V,resource:_,select:P,selectboxes:R,signature:F,survey:O,table:L,tabs:I,tags:N,textarea:j,textfield:U,time:z,tree:B,unknown:$,url:q,well:H}}),e("skylark-formio/vendors/tooltip-js/tooltip",["skylark-popper"],function(e){var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};const n={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"};var i=function(){this.show=(()=>this._show(this.reference,this.options)),this.hide=(()=>this._hide()),this.dispose=(()=>this._dispose()),this.toggle=(()=>this._isOpen?this.hide():this.show()),this.updateTitleContent=(e=>this._updateTitleContent(e)),this._events=[],this._setTooltipNodeEvent=((e,t,n,i)=>{const o=e.relatedreference||e.toElement||e.relatedTarget,s=n=>{const o=n.relatedreference||n.toElement||n.relatedTarget;this._tooltipNode.removeEventListener(e.type,s),t.contains(o)||this._scheduleHide(t,i.delay,i,n)};return!!this._tooltipNode.contains(o)&&(this._tooltipNode.addEventListener(e.type,s),!0)})};return class{constructor(e,o){i.call(this),o=t({},n,o),e.jquery&&(e=e[0]),this.reference=e,this.options=o;const s="string"==typeof o.trigger?o.trigger.split(" ").filter(e=>-1!==["click","hover","focus"].indexOf(e)):[];this._isOpen=!1,this._popperOptions={},this._setEventListeners(e,s,o)}_create(e,t,n,i){const o=window.document.createElement("div");o.innerHTML=t.trim();const s=o.childNodes[0];s.id=`tooltip_${Math.random().toString(36).substr(2,10)}`,s.setAttribute("aria-hidden","false");const r=o.querySelector(this.options.innerSelector);return this._addTitleContent(e,n,i,r),s}_addTitleContent(e,t,n,i){if(1===t.nodeType||11===t.nodeType)n&&i.appendChild(t);else if((o=t)&&"[object Function]"==={}.toString.call(o)){const o=t.call(e);n?i.innerHTML=o:i.textContent=o}else n?i.innerHTML=t:i.textContent=t;var o}_show(n,i){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this;const o=n.getAttribute("title")||i.title;if(!o)return this;const s=this._create(n,i.template,o,i.html);n.setAttribute("aria-describedby",s.id);const r=this._findContainer(i.container,n);return this._append(s,r),this._popperOptions=t({},i.popperOptions,{placement:i.placement}),this._popperOptions.modifiers=t({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:i.offset}}),i.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={boundariesElement:i.boundariesElement}),this.popperInstance=new e(n,s,this._popperOptions),this._tooltipNode=s,this}_hide(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true"),this):this}_dispose(){return this._events.forEach(({func:e,event:t})=>{this.reference.removeEventListener(t,e)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}_findContainer(e,t){return"string"==typeof e?e=window.document.querySelector(e):!1===e&&(e=t.parentNode),e}_append(e,t){t.appendChild(e)}_setEventListeners(e,t,n){const i=[],o=[];t.forEach(e=>{switch(e){case"hover":i.push("mouseenter"),o.push("mouseleave");break;case"focus":i.push("focus"),o.push("blur");break;case"click":i.push("click"),o.push("click")}}),i.forEach(t=>{const i=t=>{!0!==this._isOpening&&(t.usedByTooltip=!0,this._scheduleShow(e,n.delay,n,t))};this._events.push({event:t,func:i}),e.addEventListener(t,i)}),o.forEach(t=>{const i=t=>{!0!==t.usedByTooltip&&this._scheduleHide(e,n.delay,n,t)};this._events.push({event:t,func:i}),e.addEventListener(t,i),"click"===t&&n.closeOnClickOutside&&document.addEventListener("mousedown",t=>{if(!this._isOpening)return;const n=this.popperInstance.popper;e.contains(t.target)||n.contains(t.target)||i(t)},!0)})}_scheduleShow(e,t,n){this._isOpening=!0;const i=t&&t.show||t||0;this._showTimeout=window.setTimeout(()=>this._show(e,n),i)}_scheduleHide(e,t,n,i){this._isOpening=!1;const o=t&&t.hide||t||0;window.setTimeout(()=>{if(window.clearTimeout(this._showTimeout),!1!==this._isOpen&&document.body.contains(this._tooltipNode)){if("mouseleave"===i.type){const o=this._setTooltipNodeEvent(i,e,t,n);if(o)return}this._hide(e,n)}},o)}_updateTitleContent(e){if(void 0===this._tooltipNode)return void(void 0!==this.options.title&&(this.options.title=e));const t=this._tooltipNode.parentNode.querySelector(this.options.innerSelector);this._clearTitleContent(t,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,e,this.options.html,t),this.options.title=e,this.popperInstance.update()}_clearTitleContent(e,t,n){1===n.nodeType||11===n.nodeType?t&&e.removeChild(n):t?e.innerHTML="":e.textContent=""}}}),e("skylark-formio/components/_classes/component/editForm/utils",["skylark-lodash","../../../../utils/Evaluator"],function(e,t){"use strict";const n={sortAndFilterComponents:t=>e.filter(e.sortBy(t,"weight"),e=>!e.ignore),unifyComponents:(t,i)=>t.key&&i.key?!t.skipMerge&&!i.skipMerge&&(t.key===i.key&&(e.each(t,(e,t)=>{i.hasOwnProperty(t)||(i[t]=e)}),e.each(i,(e,n)=>{t.hasOwnProperty(n)||(t[n]=e)}),t.components&&(i.components=n.sortAndFilterComponents(e.unionWith(t.components,i.components,n.unifyComponents))),!0)):e.isEqual(t,i),logicVariablesTable:e=>({type:"htmlelement",tag:"div",content:'<p>The following variables are available in all scripts.</p><table class="table table-bordered table-condensed table-striped">'+(e=e||"")+'<tr><th>form</th><td>The complete form JSON object</td></tr><tr><th>submission</th><td>The complete submission object.</td></tr><tr><th>data</th><td>The complete submission data object.</td></tr><tr><th>row</th><td>Contextual "row" data, used within DataGrid, EditGrid, and Container components</td></tr><tr><th>component</th><td>The current component JSON</td></tr><tr><th>instance</th><td>The current component instance.</td></tr><tr><th>value</th><td>The current value of the component.</td></tr><tr><th>moment</th><td>The moment.js library for date manipulation.</td></tr><tr><th>_</th><td>An instance of <a href="https://lodash.com/docs/" target="_blank">Lodash</a>.</td></tr><tr><th>utils</th><td>An instance of the <a href="http://formio.github.io/formio.js/docs/identifiers.html#utils" target="_blank">FormioUtils</a> object.</td></tr><tr><th>util</th><td>An alias for "utils".</td></tr></table><br/>'}),javaScriptValue(e,n,i,o,s,r,a){return{type:"panel",title:e,theme:"default",collapsible:!0,collapsed:!0,key:`${n}Panel`,weight:o,components:[this.logicVariablesTable(a),{type:"panel",title:"JavaScript",collapsible:!0,collapsed:!1,style:{"margin-bottom":"10px"},key:`${n}-js`,customConditional:()=>!t.noeval,components:[{type:"textarea",key:n,rows:5,editor:"ace",hideLabel:!0,input:!0},{type:"htmlelement",tag:"div",content:`<p>Enter custom javascript code.</p>${s}`}]},{type:"panel",title:"JSONLogic",collapsible:!0,collapsed:!0,key:`${n}-json`,components:[{type:"htmlelement",tag:"div",content:'<p>Execute custom logic using <a href="http://jsonlogic.com/" target="_blank">JSONLogic</a>.</p><p>Full <a href="https://lodash.com/docs" target="_blank">Lodash</a> support is provided using an "_" before each operation, such as <code>{"_sum": {var: "data.a"}}</code></p>'+r},{type:"textarea",key:i,rows:5,editor:"ace",hideLabel:!0,as:"json",input:!0}]}]}}};return n}),e("skylark-formio/components/_classes/component/editForm/Component.edit.conditional",["./utils","../../../../utils/utils"],function(e,t){"use strict";return[{type:"panel",title:"Simple",key:"simple-conditional",theme:"default",components:[{type:"select",input:!0,label:"This component should Display:",key:"conditional.show",dataSrc:"values",data:{values:[{label:"True",value:"true"},{label:"False",value:"false"}]}},{type:"select",input:!0,label:"When the form component:",key:"conditional.when",dataSrc:"custom",valueProperty:"value",data:{custom:e=>t.getContextComponents(e)}},{type:"textfield",input:!0,label:"Has the value:",key:"conditional.eq"}]},e.javaScriptValue("Advanced Conditions","customConditional","conditional.json",110,"<p>You must assign the <strong>show</strong> variable a boolean result.</p><p><strong>Note: Advanced Conditional logic will override the results of the Simple Conditional logic.</strong></p><h5>Example</h5><pre>show = !!data.showMe;</pre>",'<p><a href="http://formio.github.io/formio.js/app/examples/conditions.html" target="_blank">Click here for an example</a></p>')]}),e("skylark-formio/components/_classes/component/editForm/Component.edit.data",["./utils"],function(e){"use strict";return[{weight:0,type:"checkbox",label:"Multiple Values",tooltip:"Allows multiple values to be entered for this field.",key:"multiple",input:!0},{type:"textfield",label:"Default Value",key:"defaultValue",weight:5,placeholder:"Default Value",tooltip:"The will be the value for this field, before user interaction. Having a default value will override the placeholder text.",input:!0},{weight:30,type:"radio",label:"Persistent",tooltip:"A persistent field will be stored in database when the form is submitted.",key:"persistent",input:!0,inline:!0,defaultValue:!0,values:[{label:"None",value:!1},{label:"Server",value:!0},{label:"Client",value:"client-only"}]},{weight:150,type:"checkbox",label:"Protected",tooltip:"A protected field will not be returned when queried via API.",key:"protected",input:!0},{type:"checkbox",input:!0,weight:200,key:"dbIndex",label:"Database Index",tooltip:"Set this field as an index within the database. Increases performance for submission queries."},{weight:400,type:"checkbox",label:"Encrypted (Enterprise Only)",tooltip:"Encrypt this field on the server. This is two way encryption which is not suitable for passwords.",key:"encrypted",input:!0},{type:"select",input:!0,key:"redrawOn",label:"Redraw On",weight:600,tooltip:"Redraw this component if another component changes. This is useful if interpolating parts of the component like the label.",dataSrc:"custom",valueProperty:"value",data:{custom(e){var t=[];return t.push({label:"Any Change",value:"data"}),e.utils.eachComponent(e.instance.options.editForm.components,function(n,i){n.key!==e.data.key&&t.push({label:n.label||n.key,value:i})}),t}},conditional:{json:{"!":[{var:"data.dataSrc"}]}}},{weight:700,type:"checkbox",label:"Clear Value When Hidden",key:"clearOnHide",defaultValue:!0,tooltip:"When a field is hidden, clear the value.",input:!0},e.javaScriptValue("Custom Default Value","customDefaultValue","customDefaultValue",1e3,'<p><h4>Example:</h4><pre>value = data.firstName + " " + data.lastName;</pre></p>','<p><h4>Example:</h4><pre>{"cat": [{"var": "data.firstName"}, " ", {"var": "data.lastName"}]}</pre>'),e.javaScriptValue("Calculated Value","calculateValue","calculateValue",1100,"<p><h4>Example:</h4><pre>value = data.a + data.b + data.c;</pre></p>",'<p><h4>Example:</h4><pre>{"+": [{"var": "data.a"}, {"var": "data.b"}, {"var": "data.c"}]}</pre><p><a target="_blank" href="http://formio.github.io/formio.js/app/examples/calculated.html">Click here for an example</a></p>',"<tr><th>token</th><td>The decoded JWT token for the authenticated user.</td></tr>"),{type:"checkbox",input:!0,weight:1100,key:"calculateServer",label:"Calculate Value on server",tooltip:"Checking this will run the calculation on the server. This is useful if you wish to override the values submitted with the calculations performed on the server."},{type:"checkbox",input:!0,weight:1200,key:"allowCalculateOverride",label:"Allow Manual Override of Calculated Value",tooltip:"When checked, this will allow the user to manually override the calculated value."}]}),e("skylark-formio/components/_classes/component/editForm/Component.edit.api",[],function(){"use strict";return[{weight:0,type:"textfield",input:!0,key:"key",label:"Property Name",tooltip:"The name of this field in the API endpoint.",validate:{pattern:"(\\w|\\w[\\w-.]*\\w)",patternMessage:"The property name must only contain alphanumeric characters, underscores, dots and dashes and should not be ended by dash or dot."}},{weight:100,type:"tags",input:!0,label:"Field Tags",storeas:"array",tooltip:"Tag the field for use in custom logic.",key:"tags"},{weight:200,type:"datamap",label:"Custom Properties",tooltip:"This allows you to configure any custom properties for this component.",key:"properties",valueComponent:{type:"textfield",key:"value",label:"Value",placeholder:"Value",input:!0}}]}),e("skylark-formio/components/_classes/component/editForm/Component.edit.display",[],function(){"use strict";return[{weight:0,type:"textfield",input:!0,key:"label",label:"Label",placeholder:"Field Label",tooltip:"The label for this field that will appear next to it.",validate:{required:!0}},{type:"select",input:!0,key:"labelPosition",label:"Label Position",tooltip:"Position for the label for this field.",weight:20,defaultValue:"top",dataSrc:"values",data:{values:[{label:"Top",value:"top"},{label:"Left (Left-aligned)",value:"left-left"},{label:"Left (Right-aligned)",value:"left-right"},{label:"Right (Left-aligned)",value:"right-left"},{label:"Right (Right-aligned)",value:"right-right"},{label:"Bottom",value:"bottom"}]}},{type:"number",input:!0,key:"labelWidth",label:"Label Width",tooltip:"The width of label on line in percentages.",clearOnHide:!1,weight:30,placeholder:"30",suffix:"%",validate:{min:0,max:100},conditional:{json:{and:[{"!==":[{var:"data.labelPosition"},"top"]},{"!==":[{var:"data.labelPosition"},"bottom"]}]}}},{type:"number",input:!0,key:"labelMargin",label:"Label Margin",tooltip:"The width of label margin on line in percentages.",clearOnHide:!1,weight:30,placeholder:"3",suffix:"%",validate:{min:0,max:100},conditional:{json:{and:[{"!==":[{var:"data.labelPosition"},"top"]},{"!==":[{var:"data.labelPosition"},"bottom"]}]}}},{weight:100,type:"textfield",input:!0,key:"placeholder",label:"Placeholder",placeholder:"Placeholder",tooltip:"The placeholder text that will appear when this field is empty."},{weight:200,type:"textarea",input:!0,key:"description",label:"Description",placeholder:"Description for this field.",tooltip:"The description is text that will appear below the input field.",editor:"ace",as:"html",wysiwyg:{minLines:3}},{weight:300,type:"textarea",input:!0,key:"tooltip",label:"Tooltip",placeholder:"To add a tooltip to this field, enter text here.",tooltip:"Adds a tooltip to the side of this field.",editor:"ace",as:"html",wysiwyg:{minLines:3}},{weight:500,type:"textfield",input:!0,key:"customClass",label:"Custom CSS Class",placeholder:"Custom CSS Class",tooltip:"Custom CSS class to add to this component."},{weight:600,type:"textfield",input:!0,key:"tabindex",label:"Tab Index",placeholder:"0",tooltip:"Sets the tabindex attribute of this component to override the tab order of the form. See the <a href='https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex'>MDN documentation</a> on tabindex for more information."},{weight:1100,type:"checkbox",label:"Hidden",tooltip:"A hidden field is still a part of the form, but is hidden from view.",key:"hidden",input:!0},{weight:1200,type:"checkbox",label:"Hide Label",tooltip:"Hide the label of this component. This allows you to show the label in the form builder, but not when it is rendered.",key:"hideLabel",input:!0},{weight:1350,type:"checkbox",label:"Initial Focus",tooltip:"Make this field the initially focused element on this form.",key:"autofocus",input:!0},{weight:1370,type:"checkbox",label:"Show Label in DataGrid",tooltip:"Show the label when in a Datagrid.",key:"dataGridLabel",input:!0,customConditional:e=>e.instance.options.editComponent.inDataGrid},{weight:1400,type:"checkbox",label:"Disabled",tooltip:"Disable the form input.",key:"disabled",input:!0},{weight:1500,type:"checkbox",label:"Table View",tooltip:"Shows this value within the table view of the submissions.",key:"tableView",input:!0},{weight:1600,type:"checkbox",label:"Modal Edit",tooltip:"Opens up a modal to edit the value of this component.",key:"modalEdit",input:!0}]}),e("skylark-formio/components/_classes/component/editForm/Component.edit.logic",["../../../../utils/utils"],function(e){"use strict";return[{weight:0,input:!0,label:"Advanced Logic",key:"logic",templates:{header:'<div class="row"> \n  <div class="col-sm-6">\n    <strong>{{ value.length }} Advanced Logic Configured</strong>\n  </div>\n</div>',row:'<div class="row"> \n  <div class="col-sm-6">\n    <div>{{ row.name }} </div>\n  </div>\n  <div class="col-sm-2"> \n    <div class="btn-group pull-right"> \n      <div class="btn btn-default editRow">Edit</div> \n      <div class="btn btn-danger removeRow">Delete</div> \n    </div> \n  </div> \n</div>',footer:""},type:"editgrid",addAnother:"Add Logic",saveRow:"Save Logic",components:[{weight:0,input:!0,inputType:"text",label:"Logic Name",key:"name",validate:{required:!0},type:"textfield"},{weight:10,key:"triggerPanel",input:!1,title:"Trigger",tableView:!1,components:[{weight:0,input:!0,tableView:!1,components:[{weight:0,input:!0,label:"Type",key:"type",tableView:!1,data:{values:[{value:"simple",label:"Simple"},{value:"javascript",label:"Javascript"},{value:"json",label:"JSON Logic"},{value:"event",label:"Event"}]},dataSrc:"values",template:"<span>{{ item.label }}</span>",type:"select"},{weight:10,label:"",key:"simple",type:"container",tableView:!1,customConditional:({row:e})=>"simple"===e.type,components:[{input:!0,key:"show",label:"Show",type:"hidden",tableView:!1,calculateValue:()=>!0},{type:"select",input:!0,label:"When the form component:",key:"when",dataSrc:"custom",valueProperty:"value",tableView:!1,data:{custom:t=>e.getContextComponents(t)}},{type:"textfield",input:!0,label:"Has the value:",key:"eq",tableView:!1}]},{weight:10,type:"textarea",key:"javascript",rows:5,editor:"ace",input:!0,tableView:!1,placeholder:"result = (data['mykey'] > 1);",description:'"row", "data", and "component" variables are available. Return "result".',customConditional:({row:e})=>"javascript"===e.type},{weight:10,type:"textarea",key:"json",rows:5,editor:"ace",label:"JSON Logic",as:"json",input:!0,tableView:!1,placeholder:"{ ... }",description:'"row", "data", "component" and "_" variables are available. Return the result to be passed to the action if truthy.',customConditional:({row:e})=>"json"===e.type},{weight:10,type:"textfield",key:"event",label:"Event Name",placeholder:"event",description:"The event that will trigger this logic. You can trigger events externally or via a button.",tableView:!1,customConditional:({row:e})=>"event"===e.type}],key:"trigger",type:"container"}],type:"panel"},{weight:20,input:!0,label:"Actions",key:"actions",tableView:!1,templates:{header:'<div class="row"> \n  <div class="col-sm-6"><strong>{{ value.length }} actions</strong></div>\n</div>',row:'<div class="row"> \n  <div class="col-sm-6">\n    <div>{{ row.name }} </div>\n  </div>\n  <div class="col-sm-2"> \n    <div class="btn-group pull-right"> \n      <div class="btn btn-default editRow">Edit</div> \n      <div class="btn btn-danger removeRow">Delete</div> \n    </div> \n  </div> \n</div>',footer:""},type:"editgrid",addAnother:"Add Action",saveRow:"Save Action",components:[{weight:0,title:"Action",input:!1,key:"actionPanel",type:"panel",components:[{weight:0,input:!0,inputType:"text",label:"Action Name",key:"name",validate:{required:!0},type:"textfield"},{weight:10,input:!0,label:"Type",key:"type",data:{values:[{value:"property",label:"Property"},{value:"value",label:"Value"},{label:"Merge Component Schema",value:"mergeComponentSchema"}]},dataSrc:"values",template:"<span>{{ item.label }}</span>",type:"select"},{weight:20,type:"select",template:"<span>{{ item.label }}</span>",dataSrc:"json",tableView:!1,data:{json:[{label:"Hidden",value:"hidden",type:"boolean"},{label:"Required",value:"validate.required",type:"boolean"},{label:"Disabled",value:"disabled",type:"boolean"},{label:"Label",value:"label",type:"string"},{label:"Title",value:"title",type:"string"},{label:"Prefix",value:"prefix",type:"string"},{label:"Suffix",value:"suffix",type:"string"},{label:"Tooltip",value:"tooltip",type:"string"},{label:"Description",value:"description",type:"string"},{label:"Placeholder",value:"placeholder",type:"string"},{label:"Input Mask",value:"inputMask",type:"string"},{label:"CSS Class",value:"className",type:"string"},{label:"Container Custom Class",value:"customClass",type:"string"}]},key:"property",label:"Component Property",input:!0,customConditional:({row:e})=>"property"===e.type},{weight:30,input:!0,label:"Set State",key:"state",tableView:!1,data:{values:[{label:"True",value:"true"},{label:"False",value:"false"}]},dataSrc:"values",template:"<span>{{ item.label }}</span>",type:"select",customConditional:({row:e})=>"property"===e.type&&e.hasOwnProperty("property")&&"boolean"===e.property.type},{weight:30,type:"textfield",key:"text",label:"Text",inputType:"text",input:!0,tableView:!1,description:'Can use templating with {{ data.myfield }}. "data", "row", "component" and "result" variables are available.',customConditional:({row:e})=>"property"===e.type&&e.hasOwnProperty("property")&&"string"===e.property.type&&!e.property.component},{weight:20,input:!0,label:"Value (Javascript)",key:"value",editor:"ace",rows:5,placeholder:"value = data.myfield;",type:"textarea",tableView:!1,description:'"row", "data", "component", and "result" variables are available. Return the value.',customConditional:({row:e})=>"value"===e.type},{weight:20,input:!0,label:"Schema Defenition",key:"schemaDefinition",editor:"ace",rows:5,placeholder:"schema = { label: 'Updated' };",type:"textarea",tableView:!1,description:'"row", "data", "component", and "result" variables are available. Return the schema.',customConditional:({row:e})=>"mergeComponentSchema"===e.type}]}]}]}]}),e("skylark-formio/components/_classes/component/editForm/Component.edit.validation",["./utils","../../../../utils/Evaluator"],function(e,t){"use strict";return[{weight:10,type:"checkbox",label:"Required",tooltip:"A required field must be filled in before the form can be submitted.",key:"validate.required",input:!0},{weight:100,type:"checkbox",label:"Unique",tooltip:"Makes sure the data submitted for this field is unique, and has not been submitted before.",key:"unique",input:!0},{weight:0,type:"select",key:"validateOn",defaultValue:"change",input:!0,label:"Validate On",tooltip:"Determines when this component should trigger front-end validation.",dataSrc:"values",data:{values:[{label:"Change",value:"change"},{label:"Blur",value:"blur"}]}},{weight:190,type:"textfield",input:!0,key:"errorLabel",label:"Error Label",placeholder:"Error Label",tooltip:"The label for this field when an error occurs."},{weight:200,key:"validate.customMessage",label:"Custom Error Message",placeholder:"Custom Error Message",type:"textfield",tooltip:"Error message displayed if any error occurred.",input:!0},{type:"panel",title:"Custom Validation",collapsible:!0,collapsed:!0,style:{"margin-bottom":"10px"},key:"custom-validation-js",weight:300,customConditional:()=>!t.noeval,components:[e.logicVariablesTable("<tr><th>input</th><td>The value that was input into this component</td></tr>"),{type:"textarea",key:"validate.custom",rows:5,editor:"ace",hideLabel:!0,input:!0},{type:"htmlelement",tag:"div",content:"\n          <small>\n            <p>Enter custom validation code.</p>\n            <p>You must assign the <strong>valid</strong> variable as either <strong>true</strong> or an error message if validation fails.</p>\n            <h5>Example:</h5>\n            <pre>valid = (input === 'Joe') ? true : 'Your name must be \"Joe\"';</pre>\n          </small>"},{type:"well",components:[{weight:100,type:"checkbox",label:"Secret Validation",tooltip:"Check this if you wish to perform the validation ONLY on the server side. This keeps your validation logic private and secret.",description:"Check this if you wish to perform the validation ONLY on the server side. This keeps your validation logic private and secret.",key:"validate.customPrivate",input:!0}]}]},{type:"panel",title:"JSONLogic Validation",collapsible:!0,collapsed:!0,key:"json-validation-json",weight:400,components:[{type:"htmlelement",tag:"div",content:'<p>Execute custom logic using <a href="http://jsonlogic.com/" target="_blank">JSONLogic</a>.</p><h5>Example:</h5><pre>'+JSON.stringify({if:[{"===":[{var:"input"},"Bob"]},!0,"Your name must be 'Bob'!"]},null,2)+"</pre>"},{type:"textarea",key:"validate.json",hideLabel:!0,rows:5,editor:"ace",as:"json",input:!0}]}]}),e("skylark-formio/components/_classes/component/editForm/Component.edit.layout",[],function(){"use strict";return[{label:"HTML Attributes",type:"datamap",input:!0,key:"attributes",keyLabel:"Attribute Name",valueComponent:{type:"textfield",key:"value",label:"Attribute Value",input:!0},tooltip:"Provide a map of HTML attributes for component's input element (attributes provided by other component settings or other attributes generated by form.io take precedence over attributes in this grid)",addAnother:"Add Attribute"},{type:"panel",legend:"PDF Overlay",title:"PDF Overlay",key:"overlay",weight:2e3,collapsible:!0,collapsed:!0,components:[{type:"textfield",input:!0,key:"overlay.style",label:"Style",placeholder:"",tooltip:"Custom styles that should be applied to this component when rendered in PDF."},{type:"textfield",input:!0,key:"overlay.page",label:"Page",placeholder:"",tooltip:"The PDF page to place this component."},{type:"textfield",input:!0,key:"overlay.left",label:"Left",placeholder:"",tooltip:"The left margin within a page to place this component."},{type:"textfield",input:!0,key:"overlay.top",label:"Top",placeholder:"",tooltip:"The top margin within a page to place this component."},{type:"textfield",input:!0,key:"overlay.width",label:"Width",placeholder:"",tooltip:"The width of the component (in pixels)."},{type:"textfield",input:!0,key:"overlay.height",label:"Height",placeholder:"",tooltip:"The height of the component (in pixels)."}]}]}),e("skylark-formio/components/_classes/component/Component.form",["skylark-lodash","./editForm/Component.edit.conditional","./editForm/Component.edit.data","./editForm/Component.edit.api","./editForm/Component.edit.display","./editForm/Component.edit.logic","./editForm/Component.edit.validation","./editForm/Component.edit.layout","./editForm/utils"],function(e,t,n,i,o,s,r,a,l){"use strict";return function(...c){const d=e.cloneDeep([{type:"tabs",key:"tabs",components:[{label:"Display",key:"display",weight:0,components:o},{label:"Data",key:"data",weight:10,components:n},{label:"Validation",key:"validation",weight:20,components:r},{label:"API",key:"api",weight:30,components:i},{label:"Conditional",key:"conditional",weight:40,components:t},{label:"Logic",key:"logic",weight:50,components:s},{label:"Layout",key:"layout",weight:60,components:a}]}]).concat(c.map(t=>({type:"tabs",key:"tabs",components:e.cloneDeep(t)})));return{components:e.unionWith(d,l.unifyComponents).concat({type:"hidden",key:"type"})}}}),e("skylark-formio/components/address/editForm/Address.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{type:"address",label:"Default Value",key:"defaultValue",weight:5,placeholder:"Default Value",tooltip:"The will be the value for this field, before user interaction. Having a default value will override the placeholder text.",input:!0,customDefaultValue:({instance:e})=>e.manualModeEnabled?{mode:"autocomplete",address:{}}:{}}]}),e("skylark-formio/components/address/editForm/Address.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{weight:20,type:"checkbox",input:!0,key:"enableManualMode",label:"Enable Manual Mode",tooltip:"Should Manual Mode be enabled for that component or not."},{weight:30,type:"textfield",input:!0,key:"switchToManualModeLabel",label:"Switch To Matual Mode Label",placeholder:"Switch To Matual Mode Label",tooltip:"The label for the checkbox used to switch to manual mode.",validate:{required:!0},customConditional:({data:e})=>Boolean(e.enableManualMode)},{weight:40,type:"checkbox",input:!0,key:"disableClearIcon",label:"Disable Clear Icon",tooltip:"Clear Icon allows easily clear component's value."}]}),e("skylark-formio/components/address/editForm/Address.edit.provider",["skylark-lodash","../../../Formio"],function(e,t){"use strict";return[{type:"select",input:!0,key:"provider",label:"Provider",placeholder:"Select your address search provider",weight:0,tooltip:"Which address search service should be used.",valueProperty:"value",dataSrc:"custom",data:{custom:()=>e.values(t.Providers.getProviders("address")).sort().map(e=>({label:e.displayName,value:e.name}))},validate:{required:!0}},{type:"textfield",input:!0,key:"providerOptions.params['subscription-key']",label:"Subscription Key",placeholder:"Enter Subscription Key",weight:10,tooltip:"Use your Azure Maps subscription key here.",validate:{required:!0},conditional:{json:{"===":[{var:"data.provider"},"azure"]}}},{type:"textfield",input:!0,key:"providerOptions.url",label:"Url",placeholder:"Enter Url",weight:10,tooltip:"Url to the service which should be used to search addresses for autocomplete.",validate:{required:!0},conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.queryProperty",label:"Query Property",defaultValue:"query",placeholder:"Enter Query Property",weight:20,tooltip:"Which query param should be used to pass as a search string. Default is `query`.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.responseProperty",label:"Response Property",placeholder:"Enter Response Property",weight:30,tooltip:"The property within the response data, where iterable addresses reside. For example: results.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.displayValueProperty",label:"Display Value Property",placeholder:"Display Value Property",weight:40,tooltip:"The property of each address in the response to use as the display value.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textarea",input:!0,key:"providerOptions.params",label:"Params",placeholder:"{ ... }",weight:50,rows:5,editor:"ace",as:"json",tooltip:"Additional query params can be specified here in a way of JSON object.",conditional:{json:{"===":[{var:"data.provider"},"custom"]}}},{type:"textfield",input:!0,key:"providerOptions.params.key",label:"API Key",placeholder:"Enter API Key",weight:10,tooltip:"Use your Google API key here.",validate:{required:!0},conditional:{json:{"===":[{var:"data.provider"},"google"]}}},{type:"textfield",input:!0,key:"providerOptions.params.region",label:"Region",placeholder:"Enter Region",weight:20,tooltip:"Specify Region for Google Maps APIs.",conditional:{json:{"===":[{var:"data.provider"},"google"]}}},{type:"textarea",input:!0,key:"manualModeViewString",label:"Manual Mode View String",placeholder:"Enter Manual Mode View String",description:'"address" variable references component value, "data" - submission data and "component" - address component schema.',weight:60,rows:5,editor:"ace",tooltip:"Specify template which should be when quering view string for the component value entered in manual mode. This string is used in table view, CSV export and email rendering. When left blank combined value of all components joined with comma will be used."}]}),e("skylark-formio/components/address/Address.form",["../_classes/component/Component.form","./editForm/Address.edit.data","./editForm/Address.edit.display","./editForm/Address.edit.provider"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"data",components:t},{key:"display",components:n},{label:"Provider",key:"provider",weight:15,components:i}],...o)}}),e("skylark-formio/components/button/editForm/Button.edit.display",["../../../utils/builder","skylark-lodash"],function(e,t){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"hideLabel",ignore:!0},{type:"select",key:"action",label:"Action",input:!0,dataSrc:"values",weight:110,tooltip:"This is the action to be performed by this button.",data:{values:[{label:"Submit",value:"submit"},{label:"Save in state",value:"saveState"},{label:"Event",value:"event"},{label:"Custom",value:"custom"},{label:"Reset",value:"reset"},{label:"OAuth",value:"oauth"},{label:"POST to URL",value:"url"}]}},{type:"textfield",label:"Save in state",key:"state",weight:112,tooltip:'The state you wish to save the submission under when this button is pressed. Example "draft" would save the submission in Draft Mode.',placeholder:"submitted",input:!0,conditional:{json:{"===":[{var:"data.action"},"saveState"]}}},{type:"checkbox",input:!0,inputType:"checkbox",key:"showValidations",label:"Show Validations",weight:115,tooltip:"When the button is pressed, show any validation errors on the form.",conditional:{json:{"!==":[{var:"data.action"},"submit"]}}},{type:"textfield",label:"Button Event",key:"event",input:!0,weight:120,tooltip:"The event to fire when the button is clicked.",conditional:{json:{"===":[{var:"data.action"},"event"]}}},{type:"textfield",inputType:"url",key:"url",input:!0,weight:120,label:"Button URL",tooltip:"The URL where the submission will be sent.",placeholder:"https://example.form.io",conditional:{json:{"===":[{var:"data.action"},"url"]}}},{type:"datagrid",key:"headers",input:!0,weight:130,label:"Headers",addAnother:"Add Header",tooltip:"Headers Properties and Values for your request",components:[{key:"header",label:"Header",input:!0,type:"textfield"},{key:"value",label:"Value",input:!0,type:"textfield"}],conditional:{json:{"===":[{var:"data.action"},"url"]}}},{type:"textarea",key:"custom",label:"Button Custom Logic",tooltip:"The custom logic to evaluate when the button is clicked.",rows:5,editor:"ace",input:!0,weight:120,placeholder:"data['mykey'] = data['anotherKey'];",conditional:{json:{"===":[{var:"data.action"},"custom"]}}},{type:"select",key:"theme",label:"Theme",input:!0,tooltip:"The color theme of this button.",dataSrc:"values",weight:140,data:{values:[{label:"Primary",value:"primary"},{label:"Secondary",value:"secondary"},{label:"Info",value:"info"},{label:"Success",value:"success"},{label:"Danger",value:"danger"},{label:"Warning",value:"warning"}]}},{type:"select",key:"size",label:"Size",input:!0,tooltip:"The size of this button.",dataSrc:"values",weight:150,data:{values:[{label:"Extra Small",value:"xs"},{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}]}},{type:"textfield",key:"leftIcon",label:"Left Icon",input:!0,placeholder:"Enter icon classes",tooltip:"This is the full icon class string to show the icon. Example: 'fa fa-plus'",weight:160},{type:"textfield",key:"rightIcon",label:"Right Icon",input:!0,placeholder:"Enter icon classes",tooltip:"This is the full icon class string to show the icon. Example: 'fa fa-plus'",weight:170},{type:"select",input:!0,weight:180,label:"Shortcut",key:"shortcut",tooltip:"Shortcut for this component.",dataSrc:"custom",valueProperty:"value",customDefaultValue:()=>"",template:"{{ item.label }}",data:{custom:n=>e.getAvailableShortcuts(t.get(n,"instance.options.editForm",{}),t.get(n,"instance.options.editComponent",{}))}},{type:"checkbox",key:"block",label:"Block Button",input:!0,weight:155,tooltip:"This control should span the full width of the bounding container."},{type:"checkbox",key:"disableOnInvalid",label:"Disable on Form Invalid",tooltip:"This will disable this field if the form is invalid.",input:!0,weight:620}]}),e("skylark-formio/components/button/Button.form",["../_classes/component/Component.form","./editForm/Button.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t},{key:"data",ignore:!0},{key:"validation",ignore:!0}],...n)}}),e("skylark-formio/components/checkbox/editForm/Checkbox.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0}]}),e("skylark-formio/components/checkbox/editForm/Checkbox.edit.display",["../../../utils/builder","skylark-lodash"],function(e,t){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{type:"select",input:!0,weight:350,label:"Shortcut",key:"shortcut",tooltip:"Shortcut for this component.",dataSrc:"custom",valueProperty:"value",customDefaultValue:()=>"",template:"{{ item.label }}",data:{custom:n=>e.getAvailableShortcuts(t.get(n,"instance.options.editForm",{}),t.get(n,"instance.options.editComponent",{}))}},{type:"select",input:!0,key:"inputType",label:"Input Type",tooltip:"This is the input type used for this checkbox.",dataSrc:"values",weight:410,data:{values:[{label:"Checkbox",value:"checkbox"},{label:"Radio",value:"radio"}]}},{type:"textfield",input:!0,key:"name",label:"Radio Key",tooltip:"The key used to trigger the radio button toggle.",weight:420,conditional:{json:{"===":[{var:"data.inputType"},"radio"]}}},{type:"textfield",input:!0,label:"Radio Value",key:"value",tooltip:"The value used with this radio button.",weight:430,conditional:{json:{"===":[{var:"data.inputType"},"radio"]}}}]}),e("skylark-formio/components/checkbox/editForm/Checkbox.edit.validation",[],function(){"use strict";return[{key:"validateOn",ignore:!0},{key:"unique",ignore:!0}]}),e("skylark-formio/components/checkbox/Checkbox.form",["../_classes/component/Component.form","./editForm/Checkbox.edit.data","./editForm/Checkbox.edit.display","./editForm/Checkbox.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"data",components:t},{key:"display",components:n},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/_classes/nested/NestedComponent.form",["../component/Component.form"],function(e){"use strict";return function(...t){return e([{key:"data",ignore:!0},{key:"validation",ignore:!0}],...t)}}),e("skylark-formio/components/columns/editForm/Columns.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"autofocus",ignore:!0},{key:"tabindex",ignore:!0},{key:"disabled",ignore:!0},{weight:150,type:"datagrid",input:!0,key:"columns",label:"Column Properties",addAnother:"Add Column",tooltip:"The width, offset, push, and pull settings for each column.",reorder:!0,components:[{type:"hidden",key:"components",defaultValue:[]},{type:"select",key:"size",defaultValue:"md",label:"Size",data:{values:[{label:"xs",value:"xs"},{label:"sm",value:"sm"},{label:"md",value:"md"},{label:"lg",value:"lg"},{label:"xl",value:"xl"}]}},{type:"number",key:"width",defaultValue:6,label:"Width"},{type:"number",key:"offset",defaultValue:0,label:"Offset"},{type:"number",key:"push",defaultValue:0,label:"Push"},{type:"number",key:"pull",defaultValue:0,label:"Pull"}]},{weight:160,type:"checkbox",label:"Auto adjust columns",tooltip:"Will automatically adjust columns based on if nested components are hidden.",key:"autoAdjust",input:!0},{weight:161,type:"checkbox",label:"Hide Column when Children Hidden",key:"hideOnChildrenHidden",tooltip:"Check this if you would like to hide any column when the children within that column are also hidden",input:!0}]}),e("skylark-formio/components/columns/Columns.form",["../_classes/nested/NestedComponent.form","./editForm/Columns.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t}],...n)}}),e("skylark-formio/components/container/editForm/Container.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"autofocus",ignore:!0},{key:"tabindex",ignore:!0}]}),e("skylark-formio/components/container/editForm/Container.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{key:"allowCalculateOverride",ignore:!0},{key:"defaultValue",ignore:!0}]}),e("skylark-formio/components/container/Container.form",["../_classes/component/Component.form","./editForm/Container.edit.display","./editForm/Container.edit.data"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"data",components:n}],...i)}}),e("skylark-formio/components/content/editForm/Content.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"disabled",ignore:!0},{key:"tabindex",ignore:!0},{weight:700,type:"checkbox",label:"Refresh On Change",tooltip:"Rerender the field whenever a value on the form changes.",key:"refreshOnChange",input:!0}]}),e("skylark-formio/components/content/editForm/Content.edit.logic",[],function(){"use strict";return[{key:"logic",components:[{key:"actions",components:[{key:"actionPanel",components:[{data:{json:[{label:"Hidden",value:"hidden",type:"boolean"},{label:"Required",value:"validate.required",type:"boolean"},{label:"Disabled",value:"disabled",type:"boolean"},{label:"Label",value:"label",type:"string"},{label:"Title",value:"title",type:"string"},{label:"Tooltip",value:"tooltip",type:"string"},{label:"Description",value:"description",type:"string"},{label:"Placeholder",value:"placeholder",type:"string"},{label:"CSS Class",value:"className",type:"string"},{label:"Container Custom Class",value:"customClass",type:"string"},{label:"Content",value:"html",type:"string",component:"content"}]},key:"property"},{type:"textarea",editor:"ace",rows:10,as:"html",label:"Content",tooltip:"The content of this HTML element.",defaultValue:'<div class="well">Content</div>',key:"content",weight:30,input:!0,customConditional:e=>"property"===e.row.type&&e.row.hasOwnProperty("property")&&"string"===e.row.property.type&&"content"===e.row.property.component}]}]}]}]}),e("skylark-formio/components/content/Content.form",["../_classes/component/Component.form","./editForm/Content.edit.display","./editForm/Content.edit.logic"],function(e,t,n){"use strict";return function(...i){const o=e([{key:"display",components:t},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"logic",components:n}],...i);return o.components=[{weight:0,type:"textarea",editor:"ckeditor",label:"Content",hideLabel:!0,input:!0,key:"html",as:"html",rows:3,tooltip:"The HTML template for the result data items."}].concat(o.components),o}}),e("skylark-formio/components/textfield/editForm/TextField.edit.data",[],function(){"use strict";return[{type:"select",label:"Input Format",key:"inputFormat",weight:105,placeholder:"Input Format",tooltip:"Force the output of this field to be sanitized in a specific format.",template:"<span>{{ item.label }}</span>",data:{values:[{value:"plain",label:"Plain"},{value:"html",label:"HTML"},{value:"raw",label:"Raw (Insecure)"}]},defaultValue:"plain",input:!0},{weight:200,type:"radio",label:"Text Case",key:"case",tooltip:"When data is entered, you can change the case of the value.",input:!0,values:[{value:"mixed",label:"Mixed (Allow upper and lower case)"},{value:"uppercase",label:"Uppercase"},{value:"lowercase",label:"Lowercase"}]}]}),e("skylark-formio/components/textfield/editForm/TextField.edit.display",["../../../widgets/index","skylark-lodash"],function(e,t){"use strict";return[{weight:400,type:"select",input:!0,key:"widget.type",label:"Widget",placeholder:"Select a widget",tooltip:"The widget is the display UI used to input the value of the field.",defaultValue:"input",onChange:e=>{e.data.widget=t.pick(e.data.widget,"type")},dataSrc:"values",data:{values:[{label:"Input Field",value:"input"},{label:"Calendar Picker",value:"calendar"}]},conditional:{json:{"===":[{var:"data.type"},"textfield"]}}},{weight:405,type:"textarea",key:"widget",label:"Widget Settings",refreshOn:"wiget.type",clearOnHide:!1,calculateValue:n=>{const{calculatedValue:i}=n.instance,{type:o}=n.data.widget;if(t.isEmpty(t.omit(n.data.widget,"type"))||t.isEmpty(t.omit(i,"type"))){if(i&&!i.type)return n.data.widget;const s=n.instance._currentForm.options.editComponent.widget;if(s&&!t.isEmpty(t.omit(s,"type"))&&o===s.type)return t.omit(s,"language");if(o)return t.omit(e[o].defaultSettings,"language")}return n.data.widget},input:!0,rows:5,editor:"ace",as:"json",conditional:{json:{"!==":[{var:"data.widget.type"},"input"]}}},{weight:410,type:"textfield",input:!0,key:"inputMask",label:"Input Mask",tooltip:"An input mask helps the user with input by ensuring a predefined format.<br><br>9: numeric<br>a: alphabetical<br>*: alphanumeric<br><br>Example telephone mask: (999) 999-9999<br><br>See the <a target='_blank' href='https://github.com/RobinHerbots/jquery.inputmask'>jquery.inputmask documentation</a> for more information.</a>",customConditional:e=>!e.data.allowMultipleMasks},{weight:413,type:"checkbox",input:!0,key:"allowMultipleMasks",label:"Allow Multiple Masks"},{weight:1350,type:"checkbox",input:!0,key:"spellcheck",defaultValue:!0,label:"Allow Spellcheck"},{weight:417,type:"datagrid",input:!0,key:"inputMasks",label:"Input Masks",customConditional:e=>!0===e.data.allowMultipleMasks,reorder:!0,components:[{type:"textfield",key:"label",label:"Label",input:!0},{type:"textfield",key:"mask",label:"Mask",input:!0}]},{weight:320,type:"textfield",input:!0,key:"prefix",label:"Prefix"},{weight:330,type:"textfield",input:!0,key:"suffix",label:"Suffix"},{weight:1300,type:"checkbox",label:"Hide Input",tooltip:"Hide the input in the browser. This does not encrypt on the server. Do not use for passwords.",key:"mask",input:!0},{weight:1200,type:"checkbox",label:"Show Word Counter",tooltip:"Show a live count of the number of words.",key:"showWordCount",input:!0},{weight:1201,type:"checkbox",label:"Show Character Counter",tooltip:"Show a live count of the number of characters.",key:"showCharCount",input:!0}]}),e("skylark-formio/components/textfield/editForm/TextField.edit.validation",[],function(){"use strict";return[{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0},{weight:125,key:"validate.minWords",label:"Minimum Word Length",placeholder:"Minimum Word Length",type:"number",tooltip:"The minimum amount of words that can be added to this field.",input:!0},{weight:126,key:"validate.maxWords",label:"Maximum Word Length",placeholder:"Maximum Word Length",type:"number",tooltip:"The maximum amount of words that can be added to this field.",input:!0},{weight:130,key:"validate.pattern",label:"Regular Expression Pattern",placeholder:"Regular Expression Pattern",type:"textfield",tooltip:"The regular expression pattern test that the field value must pass before the form can be submitted.",input:!0}]}),e("skylark-formio/components/textfield/TextField.form",["../_classes/component/Component.form","./editForm/TextField.edit.data","./editForm/TextField.edit.display","./editForm/TextField.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/currency/editForm/Currency.edit.display",[],function(){"use strict";return[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0},{type:"textfield",input:!0,weight:310,key:"prefix",label:"prefix",tooltip:"Specify the prefix symbol after the component (e.g.: USD, EUR)"},{type:"textfield",input:!0,weight:320,key:"suffix",label:"suffix",tooltip:"Specify the suffix symbol after the component (e.g.: USD, EUR)."}]}),e("skylark-formio/components/currency/editForm/Currency.edit.data",[],function(){return[{type:"select",input:!0,weight:50,key:"currency",label:"Currency",tooltip:"The currency to use in currency formatting. Possible values are (ISO-4217) currency codes.",defaultValue:"USD",dataSrc:"values",data:{values:[{label:"US Dollar (USD)",value:"USD"},{label:"Euro (EUR)",value:"EUR"},{label:"Pound Sterling (GBP)",value:"GBP"},{label:"Australian Dollar (AUD)",value:"AUD"},{label:"Afghani (AFN)",value:"AFN"},{label:"Lek (ALL)",value:"ALL"},{label:"Algerian Dinar (DZD)",value:"DZD"},{label:"Kwanza (AOA)",value:"AOA"},{label:"East Caribbean Dollar (XCD)",value:"XCD"},{label:"Argentine Peso (ARS)",value:"ARS"},{label:"Armenian Dram (AMD)",value:"AMD"},{label:"Aruban Florin (AWG)",value:"AWG"},{label:"Azerbaijan Manat (AZN)",value:"AZN"},{label:"Bahamian Dollar (BSD)",value:"BSD"},{label:"Bahraini Dinar (BHD)",value:"BHD"},{label:"Taka (BDT)",value:"BDT"},{label:"Barbados Dollar (BBD)",value:"BBD"},{label:"Belarusian Ruble (BYN)",value:"BYN"},{label:"Belize Dollar (BZD)",value:"BZD"},{label:"CFA Franc BCEAO (XOF)",value:"XOF"},{label:"Bermudian Dollar (BMD)",value:"BMD"},{label:"Indian Rupee (INR)",value:"INR"},{label:"Ngultrum (BTN)",value:"BTN"},{label:"Boliviano (BOB)",value:"BOB"},{label:"Mvdol (BOV)",value:"BOV"},{label:"Convertible Mark (BAM)",value:"BAM"},{label:"Pula (BWP)",value:"BWP"},{label:"Norwegian Krone (NOK)",value:"NOK"},{label:"Brazilian Real (BRL)",value:"BRL"},{label:"Brunei Dollar (BND)",value:"BND"},{label:"Bulgarian Lev (BGN)",value:"BGN"},{label:"Burundi Franc (BIF)",value:"BIF"},{label:"Cabo Verde Escudo (CVE)",value:"CVE"},{label:"Riel (KHR)",value:"KHR"},{label:"CFA Franc BEAC (XAF)",value:"XAF"},{label:"Canadian Dollar (CAD)",value:"CAD"},{label:"Cayman Islands Dollar (KYD)",value:"KYD"},{label:"Chilean Peso (CLP)",value:"CLP"},{label:"Unidad de Fomento (CLF)",value:"CLF"},{label:"Yuan Renminbi (CNY)",value:"CNY"},{label:"Colombian Peso (COP)",value:"COP"},{label:"Unidad de Valor Real (COU)",value:"COU"},{label:"Comorian Franc (KMF)",value:"KMF"},{label:"Congolese Franc (CDF)",value:"CDF"},{label:"New Zealand Dollar (NZD)",value:"NZD"},{label:"Costa Rican Colon (CRC)",value:"CRC"},{label:"Kuna (HRK)",value:"HRK"},{label:"Cuban Peso (CUP)",value:"CUP"},{label:"Peso Convertible (CUC)",value:"CUC"},{label:"Netherlands Antillean Guilder (ANG)",value:"ANG"},{label:"Czech Koruna (CZK)",value:"CZK"},{label:"Danish Krone (DKK)",value:"DKK"},{label:"Djibouti Franc (DJF)",value:"DJF"},{label:"Dominican Peso (DOP)",value:"DOP"},{label:"Egyptian Pound (EGP)",value:"EGP"},{label:"El Salvador Colon (SVC)",value:"SVC"},{label:"Nakfa (ERN)",value:"ERN"},{label:"Ethiopian Birr (ETB)",value:"ETB"},{label:"Falkland Islands Pound (FKP)",value:"FKP"},{label:"Fiji Dollar (FJD)",value:"FJD"},{label:"CFP Franc (XPF)",value:"XPF"},{label:"Dalasi (GMD)",value:"GMD"},{label:"Lari (GEL)",value:"GEL"},{label:"Ghana Cedi (GHS)",value:"GHS"},{label:"Gibraltar Pound (GIP)",value:"GIP"},{label:"Quetzal (GTQ)",value:"GTQ"},{label:"Guinean Franc (GNF)",value:"GNF"},{label:"Guyana Dollar (GYD)",value:"GYD"},{label:"Gourde (HTG)",value:"HTG"},{label:"Lempira (HNL)",value:"HNL"},{label:"Hong Kong Dollar (HKD)",value:"HKD"},{label:"Forint (HUF)",value:"HUF"},{label:"Iceland Krona (ISK)",value:"ISK"},{label:"Indian Rupee (INR)",value:"INR"},{label:"Rupiah (IDR)",value:"IDR"},{label:"SDR (Special Drawing Right) (XDR)",value:"XDR"},{label:"Iranian Rial (IRR)",value:"IRR"},{label:"Iraqi Dinar (IQD)",value:"IQD"},{label:"New Israeli Sheqel (ILS)",value:"ILS"},{label:"Jamaican Dollar (JMD)",value:"JMD"},{label:"Yen (JPY)",value:"JPY"},{label:"Jordanian Dinar (JOD)",value:"JOD"},{label:"Tenge (KZT)",value:"KZT"},{label:"Kenyan Shilling (KES)",value:"KES"},{label:"North Korean Won (KPW)",value:"KPW"},{label:"Won (KRW)",value:"KRW"},{label:"Kuwaiti Dinar (KWD)",value:"KWD"},{label:"Som (KGS)",value:"KGS"},{label:"Lao Kip (LAK)",value:"LAK"},{label:"Lebanese Pound (LBP)",value:"LBP"},{label:"Loti (LSL)",value:"LSL"},{label:"Rand (ZAR)",value:"ZAR"},{label:"Liberian Dollar (LRD)",value:"LRD"},{label:"Libyan Dinar (LYD)",value:"LYD"},{label:"Swiss Franc (CHF)",value:"CHF"},{label:"Pataca (MOP)",value:"MOP"},{label:"Denar (MKD)",value:"MKD"},{label:"Malagasy Ariary (MGA)",value:"MGA"},{label:"Malawi Kwacha (MWK)",value:"MWK"},{label:"Malaysian Ringgit (MYR)",value:"MYR"},{label:"Rufiyaa (MVR)",value:"MVR"},{label:"Ouguiya (MRU)",value:"MRU"},{label:"Mauritius Rupee (MUR)",value:"MUR"},{label:"ADB Unit of Account (XUA)",value:"XUA"},{label:"Mexican Peso (MXN)",value:"MXN"},{label:"Mexican Unidad de Inversion (UDI) (MXV)",value:"MXV"},{label:"Moldovan Leu (MDL)",value:"MDL"},{label:"Tugrik (MNT)",value:"MNT"},{label:"Moroccan Dirham (MAD)",value:"MAD"},{label:"Mozambique Metical (MZN)",value:"MZN"},{label:"Kyat (MMK)",value:"MMK"},{label:"Namibia Dollar (NAD)",value:"NAD"},{label:"Nepalese Rupee (NPR)",value:"NPR"},{label:"Cordoba Oro (NIO)",value:"NIO"},{label:"Naira (NGN)",value:"NGN"},{label:"Rial Omani (OMR)",value:"OMR"},{label:"Pakistan Rupee (PKR)",value:"PKR"},{label:"Balboa (PAB)",value:"PAB"},{label:"Kina (PGK)",value:"PGK"},{label:"Guarani (PYG)",value:"PYG"},{label:"Sol (PEN)",value:"PEN"},{label:"Philippine Peso (PHP)",value:"PHP"},{label:"Zloty (PLN)",value:"PLN"},{label:"Qatari Rial (QAR)",value:"QAR"},{label:"Romanian Leu (RON)",value:"RON"},{label:"Russian Ruble (RUB)",value:"RUB"},{label:"Rwanda Franc (RWF)",value:"RWF"},{label:"Saint Helena Pound (SHP)",value:"SHP"},{label:"Tala (WST)",value:"WST"},{label:"Dobra (STN)",value:"STN"},{label:"Saudi Riyal (SAR)",value:"SAR"},{label:"Serbian Dinar (RSD)",value:"RSD"},{label:"Seychelles Rupee (SCR)",value:"SCR"},{label:"Leone (SLL)",value:"SLL"},{label:"Singapore Dollar (SGD)",value:"SGD"},{label:"Sucre (XSU)",value:"XSU"},{label:"Solomon Islands Dollar (SBD)",value:"SBD"},{label:"Somali Shilling (SOS)",value:"SOS"},{label:"South Sudanese Pound (SSP)",value:"SSP"},{label:"Sri Lanka Rupee (LKR)",value:"LKR"},{label:"Sudanese Pound (SDG)",value:"SDG"},{label:"Surinam Dollar (SRD)",value:"SRD"},{label:"Lilangeni (SZL)",value:"SZL"},{label:"Swedish Krona (SEK)",value:"SEK"},{label:"WIR Euro (CHE)",value:"CHE"},{label:"WIR Franc (CHW)",value:"CHW"},{label:"Syrian Pound (SYP)",value:"SYP"},{label:"New Taiwan Dollar (TWD)",value:"TWD"},{label:"Somoni (TJS)",value:"TJS"},{label:"Tanzanian Shilling (TZS)",value:"TZS"},{label:"Baht (THB)",value:"THB"},{label:"Paanga (TOP)",value:"TOP"},{label:"Trinidad and Tobago Dollar (TTD)",value:"TTD"},{label:"Tunisian Dinar (TND)",value:"TND"},{label:"Turkish Lira (TRY)",value:"TRY"},{label:"Turkmenistan New Manat (TMT)",value:"TMT"},{label:"Uganda Shilling (UGX)",value:"UGX"},{label:"Hryvnia (UAH)",value:"UAH"},{label:"UAE Dirham (AED)",value:"AED"},{label:"US Dollar (Next day) (USN)",value:"USN"},{label:"Peso Uruguayo (UYU)",value:"UYU"},{label:"Uruguay Peso en Unidades Indexadas (UYI)",value:"UYI"},{label:"Unidad Previsional (UYW)",value:"UYW"},{label:"Uzbekistan Sum (UZS)",value:"UZS"},{label:"Vatu (VUV)",value:"VUV"},{label:"Bolvar Soberano (VES)",value:"VES"},{label:"Dong (VND)",value:"VND"},{label:"Yemeni Rial (YER)",value:"YER"},{label:"Zambian Kwacha (ZMW)",value:"ZMW"},{label:"Zimbabwe Dollar (ZWL),",value:"ZWL"}]}}]}),e("skylark-formio/components/currency/Currency.form",["../textfield/TextField.form","./editForm/Currency.edit.display","./editForm/Currency.edit.data"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"data",components:n},{key:"validation",components:[{key:"validate.minLength",ignore:!0},{key:"validate.maxLength",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0},{key:"validate.pattern",ignore:!0}]}],...i)}}),e("skylark-formio/components/datagrid/editForm/DataGrid.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0}]}),e("skylark-formio/components/datagrid/editForm/DataGrid.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0},{type:"checkbox",label:"Disable Adding / Removing Rows",key:"disableAddingRemovingRows",tooltip:"Check if you want to hide Add Another button and Remove Row button",weight:405,input:!0,clearOnHide:!1,customConditional:e=>!e.data.enableRowGroups,calculateValue:e=>!!e.data.enableRowGroups||e.data.disableAddingRemovingRows},{weight:406,type:"textarea",input:!0,key:"conditionalAddButton",label:"Conditional Add Button",placeholder:"show = ...",tooltip:"Specify condition when Add Button should be displayed.",editor:"ace",as:"js",wysiwyg:{minLines:3}},{type:"checkbox",label:"Allow Reorder",key:"reorder",weight:407,input:!0},{type:"textfield",label:"Add Another Text",key:"addAnother",tooltip:"Set the text of the Add Another button.",placeholder:"Add Another",weight:410,input:!0,customConditional:e=>!e.data.disableAddingRemovingRows},{type:"select",label:"Add Another Position",key:"addAnotherPosition",dataSrc:"values",tooltip:"Position for Add Another button with respect to Data Grid Array.",defaultValue:"bottom",input:!0,data:{values:[{label:"Top",value:"top"},{label:"Bottom",value:"bottom"},{label:"Both",value:"both"}]},weight:411,customConditional:e=>!e.data.disableAddingRemovingRows},{type:"checkbox",label:"Default Open Rows",key:"defaultOpen",tooltip:"Check this if you would like for the rows of the edit grid to be defaulted to opened if values exist.",weight:420,input:!0},{type:"checkbox",label:"Equal column width",key:"layoutFixed",weight:430,input:!0},{key:"enableRowGroups",type:"checkbox",label:"Enable Row Groups",weight:440,input:!0},{label:"Groups",disableAddingRemovingRows:!1,defaultOpen:!1,addAnother:"",addAnotherPosition:"bottom",mask:!1,tableView:!0,alwaysEnabled:!1,type:"datagrid",input:!0,key:"rowGroups",reorder:!0,components:[{label:"Label",allowMultipleMasks:!1,showWordCount:!1,showCharCount:!1,tableView:!0,alwaysEnabled:!1,type:"textfield",input:!0,key:"label",widget:{type:""},row:"0-0"},{label:"Number of Rows",mask:!1,tableView:!0,alwaysEnabled:!1,type:"number",input:!0,key:"numberOfRows",row:"0-1"}],weight:441,conditional:{json:{var:"data.enableRowGroups"}}},{label:"Hide Group on Header Click",type:"checkbox",input:!0,key:"groupToggle",weight:442,conditional:{json:{var:"data.enableRowGroups"}}}]}),e("skylark-formio/components/datagrid/editForm/DataGrid.edit.validation",[],function(){"use strict";return[{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0}]}),e("skylark-formio/components/datagrid/DataGrid.form",["../_classes/component/Component.form","./editForm/DataGrid.edit.data","./editForm/DataGrid.edit.display","./editForm/DataGrid.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/datamap/editForm/DataMap.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0}]}),e("skylark-formio/components/datamap/editForm/DataMap.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0},{key:"tabindex",ignore:!0},{type:"textfield",label:"Label for Key column",key:"keyLabel",tooltip:"Provide a label text for Key column (otherwise 'Key' will be used)",weight:404,input:!0},{type:"checkbox",label:"Disable Adding / Removing Rows",key:"disableAddingRemovingRows",tooltip:"Check if you want to hide Add Another button and Remove Row button",weight:405,input:!0},{type:"checkbox",label:"Show key column before value",key:"keyBeforeValue",tooltip:"Check if you would like to show the Key before the Value column.",weight:406,input:!0},{type:"textfield",label:"Add Another Text",key:"addAnother",tooltip:"Set the text of the Add Another button.",placeholder:"Add Another",weight:410,input:!0,customConditional:e=>!e.data.disableAddingRemovingRows}]}),e("skylark-formio/components/datamap/DataMap.form",["../_classes/component/Component.form","./editForm/DataMap.edit.data","./editForm/DataMap.edit.display"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:n},{key:"data",components:t}],...i)}}),e("skylark-formio/components/datetime/editForm/DateTime.edit.data",[],function(){"use strict";return[{type:"textfield",input:!0,key:"defaultDate",label:"Default Date",placeholder:"moment()",tooltip:"You can use Moment.js functions to set the default value to a specific date. For example: \n \n moment().subtract(10, 'days')",weight:6},{type:"textarea",as:"json",editor:"ace",weight:28,input:!0,key:"customOptions",label:"Flatpikr options",tooltip:"A raw JSON object to use as options for the Date / Time component (Flatpickr).",defaultValue:{}}]}),e("skylark-formio/components/datetime/editForm/DateTime.edit.date",["../../../utils/Evaluator","../../_classes/component/editForm/utils"],function(e,t){"use strict";return[{type:"checkbox",input:!0,key:"enableDate",label:"Enable Date Input",weight:0,tooltip:"Enables date input for this field."},{type:"checkbox",input:!0,key:"enableMinDateInput",label:"Use Input to add moment.js for minDate",persistent:!1,weight:0,tooltip:"Enables to use input for moment functions instead of calendar."},{type:"datetime",input:!0,key:"datePicker.minDate",label:"Use calendar to set minDate",weight:10,tooltip:"Enables to use calendar to set date.",customConditional:({data:e,component:t})=>(!t.datePicker||!t.datePicker.minDate||-1===t.datePicker.minDate.indexOf("moment"))&&!e.enableMinDateInput},{type:"textfield",input:!0,enableTime:!1,key:"datePicker.minDate",label:"Minimum Date",tooltip:"The minimum date that can be picked. You can also use Moment.js functions. For example: \n \n moment().subtract(10, 'days')",customConditional:({data:e,component:t})=>!(!t.datePicker||!t.datePicker.minDate||-1===t.datePicker.minDate.indexOf("moment"))||e.enableMinDateInput,weight:10},{type:"checkbox",input:!0,key:"enableMaxDateInput",label:"Use Input to add moment.js for maxDate",persistent:!1,weight:20,tooltip:"Enables to use input for moment functions instead of calendar."},{type:"textfield",input:!0,enableTime:!1,key:"datePicker.maxDate",label:"Maximum Date",tooltip:"The maximum date that can be picked. You can also use Moment.js functions. For example: \n \n moment().add(10, 'days')",weight:20,customConditional:({data:e,component:t})=>!(!t.datePicker||!t.datePicker.maxDate||-1===t.datePicker.maxDate.indexOf("moment"))||e.enableMaxDateInput},{type:"datetime",input:!0,key:"datePicker.maxDate",label:"Use calendar to set maxDate",weight:20,tooltip:"Enables to use calendar to set date.",customConditional:({data:e,component:t})=>(!t.datePicker||!t.datePicker.maxDate||-1===t.datePicker.maxDate.indexOf("moment"))&&!e.enableMaxDateInput},{type:"tags",input:!0,key:"datePicker.disable",label:"Disable specific dates or dates by range",placeholder:"(yyyy-MM-dd) or (yyyy-MM-dd - yyyy-MM-dd)",tooltip:"Add dates that you want to blacklist. For example: \n \n 2025-02-21",weight:21},{type:"panel",title:"Custom Disabled Dates",collapsible:!0,collapsed:!0,style:{"margin-bottom":"10px"},key:"panel-disable-function",customConditional:()=>!e.noeval,components:[t.logicVariablesTable("<tr><th>date</th><td>The date object.</td></tr>"),{type:"textarea",input:!0,editor:"ace",key:"datePicker.disableFunction",label:"Disabling dates by a function",description:'For more information check out the <a href="https://flatpickr.js.org/examples/#disabling-dates" target="_blank">Docs</a>',weight:22},{type:"htmlelement",tag:"div",content:"<h4>Example</h4><pre>// Disable all weekends<br>date.getDay() === 0 || date.getDay() === 6</pre>\n          "}]},{type:"checkbox",input:!0,key:"datePicker.disableWeekends",label:"Disable weekends",tooltip:"Check to disable weekends",weight:23},{type:"checkbox",input:!0,key:"datePicker.disableWeekdays",label:"Disable weekdays",tooltip:"Check to disable weekdays",weight:23}]}),e("skylark-formio/components/datetime/editForm/DateTime.edit.display",[],function(){"use strict";return[{type:"select",input:!0,key:"displayInTimezone",label:"Display in Timezone",tooltip:"This will display the captured date time in the select timezone.",weight:30,defaultValue:"viewer",dataSrc:"values",data:{values:[{label:"of Viewer",value:"viewer"},{label:"of Submission",value:"submission"},{label:"of Location",value:"location"},{label:"UTC",value:"utc"}]}},{type:"select",input:!0,key:"timezone",label:"Select Timezone",tooltip:"Select the timezone you wish to display this Date",weight:31,lazyLoad:!0,defaultValue:"",valueProperty:"name",dataSrc:"url",data:{url:"https://cdn.form.io/timezones.json"},template:"<span>{{ item.label }}</span>",conditional:{json:{"===":[{var:"data.displayInTimezone"},"location"]}}},{type:"checkbox",input:!0,key:"useLocaleSettings",label:"Use Locale Settings",tooltip:"Use locale settings to display date and time.",weight:51},{type:"checkbox",input:!0,key:"allowInput",label:"Allow Manual Input",tooltip:"Check this if you would like to allow the user to manually enter in the date.",weight:51},{type:"textfield",input:!0,key:"format",label:"Format",placeholder:"Format",description:'Use formats provided by <a href="https://github.com/angular-ui/bootstrap/tree/master/src/dateparser/docs#uibdateparsers-format-codes" target="_blank">DateParser Codes</a>',tooltip:"The date format for displaying the datetime value.",weight:52}]}),e("skylark-formio/components/datetime/editForm/DateTime.edit.time",[],function(){"use strict";return[{type:"checkbox",input:!0,key:"enableTime",label:"Enable Time Input",tooltip:"Enables time input for this field.",weight:0},{type:"number",input:!0,key:"timePicker.hourStep",label:"Hour Step Size",tooltip:"The number of hours to increment/decrement in the time picker.",weight:10},{type:"number",input:!0,key:"timePicker.minuteStep",label:"Minute Step Size",tooltip:"The number of minutes to increment/decrement in the time picker.",weight:20},{type:"checkbox",input:!0,key:"timePicker.showMeridian",label:"12 Hour Time (AM/PM)",tooltip:"Display time in 12 hour time with AM/PM.",weight:30}]}),e("skylark-formio/components/datetime/DateTime.form",["../_classes/component/Component.form","./editForm/DateTime.edit.data","./editForm/DateTime.edit.date","./editForm/DateTime.edit.display","./editForm/DateTime.edit.time"],function(e,t,n,i,o){"use strict";return function(...s){return e([{key:"display",components:i},{label:"Date",key:"date",weight:1,components:n},{label:"Time",key:"time",weight:2,components:o},{key:"data",components:t}],...s)}}),e("skylark-formio/components/day/editForm/Day.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0}]}),e("skylark-formio/components/day/editForm/Day.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{weight:15,type:"checkbox",label:"Hide Input Labels",tooltip:"Hide the labels of component inputs. This allows you to show the labels in the form builder, but not when it is rendered.",key:"hideInputLabels",input:!0},{type:"select",input:!0,key:"inputsLabelPosition",label:"Inputs Label Position",tooltip:"Position for the labels for inputs for this field.",weight:40,defaultValue:"top",dataSrc:"values",data:{values:[{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}]}},{key:"placeholder",ignore:!0},{weight:213,type:"checkbox",label:"Use Locale Settings",tooltip:"Use locale settings to display day.",key:"useLocaleSettings",input:!0}]}),e("skylark-formio/components/day/editForm/Day.edit.validation",[],function(){"use strict";return[{key:"validate.required",ignore:!0},{key:"validate.unique",ignore:!0},{weight:0,type:"checkbox",label:"Require Day",tooltip:"A required field must be filled in before the form can be submitted.",key:"fields.day.required",input:!0},{weight:10,type:"checkbox",label:"Require Month",tooltip:"A required field must be filled in before the form can be submitted.",key:"fields.month.required",input:!0},{weight:20,type:"checkbox",label:"Require Year",tooltip:"A required field must be filled in before the form can be submitted.",key:"fields.year.required",input:!0},{weight:40,type:"textfield",label:"Minimum Day",placeholder:"yyyy-MM-dd",tooltip:"A minimum date that can be set. You can also use Moment.js functions. For example: \n \n moment().subtract(10, 'days')",key:"minDate",input:!0},{weight:30,type:"textfield",label:"Maximum Day",placeholder:"yyyy-MM-dd",tooltip:"A maximum day that can be set. You can also use Moment.js functions. For example: \n \n moment().add(10, 'days')",key:"maxDate",input:!0}]}),e("skylark-formio/components/day/editForm/Day.edit.day",[],function(){"use strict";return[{wieght:200,type:"select",datasrc:"values",key:"fields.day.type",title:"Type",data:{values:[{label:"Number",value:"number"},{label:"Select",value:"select"}]}},{weight:210,type:"textfield",input:!0,key:"fields.day.placeholder",label:"Placeholder",placeholder:"Day Placeholder",tooltip:"The placeholder text that will appear when Day field is empty."},{weight:215,type:"checkbox",label:"Hidden",tooltip:"Hide the Day part of the component.",key:"fields.day.hide",input:!0},{weight:214,type:"checkbox",label:"Day First",tooltip:"Display the Day field before the Month field.",key:"dayFirst",input:!0}]}),e("skylark-formio/components/day/editForm/Day.edit.month",[],function(){"use strict";return[{wieght:200,type:"select",datasrc:"values",key:"fields.month.type",title:"Type",data:{values:[{label:"Number",value:"number"},{label:"Select",value:"select"}]}},{weight:210,type:"textfield",input:!0,key:"fields.month.placeholder",label:"Placeholder",placeholder:"Month Placeholder",tooltip:"The placeholder text that will appear when Month field is empty."},{weight:215,type:"checkbox",label:"Hidden",tooltip:"Hide the Month part of the component.",key:"fields.month.hide",input:!0}]}),e("skylark-formio/components/day/editForm/Day.edit.year",[],function(){"use strict";return[{wieght:200,type:"select",datasrc:"values",key:"fields.year.type",title:"Type",data:{values:[{label:"Number",value:"number"},{label:"Select",value:"select"}]}},{weight:203,type:"number",input:!0,key:"fields.year.minYear",label:"Minimum Year",placeholder:"1900",tooltip:"The minimum year that can be entered."},{weight:204,type:"number",input:!0,key:"fields.year.maxYear",label:"Maximum Year",placeholder:"2030",tooltip:"The maximum year that can be entered."},{weight:210,type:"textfield",input:!0,key:"fields.year.placeholder",label:"Placeholder",placeholder:"Year Placeholder",tooltip:"The placeholder text that will appear when Year field is empty."},{weight:215,type:"checkbox",label:"Hidden",tooltip:"Hide the Year part of the component.",key:"fields.year.hide",input:!0}]}),e("skylark-formio/components/day/Day.form",["../_classes/component/Component.form","./editForm/Day.edit.data","./editForm/Day.edit.display","./editForm/Day.edit.validation","./editForm/Day.edit.day","./editForm/Day.edit.month","./editForm/Day.edit.year"],function(e,t,n,i,o,s,r){"use strict";return function(...a){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i},{key:"day",label:"Day",weight:3,components:o},{key:"month",label:"Month",weight:3,components:s},{key:"year",label:"Year",weight:3,components:r}],...a)}}),e("skylark-formio/components/editgrid/editForm/EditGrid.edit.data",[],function(){"use strict";return[{type:"checkbox",input:!0,weight:105,key:"inlineEdit",label:"Inline Editing",tooltip:'Check this if you would like your changes within "edit" mode to be committed directly to the submission object as that row is being changed'},{key:"defaultValue",ignore:!0},{key:"multiple",ignore:!0}]}),e("skylark-formio/components/editgrid/editForm/EditGrid.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0},{type:"checkbox",label:"Open First Row when Empty",key:"openWhenEmpty",tooltip:"Check this if you would like to open up the first row when the EditGrid is empty",weight:1e3,input:!0,conditional:{json:{"!==":[{var:"data.modal"},!0]}}},{type:"checkbox",label:"Disable Adding / Removing Rows",key:"disableAddingRemovingRows",tooltip:"Check if you want to hide Add Another button and Remove Row button",weight:1001,input:!0,clearOnHide:!1,calculateValue:"value = data.disableAddingRemovingRows;"},{weight:1010,type:"textarea",input:!0,key:"conditionalAddButton",label:"Conditional Add Button",placeholder:"show = ...",tooltip:"Specify condition when Add Button should be displayed.",editor:"ace",as:"js",wysiwyg:{minLines:3}}]}),e("skylark-formio/components/editgrid/editForm/EditGrid.edit.templates",["../../../utils/Evaluator"],function(e){"use strict";return[{type:"textarea",label:"Header Template",key:"templates.header",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:'This is the <a href="https://lodash.com/docs/4.17.5#template">Lodash Template</a> used to render the header of the Edit grid.',customConditional:()=>!e.noeval},{type:"textarea",label:"Row Template",key:"templates.row",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "row" is an object of one row\'s data and "components" is the array of components in the grid. To add click events, add the classes "editRow" and "removeRow" to elements.',tooltip:'This is the <a href="https://lodash.com/docs/4.17.5#template">Lodash Template</a> used to render each row of the Edit grid.',customConditional:()=>!e.noeval},{type:"textarea",label:"Footer Template",key:"templates.footer",rows:5,editor:"ace",as:"handlebars",input:!0,placeholder:"/*** Lodash Template Code ***/",description:'Two available variables. "value" is the array of row data and "components" is the array of components in the grid.',tooltip:'This is the <a href="https://lodash.com/docs/4.17.5#template">Lodash Template</a> used to render the footer of the Edit grid.',customConditional:()=>!e.noeval},{type:"textfield",input:!0,key:"rowClass",label:"Row CSS Class",placeholder:"Row CSS Class",tooltip:"CSS class to add to the edit row wrapper."},{type:"textfield",input:!0,key:"addAnother",label:"Add Another Text",placeholder:"Add Another",tooltip:"Set the text of the Add Another button."},{weight:70,type:"checkbox",label:"Display as Modal",tooltip:"Display a modal to add or edit entries in the table",key:"modal",input:!0},{type:"textfield",input:!0,key:"saveRow",label:"Save Row Text",placeholder:"Save",tooltip:"Set the text of the Save Row button."},{type:"textfield",input:!0,key:"removeRow",label:"Remove Row Text",placeholder:"Remove",tooltip:"Set the text of the remove Row button."}]}),e("skylark-formio/components/editgrid/editForm/EditGrid.edit.validation",[],function(){"use strict";return[{weight:110,key:"validate.minLength",label:"Minimum Length",placeholder:"Minimum Length",type:"number",tooltip:"The minimum length requirement this field must meet.",input:!0},{weight:120,key:"validate.maxLength",label:"Maximum Length",placeholder:"Maximum Length",type:"number",tooltip:"The maximum length requirement this field must meet.",input:!0}]}),e("skylark-formio/components/editgrid/EditGrid.form",["../_classes/component/Component.form","./editForm/EditGrid.edit.data","./editForm/EditGrid.edit.display","./editForm/EditGrid.edit.templates","./editForm/EditGrid.edit.validation"],function(e,t,n,i,o){"use strict";return function(...s){return e([{label:"Templates",key:"templates",weight:5,components:i},{key:"display",components:n},{key:"data",components:t},{key:"validation",components:o}],...s)}}),e("skylark-formio/components/email/editForm/Email.edit.display",[],function(){"use strict";return[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}]}),e("skylark-formio/components/email/editForm/Email.edit.validation",[],function(){"use strict";return[{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0},{type:"panel",label:"Kickbox",title:"Kickbox",weight:102,key:"kickbox",components:[{type:"checkbox",label:"Enable",tooltip:"Enable Kickbox validation for this email field.",description:"Validate this email using the Kickbox email validation service.",key:"kickbox.enabled"}]}]}),e("skylark-formio/components/email/Email.form",["../textfield/TextField.form","./editForm/Email.edit.display","./editForm/Email.edit.validation"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"validation",components:n}],...i)}}),e("skylark-formio/components/fieldset/editForm/Fieldset.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"label",hidden:!0,calculateValue:e=>e.data.legend},{weight:1,type:"textfield",input:!0,key:"legend",label:"Legend",placeholder:"Legend",tooltip:"The legend for this Fieldset."}]}),e("skylark-formio/components/fieldset/Fieldset.form",["../_classes/nested/NestedComponent.form","./editForm/Fieldset.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t}],...n)}}),e("skylark-formio/components/file/editForm/File.edit.data",[],function(){"use strict";return[{key:"defaultValue",ignore:!0}]}),e("skylark-formio/components/file/editForm/File.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0}]}),e("skylark-formio/components/file/editForm/File.edit.file",["../../../Formio","skylark-lodash"],function(e,t){"use strict";return[{type:"select",input:!0,key:"storage",label:"Storage",placeholder:"Select your file storage provider",weight:0,tooltip:"Which storage to save the files in.",valueProperty:"value",dataSrc:"custom",data:{custom:()=>t.map(e.Providers.getProviders("storage"),(e,t)=>({label:e.title,value:t}))}},{type:"textfield",input:!0,key:"url",label:"Url",weight:10,placeholder:"Enter the url to post the files to.",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#server-side' target='_blank'>https://github.com/danialfarid/ng-file-upload#server-side</a> for how to set up the server.",conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"options.indexeddb",label:"Database",weight:10,placeholder:"Enter the indexeddb database name",conditional:{json:{in:[{var:"data.storage"},["indexeddb"]]}}},{type:"textfield",input:!0,label:"Table",key:"options.indexeddbTable",weight:10,placeholder:"Enter the name for indexeddb table",conditional:{json:{in:[{var:"data.storage"},["indexeddb"]]}}},{type:"textarea",key:"options",label:"Custom request options",tooltip:"Pass your custom xhr options(optional)",rows:5,editor:"ace",input:!0,weight:15,placeholder:'{\n  "withCredentials": true\n}',conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"fileKey",label:"Fileform-datakey",weight:17,placeholder:"Enterthekeynameofafileforformdata.",tooltip:"KeynamethatyouwouldliketomodifyforthefilewhilecallingAPIrequest.",conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"dir",label:"Directory",placeholder:"(optional) Enter a directory for the files",tooltip:"This will place all the files uploaded in this field in the directory",weight:20},{type:"textfield",input:!0,key:"fileNameTemplate",label:"File Name Template",placeholder:"(optional) {{{name}}-{{guid}}}}}",tooltip:"Specify template for name of uploaded file(s). Regular template variables are available (`data`, `component`, `user`, `value`, `moment` etc.), also `fileName`, `guid` variables are available. `guid` part must be present, if not found in template, will be added at the end.",weight:25},{type:"checkbox",input:!0,key:"image",label:"Display as image(s)",tooltip:"Instead of a list of linked files, images will be rendered in the view.",weight:30},{type:"checkbox",input:!0,key:"privateDownload",label:"Private Download",tooltip:"When this is checked, the file download will send a POST request to the download URL with the x-jwt-token header. This will allow your endpoint to create a Private download system.",weight:31,conditional:{json:{"===":[{var:"data.storage"},"url"]}}},{type:"textfield",input:!0,key:"imageSize",label:"Image Size",placeholder:"100",tooltip:"The image size for previewing images.",weight:40,conditional:{json:{"==":[{var:"data.image"},!0]}}},{type:"checkbox",input:!0,key:"webcam",label:"Enable web camera",tooltip:"This will allow using an attached camera to directly take a picture instead of uploading an existing file.",weight:32},{type:"textfield",input:!0,key:"webcamSize",label:"Webcam Width",placeholder:"320",tooltip:"The webcam size for taking pictures.",weight:38,conditional:{json:{"==":[{var:"data.webcam"},!0]}}},{type:"datagrid",input:!0,label:"File Types",key:"fileTypes",tooltip:"Specify file types to classify the uploads. This is useful if you allow multiple types of uploads but want to allow the user to specify which type of file each is.",weight:11,components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}]},{type:"textfield",input:!0,key:"filePattern",label:"File Pattern",placeholder:".pdf,.jpg",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#full-reference' target='_blank'>https://github.com/danialfarid/ng-file-upload#full-reference</a> for how to specify file patterns.",weight:50},{type:"textfield",input:!0,key:"fileMinSize",label:"File Minimum Size",placeholder:"1MB",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#full-reference' target='_blank'>https://github.com/danialfarid/ng-file-upload#full-reference</a> for how to specify file sizes.",weight:60},{type:"textfield",input:!0,key:"fileMaxSize",label:"File Maximum Size",placeholder:"10MB",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#full-reference' target='_blank'>https://github.com/danialfarid/ng-file-upload#full-reference</a> for how to specify file sizes.",weight:70}]}),e("skylark-formio/components/file/editForm/File.edit.validation",[],function(){"use strict";return[{key:"unique",ignore:!0},{key:"validateOn",ignore:!0}]}),e("skylark-formio/components/file/File.form",["../_classes/component/Component.form","./editForm/File.edit.data","./editForm/File.edit.display","./editForm/File.edit.file","./editForm/File.edit.validation"],function(e,t,n,i,o){"use strict";return function(...s){return e([{key:"display",components:n},{key:"data",components:t},{label:"File",key:"file",weight:5,components:i},{key:"validation",components:o}],...s)}}),e("skylark-formio/components/form/editForm/Form.edit.display",[],function(){"use strict";return[{key:"hideLabel",ignore:!0},{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabIndex",ignore:!0},{key:"autofocus",ignore:!0}]}),e("skylark-formio/components/form/editForm/Form.edit.form",[],function(){"use strict";return[{type:"select",input:!0,dataSrc:"url",data:{url:"/form?limit=4294967295&select=_id,title"},searchField:"title__regex",template:"<span>{{ item.title }}</span>",valueProperty:"_id",authenticate:!0,label:"Form",key:"form",weight:10,lazyLoad:!1,tooltip:"The form to load within this form component.",validate:{required:!0}},{type:"textfield",input:!0,label:"Form Revision",placeholder:"Current",tooltip:"You can lock the nested form to a specific revision by entering the revision number here.",key:"revision",weight:11},{type:"checkbox",input:!0,weight:20,key:"reference",label:"Save as reference",tooltip:"Using this option will save this field as a reference and link its value to the value of the origin record."}]}),e("skylark-formio/components/form/editForm/Form.edit.data",["../../_classes/component/editForm/utils"],function(e){"use strict";return[e.javaScriptValue("Custom Default Value","customDefaultValue","customDefaultValue",120,'<p><h4>Example:</h4><pre>value = data.firstName + " " + data.lastName;</pre></p>','<p><h4>Example:</h4><pre>{"cat": [{"var": "data.firstName"}, " ", {"var": "data.lastName"}]}</pre>'),e.javaScriptValue("Calculated Value","calculateValue","calculateValue",130,"<p><h4>Example:</h4><pre>value = data.a + data.b + data.c;</pre></p>",'<p><h4>Example:</h4><pre>{"+": [{"var": "data.a"}, {"var": "data.b"}, {"var": "data.c"}]}</pre><p><a target="_blank" href="http://formio.github.io/formio.js/app/examples/calculated.html">Click here for an example</a></p>')]}),e("skylark-formio/components/form/Form.form",["../_classes/nested/NestedComponent.form","./editForm/Form.edit.display","./editForm/Form.edit.form","./editForm/Form.edit.data"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:t},{label:"Form",key:"form",weight:10,components:n},{label:"Data",key:"data",weight:10,components:i}],...o)}}),e("skylark-formio/components/hidden/editForm/Hidden.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"tabindex",ignore:!0},{key:"hidden",ignore:!0},{key:"tableView",ignore:!0},{key:"disabled",ignore:!0}]}),e("skylark-formio/components/hidden/editForm/Hidden.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{key:"clearOnHide",ignore:!0},{key:"allowCalculateOverride",ignore:!0}]}),e("skylark-formio/components/hidden/Hidden.form",["../_classes/component/Component.form","./editForm/Hidden.edit.display","./editForm/Hidden.edit.data"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"data",components:n},{key:"validation",ignore:!0},{key:"conditional",ignore:!0}],...i)}}),e("skylark-formio/components/html/editForm/HTML.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"disabled",ignore:!0},{key:"tabindex",ignore:!0},{type:"textfield",input:!0,key:"tag",weight:50,label:"HTML Tag",placeholder:"HTML Element Tag",tooltip:"The tag of this HTML element."},{type:"textfield",input:!0,key:"className",weight:60,label:"CSS Class",placeholder:"CSS Class",tooltip:"The CSS class for this HTML element."},{type:"datagrid",input:!0,label:"Attributes",key:"attrs",tooltip:"The attributes for this HTML element. Only safe attributes are allowed, such as src, href, and title.",weight:70,components:[{label:"Attribute",key:"attr",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}]},{type:"textarea",input:!0,editor:"ace",rows:10,as:"html",label:"Content",tooltip:"The content of this HTML element.",defaultValue:'<div class="well">Content</div>',key:"content",weight:80},{weight:85,type:"checkbox",label:"Refresh On Change",tooltip:"Rerender the field whenever a value on the form changes.",key:"refreshOnChange",input:!0}]}),e("skylark-formio/components/html/editForm/HTML.edit.logic",[],function(){"use strict";return[{key:"logic",components:[{key:"actions",components:[{key:"actionPanel",components:[{data:{json:[{label:"Hidden",value:"hidden",type:"boolean"},{label:"Required",value:"validate.required",type:"boolean"},{label:"Disabled",value:"disabled",type:"boolean"},{label:"Label",value:"label",type:"string"},{label:"Title",value:"title",type:"string"},{label:"Tooltip",value:"tooltip",type:"string"},{label:"Description",value:"description",type:"string"},{label:"Placeholder",value:"placeholder",type:"string"},{label:"CSS Class",value:"className",type:"string"},{label:"Container Custom Class",value:"customClass",type:"string"},{label:"Content",value:"content",type:"string",component:"content"}]},key:"property"},{type:"textarea",editor:"ace",rows:10,as:"html",label:"Content",tooltip:"The content of this HTML element.",defaultValue:'<div class="well">Content</div>',key:"content",weight:30,input:!0,customConditional:e=>"property"===e.row.type&&e.row.hasOwnProperty("property")&&"string"===e.row.property.type&&"content"===e.row.property.component}]}]}]}]}),e("skylark-formio/components/html/HTML.form",["../_classes/component/Component.form","./editForm/HTML.edit.display","./editForm/HTML.edit.logic"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"logic",components:n}],...i)}}),e("skylark-formio/components/number/editForm/Number.edit.display",[],function(){"use strict";return[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}]}),e("skylark-formio/components/number/editForm/Number.edit.data",[],function(){"use strict";return[{type:"checkbox",input:!0,weight:70,key:"delimiter",label:"Use Thousands Separator",tooltip:"Separate thousands by local delimiter."},{type:"number",input:!0,weight:80,key:"decimalLimit",label:"Decimal Places",tooltip:"The maximum number of decimal places."},{type:"checkbox",input:!0,weight:90,key:"requireDecimal",label:"Require Decimal",tooltip:"Always show decimals, even if trailing zeros."},{key:"case",ignore:!0}]}),e("skylark-formio/components/number/editForm/Number.edit.validation",[],function(){"use strict";return[{key:"unique",ignore:!0},{key:"validate.minLength",ignore:!0},{key:"validate.maxLength",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0},{key:"validate.pattern",ignore:!0},{type:"number",label:"Minimum Value",key:"validate.min",input:!0,placeholder:"Minimum Value",tooltip:"The minimum value this field must have before the form can be submitted.",weight:150},{type:"number",label:"Maximum Value",key:"validate.max",input:!0,placeholder:"Maximum Value",tooltip:"The maximum value this field can have before the form can be submitted.",weight:160}]}),e("skylark-formio/components/number/Number.form",["../textfield/TextField.form","./editForm/Number.edit.display","./editForm/Number.edit.data","./editForm/Number.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:t},{key:"data",components:n},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/panel/editForm/Panel.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"label",hidden:!0,calculateValue:e=>e.data.title},{key:"tabindex",hidden:!0},{weight:1,type:"textfield",input:!0,placeholder:"Panel Title",label:"Title",key:"title",tooltip:"The title text that appears in the header of this panel."},{weight:20,type:"textarea",input:!0,key:"tooltip",label:"Tooltip",placeholder:"To add a tooltip to this field, enter text here.",tooltip:"Adds a tooltip to the side of this field."},{weight:30,type:"select",input:!0,label:"Theme",key:"theme",dataSrc:"values",data:{values:[{label:"Default",value:"default"},{label:"Primary",value:"primary"},{label:"Info",value:"info"},{label:"Success",value:"success"},{label:"Danger",value:"danger"},{label:"Warning",value:"warning"}]}},{weight:40,type:"fieldset",input:!1,components:[{type:"select",input:!0,label:"Breadcrumb Type",key:"breadcrumb",dataSrc:"values",data:{values:[{label:"Default",value:"default"},{label:"Condensed",value:"condensed"},{label:"Hidden",value:"none"}]}},{input:!0,type:"checkbox",label:"Allow click on Breadcrumb",key:"breadcrumbClickable",defaultValue:!0,conditional:{json:{"!==":[{var:"data.breadcrumb"},"none"]}}},{weight:50,label:"Panel Navigation Buttons",optionsLabelPosition:"right",values:[{label:"Previous",value:"previous"},{label:"Cancel",value:"cancel"},{label:"Next",value:"next"}],inline:!0,type:"selectboxes",key:"buttonSettings",input:!0,inputType:"checkbox",defaultValue:{previous:!0,cancel:!0,next:!0}}],customConditional:e=>"wizard"===e.instance.options.editForm.display},{weight:650,type:"checkbox",label:"Collapsible",tooltip:"If checked, this will turn this Panel into a collapsible panel.",key:"collapsible",input:!0},{weight:651,type:"checkbox",label:"Initially Collapsed",tooltip:"Determines the initial collapsed state of this Panel.",key:"collapsed",input:!0,conditional:{json:{"===":[{var:"data.collapsible"},!0]}}}]}),e("skylark-formio/components/panel/editForm/Panel.edit.conditional",["../../_classes/component/editForm/utils"],function(e){"use strict";const t=e.javaScriptValue("Advanced Next Page","nextPage","nextPage",110,"\n  <p>You must assign the <strong>next</strong> variable with the API key of the next page.</p>\n  <p>The global variable <strong>data</strong> is provided, and allows you to access the data of any form component, by using its API key.</p>\n  <p>Also <strong>moment</strong> library is available, and allows you to manipulate dates in a convenient way.</p>\n  <h5>Example</h5><pre>next = data.addComment ? 'page3' : 'page4';</pre>\n","\n  <p>Submission data is available as JsonLogic variables, with the same api key as your components.</p>\n");return[{...t,customConditional:e=>"wizard"===e.instance.options.editForm.display}]}),e("skylark-formio/components/panel/Panel.form",["../_classes/nested/NestedComponent.form","./editForm/Panel.edit.display","./editForm/Panel.edit.conditional"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"conditional",components:n}],...i)}}),e("skylark-formio/components/password/editForm/Password.edit.display",[],function(){"use strict";return[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0}]}),e("skylark-formio/components/password/editForm/Password.edit.data",[],function(){"use strict";return[{key:"inputFormat",ignore:!0},{key:"persistent",ignore:!0},{key:"protected",ignore:!0},{key:"dbIndex",ignore:!0},{key:"encrypted",ignore:!0},{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"customDefaultValuePanel",ignore:!0},{key:"calculateValuePanel",ignore:!0},{key:"passwordInfo",weight:0,type:"htmlelement",tag:"div",className:"alert alert-info",content:"Password fields are automatically encrypted using 1-way salted bcrypt hashes. These hashes are also protected and not returned in the API."}]}),e("skylark-formio/components/password/editForm/Password.edit.validation",[],function(){"use strict";return[{key:"unique",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0}]}),e("skylark-formio/components/password/Password.form",["../textfield/TextField.form","./editForm/Password.edit.display","./editForm/Password.edit.data","./editForm/Password.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"data",components:n},{key:"display",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/phonenumber/editForm/PhoneNumber.edit.validation",[],function(){"use strict";return[{key:"validate.minLength",ignore:!0},{key:"validate.maxLength",ignore:!0},{key:"validate.pattern",ignore:!0},{key:"validate.minWords",ignore:!0},{key:"validate.maxWords",ignore:!0}]}),e("skylark-formio/components/phonenumber/PhoneNumber.form",["../textfield/TextField.form","./editForm/PhoneNumber.edit.validation"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:[{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}]},{key:"validation",components:t}],...n)}}),e("skylark-formio/components/radio/editForm/Radio.edit.data",["../../../utils/builder","skylark-lodash"],function(e,t){"use strict";return[{key:"multiple",ignore:!0},{type:"datagrid",input:!0,label:"Values",key:"values",tooltip:"The radio button values that can be picked for this field. Values are text submitted with the form data. Labels are text that appears next to the radio buttons on the form.",weight:10,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]},validate:{required:!0}},{type:"select",input:!0,weight:180,label:"Shortcut",key:"shortcut",tooltip:"The shortcut key for this option.",dataSrc:"custom",valueProperty:"value",customDefaultValue:()=>"",template:"{{ item.label }}",data:{custom:n=>e.getAvailableShortcuts(t.get(n,"instance.options.editForm",{}),t.get(n,"instance.options.editComponent",{}))}}]},{type:"select",input:!0,label:"Storage Type",key:"dataType",clearOnHide:!0,tooltip:"The type to store the data. If you select something other than autotype, it will force it to that type.",weight:12,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Autotype",value:"auto"},{label:"String",value:"string"},{label:"Number",value:"number"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"}]}}]}),e("skylark-formio/components/radio/editForm/Radio.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0},{type:"select",input:!0,label:"Options Label Position",key:"optionsLabelPosition",tooltip:"Position for the label for options for this field.",dataSrc:"values",weight:32,defaultValue:"right",data:{values:[{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Bottom",value:"bottom"}]}},{type:"checkbox",input:!0,key:"inline",label:"Inline Layout",tooltip:"Displays the checkboxes/radios horizontally.",weight:650}]}),e("skylark-formio/components/radio/editForm/Radio.edit.validation",[],function(){"use strict";return[{key:"validateOn",ignore:!0},{key:"unique",ignore:!0}]}),e("skylark-formio/components/radio/Radio.form",["../_classes/component/Component.form","./editForm/Radio.edit.data","./editForm/Radio.edit.display","./editForm/Radio.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/recaptcha/editForm/ReCaptcha.edit.display",[],function(){"use strict";return[{key:"eventType",label:"Type of event",tooltip:"Specify type of event that this reCAPTCHA would react to",type:"radio",values:[{label:"Form Load",value:"formLoad"},{label:"Button Click",value:"buttonClick"}],weight:650},{key:"buttonKey",label:"Button Key",tooltip:"Specify key of button on this form that this reCAPTCHA should react to",type:"textfield",customConditional:e=>"buttonClick"===e.data.eventType,weight:660},{key:"label",ignore:!0},{key:"hideLabel",ignore:!0},{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"tooltip",ignore:!0},{key:"errorLabel",ignore:!0},{key:"customClass",ignore:!0},{key:"tabindex",ignore:!0},{key:"multiple",ignore:!0},{key:"clearOnHide",ignore:!0},{key:"hidden",ignore:!0},{key:"mask",ignore:!0},{key:"dataGridLabel",ignore:!0},{key:"disabled",ignore:!0},{key:"autofocus",ignore:!0},{key:"tableView",ignore:!0}]}),e("skylark-formio/components/recaptcha/ReCaptcha.form",["../_classes/component/Component.form","./editForm/ReCaptcha.edit.display"],function(e,t){"use strict";return function(){return e([{key:"display",components:t},{key:"data",ignore:!0},{key:"validation",ignore:!0},{key:"conditional",ignore:!0},{key:"logic",ignore:!0}])}}),e("skylark-formio/components/resource/editForm/Resource.edit.display",[],function(){"use strict";return[{key:"resourceInfo",weight:-10,type:"htmlelement",tag:"div",className:"alert alert-danger",content:'The Resource component is deprecated. Use the Select component with data source of "Resource" instead.'},{type:"select",input:!0,dataSrc:"url",data:{url:"/form?type=resource&limit=4294967295&select=_id,title"},template:"<span>{{ item.title }}</span>",valueProperty:"_id",label:"Resource",key:"resource",weight:50,tooltip:"The resource to be used with this field."},{type:"tags",input:!0,key:"selectFields",label:"Select Fields",tooltip:"The properties on the resource to return as part of the options. If left blank, all properties will be returned.",placeholder:"Enter the fields to select.",weight:51},{type:"tags",input:!0,key:"searchFields",label:"Search Fields",tooltip:"A list of search filters based on the fields of the resource. See the <a target='_blank' href='https://github.com/travist/resourcejs#filtering-the-results'>Resource.js documentation</a> for the format of these filters.",placeholder:"The fields to query on the server",weight:52},{type:"textfield",input:!0,key:"filter",label:"Filter Query",weight:53,description:"The filter query for results.",tooltip:"Use this to provide additional filtering using query parameters."},{type:"textfield",input:!0,key:"sort",label:"Sort Query",weight:53,description:"The sort query for results",tooltip:"Use this to provide additional sorting using query parameters"},{type:"textarea",input:!0,key:"template",label:"Item Template",editor:"ace",as:"html",rows:3,weight:53,tooltip:"The HTML template for the result data items."},{type:"checkbox",input:!0,weight:54,key:"addResource",label:"Add Resource",tooltip:"Allows to create a new resource while entering a submission.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"textfield",label:"Add Resource Label",key:"addResourceLabel",tooltip:"Set the text of the Add Resource button.",placeholder:"Add Resource",weight:55,input:!0,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"!!":{var:"data.addResource"}}]}}}]}),e("skylark-formio/components/resource/Resource.form",["../_classes/component/Component.form","./editForm/Resource.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t}],...n)}}),e("skylark-formio/components/selectboxes/editForm/SelectBoxes.edit.validation",[],function(){"use strict";return[{type:"number",input:!0,key:"validate.minSelectedCount",label:"Minimum checked number",tooltip:"Minimum checkboxes required before form can be submitted.",weight:250},{type:"number",input:!0,key:"validate.maxSelectedCount",label:"Maximum checked number",tooltip:"Maximum checkboxes possible before form can be submitted.",weight:250},{type:"textfield",input:!0,key:"minSelectedCountMessage",label:"Minimum checked error message",tooltip:"Error message displayed if minimum number of items not checked.",weight:250},{type:"textfield",input:!0,key:"maxSelectedCountMessage",label:"Maximum checked error message",tooltip:"Error message displayed if maximum number of items checked.",weight:250}]}),e("skylark-formio/components/selectboxes/SelectBoxes.form",["../radio/Radio.form","./editForm/SelectBoxes.edit.validation"],function(e,t){"use strict";return function(...n){return e([{key:"data",components:[{key:"dataType",ignore:!0}]},{key:"validation",components:t}],...n)}}),e("skylark-formio/components/select/editForm/Select.edit.data",["../../../utils/utils"],function(e){"use strict";return[{type:"select",input:!0,weight:0,tooltip:"The source to use for the select data. Values lets you provide your own values and labels. JSON lets you provide raw JSON data. URL lets you provide a URL to retrieve the JSON data from.",key:"dataSrc",defaultValue:"values",label:"Data Source Type",dataSrc:"values",data:{values:[{label:"Values",value:"values"},{label:"URL",value:"url"},{label:"Resource",value:"resource"},{label:"Custom",value:"custom"},{label:"Raw JSON",value:"json"},{label:"IndexedDB",value:"indexeddb"}]}},{type:"textfield",weight:10,input:!0,key:"indexeddb.database",label:"Database name",tooltip:"The name of the indexeddb database.",conditional:{json:{"===":[{var:"data.dataSrc"},"indexeddb"]}}},{type:"textfield",input:!0,key:"indexeddb.table",label:"Table name",weight:16,tooltip:"The name of table in the indexeddb database.",conditional:{json:{"===":[{var:"data.dataSrc"},"indexeddb"]}}},{type:"textarea",as:"json",editor:"ace",weight:18,input:!0,key:"indexeddb.filter",label:"Row Filter",tooltip:"Filter table items that match the object.",defaultValue:{},conditional:{json:{"===":[{var:"data.dataSrc"},"indexeddb"]}}},{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"data.json",label:"Data Source Raw JSON",tooltip:"A raw JSON array to use as a data source.",conditional:{json:{"===":[{var:"data.dataSrc"},"json"]}}},{type:"textfield",input:!0,key:"data.url",weight:10,label:"Data Source URL",placeholder:"Data Source URL",tooltip:"A URL that returns a JSON array to use as the data source.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,label:"Lazy Load Data",key:"lazyLoad",tooltip:"When set, this will not fire off the request to the URL until this control is within focus. This can improve performance if you have many Select dropdowns on your form where the API's will only fire when the control is activated.",weight:11,conditional:{json:{in:[{var:"data.dataSrc"},["resource","url"]]}}},{type:"datagrid",input:!0,label:"Request Headers",key:"data.headers",tooltip:"Set any headers that should be sent along with the request to the url. This is useful for authentication.",weight:11,components:[{label:"Key",key:"key",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield"}],conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"datagrid",input:!0,label:"Data Source Values",key:"data.values",tooltip:"Values to use as the data source. Labels are shown in the select field. Values are the corresponding values saved with the submission.",weight:10,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}}],conditional:{json:{"===":[{var:"data.dataSrc"},"values"]}}},{type:"select",input:!0,dataSrc:"url",data:{url:"/form?type=resource&limit=4294967295&select=_id,title"},authenticate:!0,template:"<span>{{ item.title }}</span>",valueProperty:"_id",clearOnHide:!1,label:"Resource",key:"data.resource",lazyLoad:!1,weight:10,tooltip:"The resource to be used with this field.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"textfield",input:!0,label:"Data Path",key:"selectValues",weight:12,description:"The object path to the iterable items.",tooltip:"The property within the source data, where iterable items reside. For example: results.items or results[0].items",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"select",input:!0,label:"Value Property",key:"valueProperty",skipMerge:!0,clearOnHide:!1,tooltip:"The field to use as the value.",weight:11,refreshOn:"data.resource",template:"<span>{{ item.label }}</span>",valueProperty:"key",dataSrc:"url",lazyLoad:!1,onSetItems(t,n){const i=[];return e.eachComponent(n.components,(e,t)=>{e.input&&i.push({label:e.label||e.key,key:`data.${t}`})}),i},onChange(e){if(e&&e.flags&&e.flags.modified){const t=e.instance.data.valueProperty,n=t||"data",i=`<span>{{ item.${n} }}</span>`,o=t?`${t}__regex`:"";e.instance.root.getComponent("template").setValue(i),e.instance.root.getComponent("searchField").setValue(o)}},data:{url:"/form/{{ data.data.resource }}"},conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{var:"data.data.resource"}]}}},{type:"select",input:!0,label:"Storage Type",key:"dataType",clearOnHide:!0,tooltip:"The type to store the data. If you select something other than autotype, it will force it to that type.",weight:12,template:"<span>{{ item.label }}</span>",dataSrc:"values",data:{values:[{label:"Autotype",value:"auto"},{label:"String",value:"string"},{label:"Number",value:"number"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"}]}},{type:"textfield",input:!0,label:"Value Property",key:"valueProperty",skipMerge:!0,clearOnHide:!1,weight:13,description:"The selected item's property to save.",tooltip:"The property of each item in the data source to use as the select value. If not specified, the item itself will be used.",conditional:{json:{in:[{var:"data.dataSrc"},["json","url","custom"]]}}},{type:"textfield",input:!0,label:"Select Fields",key:"selectFields",tooltip:"The properties on the resource to return as part of the options. Separate property names by commas. If left blank, all properties will be returned.",placeholder:"Comma separated list of fields to select.",weight:14,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"===":[{var:"data.valueProperty"},""]}]}}},{type:"checkbox",input:!0,key:"disableLimit",label:"Disable limiting response",tooltip:"When enabled the request will not include the limit and skip options in the query string",weight:15,conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"textfield",input:!0,key:"searchField",label:"Search Query Name",weight:16,description:"Name of URL query parameter",tooltip:"The name of the search querystring parameter used when sending a request to filter results with. The server at the URL must handle this query parameter.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"number",input:!0,key:"minSearch",weight:17,label:"Minimum Search Length",tooltip:"The minimum amount of characters they must type before a search is made.",defaultValue:0,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"url"]},{"!=":[{var:"data.searchField"},""]}]}}},{type:"textfield",input:!0,key:"filter",label:"Filter Query",weight:18,description:"The filter query for results.",tooltip:"Use this to provide additional filtering using query parameters.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"textfield",input:!0,key:"sort",label:"Sort Query",weight:18,description:"The sort query for results",tooltip:"Use this to provide additional sorting using query parameters",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"number",input:!0,key:"limit",label:"Limit",weight:18,defaultValue:100,description:"Maximum number of items to view per page of results.",tooltip:"Use this to limit the number of items to request or view.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource"]]}}},{type:"textarea",input:!0,key:"data.custom",label:"Custom Values",editor:"ace",rows:10,weight:14,placeholder:"values = data['mykey'];",tooltip:"Write custom code to return the value options. The form data object is available.",conditional:{json:{"===":[{var:"data.dataSrc"},"custom"]}}},{type:"textarea",input:!0,key:"template",label:"Item Template",editor:"ace",as:"html",rows:3,weight:18,tooltip:"The HTML template for the result data items.",allowCalculateOverride:!0,calculateValue:e=>!e.data.template&&e.instance&&e.instance._currentForm.options.editComponent?e.instance._currentForm.options.editComponent.template:e.data.template},{type:"select",input:!0,key:"refreshOn",label:"Refresh Options On",weight:19,tooltip:"Refresh data when another field changes.",dataSrc:"custom",valueProperty:"value",data:{custom(e){var t=[];return t.push({label:"Any Change",value:"data"}),e.utils.eachComponent(e.instance.options.editForm.components,function(n,i){n.key!==e.data.key&&t.push({label:n.label||n.key,value:i})}),t}},conditional:{json:{in:[{var:"data.dataSrc"},["url","resource","values"]]}}},{type:"checkbox",input:!0,weight:20,key:"clearOnRefresh",label:"Clear Value On Refresh Options",defaultValue:!1,tooltip:"When the Refresh On field is changed, clear this components value.",conditional:{json:{in:[{var:"data.dataSrc"},["url","resource","values"]]}}},{type:"checkbox",input:!0,weight:21,key:"searchEnabled",label:"Enable Static Search",defaultValue:!0,tooltip:"When checked, the select dropdown will allow for searching within the static list of items provided."},{label:"Search Threshold",mask:!1,tableView:!0,alwaysEnabled:!1,type:"number",input:!0,key:"selectThreshold",validate:{min:0,customMessage:"",json:"",max:1},delimiter:!1,requireDecimal:!1,encrypted:!1,defaultValue:.3,weight:22,tooltip:"At what point does the match algorithm give up. A threshold of 0.0 requires a perfect match, a threshold of 1.0 would match anything."},{type:"checkbox",input:!0,weight:23,key:"addResource",label:"Add Resource",tooltip:"Allows to create a new resource while entering a submission.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"textfield",label:"Add Resource Label",key:"addResourceLabel",tooltip:"Set the text of the Add Resource button.",placeholder:"Add Resource",weight:24,input:!0,conditional:{json:{and:[{"===":[{var:"data.dataSrc"},"resource"]},{"!!":{var:"data.addResource"}}]}}},{type:"checkbox",input:!0,weight:25,key:"reference",label:"Save as reference",tooltip:"Using this option will save this field as a reference and link its value to the value of the origin record.",conditional:{json:{"===":[{var:"data.dataSrc"},"resource"]}}},{type:"checkbox",input:!0,weight:26,key:"authenticate",label:"Formio Authenticate",tooltip:"Check this if you would like to use Formio Authentication with the request.",conditional:{json:{"===":[{var:"data.dataSrc"},"url"]}}},{type:"checkbox",input:!0,weight:27,key:"readOnlyValue",label:"Read Only Value",tooltip:"Check this if you would like to show just the value when in Read Only mode."},{type:"textarea",as:"json",editor:"ace",weight:28,input:!0,key:"customOptions",label:"Choices.js options",tooltip:"A raw JSON object to use as options for the Select component (Choices JS).",defaultValue:{}}]}),e("skylark-formio/components/select/editForm/Select.edit.display",[],function(){"use strict";return[{type:"select",input:!0,weight:20,tooltip:"Select the type of widget you'd like to use.",key:"widget",defaultValue:"choicesjs",label:"Widget Type",dataSrc:"values",data:{values:[{label:"ChoicesJS",value:"choicesjs"},{label:"HTML 5",value:"html5"}]}}]}),e("skylark-formio/components/select/editForm/Select.edit.validation",[],function(){"use strict";return[{weight:50,type:"checkbox",label:"Perform server validation",tooltip:"Check this if you would like for the server to perform a validation check to ensure the selected value is an available option. This requires a Search query to ensure a record is found.",key:"validate.select",input:!0,conditional:{json:{var:"data.searchField"}}}]}),e("skylark-formio/components/select/Select.form",["../_classes/component/Component.form","./editForm/Select.edit.data","./editForm/Select.edit.display","./editForm/Select.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/signature/editForm/Signature.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{key:"defaultValue",ignore:!0},{key:"dbIndex",ignore:!0}]}),e("skylark-formio/components/signature/editForm/Signature.edit.display",[],function(){"use strict";return[{type:"textfield",input:!0,key:"footer",label:"Footer Label",tooltip:"The footer text that appears below the signature area.",placeholder:"Footer Label",weight:10},{type:"textfield",input:!0,key:"width",label:"Width",tooltip:"The width of the signature area.",placeholder:"Width",weight:50},{type:"textfield",input:!0,key:"height",label:"Height",tooltip:"The height of the signature area.",placeholder:"Height",weight:51},{type:"textfield",input:!0,key:"backgroundColor",label:"Background Color",tooltip:"The background color of the signature area.",placeholder:"Background Color",weight:52},{type:"textfield",input:!0,key:"penColor",label:"Pen Color",tooltip:"The ink color for the signature area.",placeholder:"Pen Color",weight:53},{key:"placeholder",ignore:!0},{key:"autofocus",ignore:!0}]}),e("skylark-formio/components/signature/editForm/Signature.edit.validation",[],function(){"use strict";return[{key:"unique",ignore:!0},{key:"validateOn",ignore:!0}]}),e("skylark-formio/components/signature/Signature.form",["../_classes/component/Component.form","./editForm/Signature.edit.data","./editForm/Signature.edit.display","./editForm/Signature.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/survey/editForm/Survey.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{type:"datagrid",input:!0,label:"Questions",key:"questions",tooltip:"The questions you would like to ask in this survey question.",weight:0,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}}]},{type:"datagrid",input:!0,label:"Values",key:"values",tooltip:"The values that can be selected per question. Example: 'Satisfied', 'Very Satisfied', etc.",weight:1,reorder:!0,defaultValue:[{label:"",value:""}],components:[{label:"Label",key:"label",input:!0,type:"textfield"},{label:"Value",key:"value",input:!0,type:"textfield",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}}]}]}),e("skylark-formio/components/survey/editForm/Survey.edit.display",[],function(){"use strict";return[{key:"placeholder",ignore:!0}]}),e("skylark-formio/components/survey/editForm/Survey.edit.validation",[],function(){"use strict";return[{key:"validateOn",ignore:!0}]}),e("skylark-formio/components/survey/Survey.form",["../_classes/component/Component.form","./editForm/Survey.edit.data","./editForm/Survey.edit.display","./editForm/Survey.edit.validation"],function(e,t,n,i){"use strict";return function(...o){return e([{key:"display",components:n},{key:"data",components:t},{key:"validation",components:i}],...o)}}),e("skylark-formio/components/table/editForm/Table.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabindex",ignore:!0},{key:"disabled",ignore:!0},{type:"number",label:"Number of Rows",key:"numRows",input:!0,weight:1,placeholder:"Number of Rows",tooltip:"Enter the number or rows that should be displayed by this table."},{type:"number",label:"Number of Columns",key:"numCols",input:!0,weight:2,placeholder:"Number of Columns",tooltip:"Enter the number or columns that should be displayed by this table."},{type:"checkbox",label:"Clone Row Components",key:"cloneRows",input:!0,weight:3,tooltip:'Check this if you would like to "clone" the first row of components to all additional empty rows of the table.'},{type:"select",label:"Cell Alignment",key:"cellAlignment",input:!0,tooltip:"Horizontal alignment for cells of the table.",dataSrc:"values",data:{values:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}]},defaultValue:"left",weight:3},{type:"checkbox",label:"Striped",key:"striped",tooltip:"This will stripe the table if checked.",input:!0,weight:701},{type:"checkbox",label:"Bordered",key:"bordered",input:!0,tooltip:"This will border the table if checked.",weight:702},{type:"checkbox",label:"Hover",key:"hover",input:!0,tooltip:"Highlight a row on hover.",weight:703},{type:"checkbox",label:"Condensed",key:"condensed",input:!0,tooltip:"Condense the size of the table.",weight:704}]}),e("skylark-formio/components/table/Table.form",["../_classes/nested/NestedComponent.form","./editForm/Table.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t}],...n)}}),e("skylark-formio/components/tabs/editForm/Tabs.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabindex",ignore:!0},{key:"disabled",ignore:!0},{key:"components",type:"datagrid",input:!0,label:"Tabs",weight:50,reorder:!0,components:[{type:"textfield",input:!0,key:"label",label:"Label"},{type:"textfield",input:!0,key:"key",label:"Key",allowCalculateOverride:!0,calculateValue:{_camelCase:[{var:"row.label"}]}}]}]}),e("skylark-formio/components/tabs/Tabs.form",["../_classes/nested/NestedComponent.form","./editForm/Tabs.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t}],...n)}}),e("skylark-formio/components/tags/editForm/Tags.edit.data",[],function(){"use strict";return[{key:"multiple",ignore:!0},{weight:20,type:"textfield",input:!0,key:"delimeter",label:"Delimiter",tooltip:"What is used to separate the tags.</a>"},{weight:22,type:"number",input:!0,key:"maxTags",label:"Max Tags",defaultValue:0,tooltip:"The maximum amount of tags that can be added. 0 for infinity."},{weight:24,type:"select",input:!0,key:"storeas",label:"Store As",dataSrc:"values",data:{values:[{label:"String (CSV)",value:"string"},{label:"Array of Tags",value:"array"}]}}]}),e("skylark-formio/components/tags/Tags.form",["../_classes/component/Component.form","./editForm/Tags.edit.data"],function(e,t){"use strict";return function(...n){return e([{key:"data",components:t}],...n)}}),e("skylark-formio/components/textarea/editForm/TextArea.edit.display",["skylark-lodash","../../../Formio"],function(e,t){"use strict";return[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"mask",ignore:!0},{type:"number",input:!0,key:"rows",label:"Rows",weight:210,tooltip:"This allows control over how many rows are visible in the text area.",placeholder:"Enter the amount of rows"},{weight:1350,type:"checkbox",input:!0,key:"spellcheck",defaultValue:!0,label:"Allow Spellcheck"},{type:"select",input:!0,key:"editor",label:"Editor",tooltip:"Select the type of WYSIWYG editor to use for this text area.",dataSrc:"values",data:{values:[{label:"None",value:""},{label:"ACE",value:"ace"},{label:"CKEditor",value:"ckeditor"},{label:"Quill",value:"quill"},{label:"TinyMCE",value:"tiny"}]},weight:415},{type:"textfield",input:!0,key:"tinyApiKey",label:"TinyMCE Api Key",weight:415.2,placeholder:"If you have a TinyMCE APi Key, enter it here.",conditional:{json:{"===":[{var:"data.editor"},"tiny"]}}},{type:"checkbox",input:!0,key:"autoExpand",label:"Auto Expand",tooltip:"This will make the TextArea auto expand it's height as the user is typing into the area.",weight:415,conditional:{json:{"==":[{var:"data.editor"},""]}}},{type:"checkbox",input:!0,key:"isUploadEnabled",label:"Enable Image Upload",weight:415.1,conditional:{json:{or:[{"===":[{var:"data.editor"},"quill"]}]}}},{type:"select",input:!0,key:"uploadStorage",label:"Image Upload Storage",placeholder:"Select your file storage provider",weight:415.2,tooltip:"Which storage to save the files in.",valueProperty:"value",dataSrc:"custom",data:{custom:()=>e.map(t.Providers.getProviders("storage"),(e,t)=>({label:e.title,value:t}))},conditional:{json:{"===":[{var:"data.isUploadEnabled"},!0]}}},{type:"textfield",input:!0,key:"uploadUrl",label:"Image Upload Url",weight:415.3,placeholder:"Enter the url to post the files to.",tooltip:"See <a href='https://github.com/danialfarid/ng-file-upload#server-side' target='_blank'>https://github.com/danialfarid/ng-file-upload#server-side</a> for how to set up the server.",conditional:{json:{"===":[{var:"data.uploadStorage"},"url"]}}},{type:"textarea",key:"uploadOptions",label:"Image Upload Custom request options",tooltip:"Pass your custom xhr options(optional)",rows:5,editor:"ace",input:!0,weight:415.4,placeholder:'{\n      "withCredentials": true\n    }',conditional:{json:{"===":[{var:"data.uploadStorage"},"url"]}}},{type:"textfield",input:!0,key:"uploadDir",label:"Image Upload Directory",placeholder:"(optional) Enter a directory for the files",tooltip:"This will place all the files uploaded in this field in the directory",weight:415.5,conditional:{json:{"===":[{var:"data.isUploadEnabled"},!0]}}},{type:"textfield",key:"fileKey",input:!0,label:"Fileform-dataKey",tooltip:"KeynamethatyouwouldliketomodifyforthefilewhilecallingAPIrequest.",rows:5,weight:415.6,placeholder:"Enterthekeynameofafileforformdata.",conditional:{json:{and:[{"===":[{var:"data.editor"},"quill"]},{"===":[{var:"data.isUploadEnabled"},!0]},{"===":[{var:"data.uploadStorage"},"url"]}]}}},{type:"select",input:!0,key:"as",label:"Save As",dataSrc:"values",tooltip:"This setting determines how the value should be entered and stored in the database.",clearOnHide:!0,data:{values:[{label:"String",value:"string"},{label:"JSON",value:"json"},{label:"HTML",value:"html"}]},conditional:{json:{or:[{"===":[{var:"data.editor"},"quill"]},{"===":[{var:"data.editor"},"ace"]}]}},weight:416},{type:"textarea",input:!0,editor:"ace",rows:10,as:"json",label:"Editor Settings",tooltip:"Enter the WYSIWYG editor JSON configuration.",key:"wysiwyg",customDefaultValue:(e,t,n,i,o)=>o?o.wysiwygDefault:"",conditional:{json:{or:[{"===":[{var:"data.editor"},"ace"]},{"===":[{var:"data.editor"},"ckeditor"]},{"===":[{var:"data.editor"},"quill"]},{"===":[{var:"data.editor"},"tiny"]}]}},weight:417}]}),e("skylark-formio/components/textarea/editForm/TextArea.edit.validation",[],function(){"use strict";return[{weight:125,key:"validate.minWords",label:"Minimum Word Length",placeholder:"Minimum Word Length",type:"number",tooltip:"The minimum amount of words that can be added to this field.",input:!0},{weight:126,key:"validate.maxWords",label:"Maximum Word Length",placeholder:"Maximum Word Length",type:"number",tooltip:"The maximum amount of words that can be added to this field.",input:!0}]}),e("skylark-formio/components/textarea/TextArea.form",["../textfield/TextField.form","./editForm/TextArea.edit.display","./editForm/TextArea.edit.validation"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"validation",components:n}],...i)}}),e("skylark-formio/components/time/editForm/Time.edit.data",[],function(){"use strict";return[{type:"textfield",input:!0,key:"dataFormat",label:"Data Format",placeholder:"HH:mm:ss",tooltip:"The moment.js format for saving the value of this field.",weight:25}]}),e("skylark-formio/components/time/editForm/Time.edit.display",[],function(){"use strict";return[{type:"select",input:!0,weight:40,tooltip:"Select the type of widget you'd like to use.",key:"inputType",defaultValue:"time",label:"Input Type",dataSrc:"values",data:{values:[{label:"HTML5 Time Input",value:"time"},{label:"Text Input with Mask",value:"text"}]}},{type:"textfield",input:!0,key:"format",label:"Format",placeholder:"Format",tooltip:"The moment.js format for showing the value of this field.",weight:50,defaultValue:"HH:mm",conditional:{json:{"===":[{var:"data.inputType"},"text"]}}},{key:"placeholder",ignore:!0}]}),e("skylark-formio/components/time/Time.form",["../_classes/component/Component.form","./editForm/Time.edit.data","./editForm/Time.edit.display"],function(e,t,n){"use strict";return function(...i){return e([{key:"data",components:t},{key:"display",components:n}],...i)}}),e("skylark-formio/components/tree/Tree.form",["../_classes/component/Component.form"],function(e){"use strict";return function(...t){return e(...t)}}),e("skylark-formio/components/unknown/editForm/Unknown.edit.display",[],function(){"use strict";return[{key:"customComponentDescription",label:"Custom component description",input:!1,tag:"p",content:'Custom components can be used to render special fields or widgets inside your app. For information on how to display in an app, see <a href="http://help.form.io/userguide/#custom" target="_blank">custom component documentation</a>.',type:"htmlelement",weight:5},{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"componentJson",label:"Custom Element JSON",tooltip:"Enter the JSON for this custom element."}]}),e("skylark-formio/components/unknown/Unknown.form",["./editForm/Unknown.edit.display"],function(e){"use strict";return function(){return{components:[{type:"tabs",key:"tabs",components:[{label:"Custom",key:"display",weight:0,components:e}]}]}}}),e("skylark-formio/components/url/editForm/Url.edit.display",[],function(){"use strict";return[{key:"inputMask",ignore:!0},{key:"allowMultipleMasks",ignore:!0},{key:"showWordCount",ignore:!0},{key:"showCharCount",ignore:!0}]}),e("skylark-formio/components/url/editForm/Url.edit.data",[],function(){"use strict";return[{key:"case",ignore:!0}]}),e("skylark-formio/components/url/Url.form",["../textfield/TextField.form","./editForm/Url.edit.display","./editForm/Url.edit.data"],function(e,t,n){"use strict";return function(...i){return e([{key:"display",components:t},{key:"data",components:n}],...i)}}),e("skylark-formio/components/well/editForm/Well.edit.display",[],function(){"use strict";return[{key:"labelPosition",ignore:!0},{key:"placeholder",ignore:!0},{key:"description",ignore:!0},{key:"hideLabel",ignore:!0},{key:"autofocus",ignore:!0},{key:"tooltip",ignore:!0},{key:"tabindex",ignore:!0}]}),e("skylark-formio/components/well/Well.form",["../_classes/nested/NestedComponent.form","./editForm/Well.edit.display"],function(e,t){"use strict";return function(...n){return e([{key:"display",components:t}],...n)}}),e("skylark-formio/components/builder",["./index","./address/Address.form","./button/Button.form","./checkbox/Checkbox.form","./columns/Columns.form","./container/Container.form","./content/Content.form","./currency/Currency.form","./datagrid/DataGrid.form","./datamap/DataMap.form","./datetime/DateTime.form","./day/Day.form","./editgrid/EditGrid.form","./email/Email.form","./fieldset/Fieldset.form","./file/File.form","./form/Form.form","./hidden/Hidden.form","./html/HTML.form","./number/Number.form","./panel/Panel.form","./password/Password.form","./phonenumber/PhoneNumber.form","./radio/Radio.form","./recaptcha/ReCaptcha.form","./resource/Resource.form","./selectboxes/SelectBoxes.form","./select/Select.form","./signature/Signature.form","./survey/Survey.form","./table/Table.form","./tabs/Tabs.form","./tags/Tags.form","./textarea/TextArea.form","./textfield/TextField.form","./time/Time.form","./tree/Tree.form","./unknown/Unknown.form","./url/Url.form","./well/Well.form"],function(e,t,n,i,o,s,r,a,l,c,d,u,h,p,m,f,g,y,b,v,k,w,x,C,S,E,A,T,D,M,V,_,R,P,F,O,L,I,N,j){"use strict";return e.address.editForm=t,e.button.editForm=n,e.checkbox.editForm=i,e.columns.editForm=o,e.container.editForm=s,e.content.editForm=r,e.currency.editForm=a,e.datagrid.editForm=l,e.datamap.editForm=c,e.datetime.editForm=d,e.day.editForm=u,e.editgrid.editForm=h,e.email.editForm=p,e.fieldset.editForm=m,e.file.editForm=f,e.form.editForm=g,e.hidden.editForm=y,e.htmlelement.editForm=b,e.number.editForm=v,e.panel.editForm=k,e.password.editForm=w,e.phoneNumber.editForm=x,e.radio.editForm=C,e.recaptcha.editForm=S,e.resource.editForm=E,e.select.editForm=T,e.selectboxes.editForm=A,e.signature.editForm=D,e.survey.editForm=M,e.table.editForm=V,e.tabs.editForm=_,e.tags.editForm=R,e.textarea.editForm=P,e.textfield.editForm=F,e.time.editForm=O,e.tree.editForm=L,e.unknown.editForm=I,e.url.editForm=N,e.well.editForm=j,e}),e("skylark-formio/WebformBuilder",["./Webform","./components/_classes/component/Component","skylark-dragula","./vendors/tooltip-js/tooltip","./vendors/getify/npo","./components/Components","./Formio","./utils/utils","./utils/formUtils","./utils/builder","skylark-lodash","./templates/Templates","./components/builder"],function(e,t,n,i,o,s,r,a,l,c,d,u){"use strict";return class extends t{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],t.skipInit=!1,super(null,t),this.element=e,this.builderHeight=0,this.schemas={},this.sideBarScroll=d.get(this.options,"sideBarScroll",!0),this.sideBarScrollOffset=d.get(this.options,"sideBarScrollOffset",0);const n={};for(const e in s.components){const t=s.components[e];t.builderInfo&&(t.type=e,n[e]=t.builderInfo)}this.dragDropEnabled=!0,this.builder=d.defaultsDeep({},this.options.builder,this.defaultGroups),d.each(this.defaultGroups,(e,t)=>{!1===e&&(this.builder[t]=!1)}),this.groups={},this.groupOrder=[];for(const e in this.builder)this.builder[e]&&(this.builder[e].key=e,this.groups[e]=this.builder[e],this.groups[e].components=this.groups[e].components||{},this.groups[e].componentOrder=this.groups[e].componentOrder||[],this.groups[e].subgroups=Object.keys(this.groups[e].groups||{}).map(t=>(this.groups[e].groups[t].componentOrder=Object.keys(this.groups[e].groups[t].components).map(e=>e),this.groups[e].groups[t])),this.groupOrder.push(this.groups[e]));this.groupOrder=this.groupOrder.filter(e=>e&&!e.ignore).sort((e,t)=>e.weight-t.weight).map(e=>e.key);for(const e in s.components){const t=s.components[e];if(t.builderInfo){this.schemas[e]=t.builderInfo.schema,t.type=e;const n=t.builderInfo;n.key=t.type,this.addBuilderComponentInfo(n)}}for(const e in this.groups){const t=this.groups[e];for(const e in t.components){const i=t.components[e];i&&(i.schema&&(this.schemas[e]=i.schema),t.components[e]=!0===i?n[e]:i,t.components[e].key=e)}}for(const e in this.groups)this.groups[e]&&this.groups[e].components&&(this.groups[e].componentOrder=Object.keys(this.groups[e].components).map(t=>this.groups[e].components[t]).filter(e=>e&&!e.ignore).sort((e,t)=>e.weight-t.weight).map(e=>e.key));this.options.hooks=this.options.hooks||{},this.options.hooks.renderComponent=((e,{self:t})=>"form"!==t.type||t.key?this.options.disabled&&this.options.disabled.includes(t.key)||t.parent.noDragDrop?e:this.renderTemplate("builderComponent",{html:e}):e.replace("formio-component-form","")),this.options.hooks.renderComponents=((e,{components:t,self:n})=>"datagrid"===n.type&&t.length>0||n.noDragDrop?e:((!t||!t.length&&!t.nodrop||"form"===n.type&&t.length<=1&&(0===t.length||"button"===t[0].type))&&(e=this.renderTemplate("builderPlaceholder",{position:0})+e),this.renderTemplate("builderComponents",{key:n.key,type:n.type,html:e}))),this.options.hooks.renderInput=((e,{self:t})=>"hidden"===t.type?e+t.name:e),this.options.hooks.renderLoading=((e,{self:t})=>"form"===t.type&&t.key?t.name:e),this.options.hooks.attachComponents=((e,t,n,i)=>{if(!e)return;if(i.noDragDrop)return e;const o=e.querySelector(`[ref="${i.component.key}-container"]`)||e;return o.formioContainer=n,o.formioComponent=i,this.dragula&&this.allowDrop(e)&&this.dragula.containers.push(o),("datagrid"===i.type||"datamap"===i.type)&&t.length>0?e:e.children[0]}),this.options.hooks.attachDatagrid=((e,t)=>{t.loadRefs(e,{[`${t.key}-container`]:"single"}),t.attachComponents(t.refs[`${t.key}-container`].parentNode,[],t.component.components)}),this.options.hooks.attachComponent=((e,t)=>{if(e.formioComponent=t,t.loadRefs(e,{removeComponent:"single",editComponent:"single",moveComponent:"single",copyComponent:"single",pasteComponent:"single",editJson:"single"}),t.refs.copyComponent&&(new i(t.refs.copyComponent,{trigger:"hover",placement:"top",title:this.t("Copy")}),t.addEventListener(t.refs.copyComponent,"click",()=>this.copyComponent(t))),t.refs.pasteComponent){const e=new i(t.refs.pasteComponent,{trigger:"hover",placement:"top",title:this.t("Paste below")});t.addEventListener(t.refs.pasteComponent,"click",()=>{e.hide(),this.pasteComponent(t)})}t.refs.moveComponent&&new i(t.refs.moveComponent,{trigger:"hover",placement:"top",title:this.t("Move")});const n=this.getParentElement(e);return t.refs.editComponent&&(new i(t.refs.editComponent,{trigger:"hover",placement:"top",title:this.t("Edit")}),t.addEventListener(t.refs.editComponent,"click",()=>this.editComponent(t.schema,n,!1,!1,t.component))),t.refs.editJson&&(new i(t.refs.editJson,{trigger:"hover",placement:"top",title:this.t("Edit JSON")}),t.addEventListener(t.refs.editJson,"click",()=>this.editComponent(t.schema,n,!1,!0,t.component))),t.refs.removeComponent&&(new i(t.refs.removeComponent,{trigger:"hover",placement:"top",title:this.t("Remove")}),t.addEventListener(t.refs.removeComponent,"click",()=>this.removeComponent(t.schema,n,t.component))),e});const o={params:{type:"resource",limit:4294967295,select:"_id,title,name,components"}};this.options&&this.options.resourceTag?o.params.tags=[this.options.resourceTag]:this.options&&this.options.hasOwnProperty("resourceTag")||(o.params.tags=["builder"]);const a=new r(r.projectUrl),l=this.options.builder&&!1===this.options.builder.resource;if(!a.noProject&&!l){const e=this.options.builder&&this.options.builder.resource;a.loadForms(o).then(t=>{t.length&&(this.builder.resource={title:e?e.title:"Existing Resource Fields",key:"resource",weight:e?e.weight:50,subgroups:[],components:[],componentOrder:[]},this.groups.resource={title:e?e.title:"Existing Resource Fields",key:"resource",weight:e?e.weight:50,subgroups:[],components:[],componentOrder:[]},this.groupOrder.includes("resource")||this.groupOrder.push("resource"),this.addExistingResourceFields(t))})}this.options.attachMode="builder",this.webform=this.webform||this.createForm(this.options)}allowDrop(){return!0}addExistingResourceFields(e){d.each(e,(e,t)=>{const n=`resource-${e.name}`,i={key:n,title:e.title,components:[],componentOrder:[],default:0===t};l.eachComponent(e.components,t=>{if("button"===t.type)return;if(this.options&&this.options.resourceFilter&&(!t.tags||-1===t.tags.indexOf(this.options.resourceFilter)))return;let o=t.label;!o&&t.key&&(o=d.upperFirst(t.key)),i.componentOrder.push(t.key),i.components[t.key]=d.merge(a.fastCloneDeep(s.components[t.type].builderInfo),{key:t.key,title:o,group:"resource",subgroup:n},{schema:{...t,label:t.label,key:t.key,lockKey:!0,source:this.options.noSource?void 0:e._id,isNew:!0}})},!0),this.groups.resource.subgroups.push(i)}),this.triggerRedraw()}createForm(t){return this.webform=new e(this.element,t),this.element&&(this.loadRefs(this.element,{form:"single"}),this.refs.form&&(this.webform.element=this.refs.form)),this.webform}get ready(){return this.webform.ready}get defaultGroups(){return{basic:{title:"Basic",weight:0,default:!0},advanced:{title:"Advanced",weight:10},layout:{title:"Layout",weight:20},data:{title:"Data",weight:30},premium:{title:"Premium",weight:40}}}redraw(){return e.prototype.redraw.call(this)}get form(){return this.webform.form}get schema(){return this.webform.schema}set form(e){e.components||(e.components=[]);const t=!this.options.noDefaultSubmitButton&&!e.components.length;t&&e.components.push({type:"button",label:"Submit",key:"submit",size:"md",block:!1,action:"submit",disableOnInvalid:!0,theme:"primary"}),this.webform.form=e,this.rebuild()}get container(){return this.webform.form.components}findNamespaceRoot(e){const t=l.getComponent(this.webform.form.components,e.key,!0),n=this.recurseNamespace(t);if(!n||this.form.key===n)return this.form.components;if(n===e.key)return[...e.components,e];const i=l.getComponent(this.form.components,n,!0);return i.components}recurseNamespace(e){return e?["container","datagrid","editgrid","tree"].includes(e.type)||e.tree||e.arrayTree?e.key:this.recurseNamespace(e.parent):null}render(){return this.renderTemplate("builder",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:`builder-sidebar-${this.id}`,groups:this.groupOrder.map(e=>this.renderTemplate("builderSidebarGroup",{group:this.groups[e],groupKey:e,groupId:`builder-sidebar-${this.id}`,subgroups:this.groups[e].subgroups.map(t=>this.renderTemplate("builderSidebarGroup",{group:t,groupKey:t.key,groupId:`group-container-${e}`,subgroups:[]}))}))}),form:this.webform.render()})}attach(e){return this.on("change",e=>{this.populateRecaptchaSettings(e)}),super.attach(e).then(()=>{if(this.loadRefs(e,{form:"single",sidebar:"single",container:"multiple","sidebar-anchor":"multiple","sidebar-group":"multiple","sidebar-container":"multiple"}),this.sideBarScroll&&u.current.handleBuilderSidebarScroll&&u.current.handleBuilderSidebarScroll.call(this,this),window.sessionStorage){const e=window.sessionStorage.getItem("formio.clipboard");e&&this.addClass(this.refs.form,"builder-paste-mode")}if(a.bootstrapVersion(this.options)||(this.refs["sidebar-group"].forEach(e=>{e.style.display="true"===e.getAttribute("data-default")?"inherit":"none"}),this.refs["sidebar-anchor"].forEach((e,t)=>{this.addEventListener(e,"click",()=>{const n=e.getAttribute("data-parent").slice("#builder-sidebar-".length),i=e.getAttribute("data-target").slice("#group-".length);this.refs["sidebar-group"].forEach((e,o)=>{const s="true"===e.getAttribute("data-default"),r=e.getAttribute("id").slice("group-".length),a=e.getAttribute("data-parent").slice("#builder-sidebar-".length);e.style.display=s&&a===i||r===n||o===t?"inherit":"none"})},!0)})),this.dragDropEnabled&&this.initDragula(),this.refs.form)return this.webform.attach(this.refs.form)})}initDragula(){const e=this.options;this.dragula&&this.dragula.destroy();const t=Array.prototype.slice.call(this.refs["sidebar-container"]).filter(e=>"group-container-resource"!==e.id);this.dragula=n(t,{moves(t){let n=!0;const i=Array.from(t.classList).filter(e=>0===e.indexOf("formio-component-"));return i.forEach(t=>{const i=t.slice("formio-component-".length);e.disabled&&e.disabled.includes(i)&&(n=!1)}),t.classList.contains("no-drag")&&(n=!1),n},copy:e=>e.classList.contains("drag-copy"),accepts:(e,t)=>!e.contains(t)&&!t.classList.contains("no-drop")}).on("drop",(e,t,n,i)=>this.onDrop(e,t,n,i))}detach(){this.dragula&&this.dragula.destroy(),this.dragula=null,this.sideBarScroll&&u.current.clearBuilderSidebarScroll&&u.current.clearBuilderSidebarScroll.call(this,this),super.detach()}getComponentInfo(e,t){let n;if(this.schemas.hasOwnProperty(e))n=a.fastCloneDeep(this.schemas[e]);else if(this.groups.hasOwnProperty(t)){const i=this.groups[t].components;i.hasOwnProperty(e)&&(n=a.fastCloneDeep(i[e].schema))}if("resource"===t.slice(0,t.indexOf("-"))){const i=this.groups.resource.subgroups,o=d.find(i,{key:t});o&&o.components.hasOwnProperty(e)&&(n=a.fastCloneDeep(o.components[e].schema))}return n&&(n.key=d.camelCase(n.title||n.label||n.placeholder||n.type)),n}getComponentsPath(e,t){let n="components",i=0,o=0,s=0,r=0;switch(t.type){case"table":o=d.findIndex(t.rows,t=>t.some(t=>t.components.some(t=>t.key===e.key))),s=d.findIndex(t.rows[o],t=>t.components.some(t=>t.key===e.key)),n=`rows[${o}][${s}].components`;break;case"columns":i=d.findIndex(t.columns,t=>t.components.some(t=>t.key===e.key)),n=`columns[${i}].components`;break;case"tabs":r=d.findIndex(t.components,t=>t.components.some(t=>t.key===e.key)),n=`components[${r}].components`}return n}onDrop(e,t,n,i){if(!t)return;if(e.contains(t))return;const s=e.getAttribute("data-key"),r=e.getAttribute("data-type"),a=e.getAttribute("data-group");let l,u,h,p;if(s?(!(l=this.getComponentInfo(s,a))&&r&&(l=this.getComponentInfo(r,a)),u=!0):n.formioContainer&&-1!==(p=d.findIndex(n.formioContainer,{key:e.formioComponent.component.key}))&&(l=(l=n.formioContainer.splice(d.findIndex(n.formioContainer,{key:e.formioComponent.component.key}),1))[0]),!l)return;t!==n&&c.uniquify(this.findNamespaceRoot(t.formioComponent.component),l);const m=t.formioComponent;let f;return t.formioContainer&&(i?-1!==(p=i.getAttribute("data-noattach")?i.getAttribute("data-position"):-1===(p=d.findIndex(t.formioContainer,{key:d.get(i,"formioComponent.component.key")}))?0:p)&&t.formioContainer.splice(p,0,l):t.formioContainer.push(l),h=this.getComponentsPath(l,m.component),-1===(p=d.findIndex(d.get(m.schema,h),{key:l.key}))&&(p=0)),m&&m.addChildComponent&&m.addChildComponent(l,e,t,n,i),u&&!this.options.noNewEdit&&this.editComponent(l,t,u),t!==n?n.formioContainer&&n.contains(t)?f=n.formioComponent.rebuild():t.contains(n)?f=t.formioComponent.rebuild():(n.formioContainer&&(f=n.formioComponent.rebuild()),f=t.formioComponent.rebuild()):f=t.formioComponent.rebuild(),f||(f=o.resolve()),f.then(()=>{this.emit("addComponent",l,m,h,p,u)})}setForm(e){return this.emit("change",e),super.setForm(e).then(e=>(setTimeout(()=>this.builderHeight=this.refs.form.offsetHeight,200),e))}populateRecaptchaSettings(e){var t=!1;this.form.components&&(l.eachComponent(e.components,e=>{if(!t)return"recaptcha"===e.type?(t=!0,!1):void 0}),t?d.set(e,"settings.recaptcha.isEnabled",!0):d.get(e,"settings.recaptcha.isEnabled")&&d.set(e,"settings.recaptcha.isEnabled",!1))}removeComponent(e,t,n){if(!t)return;let i=!0;if(!e.skipRemoveConfirm&&(Array.isArray(e.components)&&e.components.length||Array.isArray(e.rows)&&e.rows.length||Array.isArray(e.columns)&&e.columns.length)){const e="Removing this component will also remove all of its children. Are you sure you want to do this?";i=window.confirm(this.t(e))}n||(n=t.formioContainer.find(t=>t.key===e.key));const s=t.formioContainer?t.formioContainer.indexOf(n):0;if(i&&-1!==s){const n=this.getComponentsPath(e,t.formioComponent.component);t.formioContainer?t.formioContainer.splice(s,1):t.formioComponent&&t.formioComponent.removeChildComponent&&t.formioComponent.removeChildComponent(e);const i=t.formioComponent.rebuild()||o.resolve();i.then(()=>{this.emit("removeComponent",e,t.formioComponent.schema,n,s),this.emit("change",this.form)})}return i}updateComponent(e,t){if(this.preview){this.preview.form={components:[d.omit(e,["hidden","conditional","calculateValue","logic","autofocus","customConditional"])]};const t=this.componentEdit.querySelector('[ref="preview"]');t&&(this.setContent(t,this.preview.render()),this.preview.attach(t))}const n=l.getComponent(this.editForm.components,"defaultValue");if(n){const i=t&&(t.component&&"defaultValue"===t.component.key||t.instance&&n.hasComponent&&n.hasComponent(t.instance));if(!i){d.assign(n.component,d.omit(e,["key","label","placeholder","tooltip","hidden","autofocus","validate","disabled","defaultValue","customDefaultValue","calculateValue","conditional","customConditional"]));const t=n.parent;let i=-1,o=-1;if(t.tabs.some((e,t)=>{e.some((e,s)=>e.id===n.id&&(i=t,o=s,!0))}),-1!==i&&-1!==o){const e=t.tabs[i][o+1];t.removeComponent(n);const s=t.addComponent(n.component,n.data,e);d.pull(s.validators,"required"),t.tabs[i].splice(o,1,s),s.checkValidity=(()=>!0),s.build(n.element)}}}this.emit("updateComponent",e)}highlightInvalidComponents(){const e=[],t=new Map;l.eachComponent(this.form.components,(n,i)=>{n.key&&(t.has(n.key)?t.get(n.key).includes(i)?e.push(i):t.set(n.key,[...t.get(n.key),i]):t.set(n.key,[i]))}),l.eachComponent(this.webform.getComponents(),(t,n)=>{e.includes(n)&&t.setCustomValidity(`API Key is not unique: ${t.key}`)})}saveComponent(e,t,n,i){this.editForm.detach();const s=t?t.formioContainer:this.container,r=t?t.formioComponent:this;this.dialog.close();const a=s?this.getComponentsPath(e,r.component):"";i||(i=t.formioContainer.find(t=>t.key===e.key));const l=s?s.indexOf(i):0;if(-1!==l){let t=this.editForm.submission.data;t=t.componentJson||t,s?s[l]=t:r&&r.saveChildComponent&&r.saveChildComponent(t);const i=r.rebuild()||o.resolve();return i.then(()=>{let t=s?s[l]:[];r.getComponents().forEach(e=>{e.key===t.key&&(t=e.schema)}),this.emit("saveComponent",t,e,r.schema,a,l,n),this.emit("change",this.form),this.highlightInvalidComponents()})}return this.highlightInvalidComponents(),o.resolve()}editComponent(t,n,i,o,r){if(!t.key)return;let l=!1;const u=a.fastCloneDeep(t);let h=s.components[u.type];const p=void 0===h;o=o||p,h=p?s.components.unknown:h,this.dialog&&(this.dialog.close(),this.highlightInvalidComponents());const m=d.clone(d.get(this,"options.editForm",{}));this.editForm&&this.editForm.destroy();const f=d.get(this.options,`editForm.${u.type}`,{});m.editForm=this.form,m.editComponent=t,this.editForm=new e({...d.omit(this.options,["hooks","builder","events","attachMode","skipInit"]),language:this.options.language,...m}),this.editForm.form=o&&!p?{components:[{type:"textarea",as:"json",editor:"ace",weight:10,input:!0,key:"componentJson",label:"Component JSON",tooltip:"Edit the JSON for this component."}]}:h.editForm(d.cloneDeep(f));const g=new h(u);this.editForm.submission=o?{data:{componentJson:g.component}}:{data:g.component},this.preview&&this.preview.destroy(),h.builderInfo.hasOwnProperty("preview")&&!h.builderInfo.preview||(this.preview=new e(d.omit({...this.options,preview:!0},["hooks","builder","events","attachMode","calculateValue"]))),this.componentEdit=this.ce("div",{class:"component-edit-container"}),this.setContent(this.componentEdit,this.renderTemplate("builderEditForm",{componentInfo:h.builderInfo,editForm:this.editForm.render(),preview:!!this.preview&&this.preview.render()})),this.dialog=this.createModal(this.componentEdit,d.get(this.options,"dialogAttr",{})),this.editForm.attach(this.componentEdit.querySelector('[ref="editForm"]')),this.updateComponent(u),this.editForm.on("change",e=>{e.changed&&((e.changed.component&&"key"===e.changed.component.key||o)&&(u.keyModified=!0),e.changed.component&&["label","title"].includes(e.changed.component.key)&&i&&(e.data.keyModified||this.editForm.everyComponent(t=>{if("key"===t.key&&"tabs"===t.parent.component.key)return t.setValue(d.camelCase(e.data.title||e.data.label||e.data.placeholder||e.data.type)),!1}),this.form&&c.uniquify(this.findNamespaceRoot(n.formioComponent.component),e.data)),this.updateComponent(e.data.componentJson||e.data,e.changed))}),this.addEventListener(this.componentEdit.querySelector('[ref="cancelButton"]'),"click",e=>{e.preventDefault(),this.editForm.detach(),this.emit("cancelComponent",t),this.dialog.close(),this.highlightInvalidComponents()}),this.addEventListener(this.componentEdit.querySelector('[ref="removeButton"]'),"click",e=>{e.preventDefault(),l=!0,this.editForm.detach(),this.removeComponent(t,n,r),this.dialog.close(),this.highlightInvalidComponents()}),this.addEventListener(this.componentEdit.querySelector('[ref="saveButton"]'),"click",e=>{if(e.preventDefault(),!this.editForm.checkValidity(this.editForm.data,!0,this.editForm.data))return this.editForm.setPristine(!1),this.editForm.showErrors(),!1;l=!0,this.saveComponent(t,n,i,r)});const y=()=>{this.editForm.destroy(),this.preview&&(this.preview.destroy(),this.preview=null),i&&!l&&(this.removeComponent(t,n,r),this.highlightInvalidComponents()),this.removeEventListener(this.dialog,"close",y),this.dialog=null};this.addEventListener(this.dialog,"close",y),this.emit("editComponent",t)}copyComponent(e){if(!window.sessionStorage)return console.warn("Session storage is not supported in this browser.");this.addClass(this.refs.form,"builder-paste-mode"),window.sessionStorage.setItem("formio.clipboard",JSON.stringify(e.schema))}pasteComponent(e){if(!window.sessionStorage)return console.warn("Session storage is not supported in this browser.");if(this.removeClass(this.refs.form,"builder-paste-mode"),window.sessionStorage){const t=window.sessionStorage.getItem("formio.clipboard");if(t){const n=JSON.parse(t),i=this.getParentElement(e.element);c.uniquify(this.findNamespaceRoot(i.formioComponent.component),n);let o="",s=0;i.formioContainer?(s=i.formioContainer.indexOf(e.component),o=this.getComponentsPath(n,i.formioComponent.component),i.formioContainer.splice(s+1,0,n)):i.formioComponent&&i.formioComponent.saveChildComponent&&i.formioComponent.saveChildComponent(n,!1),i.formioComponent.rebuild(),this.emit("saveComponent",n,n,i.formioComponent.components,o,s+1,!0),this.emit("change",this.form)}}}getParentElement(e){let t=e;do{t=t.parentNode}while(t&&!t.formioComponent);return t}addBuilderComponentInfo(e){if(!e||!e.group||!this.groups[e.group])return;e=d.clone(e);const t=this.groups[e.group];return t.components.hasOwnProperty(e.key)||(t.components[e.key]=e),e}destroy(){this.webform.initialized&&this.webform.destroy(),super.destroy()}addBuilderGroup(e,t){this.groups[e]?this.updateBuilderGroup(e,t):(this.groups[e]=t,this.groupOrder.push(e),this.triggerRedraw())}updateBuilderGroup(e,t){this.groups[e]&&(this.groups[e]=t,this.triggerRedraw())}}}),e("skylark-formio/PDFBuilder",["skylark-lodash","./vendors/getify/npo","./vendors/fetch-ponyfill/fetch","./Formio","./WebformBuilder","./utils/utils","./utils/builder","./PDF"],function(e,t,n,i,o,s,r,a){"use strict";const{fetch:l,Headers:c}=n({Promise:t});return class extends o{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],t.skipInit=!0,e?super(e,t):super(t),this.dragDropEnabled=!1}get defaultGroups(){return{pdf:{title:"PDF Fields",weight:0,default:!0,components:{textfield:!0,number:!0,password:!0,email:!0,phoneNumber:!0,currency:!0,checkbox:!0,signature:!0,select:!0,textarea:!0,datetime:!0,file:!0}},basic:!1,advanced:!1,layout:!1,data:!1,premium:!1,resource:!1}}get hasPDF(){return e.has(this.webform.form,"settings.pdf")}get projectUrl(){return this.options.projectUrl||i.getProjectUrl()}init(){this.options.attachMode="builder",this.webform=this.webform||this.createForm(this.options),this.webform.init()}render(){const e=this.renderTemplate("pdfBuilder",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:`builder-sidebar-${this.id}`,groups:this.groupOrder.map(e=>this.renderTemplate("builderSidebarGroup",{group:this.groups[e],groupKey:e,groupId:`builder-sidebar-${this.id}`,subgroups:this.groups[e].subgroups.map(t=>this.renderTemplate("builderSidebarGroup",{group:t,groupKey:t.key,groupId:`builder-sidebar-${e}`,subgroups:[]}))}))}),form:this.hasPDF?this.webform.render():this.renderTemplate("pdfBuilderUpload",{})});return e}attach(e){if(!this.hasPDF){if(this.loadRefs(e,{fileDrop:"single",fileBrowse:"single",hiddenFileInputElement:"single",uploadError:"single"}),this.addEventListener(this.refs["pdf-upload-button"],"click",e=>{e.preventDefault()}),this.projectUrl?this.setUploadError():this.setUploadError('Form options.projectUrl not set. Please set the "projectUrl" property of the options for this form or use Formio.setProjectUrl(). This setting is necessary to upload a pdf background.'),this.refs.fileDrop){const e=this;this.addEventListener(this.refs.fileDrop,"dragover",function(e){this.className="fileSelector fileDragOver",e.preventDefault()}),this.addEventListener(this.refs.fileDrop,"dragleave",function(e){this.className="fileSelector",e.preventDefault()}),this.addEventListener(this.refs.fileDrop,"drop",function(t){return this.className="fileSelector",t.preventDefault(),e.upload(t.dataTransfer.files[0]),!1})}return this.refs.fileBrowse&&this.refs.hiddenFileInputElement&&(this.addEventListener(this.refs.fileBrowse,"click",e=>{e.preventDefault(),"function"==typeof this.refs.hiddenFileInputElement.trigger?this.refs.hiddenFileInputElement.trigger("click"):this.refs.hiddenFileInputElement.click()}),this.addEventListener(this.refs.hiddenFileInputElement,"change",()=>{this.upload(this.refs.hiddenFileInputElement.files[0]),this.refs.hiddenFileInputElement.value=""})),t.resolve()}return super.attach(e).then(()=>(this.loadRefs(this.element,{iframeDropzone:"single","sidebar-container":"multiple"}),this.afterAttach(),this.element))}afterAttach(){this.initIframeEvents(),this.updateDropzoneDimensions(),this.initDropzoneEvents(),this.prepSidebarComponentsForDrag()}upload(t){const n=new c({Accept:"application/json, text/plain, */*","x-jwt-token":i.getToken()}),o=new FormData;o.append("file",t),l(`${this.projectUrl}/upload`,{method:"POST",headers:n,body:o}).then(t=>{201!==t.status?t.text().then(e=>{this.setUploadError(`${t.statusText} - ${e}`)}):t.json().then(t=>{e.set(this.webform.form,"settings.pdf",{id:t.file,src:`${t.filesServer}${t.path}`}),this.emit("pdfUploaded",t),this.redraw()})}).catch(()=>{this.setUploadError("Upload failed.")})}setUploadError(e){this.refs.uploadError&&(this.refs.uploadError.style.display=e?"":"none",this.refs.uploadError.innerHTML=e)}createForm(e){return e.skipInit=!1,this.webform=new a(this.element,e),this.webform.on("attach",()=>{this.refs.iframeDropzone&&![...this.refs.form.children].includes(this.refs.iframeDropzone)&&this.prependTo(this.refs.iframeDropzone,this.refs.form)}),this.webform}setForm(e){return super.setForm(e).then(()=>this.ready.then(()=>this.webform?(this.webform.postMessage({name:"form",data:e}),this.webform.setForm(e)):e))}saveComponent(...e){return super.saveComponent(...e).then(()=>this.afterAttach())}destroy(){super.destroy(),this.webform.destroy()}initIframeEvents(){this.webform.iframeElement&&(this.webform.off("iframe-elementUpdate"),this.webform.off("iframe-componentUpdate"),this.webform.off("iframe-componentClick"),this.webform.on("iframe-elementUpdate",e=>{const t=this.webform.getComponentById(e.id);return t&&t.component&&(t.component.overlay={page:e.page,left:e.left,top:e.top,height:e.height,width:e.width},this.editComponent(t.component,this.webform.iframeElement),this.emit("updateComponent",t)),t}),this.webform.on("iframe-componentUpdate",t=>{const n=this.webform.getComponentById(t.id);if(n&&n.component){n.component.overlay={page:t.overlay.page,left:t.overlay.left,top:t.overlay.top,height:t.overlay.height,width:t.overlay.width},this.emit("updateComponent",n);const i=e.find(this.form.components,{id:t.id});i&&(i.overlay=e.clone(n.component.overlay)),this.emit("change",this.form)}return n}),this.webform.on("iframe-componentClick",e=>{const t=this.webform.getComponentById(e.id);t&&this.editComponent(t.component,this.webform.iframeElement)},!0))}initDropzoneEvents(){this.refs.iframeDropzone&&(this.removeEventListener(this.refs.iframeDropzone,"dragover"),this.removeEventListener(this.refs.iframeDropzone,"drop"),this.addEventListener(this.refs.iframeDropzone,"dragover",e=>(e.preventDefault(),!1)),this.addEventListener(this.refs.iframeDropzone,"drop",this.onDropzoneDrop.bind(this)))}prepSidebarComponentsForDrag(){this.refs["sidebar-container"]&&this.refs["sidebar-container"].forEach(e=>{[...e.children].forEach(e=>{e.draggable=!0,e.setAttribute("draggable",!0),this.removeEventListener(e,"dragstart"),this.removeEventListener(e,"dragend"),this.addEventListener(e,"dragstart",this.onDragStart.bind(this),!0),this.addEventListener(e,"dragend",this.onDragEnd.bind(this),!0)})})}updateDropzoneDimensions(){if(!this.refs.iframeDropzone)return;const e=s.getElementRect(this.webform.refs.iframeContainer);this.refs.iframeDropzone.style.height=e&&e.height?`${e.height}px`:"1000px",this.refs.iframeDropzone.style.width=e&&e.width?`${e.width}px`:"100%"}tryUpdateCustomComponentSchema(t,n){const i=e.get(this,`groups.custom.components[${n}]`);return!!i&&(t.key=i.schema&&i.schema.key||t.key,t.label=i.schema&&i.schema.label||t.label,t.keyForShow=t.key,t.customField=!0,!0)}onDragStart(e){e.dataTransfer.setData("text/html",null),this.updateDropzoneDimensions(),this.addClass(this.refs.iframeDropzone,"enabled")}onDropzoneDrop(e){return this.dropEvent=e,e.preventDefault(),!1}onDragEnd(t){const n=this.dropEvent?this.dropEvent.offsetX:null,i=this.dropEvent?this.dropEvent.offsetY:null;if(this.removeClass(this.refs.iframeDropzone,"enabled"),!this.dropEvent)return;const o=t.target,a=o.getAttribute("data-type"),l=o.getAttribute("data-group"),c=o.getAttribute("data-key"),d=s.fastCloneDeep(this.schemas[a]);"custom"===l&&c&&this.tryUpdateCustomComponentSchema(d,c)||(d.key=e.camelCase(d.label||d.placeholder||d.type)),r.uniquify([this.webform.component],d),this.webform.component.components.push(d),this.emit("addComponent",d),d.overlay={top:i,left:n,width:100,height:20},this.webform.addComponent(d,{},null,!0),this.webform.postMessage({name:"addElement",data:d}),this.dropEvent=null}}}),e("skylark-formio/WizardBuilder",["./WebformBuilder","./Webform","./utils/builder","skylark-lodash"],function(e,t,n,i){"use strict";return class o extends e{constructor(){let e,t;arguments[0]instanceof HTMLElement||arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],t.skipInit=!1,super(e,t),this._form={components:[this.getPageConfig(1)]},this.page=0,this.options.hooks.attachPanel=((e,t)=>{t.refs.removeComponent&&this.addEventListener(t.refs.removeComponent,"click",()=>{const e=this.pages.findIndex(e=>e.key===t.key),n=this._form.components.findIndex(e=>e.key===t.key);-1!==e&&this.removePage(e,n)})});const n=this.options.hooks.renderComponents;this.options.hooks.renderComponents=((e,{components:t,self:i})=>"form"!==i.type||i.root?n(e,{components:t,self:i}):e);const i=this.options.hooks.attachComponents;this.options.hooks.attachComponents=((e,t,n,o)=>"form"!==o.type||o.root?i(e,t,n,o):e),this.on("saveComponent",(e,t)=>{const n=this.webform.components.map(({component:e})=>e);this._form.components.includes(t)?(this._form.components[this._form.components.indexOf(t)]=e,this.rebuild()):n.includes(t)&&(this._form.components.push(e),this.rebuild())},!0)}allowDrop(e){return!this.webform||!this.webform.refs||this.webform.refs.webform!==e}get pages(){return i.filter(this._form.components,{type:"panel"})}get currentPage(){const e=this.pages;return e&&e.length>=this.page?e[this.page]:null}set form(e){if(this._form=e,this._form.components&&Array.isArray(this._form.components)||(this._form.components=[]),0===this.pages.length){const e=this._form.components.filter(e=>"button"!==e.type);this._form.components=[this.getPageConfig(1,e)]}this.rebuild()}get form(){return this._form}get schema(){i.assign(this.currentPage,this.webform._form.components[0]);const e=new t(this.options);return e.form=this._form,e.schema}render(){return this.renderTemplate("builderWizard",{sidebar:this.renderTemplate("builderSidebar",{scrollEnabled:this.sideBarScroll,groupOrder:this.groupOrder,groupId:`builder-sidebar-${this.id}`,groups:this.groupOrder.map(e=>this.renderTemplate("builderSidebarGroup",{group:this.groups[e],groupKey:e,groupId:`builder-sidebar-${this.id}`,subgroups:this.groups[e].subgroups.map(t=>this.renderTemplate("builderSidebarGroup",{group:t,groupKey:t.key,groupId:`builder-sidebar-${e}`,subgroups:[]}))}))}),pages:this.pages,form:this.webform.render()})}attach(e){return this.loadRefs(e,{addPage:"multiple",gotoPage:"multiple"}),this.refs.addPage.forEach(e=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.addPage()})}),this.refs.gotoPage.forEach((e,t)=>{this.addEventListener(e,"click",e=>{e.preventDefault(),this.setPage(t)})}),super.attach(e)}rebuild(){const e=this.currentPage;return this.webform.form={display:"form",type:"form",components:e?[e]:[]},this.redraw()}addPage(){const e=this.pages.length+1,t=this.getPageConfig(e);return n.uniquify(this._form.components,t),this._form.components.push(t),this.emit("saveComponent",t),this.rebuild()}removePage(e,t){return this._form.components.splice(t,1),e===this.pages.length?0===e?(this._form.components.push(this.getPageConfig(1)),this.rebuild()):this.setPage(e-1):this.rebuild()}setPage(e){if(e!==this.page)return this.page=e,this.rebuild()}getPageConfig(e,t=[]){return{title:`Page ${e}`,label:`Page ${e}`,type:"panel",key:`page${e}`,components:t}}pasteComponent(e){if(!(e instanceof o))return super.pasteComponent(e)}}}),e("skylark-formio/builders/Builders",["skylark-lodash","../PDFBuilder","../WebformBuilder","../WizardBuilder"],function(e,t,n,i){"use strict";class o{static addBuilder(e,t){o.builders[e]=t}static addBuilders(t){o.builders=e.merge(o.builders,t)}static getBuilder(e){return o.builders[e]}static getBuilders(){return o.builders}}return o.builders={pdf:t,webform:n,wizard:i},o}),e("skylark-formio/formio.form",["./components/index","./builders/Builders","./components/Components","./displays/Displays","./templates/Templates","./providers/index","./validator/Rules","./Formio","./Form","./utils/index"],function(e,t,n,i,o,s,r,a,l,c){"use strict";n.setComponents(e);const d=e=>{if("object"==typeof e)for(const l of Object.keys(e)){const c=e.framework||o.framework||"bootstrap";switch(l){case"options":a.options=e.options;break;case"templates":for(const t of Object.keys(e.templates))o.extendTemplate(t,e.templates[t]);e.templates[c]&&(o.current=e.templates[c]);break;case"components":n.setComponents(e.components);break;case"framework":o.framework=e.framework;break;case"fetch":for(const t of Object.keys(e.fetch))a.registerPlugin(e.fetch[t],t);break;case"providers":for(const t of Object.keys(e.providers))s.addProviders(t,e.providers[t]);break;case"displays":i.addDisplays(e.displays);break;case"builders":t.addBuilders(e.builders);break;case"rules":r.addRules(e.rules);break;default:console.log("Unknown plugin option",l)}}};return a.use=((...e)=>{e.forEach(e=>{Array.isArray(e)?e.forEach(e=>d(e)):d(e)})}),a.loadModules=((e=`${a.getApiUrl()}/externalModules.js`,t="externalModules")=>{a.requireLibrary(t,t,e,!0).then(e=>{a.use(e)})}),a.Components=n,a.Templates=o,a.Builders=t,a.Utils=c,a.Form=l,a.Displays=i,a.Providers=s,a.Formio=a,{Builders:t,Components:n,Displays:i,Providers:s,Templates:o,Utils:c,Form:l,Formio:a}}),e("skylark-formio/builders/index",["./Builders"],function(e){"use strict";return e}),e("skylark-formio/FormBuilder",["./Formio","./builders/index","./Form"],function(e,t,n){"use strict";class i extends n{constructor(t,n,o){n=n||{},o=o||{},super(t,n,Object.assign(o,i.options,e.options&&e.options.builder?e.options.builder:{}))}create(e){return t.builders[e]?new t.builders[e](this.element,this.options):new t.builders.webform(this.element,this.options)}}return i.options={},e.builder=((...e)=>new i(...e).ready),e.FormBuilder=i}),e("skylark-formio/main",["./formio.form","./FormBuilder"],function(e){return e}),e("skylark-formio",["skylark-formio/main"],function(e){return e})}(n,require),!i){var r=require("skylark-langx-ns");o?module.exports=r:t.skylarkjs=r}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-formio.js.map
