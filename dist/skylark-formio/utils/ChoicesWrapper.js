/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["choices.js"],function(e){"use strict";e.prototype._generatePlaceholderValue=function(){if(this._isSelectElement&&this.passedElement.placeholderOption){const{placeholderOption:e}=this.passedElement;return!!e&&e.text}const{placeholder:e,placeholderValue:t}=this.config,{element:{dataset:i}}=this.passedElement;if(e){if(t)return t;if(i.placeholder)return i.placeholder}return!1};const t={BACK_KEY:46,DELETE_KEY:8,TAB_KEY:9,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34};return class extends e{constructor(...e){super(...e),this._onTabKey=this._onTabKey.bind(this),this.isDirectionUsing=!1,this.shouldOpenDropDown=!0}_handleButtonAction(e,t){if(!this._isSelectOneElement)return super._handleButtonAction(e,t);e&&t&&this.config.removeItems&&this.config.removeItemButton&&(this.shouldOpenDropDown=!1,super._handleButtonAction(e,t))}_onDirectionKey(...e){if(!this._isSelectOneElement)return super._onDirectionKey(...e);this.isDirectionUsing=!0,super._onDirectionKey(...e),this.onSelectValue(...e),this.isDirectionUsing=!1}_onTabKey({activeItems:e,hasActiveDropdown:t}){t&&this._selectHighlightedChoice(e)}_selectHighlightedChoice(e){const t=this.dropdown.getChild(`.${this.config.classNames.highlightedState}`);t&&this._handleChoiceAction(e,t),event.preventDefault()}_onKeyDown(e){if(!this._isSelectOneElement)return super._onKeyDown(e);const{target:i,keyCode:n,ctrlKey:s,metaKey:o}=e;if(i!==this.input.element&&!this.containerOuter.element.contains(i))return;const h=this._store.activeItems,r=this.input.isFocussed,c=this.dropdown.isActive,l=this.itemList.hasChildren,_=String.fromCharCode(n),{BACK_KEY:a,DELETE_KEY:d,TAB_KEY:E,ENTER_KEY:p,A_KEY:K,ESC_KEY:u,UP_KEY:D,DOWN_KEY:m,PAGE_UP_KEY:y,PAGE_DOWN_KEY:w}=t,g=s||o;!this._isTextElement&&/[a-zA-Z0-9-_ ]/.test(_)&&this.showDropdown();const A={[K]:this._onAKey,[E]:this._onTabKey,[p]:this._onEnterKey,[u]:this._onEscapeKey,[D]:this._onDirectionKey,[y]:this._onDirectionKey,[m]:this._onDirectionKey,[w]:this._onDirectionKey,[d]:this._onDeleteKey,[a]:this._onDeleteKey};A[n]&&A[n]({event:e,target:i,keyCode:n,metaKey:o,activeItems:h,hasFocusedInput:r,hasActiveDropdown:c,hasItems:l,hasCtrlDownKeyPressed:g})}onSelectValue({event:e,activeItems:t,hasActiveDropdown:i}){i?this._selectHighlightedChoice(t):this._isSelectOneElement&&(this.showDropdown(),e.preventDefault())}showDropdown(...e){this.shouldOpenDropDown?super.showDropdown(...e):this.shouldOpenDropDown=!0}hideDropdown(...e){this.isDirectionUsing||super.hideDropdown(...e)}}});
//# sourceMappingURL=../sourcemaps/utils/ChoicesWrapper.js.map
