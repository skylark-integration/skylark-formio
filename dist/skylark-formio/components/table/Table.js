/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["skylark-lodash","../../utils/builder","../_classes/nested/NestedComponent"],function(e,t,o){"use strict";return class s extends o{static emptyTable(e,t){const o=[];for(let s=0;s<e;s++){const e=[];for(let o=0;o<t;o++)e.push({components:[]});o.push(e)}return o}static schema(...e){return o.schema({label:"Table",type:"table",input:!1,key:"table",numRows:3,numCols:3,rows:s.emptyTable(3,3),header:[],caption:"",cloneRows:!1,striped:!1,bordered:!1,hover:!1,condensed:!1,persistent:!1},...e)}static get builderInfo(){return{title:"Table",group:"layout",icon:"table",weight:40,documentation:"http://help.form.io/userguide/#table",schema:s.schema()}}get defaultSchema(){return s.schema()}get schema(){const t=e.omit(super.schema,"components");return t.rows=[],this.eachComponent(e=>{t.rows&&t.rows.length||(t.rows=s.emptyTable(this.component.numRows,this.component.numCols)),t.rows[e.tableRow]||(t.rows[e.tableRow]=[]),t.rows[e.tableRow][e.tableColumn]||(t.rows[e.tableRow][e.column]={components:[]}),t.rows[e.tableRow][e.tableColumn].components.push(e.schema)}),t.rows.length||(t.rows=s.emptyTable(this.component.numRows,this.component.numCols)),t}get className(){let e=`table-responsive ${super.className}`;return this.component.bordered||(e+=" no-top-border-table"),e}get cellClassName(){let e="";return this.component.cellAlignment&&(e=`cell-align-${this.component.cellAlignment}`),e}get tableKey(){return`table-${this.key}`}constructor(...e){super(...e),this.noField=!0}init(){super.init();for(let e=0;e<this.component.numRows;e++){this.component.rows[e]=this.component.rows[e]||[];for(let t=0;t<this.component.numCols;t++)this.component.rows[e][t]=this.component.rows[e][t]||{components:[]};this.component.rows[e]=this.component.rows[e].slice(0,this.component.numCols)}this.component.rows=this.component.rows.slice(0,this.component.numRows);const o=[];this.table=[],e.each(this.component.rows,(s,n)=>{this.table[n]=[],e.each(s,(s,l)=>{this.table[n][l]=[],this.component.cloneRows&&(s.components.length?o[l]=s:o[l]&&(s.components=e.cloneDeep(o[l].components),t.uniquify(this.root._form.components,s))),e.each(s.components,e=>{const t=this.createComponent(e);t.tableRow=n,t.tableColumn=l,this.table[n][l].push(t)})})})}render(){return super.render(this.renderTemplate("table",{cellClassName:this.cellClassName,tableKey:this.tableKey,tableComponents:this.table.map(e=>e.map(e=>this.renderComponents(e)))}))}attach(e){const t=this.table.reduce((e,t,o)=>(e[`${this.tableKey}-${o}`]="multiple",e),{});this.loadRefs(e,t);const o=super.attach(e);return this.table.forEach((e,t)=>{e.forEach((e,o)=>{this.attachComponents(this.refs[`${this.tableKey}-${t}`][o],this.table[t][o],this.component.rows[t][o].components)})}),o}destroy(e){super.destroy(e),delete this.table}}});
//# sourceMappingURL=../../sourcemaps/components/table/Table.js.map
