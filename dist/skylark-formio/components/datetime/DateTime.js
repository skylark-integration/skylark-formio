/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["skylark-lodash","skylark-moment","../_classes/input/Input","../../utils/index","../../widgets/index"],function(e,t,n,i,o){"use strict";return class a extends n{static schema(...e){return n.schema({type:"datetime",label:"Date / Time",key:"dateTime",format:"yyyy-MM-dd hh:mm a",useLocaleSettings:!1,allowInput:!0,enableDate:!0,enableTime:!0,defaultValue:"",defaultDate:"",displayInTimezone:"viewer",timezone:"",datepickerMode:"day",datePicker:{showWeeks:!0,startingDay:0,initDate:"",minMode:"day",maxMode:"year",yearRows:4,yearColumns:5,minDate:null,maxDate:null},timePicker:{hourStep:1,minuteStep:1,showMeridian:!0,readonlyInput:!1,mousewheel:!0,arrowkeys:!0},customOptions:{}},...e)}static get builderInfo(){return{title:"Date / Time",group:"advanced",icon:"calendar",documentation:"http://help.form.io/userguide/#datetime",weight:40,schema:a.schema()}}constructor(t,n,i){super(t,n,i);const o=this.component.timezone||this.options.timezone,a=!e.get(this.component,"timePicker.showMeridian",!0);this.component.enableDate||(this.component.format=this.component.format.replace(/yyyy-MM-dd /g,"")),this.component.enableTime?this.component.format=a?this.component.format.replace(/hh:mm a$/g,"HH:mm"):this.component.format.replace(/HH:mm$/g,"hh:mm a"):this.component.format=this.component.format.replace(/ hh:mm a$/g,"");let s=this.component.customOptions||{};if("string"==typeof s)try{s=JSON.parse(s)}catch(e){console.warn(e.message),s={}}this.component.widget={type:"calendar",timezone:o,displayInTimezone:e.get(this.component,"displayInTimezone","viewer"),submissionTimezone:this.submissionTimezone,language:this.options.language,useLocaleSettings:e.get(this.component,"useLocaleSettings",!1),allowInput:e.get(this.component,"allowInput",!0),mode:this.component.multiple?"multiple":"single",enableTime:e.get(this.component,"enableTime",!0),noCalendar:!e.get(this.component,"enableDate",!0),format:this.component.format,hourIncrement:e.get(this.component,"timePicker.hourStep",1),minuteIncrement:e.get(this.component,"timePicker.minuteStep",5),time_24hr:a,readOnly:this.options.readOnly,minDate:e.get(this.component,"datePicker.minDate"),disabledDates:e.get(this.component,"datePicker.disable"),disableWeekends:e.get(this.component,"datePicker.disableWeekends"),disableWeekdays:e.get(this.component,"datePicker.disableWeekdays"),disableFunction:e.get(this.component,"datePicker.disableFunction"),maxDate:e.get(this.component,"datePicker.maxDate"),...s},this.validators.push("date")}performInputMapping(e){return e.widget&&e.widget.settings&&(e.widget.settings.submissionTimezone=this.submissionTimezone),e}get widget(){return this.component.widget?new o[this.component.widget.type](this.component.widget,this.component):null}get defaultSchema(){return a.schema()}get defaultValue(){let e=super.defaultValue;return!e&&this.component.defaultDate&&(e=(e=i.getDateSetting(this.component.defaultDate))?e.toISOString():""),e}get emptyValue(){return""}isEmpty(e=this.dataValue){return!(!e||"Invalid Date"!==e.toString())||super.isEmpty(e)}formatValue(e){const n=t.utc(e).toISOString();return"Invalid date"===n?e:n}isEqual(e,n=this.dataValue){const o=i.convertFormatToMoment(this.component.format);return this.isEmpty(e)&&this.isEmpty(n)||t.utc(e).format(o)===t.utc(n).format(o)}createWrapper(){return!1}checkValidity(e,t,n){return this.refs.input&&this.refs.input.forEach(e=>{e.widget&&e.widget.enteredDate&&(t=!0)}),super.checkValidity(e,t,n)}focus(){if(this.refs.input&&this.refs.input[0]){const e=this.refs.input[0].nextSibling;e&&e.focus()}}}});
//# sourceMappingURL=../../sourcemaps/components/datetime/DateTime.js.map
