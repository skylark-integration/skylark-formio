/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["./utilities","./constants","./adjustCaretPosition","./conformToMask"],function(e,r,o,t){const{convertMaskToPlaceholder:n,isArray:i,processCaretTraps:a,isString:s,isNumber:u}=e,{strFunction:l}=r,d=r.placeholderChar,p="",c="none",f="object",v="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(e){const r={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:r,update(i,{inputElement:m,mask:C,guide:P,pipe:g,placeholderChar:V=d,keepCharPositions:k=!1,showMask:T=!1}=e){if(void 0===i&&(i=m.value),i===r.previousConformedValue)return;let y,w;if(typeof C===f&&void 0!==C.pipe&&void 0!==C.mask&&(g=C.pipe,C=C.mask),C instanceof Array&&(y=n(C,V)),!1===C)return;const A=function(e){if(s(e))return e;if(u(e))return String(e);if(void 0===e||null===e)return p;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+`received was:\n\n ${JSON.stringify(e)}`)}(i),{selectionEnd:x}=m,{previousConformedValue:S,previousPlaceholder:b}=r;let E;if(typeof C===l){if(!1===(w=C(A,{currentCaretPosition:x,previousConformedValue:S,placeholderChar:V})))return;const{maskWithoutCaretTraps:e,indexes:r}=a(w);E=r,y=n(w=e,V)}else w=C;const M={previousConformedValue:S,guide:P,placeholderChar:V,pipe:g,placeholder:y,currentCaretPosition:x,keepCharPositions:k},{conformedValue:j}=t(A,w,M),F=typeof g===l;let O={};F&&(!1===(O=g(j,{rawValue:A,...M}))?O={value:S,rejected:!0}:s(O)&&(O={value:O}));const q=F?O.value:j,N=o({previousConformedValue:S,previousPlaceholder:b,conformedValue:q,placeholder:y,rawValue:A,currentCaretPosition:x,placeholderChar:V,indexesOfPipedChars:O.indexesOfPipedChars,caretTrapIndexes:E}),R=q===y&&0===N?T?y:p:q;var I,J;r.previousConformedValue=R,r.previousPlaceholder=y,m.value!==R&&(m.value=R,I=m,J=N,document.activeElement===I&&(v?h(()=>I.setSelectionRange(J,J,c),0):I.setSelectionRange(J,J,c)))}}}});
//# sourceMappingURL=../../sourcemaps/vendors/vanilla-text-mask/createTextMaskInputElement.js.map
