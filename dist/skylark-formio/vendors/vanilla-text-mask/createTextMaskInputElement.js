/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["./utilities","./constants","./adjustCaretPosition","./conformToMask"],function(e,r,o,t){const{convertMaskToPlaceholder:n,isArray:i,processCaretTraps:a,isString:s}=e,{strFunction:u}=r,l=r.placeholderChar,d="",p="none",c="object",f="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),v="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(e){const r={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:r,update(i,{inputElement:h,mask:m,guide:C,pipe:P,placeholderChar:g=l,keepCharPositions:V=!1,showMask:k=!1}=e){if(void 0===i&&(i=h.value),i===r.previousConformedValue)return;let T,y;if(typeof m===c&&void 0!==m.pipe&&void 0!==m.mask&&(P=m.pipe,m=m.mask),m instanceof Array&&(T=n(m,g)),!1===m)return;const w=function(e){if(s(e))return e;if(isNumber(e))return String(e);if(void 0===e||null===e)return d;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+`received was:\n\n ${JSON.stringify(e)}`)}(i),{selectionEnd:A}=h,{previousConformedValue:x,previousPlaceholder:S}=r;let b;if(typeof m===u){if(!1===(y=m(w,{currentCaretPosition:A,previousConformedValue:x,placeholderChar:g})))return;const{maskWithoutCaretTraps:e,indexes:r}=a(y);b=r,T=n(y=e,g)}else y=m;const E={previousConformedValue:x,guide:C,placeholderChar:g,pipe:P,placeholder:T,currentCaretPosition:A,keepCharPositions:V},{conformedValue:M}=t(w,y,E),j=typeof P===u;let F={};j&&(!1===(F=P(M,{rawValue:w,...E}))?F={value:x,rejected:!0}:s(F)&&(F={value:F}));const O=j?F.value:M,q=o({previousConformedValue:x,previousPlaceholder:S,conformedValue:O,placeholder:T,rawValue:w,currentCaretPosition:A,placeholderChar:g,indexesOfPipedChars:F.indexesOfPipedChars,caretTrapIndexes:b}),N=O===T&&0===q?k?T:d:O;var R,I;r.previousConformedValue=N,r.previousPlaceholder=T,h.value!==N&&(h.value=N,R=h,I=q,document.activeElement===R&&(f?v(()=>R.setSelectionRange(I,I,p),0):R.setSelectionRange(I,I,p)))}}}});
//# sourceMappingURL=../../sourcemaps/vendors/vanilla-text-mask/createTextMaskInputElement.js.map
