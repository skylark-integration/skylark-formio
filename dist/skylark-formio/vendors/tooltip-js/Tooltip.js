/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["skylark-popper"],function(t){var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};const i={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0,arrowSelector:".tooltip-arrow, .tooltip__arrow",innerSelector:".tooltip-inner, .tooltip__inner"};var o=function(){this.show=(()=>this._show(this.reference,this.options)),this.hide=(()=>this._hide()),this.dispose=(()=>this._dispose()),this.toggle=(()=>this._isOpen?this.hide():this.show()),this.updateTitleContent=(t=>this._updateTitleContent(t)),this._events=[],this._setTooltipNodeEvent=((t,e,i,o)=>{const s=t.relatedreference||t.toElement||t.relatedTarget,n=i=>{const s=i.relatedreference||i.toElement||i.relatedTarget;this._tooltipNode.removeEventListener(t.type,n),e.contains(s)||this._scheduleHide(e,o.delay,o,i)};return!!this._tooltipNode.contains(s)&&(this._tooltipNode.addEventListener(t.type,n),!0)})};return class{constructor(t,s){o.call(this),s=e({},i,s),t.jquery&&(t=t[0]),this.reference=t,this.options=s;const n="string"==typeof s.trigger?s.trigger.split(" ").filter(t=>-1!==["click","hover","focus"].indexOf(t)):[];this._isOpen=!1,this._popperOptions={},this._setEventListeners(t,n,s)}_create(t,e,i,o){const s=window.document.createElement("div");s.innerHTML=e.trim();const n=s.childNodes[0];n.id=`tooltip_${Math.random().toString(36).substr(2,10)}`,n.setAttribute("aria-hidden","false");const r=s.querySelector(this.options.innerSelector);return this._addTitleContent(t,i,o,r),n}_addTitleContent(t,e,i,o){if(1===e.nodeType||11===e.nodeType)i&&o.appendChild(e);else if((s=e)&&"[object Function]"==={}.toString.call(s)){const s=e.call(t);i?o.innerHTML=s:o.textContent=s}else i?o.innerHTML=e:o.textContent=e;var s}_show(i,o){if(this._isOpen&&!this._isOpening)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.visibility="visible",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.update(),this;const s=i.getAttribute("title")||o.title;if(!s)return this;const n=this._create(i,o.template,s,o.html);i.setAttribute("aria-describedby",n.id);const r=this._findContainer(o.container,i);return this._append(n,r),this._popperOptions=e({},o.popperOptions,{placement:o.placement}),this._popperOptions.modifiers=e({},this._popperOptions.modifiers,{arrow:{element:this.options.arrowSelector},offset:{offset:o.offset}}),o.boundariesElement&&(this._popperOptions.modifiers.preventOverflow={boundariesElement:o.boundariesElement}),this.popperInstance=new t(i,n,this._popperOptions),this._tooltipNode=n,this}_hide(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.visibility="hidden",this._tooltipNode.setAttribute("aria-hidden","true"),this):this}_dispose(){return this._events.forEach(({func:t,event:e})=>{this.reference.removeEventListener(e,t)}),this._events=[],this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||(this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null)),this}_findContainer(t,e){return"string"==typeof t?t=window.document.querySelector(t):!1===t&&(t=e.parentNode),t}_append(t,e){e.appendChild(t)}_setEventListeners(t,e,i){const o=[],s=[];e.forEach(t=>{switch(t){case"hover":o.push("mouseenter"),s.push("mouseleave");break;case"focus":o.push("focus"),s.push("blur");break;case"click":o.push("click"),s.push("click")}}),o.forEach(e=>{const o=e=>{!0!==this._isOpening&&(e.usedByTooltip=!0,this._scheduleShow(t,i.delay,i,e))};this._events.push({event:e,func:o}),t.addEventListener(e,o)}),s.forEach(e=>{const o=e=>{!0!==e.usedByTooltip&&this._scheduleHide(t,i.delay,i,e)};this._events.push({event:e,func:o}),t.addEventListener(e,o),"click"===e&&i.closeOnClickOutside&&document.addEventListener("mousedown",e=>{if(!this._isOpening)return;const i=this.popperInstance.popper;t.contains(e.target)||i.contains(e.target)||o(e)},!0)})}_scheduleShow(t,e,i){this._isOpening=!0;const o=e&&e.show||e||0;this._showTimeout=window.setTimeout(()=>this._show(t,i),o)}_scheduleHide(t,e,i,o){this._isOpening=!1;const s=e&&e.hide||e||0;window.setTimeout(()=>{if(window.clearTimeout(this._showTimeout),!1!==this._isOpen&&document.body.contains(this._tooltipNode)){if("mouseleave"===o.type&&this._setTooltipNodeEvent(o,t,e,i))return;this._hide(t,i)}},s)}_updateTitleContent(t){if(void 0===this._tooltipNode)return void(void 0!==this.options.title&&(this.options.title=t));const e=this._tooltipNode.parentNode.querySelector(this.options.innerSelector);this._clearTitleContent(e,this.options.html,this.reference.getAttribute("title")||this.options.title),this._addTitleContent(this.reference,t,this.options.html,e),this.options.title=t,this.popperInstance.update()}_clearTitleContent(t,e,i){1===i.nodeType||11===i.nodeType?e&&t.removeChild(i):e?t.innerHTML="":t.textContent=""}}});
//# sourceMappingURL=../../sourcemaps/vendors/tooltip-js/Tooltip.js.map
