/**
 * skylark-formio - A version of formio.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-formio/
 * @license MIT
 */
define(["./EventEmitter","./Formio","./utils/utils","skylark-i18next","skylark-lodash","skylark-moment","./vendors/vanilla-text-mask/maskInput"],function(t,e,n,s,i,r,o){"use strict";return class{constructor(e){this.options=Object.assign({language:"en",highlightErrors:!0,componentErrorClass:"formio-error-wrapper",componentWarningClass:"formio-warning-wrapper",row:"",namespace:"formio"},e||{}),this.id=n.getRandomComponentId(),this.eventHandlers=[],this.i18next=this.options.i18next||s,this.events=e&&e.events?e.events:new t({wildcard:!1,maxListeners:0}),this.defaultMask=null}on(t,e,n,s=!1){if(!this.events)return;const i=`${this.options.namespace}.${t}`;return e.id=this.id,e.internal=n,this.events[s?"once":"on"](i,e)}once(t,e,n){return this.on(t,e,n,!0)}onAny(t){if(this.events)return this.events.onAny(t)}off(t){if(!this.events)return;const e=`${this.options.namespace}.${t}`;i.each(this.events.listeners(e),t=>{t&&t.id===this.id&&this.events.off(e,t)})}emit(t,...e){this.events&&this.events.emit(`${this.options.namespace}.${t}`,...e)}addEventListener(t,e,n,s){if(t)return s||this.eventHandlers.push({id:this.id,obj:t,type:e,func:n}),"addEventListener"in t?t.addEventListener(e,n,!1):"attachEvent"in t&&t.attachEvent(`on${e}`,n),this}removeEventListener(t,e,n=null){const s=[];return this.eventHandlers.forEach((i,r)=>{i.id!==this.id||!t.removeEventListener||i.type!==e||n&&i.func!==n||(t.removeEventListener(e,i.func),s.push(r))}),s.length&&i.pullAt(this.eventHandlers,s),this}removeEventListeners(){this.eventHandlers.forEach(t=>{this.id===t.id&&t.type&&t.obj&&t.obj.removeEventListener&&t.obj.removeEventListener(t.type,t.func)}),this.eventHandlers=[]}removeAllEvents(t){i.each(this.events._events,(e,n)=>{i.each(e,e=>{e&&this.id===e.id&&(t||e.internal)&&this.events.off(n,e)})})}destroy(){this.removeEventListeners(),this.removeAllEvents()}appendTo(t,e){return e.appendChild(t),this}prependTo(t,e){if(e)if(e.firstChild)try{e.insertBefore(t,e.firstChild)}catch(n){console.warn(n),e.appendChild(t)}else e.appendChild(t);return this}removeChildFrom(t,e){if(e&&e.contains(t))try{e.removeChild(t)}catch(t){console.warn(t)}return this}ce(t,e,n=null){const s=document.createElement(t);return e&&this.attr(s,e),this.appendChild(s,n),s}appendChild(t,e){return Array.isArray(e)?e.forEach(e=>this.appendChild(t,e)):e instanceof HTMLElement||e instanceof Text?t.appendChild(e):e&&t.appendChild(this.text(e.toString())),this}maskPlaceholder(t){return t.map(t=>t instanceof RegExp?"_":t).join("")}setInputMask(t,e,s){if(t&&e){const i=n.getInputMask(e);this.defaultMask=i;try{t.mask&&t.mask.destroy(),t.mask=o({inputElement:t,mask:i})}catch(t){console.warn(t)}i.numeric&&t.setAttribute("pattern","\\d*"),s&&t.setAttribute("placeholder",this.maskPlaceholder(i))}}t(t,e){return(e=e||{}).nsSeparator="::",e.keySeparator=".|.",e.pluralSeparator="._.",e.contextSeparator="._.",this.i18next.t(t,e)||t}text(t){return document.createTextNode(this.t(t))}attr(t,e){t&&i.each(e,(e,n)=>{void 0!==e&&(0===n.indexOf("on")?this.addEventListener(t,n.substr(2).toLowerCase(),e):t.setAttribute(n,e))})}hasClass(t,e){return!!t&&(e=` ${e} `,` ${t.className} `.replace(/[\n\t\r]/g," ").indexOf(e)>-1)}addClass(t,e){if(!t)return this;const n=t.getAttribute("class");return n.includes(e)||t.setAttribute("class",`${n} ${e}`),this}removeClass(t,e){if(!t||!e)return this;let n=t.getAttribute("class");return n&&(n=n.replace(new RegExp(` ${e}`,"g"),""),t.setAttribute("class",n)),this}empty(t){if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}evalContext(t){return Object.assign({_:i,utils:n,util:n,user:e.getUser(),moment:r,instance:this,self:this,token:e.getToken({decode:!0}),config:this.root&&this.root.form&&this.root.form.config?this.root.form.config:{}},t,i.get(this.root,"options.evalContext",{}))}interpolate(t,e){return n.interpolate(t,this.evalContext(e))}evaluate(t,e,s,i){return n.evaluate(t,this.evalContext(e),s,i)}hook(){const t=arguments[0];if(this.options&&this.options.hooks&&this.options.hooks[t])return this.options.hooks[t].apply(this,Array.prototype.slice.call(arguments,1));{const t="function"==typeof arguments[arguments.length-1]?arguments[arguments.length-1]:null;return t?t(null,arguments[1]):arguments[1]}}}});
//# sourceMappingURL=sourcemaps/Element.js.map
