{"version":3,"sources":["components/tabs/Tabs.js"],"names":["define","_","NestedComponent","TabsComponent","[object Object]","extend","schema","label","type","input","key","persistent","tableView","components","builderInfo","title","group","icon","weight","documentation","defaultSchema","super","cloneDeep","this","component","map","tab","index","tabs","tabKey","tabLikey","tabLinkKey","args","currentTab","noField","each","comp","createComponent","push","render","renderTemplate","tabComponents","renderComponents","options","flatten","pdf","element","loadRefs","superAttach","attach","refs","forEach","tabLink","addEventListener","event","preventDefault","setTab","attachComponents","all","detach","removeClass","style","display","addClass","tabIndex","triggerChange"],"mappings":";;;;;;;AAAAA,QACI,iBACA,sCACD,SAAUC,EAAGC,GACZ,aACA,aAAaC,UAAsBD,EAC/BE,iBAAiBC,GACb,OAAOH,EAAgBI,QACnBC,MAAO,OACPC,KAAM,OACNC,OAAO,EACPC,IAAK,OACLC,YAAY,EACZC,WAAW,EACXC,aACQN,MAAO,QACPG,IAAK,OACLG,oBAENR,GAEVS,yBACI,OACIC,MAAO,OACPC,MAAO,SACPC,KAAM,WACNC,OAAQ,GACRC,cAAe,sCACfb,OAAQH,EAAcG,UAG9Bc,oBACI,OAAOjB,EAAcG,SAEzBA,aACI,MAAMA,EAASe,MAAMf,OACfO,EAAaZ,EAAEqB,UAAUC,KAAKC,UAAUX,YAK9C,OAJAP,EAAOO,WAAaA,EAAWY,IAAI,CAACC,EAAKC,KACrCD,EAAIb,WAAaU,KAAKK,KAAKD,GAAOF,IAAID,GAAaA,EAAUlB,QACtDoB,IAEJpB,EAEXuB,aACI,aAAeN,KAAKb,MAExBoB,eACI,eAAiBP,KAAKb,MAE1BqB,iBACI,iBAAmBR,KAAKb,MAE5BN,eAAe4B,GACXX,SAASW,GACTT,KAAKU,WAAa,EAClBV,KAAKW,SAAU,EAEnB9B,OACImB,KAAKV,cACLU,KAAKK,QACL3B,EAAEkC,KAAKZ,KAAKC,UAAUX,WAAY,CAACa,EAAKC,KACpCJ,KAAKK,KAAKD,MACVD,EAAIb,WAAaa,EAAIb,eACrBZ,EAAEkC,KAAKT,EAAIb,WAAYuB,IACnB,MAAMZ,EAAYD,KAAKc,gBAAgBD,GACvCZ,EAAUE,IAAMC,EAChBJ,KAAKK,KAAKD,GAAOW,KAAKd,OAIlCpB,SACI,OAAOiB,MAAMkB,OAAOhB,KAAKiB,eAAe,OACpCX,OAAQN,KAAKM,OACbC,SAAUP,KAAKO,SACfC,WAAYR,KAAKQ,WACjBE,WAAYV,KAAKU,WACjBQ,cAAelB,KAAKK,KAAKH,IAAIC,GAAOH,KAAKmB,iBAAiBhB,KAC3DH,KAAKoB,QAAQC,SAAWrB,KAAKoB,QAAQE,IAAM,OAAS,OAE3DzC,OAAO0C,GACHvB,KAAKwB,SAASD,GACV1C,CAACmB,KAAKQ,YAAa,WACnB3B,CAACmB,KAAKM,QAAS,WACfzB,CAACmB,KAAKO,UAAW,aAErB,MAAMkB,EAAc3B,MAAM4B,OAAOH,GAUjC,OATAvB,KAAK2B,KAAK3B,KAAKQ,YAAYoB,QAAQ,CAACC,EAASzB,KACzCJ,KAAK8B,iBAAiBD,EAAS,QAASE,IACpCA,EAAMC,iBACNhC,KAAKiC,OAAO7B,OAGpBJ,KAAK2B,KAAK3B,KAAKM,QAAQsB,QAAQ,CAACzB,EAAKC,KACjCJ,KAAKkC,iBAAiB/B,EAAKH,KAAKK,KAAKD,GAAQJ,KAAKC,UAAUX,WAAWc,GAAOd,cAE3EmC,EAEX5C,OAAOsD,GACHrC,MAAMsC,OAAOD,GAEjBtD,OAAOuB,GACEJ,KAAKK,MAASL,KAAKK,KAAKD,IAAWJ,KAAK2B,KAAK3B,KAAKM,SAAYN,KAAK2B,KAAK3B,KAAKM,QAAQF,KAG1FJ,KAAKU,WAAaN,EAClB1B,EAAEkC,KAAKZ,KAAK2B,KAAK3B,KAAKM,QAASH,IAC3BH,KAAKqC,YAAYlC,EAAK,2BACtBA,EAAImC,MAAMC,QAAU,SAExBvC,KAAKwC,SAASxC,KAAK2B,KAAK3B,KAAKM,QAAQF,GAAQ,2BAC7CJ,KAAK2B,KAAK3B,KAAKM,QAAQF,GAAOkC,MAAMC,QAAU,QAC9C7D,EAAEkC,KAAKZ,KAAK2B,KAAK3B,KAAKQ,YAAa,CAACqB,EAASY,KACrCzC,KAAK2B,KAAK3B,KAAKQ,YAAYiC,IAC3BzC,KAAKqC,YAAYR,EAAS,0BAE1B7B,KAAK2B,KAAK3B,KAAKO,UAAUkC,IACzBzC,KAAKqC,YAAYrC,KAAK2B,KAAK3B,KAAKO,UAAUkC,GAAW,sCAGzDzC,KAAK2B,KAAK3B,KAAKO,UAAUH,IACzBJ,KAAKwC,SAASxC,KAAK2B,KAAK3B,KAAKO,UAAUH,GAAQ,oCAE/CJ,KAAK2B,KAAK3B,KAAKQ,YAAYJ,IAC3BJ,KAAKwC,SAASxC,KAAK2B,KAAK3B,KAAKQ,YAAYJ,GAAQ,0BAErDJ,KAAK0C","file":"../../../components/tabs/Tabs.js","sourcesContent":["define([\n    'skylark-lodash',\n    '../_classes/nested/NestedComponent'\n], function (_, NestedComponent) {\n    'use strict';\n    return class TabsComponent extends NestedComponent {\n        static schema(...extend) {\n            return NestedComponent.schema({\n                label: 'Tabs',\n                type: 'tabs',\n                input: false,\n                key: 'tabs',\n                persistent: false,\n                tableView: false,\n                components: [{\n                        label: 'Tab 1',\n                        key: 'tab1',\n                        components: []\n                    }]\n            }, ...extend);\n        }\n        static get builderInfo() {\n            return {\n                title: 'Tabs',\n                group: 'layout',\n                icon: 'folder-o',\n                weight: 50,\n                documentation: 'http://help.form.io/userguide/#tabs',\n                schema: TabsComponent.schema()\n            };\n        }\n        get defaultSchema() {\n            return TabsComponent.schema();\n        }\n        get schema() {\n            const schema = super.schema;\n            const components = _.cloneDeep(this.component.components);\n            schema.components = components.map((tab, index) => {\n                tab.components = this.tabs[index].map(component => component.schema);\n                return tab;\n            });\n            return schema;\n        }\n        get tabKey() {\n            return `tab-${ this.key }`;\n        }\n        get tabLikey() {\n            return `tabLi-${ this.key }`;\n        }\n        get tabLinkKey() {\n            return `tabLink-${ this.key }`;\n        }\n        constructor(...args) {\n            super(...args);\n            this.currentTab = 0;\n            this.noField = true;\n        }\n        init() {\n            this.components = [];\n            this.tabs = [];\n            _.each(this.component.components, (tab, index) => {\n                this.tabs[index] = [];\n                tab.components = tab.components || [];\n                _.each(tab.components, comp => {\n                    const component = this.createComponent(comp);\n                    component.tab = index;\n                    this.tabs[index].push(component);\n                });\n            });\n        }\n        render() {\n            return super.render(this.renderTemplate('tab', {\n                tabKey: this.tabKey,\n                tabLikey: this.tabLikey,\n                tabLinkKey: this.tabLinkKey,\n                currentTab: this.currentTab,\n                tabComponents: this.tabs.map(tab => this.renderComponents(tab))\n            }, this.options.flatten || this.options.pdf ? 'flat' : null));\n        }\n        attach(element) {\n            this.loadRefs(element, {\n                [this.tabLinkKey]: 'multiple',\n                [this.tabKey]: 'multiple',\n                [this.tabLikey]: 'multiple'\n            });\n            const superAttach = super.attach(element);\n            this.refs[this.tabLinkKey].forEach((tabLink, index) => {\n                this.addEventListener(tabLink, 'click', event => {\n                    event.preventDefault();\n                    this.setTab(index);\n                });\n            });\n            this.refs[this.tabKey].forEach((tab, index) => {\n                this.attachComponents(tab, this.tabs[index], this.component.components[index].components);\n            });\n            return superAttach;\n        }\n        detach(all) {\n            super.detach(all);\n        }\n        setTab(index) {\n            if (!this.tabs || !this.tabs[index] || !this.refs[this.tabKey] || !this.refs[this.tabKey][index]) {\n                return;\n            }\n            this.currentTab = index;\n            _.each(this.refs[this.tabKey], tab => {\n                this.removeClass(tab, 'formio-tab-panel-active');\n                tab.style.display = 'none';\n            });\n            this.addClass(this.refs[this.tabKey][index], 'formio-tab-panel-active');\n            this.refs[this.tabKey][index].style.display = 'block';\n            _.each(this.refs[this.tabLinkKey], (tabLink, tabIndex) => {\n                if (this.refs[this.tabLinkKey][tabIndex]) {\n                    this.removeClass(tabLink, 'formio-tab-link-active');\n                }\n                if (this.refs[this.tabLikey][tabIndex]) {\n                    this.removeClass(this.refs[this.tabLikey][tabIndex], 'formio-tab-link-container-active');\n                }\n            });\n            if (this.refs[this.tabLikey][index]) {\n                this.addClass(this.refs[this.tabLikey][index], 'formio-tab-link-container-active');\n            }\n            if (this.refs[this.tabLinkKey][index]) {\n                this.addClass(this.refs[this.tabLinkKey][index], 'formio-tab-link-active');\n            }\n            this.triggerChange();\n        }\n    };\n});"]}